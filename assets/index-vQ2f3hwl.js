function fg(r,o){for(var l=0;l<o.length;l++){const i=o[l];if(typeof i!="string"&&!Array.isArray(i)){for(const u in i)if(u!=="default"&&!(u in r)){const f=Object.getOwnPropertyDescriptor(i,u);f&&Object.defineProperty(r,u,f.get?f:{enumerable:!0,get:()=>i[u]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&i(g)}).observe(document,{childList:!0,subtree:!0});function l(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function i(u){if(u.ep)return;u.ep=!0;const f=l(u);fetch(u.href,f)}})();function Zf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Di={exports:{}},Ks={},Fi={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df;function mg(){if(df)return Ee;df=1;var r=Symbol.for("react.element"),o=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),g=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),k=Symbol.iterator;function A(_){return _===null||typeof _!="object"?null:(_=k&&_[k]||_["@@iterator"],typeof _=="function"?_:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,x={};function I(_,z,ve){this.props=_,this.context=z,this.refs=x,this.updater=ve||E}I.prototype.isReactComponent={},I.prototype.setState=function(_,z){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,z,"setState")},I.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function W(){}W.prototype=I.prototype;function K(_,z,ve){this.props=_,this.context=z,this.refs=x,this.updater=ve||E}var T=K.prototype=new W;T.constructor=K,O(T,I.prototype),T.isPureReactComponent=!0;var G=Array.isArray,j=Object.prototype.hasOwnProperty,S={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function oe(_,z,ve){var J,X={},ce=null,Fe=null;if(z!=null)for(J in z.ref!==void 0&&(Fe=z.ref),z.key!==void 0&&(ce=""+z.key),z)j.call(z,J)&&!B.hasOwnProperty(J)&&(X[J]=z[J]);var De=arguments.length-2;if(De===1)X.children=ve;else if(1<De){for(var Be=Array(De),Ye=0;Ye<De;Ye++)Be[Ye]=arguments[Ye+2];X.children=Be}if(_&&_.defaultProps)for(J in De=_.defaultProps,De)X[J]===void 0&&(X[J]=De[J]);return{$$typeof:r,type:_,key:ce,ref:Fe,props:X,_owner:S.current}}function P(_,z){return{$$typeof:r,type:_.type,key:z,ref:_.ref,props:_.props,_owner:_._owner}}function H(_){return typeof _=="object"&&_!==null&&_.$$typeof===r}function se(_){var z={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(ve){return z[ve]})}var ae=/\/+/g;function V(_,z){return typeof _=="object"&&_!==null&&_.key!=null?se(""+_.key):z.toString(36)}function me(_,z,ve,J,X){var ce=typeof _;(ce==="undefined"||ce==="boolean")&&(_=null);var Fe=!1;if(_===null)Fe=!0;else switch(ce){case"string":case"number":Fe=!0;break;case"object":switch(_.$$typeof){case r:case o:Fe=!0}}if(Fe)return Fe=_,X=X(Fe),_=J===""?"."+V(Fe,0):J,G(X)?(ve="",_!=null&&(ve=_.replace(ae,"$&/")+"/"),me(X,z,ve,"",function(Ye){return Ye})):X!=null&&(H(X)&&(X=P(X,ve+(!X.key||Fe&&Fe.key===X.key?"":(""+X.key).replace(ae,"$&/")+"/")+_)),z.push(X)),1;if(Fe=0,J=J===""?".":J+":",G(_))for(var De=0;De<_.length;De++){ce=_[De];var Be=J+V(ce,De);Fe+=me(ce,z,ve,Be,X)}else if(Be=A(_),typeof Be=="function")for(_=Be.call(_),De=0;!(ce=_.next()).done;)ce=ce.value,Be=J+V(ce,De++),Fe+=me(ce,z,ve,Be,X);else if(ce==="object")throw z=String(_),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return Fe}function fe(_,z,ve){if(_==null)return _;var J=[],X=0;return me(_,J,"","",function(ce){return z.call(ve,ce,X++)}),J}function ye(_){if(_._status===-1){var z=_._result;z=z(),z.then(function(ve){(_._status===0||_._status===-1)&&(_._status=1,_._result=ve)},function(ve){(_._status===0||_._status===-1)&&(_._status=2,_._result=ve)}),_._status===-1&&(_._status=0,_._result=z)}if(_._status===1)return _._result.default;throw _._result}var ke={current:null},te={transition:null},U={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:te,ReactCurrentOwner:S};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Ee.Children={map:fe,forEach:function(_,z,ve){fe(_,function(){z.apply(this,arguments)},ve)},count:function(_){var z=0;return fe(_,function(){z++}),z},toArray:function(_){return fe(_,function(z){return z})||[]},only:function(_){if(!H(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},Ee.Component=I,Ee.Fragment=l,Ee.Profiler=u,Ee.PureComponent=K,Ee.StrictMode=i,Ee.Suspense=w,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,Ee.act=Y,Ee.cloneElement=function(_,z,ve){if(_==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_+".");var J=O({},_.props),X=_.key,ce=_.ref,Fe=_._owner;if(z!=null){if(z.ref!==void 0&&(ce=z.ref,Fe=S.current),z.key!==void 0&&(X=""+z.key),_.type&&_.type.defaultProps)var De=_.type.defaultProps;for(Be in z)j.call(z,Be)&&!B.hasOwnProperty(Be)&&(J[Be]=z[Be]===void 0&&De!==void 0?De[Be]:z[Be])}var Be=arguments.length-2;if(Be===1)J.children=ve;else if(1<Be){De=Array(Be);for(var Ye=0;Ye<Be;Ye++)De[Ye]=arguments[Ye+2];J.children=De}return{$$typeof:r,type:_.type,key:X,ref:ce,props:J,_owner:Fe}},Ee.createContext=function(_){return _={$$typeof:g,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_.Provider={$$typeof:f,_context:_},_.Consumer=_},Ee.createElement=oe,Ee.createFactory=function(_){var z=oe.bind(null,_);return z.type=_,z},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(_){return{$$typeof:p,render:_}},Ee.isValidElement=H,Ee.lazy=function(_){return{$$typeof:N,_payload:{_status:-1,_result:_},_init:ye}},Ee.memo=function(_,z){return{$$typeof:v,type:_,compare:z===void 0?null:z}},Ee.startTransition=function(_){var z=te.transition;te.transition={};try{_()}finally{te.transition=z}},Ee.unstable_act=Y,Ee.useCallback=function(_,z){return ke.current.useCallback(_,z)},Ee.useContext=function(_){return ke.current.useContext(_)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(_){return ke.current.useDeferredValue(_)},Ee.useEffect=function(_,z){return ke.current.useEffect(_,z)},Ee.useId=function(){return ke.current.useId()},Ee.useImperativeHandle=function(_,z,ve){return ke.current.useImperativeHandle(_,z,ve)},Ee.useInsertionEffect=function(_,z){return ke.current.useInsertionEffect(_,z)},Ee.useLayoutEffect=function(_,z){return ke.current.useLayoutEffect(_,z)},Ee.useMemo=function(_,z){return ke.current.useMemo(_,z)},Ee.useReducer=function(_,z,ve){return ke.current.useReducer(_,z,ve)},Ee.useRef=function(_){return ke.current.useRef(_)},Ee.useState=function(_){return ke.current.useState(_)},Ee.useSyncExternalStore=function(_,z,ve){return ke.current.useSyncExternalStore(_,z,ve)},Ee.useTransition=function(){return ke.current.useTransition()},Ee.version="18.3.1",Ee}var ff;function ic(){return ff||(ff=1,Fi.exports=mg()),Fi.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mf;function hg(){if(mf)return Ks;mf=1;var r=ic(),o=Symbol.for("react.element"),l=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function g(p,w,v){var N,k={},A=null,E=null;v!==void 0&&(A=""+v),w.key!==void 0&&(A=""+w.key),w.ref!==void 0&&(E=w.ref);for(N in w)i.call(w,N)&&!f.hasOwnProperty(N)&&(k[N]=w[N]);if(p&&p.defaultProps)for(N in w=p.defaultProps,w)k[N]===void 0&&(k[N]=w[N]);return{$$typeof:o,type:p,key:A,ref:E,props:k,_owner:u.current}}return Ks.Fragment=l,Ks.jsx=g,Ks.jsxs=g,Ks}var hf;function pg(){return hf||(hf=1,Di.exports=hg()),Di.exports}var n=pg(),ya={},Ii={exports:{}},Rt={},Li={exports:{}},Oi={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pf;function gg(){return pf||(pf=1,(function(r){function o(te,U){var Y=te.length;te.push(U);e:for(;0<Y;){var _=Y-1>>>1,z=te[_];if(0<u(z,U))te[_]=U,te[Y]=z,Y=_;else break e}}function l(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var U=te[0],Y=te.pop();if(Y!==U){te[0]=Y;e:for(var _=0,z=te.length,ve=z>>>1;_<ve;){var J=2*(_+1)-1,X=te[J],ce=J+1,Fe=te[ce];if(0>u(X,Y))ce<z&&0>u(Fe,X)?(te[_]=Fe,te[ce]=Y,_=ce):(te[_]=X,te[J]=Y,_=J);else if(ce<z&&0>u(Fe,Y))te[_]=Fe,te[ce]=Y,_=ce;else break e}}return U}function u(te,U){var Y=te.sortIndex-U.sortIndex;return Y!==0?Y:te.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;r.unstable_now=function(){return f.now()}}else{var g=Date,p=g.now();r.unstable_now=function(){return g.now()-p}}var w=[],v=[],N=1,k=null,A=3,E=!1,O=!1,x=!1,I=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(te){for(var U=l(v);U!==null;){if(U.callback===null)i(v);else if(U.startTime<=te)i(v),U.sortIndex=U.expirationTime,o(w,U);else break;U=l(v)}}function G(te){if(x=!1,T(te),!O)if(l(w)!==null)O=!0,ye(j);else{var U=l(v);U!==null&&ke(G,U.startTime-te)}}function j(te,U){O=!1,x&&(x=!1,W(oe),oe=-1),E=!0;var Y=A;try{for(T(U),k=l(w);k!==null&&(!(k.expirationTime>U)||te&&!se());){var _=k.callback;if(typeof _=="function"){k.callback=null,A=k.priorityLevel;var z=_(k.expirationTime<=U);U=r.unstable_now(),typeof z=="function"?k.callback=z:k===l(w)&&i(w),T(U)}else i(w);k=l(w)}if(k!==null)var ve=!0;else{var J=l(v);J!==null&&ke(G,J.startTime-U),ve=!1}return ve}finally{k=null,A=Y,E=!1}}var S=!1,B=null,oe=-1,P=5,H=-1;function se(){return!(r.unstable_now()-H<P)}function ae(){if(B!==null){var te=r.unstable_now();H=te;var U=!0;try{U=B(!0,te)}finally{U?V():(S=!1,B=null)}}else S=!1}var V;if(typeof K=="function")V=function(){K(ae)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,fe=me.port2;me.port1.onmessage=ae,V=function(){fe.postMessage(null)}}else V=function(){I(ae,0)};function ye(te){B=te,S||(S=!0,V())}function ke(te,U){oe=I(function(){te(r.unstable_now())},U)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){O||E||(O=!0,ye(j))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_getFirstCallbackNode=function(){return l(w)},r.unstable_next=function(te){switch(A){case 1:case 2:case 3:var U=3;break;default:U=A}var Y=A;A=U;try{return te()}finally{A=Y}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,U){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Y=A;A=te;try{return U()}finally{A=Y}},r.unstable_scheduleCallback=function(te,U,Y){var _=r.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?_+Y:_):Y=_,te){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=Y+z,te={id:N++,callback:U,priorityLevel:te,startTime:Y,expirationTime:z,sortIndex:-1},Y>_?(te.sortIndex=Y,o(v,te),l(w)===null&&te===l(v)&&(x?(W(oe),oe=-1):x=!0,ke(G,Y-_))):(te.sortIndex=z,o(w,te),O||E||(O=!0,ye(j))),te},r.unstable_shouldYield=se,r.unstable_wrapCallback=function(te){var U=A;return function(){var Y=A;A=U;try{return te.apply(this,arguments)}finally{A=Y}}}})(Oi)),Oi}var gf;function xg(){return gf||(gf=1,Li.exports=gg()),Li.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf;function vg(){if(xf)return Rt;xf=1;var r=ic(),o=xg();function l(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,u={};function f(e,t){g(e,t),g(e+"Capture",t)}function g(e,t){for(u[e]=t,e=0;e<t.length;e++)i.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,N={},k={};function A(e){return w.call(k,e)?!0:w.call(N,e)?!1:v.test(e)?k[e]=!0:(N[e]=!0,!1)}function E(e,t,s,a){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function O(e,t,s,a){if(t===null||typeof t>"u"||E(e,t,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function x(e,t,s,a,c,d,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=h}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){I[e]=new x(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];I[t]=new x(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){I[e]=new x(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){I[e]=new x(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){I[e]=new x(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){I[e]=new x(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){I[e]=new x(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){I[e]=new x(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){I[e]=new x(e,5,!1,e.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function K(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(W,K);I[t]=new x(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(W,K);I[t]=new x(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(W,K);I[t]=new x(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){I[e]=new x(e,1,!1,e.toLowerCase(),null,!1,!1)}),I.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){I[e]=new x(e,1,!1,e.toLowerCase(),null,!0,!0)});function T(e,t,s,a){var c=I.hasOwnProperty(t)?I[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(O(t,s,c,a)&&(s=null),a||c===null?A(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):c.mustUseProperty?e[c.propertyName]=s===null?c.type===3?!1:"":s:(t=c.attributeName,a=c.attributeNamespace,s===null?e.removeAttribute(t):(c=c.type,s=c===3||c===4&&s===!0?"":""+s,a?e.setAttributeNS(a,t,s):e.setAttribute(t,s))))}var G=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),S=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),oe=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),se=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),ke=Symbol.for("react.offscreen"),te=Symbol.iterator;function U(e){return e===null||typeof e!="object"?null:(e=te&&e[te]||e["@@iterator"],typeof e=="function"?e:null)}var Y=Object.assign,_;function z(e){if(_===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);_=t&&t[1]||""}return`
`+_+e}var ve=!1;function J(e,t){if(!e||ve)return"";ve=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(L){var a=L}Reflect.construct(e,[],t)}else{try{t.call()}catch(L){a=L}e.call(t.prototype)}else{try{throw Error()}catch(L){a=L}e()}}catch(L){if(L&&a&&typeof L.stack=="string"){for(var c=L.stack.split(`
`),d=a.stack.split(`
`),h=c.length-1,y=d.length-1;1<=h&&0<=y&&c[h]!==d[y];)y--;for(;1<=h&&0<=y;h--,y--)if(c[h]!==d[y]){if(h!==1||y!==1)do if(h--,y--,0>y||c[h]!==d[y]){var b=`
`+c[h].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=h&&0<=y);break}}}finally{ve=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?z(e):""}function X(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=J(e.type,!1),e;case 11:return e=J(e.type.render,!1),e;case 1:return e=J(e.type,!0),e;default:return""}}function ce(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case B:return"Fragment";case S:return"Portal";case P:return"Profiler";case oe:return"StrictMode";case V:return"Suspense";case me:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case se:return(e.displayName||"Context")+".Consumer";case H:return(e._context.displayName||"Context")+".Provider";case ae:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fe:return t=e.displayName||null,t!==null?t:ce(e.type)||"Memo";case ye:t=e._payload,e=e._init;try{return ce(e(t))}catch{}}return null}function Fe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(t);case 8:return t===oe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function De(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Be(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ye(e){var t=Be(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,d=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(h){a=""+h,d.call(this,h)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(h){a=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Mt(e){e._valueTracker||(e._valueTracker=Ye(e))}function Mn(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=Be(e)?e.checked?"true":"false":e.value),e=a,e!==s?(t.setValue(e),!0):!1}function Yt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rn(e,t){var s=t.checked;return Y({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Dn(e,t){var s=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;s=De(t.value!=null?t.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function gn(e,t){t=t.checked,t!=null&&T(e,"checked",t,!1)}function Fn(e,t){gn(e,t);var s=De(t.value),a=t.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?vn(e,t.type,s):t.hasOwnProperty("defaultValue")&&vn(e,t.type,De(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function xn(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function vn(e,t,s){(t!=="number"||Yt(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var sn=Array.isArray;function D(e,t,s,a){if(e=e.options,t){t={};for(var c=0;c<s.length;c++)t["$"+s[c]]=!0;for(s=0;s<e.length;s++)c=t.hasOwnProperty("$"+e[s].value),e[s].selected!==c&&(e[s].selected=c),c&&a&&(e[s].defaultSelected=!0)}else{for(s=""+De(s),t=null,c=0;c<e.length;c++){if(e[c].value===s){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function re(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(l(91));return Y({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function de(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(l(92));if(sn(s)){if(1<s.length)throw Error(l(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:De(s)}}function Ne(e,t){var s=De(t.value),a=De(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function He(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ae(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Oe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Te,Ke=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,s,a,c)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Te=Te||document.createElement("div"),Te.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Te.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function it(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var on={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xa=["Webkit","ms","Moz","O"];Object.keys(on).forEach(function(e){Xa.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),on[t]=on[e]})});function lo(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||on.hasOwnProperty(e)&&on[e]?(""+t).trim():t+"px"}function io(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var a=s.indexOf("--")===0,c=lo(s,t[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,c):e[s]=c}}var Za=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ar(e,t){if(t){if(Za[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(l(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(l(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(l(61))}if(t.style!=null&&typeof t.style!="object")throw Error(l(62))}}function ds(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fs=null;function ms(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hs=null,In=null,yn=null;function ps(e){if(e=Ds(e)){if(typeof hs!="function")throw Error(l(280));var t=e.stateNode;t&&(t=Do(t),hs(e.stateNode,e.type,t))}}function co(e){In?yn?yn.push(e):yn=[e]:In=e}function uo(){if(In){var e=In,t=yn;if(yn=In=null,ps(e),t)for(e=0;e<t.length;e++)ps(t[e])}}function fo(e,t){return e(t)}function mo(){}var Tr=!1;function R(e,t,s){if(Tr)return e(t,s);Tr=!0;try{return fo(e,t,s)}finally{Tr=!1,(In!==null||yn!==null)&&(mo(),uo())}}function ne(e,t){var s=e.stateNode;if(s===null)return null;var a=Do(s);if(a===null)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(l(231,t,typeof s));return s}var Ie=!1;if(p)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch{Ie=!1}function Ce(e,t,s,a,c,d,h,y,b){var L=Array.prototype.slice.call(arguments,3);try{t.apply(s,L)}catch(Q){this.onError(Q)}}var _e=!1,Dt=null,zt=!1,Ve=null,qe={onError:function(e){_e=!0,Dt=e}};function $e(e,t,s,a,c,d,h,y,b){_e=!1,Dt=null,Ce.apply(qe,arguments)}function Ge(e,t,s,a,c,d,h,y,b){if($e.apply(this,arguments),_e){if(_e){var L=Dt;_e=!1,Dt=null}else throw Error(l(198));zt||(zt=!0,Ve=L)}}function be(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function ot(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $t(e){if(be(e)!==e)throw Error(l(188))}function Ln(e){var t=e.alternate;if(!t){if(t=be(e),t===null)throw Error(l(188));return t!==e?null:e}for(var s=e,a=t;;){var c=s.return;if(c===null)break;var d=c.alternate;if(d===null){if(a=c.return,a!==null){s=a;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===s)return $t(c),e;if(d===a)return $t(c),t;d=d.sibling}throw Error(l(188))}if(s.return!==a.return)s=c,a=d;else{for(var h=!1,y=c.child;y;){if(y===s){h=!0,s=c,a=d;break}if(y===a){h=!0,a=c,s=d;break}y=y.sibling}if(!h){for(y=d.child;y;){if(y===s){h=!0,s=d,a=c;break}if(y===a){h=!0,a=d,s=c;break}y=y.sibling}if(!h)throw Error(l(189))}}if(s.alternate!==a)throw Error(l(190))}if(s.tag!==3)throw Error(l(188));return s.stateNode.current===s?e:t}function Fc(e){return e=Ln(e),e!==null?Ic(e):null}function Ic(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ic(e);if(t!==null)return t;e=e.sibling}return null}var Lc=o.unstable_scheduleCallback,Oc=o.unstable_cancelCallback,bh=o.unstable_shouldYield,Sh=o.unstable_requestPaint,ct=o.unstable_now,kh=o.unstable_getCurrentPriorityLevel,el=o.unstable_ImmediatePriority,zc=o.unstable_UserBlockingPriority,ho=o.unstable_NormalPriority,Ch=o.unstable_LowPriority,$c=o.unstable_IdlePriority,po=null,an=null;function _h(e){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(po,e,void 0,(e.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:Ah,Eh=Math.log,Ph=Math.LN2;function Ah(e){return e>>>=0,e===0?32:31-(Eh(e)/Ph|0)|0}var go=64,xo=4194304;function gs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vo(e,t){var s=e.pendingLanes;if(s===0)return 0;var a=0,c=e.suspendedLanes,d=e.pingedLanes,h=s&268435455;if(h!==0){var y=h&~c;y!==0?a=gs(y):(d&=h,d!==0&&(a=gs(d)))}else h=s&~c,h!==0?a=gs(h):d!==0&&(a=gs(d));if(a===0)return 0;if(t!==0&&t!==a&&(t&c)===0&&(c=a&-a,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if((a&4)!==0&&(a|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)s=31-Jt(t),c=1<<s,a|=e[s],t&=~c;return a}function Th(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rh(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var h=31-Jt(d),y=1<<h,b=c[h];b===-1?((y&s)===0||(y&a)!==0)&&(c[h]=Th(y,t)):b<=t&&(e.expiredLanes|=y),d&=~y}}function tl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Uc(){var e=go;return go<<=1,(go&4194240)===0&&(go=64),e}function nl(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function xs(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jt(t),e[t]=s}function Mh(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var c=31-Jt(s),d=1<<c;t[c]=0,a[c]=-1,e[c]=-1,s&=~d}}function rl(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-Jt(s),c=1<<a;c&t|e[a]&t&&(e[a]|=t),s&=~c}}var We=0;function Bc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Vc,sl,Wc,Hc,Gc,ol=!1,yo=[],On=null,zn=null,$n=null,vs=new Map,ys=new Map,Un=[],Dh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yc(e,t){switch(e){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":$n=null;break;case"pointerover":case"pointerout":vs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ys.delete(t.pointerId)}}function ws(e,t,s,a,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:d,targetContainers:[c]},t!==null&&(t=Ds(t),t!==null&&sl(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Fh(e,t,s,a,c){switch(t){case"focusin":return On=ws(On,e,t,s,a,c),!0;case"dragenter":return zn=ws(zn,e,t,s,a,c),!0;case"mouseover":return $n=ws($n,e,t,s,a,c),!0;case"pointerover":var d=c.pointerId;return vs.set(d,ws(vs.get(d)||null,e,t,s,a,c)),!0;case"gotpointercapture":return d=c.pointerId,ys.set(d,ws(ys.get(d)||null,e,t,s,a,c)),!0}return!1}function Jc(e){var t=cr(e.target);if(t!==null){var s=be(t);if(s!==null){if(t=s.tag,t===13){if(t=ot(s),t!==null){e.blockedOn=t,Gc(e.priority,function(){Wc(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=ll(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);fs=a,s.target.dispatchEvent(a),fs=null}else return t=Ds(s),t!==null&&sl(t),e.blockedOn=s,!1;t.shift()}return!0}function Kc(e,t,s){wo(e)&&s.delete(t)}function Ih(){ol=!1,On!==null&&wo(On)&&(On=null),zn!==null&&wo(zn)&&(zn=null),$n!==null&&wo($n)&&($n=null),vs.forEach(Kc),ys.forEach(Kc)}function js(e,t){e.blockedOn===t&&(e.blockedOn=null,ol||(ol=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ih)))}function Ns(e){function t(c){return js(c,e)}if(0<yo.length){js(yo[0],e);for(var s=1;s<yo.length;s++){var a=yo[s];a.blockedOn===e&&(a.blockedOn=null)}}for(On!==null&&js(On,e),zn!==null&&js(zn,e),$n!==null&&js($n,e),vs.forEach(t),ys.forEach(t),s=0;s<Un.length;s++)a=Un[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<Un.length&&(s=Un[0],s.blockedOn===null);)Jc(s),s.blockedOn===null&&Un.shift()}var Rr=G.ReactCurrentBatchConfig,jo=!0;function Lh(e,t,s,a){var c=We,d=Rr.transition;Rr.transition=null;try{We=1,al(e,t,s,a)}finally{We=c,Rr.transition=d}}function Oh(e,t,s,a){var c=We,d=Rr.transition;Rr.transition=null;try{We=4,al(e,t,s,a)}finally{We=c,Rr.transition=d}}function al(e,t,s,a){if(jo){var c=ll(e,t,s,a);if(c===null)Sl(e,t,a,No,s),Yc(e,a);else if(Fh(c,e,t,s,a))a.stopPropagation();else if(Yc(e,a),t&4&&-1<Dh.indexOf(e)){for(;c!==null;){var d=Ds(c);if(d!==null&&Vc(d),d=ll(e,t,s,a),d===null&&Sl(e,t,a,No,s),d===c)break;c=d}c!==null&&a.stopPropagation()}else Sl(e,t,a,null,s)}}var No=null;function ll(e,t,s,a){if(No=null,e=ms(a),e=cr(e),e!==null)if(t=be(e),t===null)e=null;else if(s=t.tag,s===13){if(e=ot(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return No=e,null}function qc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kh()){case el:return 1;case zc:return 4;case ho:case Ch:return 16;case $c:return 536870912;default:return 16}default:return 16}}var Bn=null,il=null,bo=null;function Qc(){if(bo)return bo;var e,t=il,s=t.length,a,c="value"in Bn?Bn.value:Bn.textContent,d=c.length;for(e=0;e<s&&t[e]===c[e];e++);var h=s-e;for(a=1;a<=h&&t[s-a]===c[d-a];a++);return bo=c.slice(e,1<a?1-a:void 0)}function So(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ko(){return!0}function Xc(){return!1}function Ft(e){function t(s,a,c,d,h){this._reactName=s,this._targetInst=c,this.type=a,this.nativeEvent=d,this.target=h,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(s=e[y],this[y]=s?s(d):d[y]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ko:Xc,this.isPropagationStopped=Xc,this}return Y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ko)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ko)},persist:function(){},isPersistent:ko}),t}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cl=Ft(Mr),bs=Y({},Mr,{view:0,detail:0}),zh=Ft(bs),ul,dl,Ss,Co=Y({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ml,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ss&&(Ss&&e.type==="mousemove"?(ul=e.screenX-Ss.screenX,dl=e.screenY-Ss.screenY):dl=ul=0,Ss=e),ul)},movementY:function(e){return"movementY"in e?e.movementY:dl}}),Zc=Ft(Co),$h=Y({},Co,{dataTransfer:0}),Uh=Ft($h),Bh=Y({},bs,{relatedTarget:0}),fl=Ft(Bh),Vh=Y({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wh=Ft(Vh),Hh=Y({},Mr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Gh=Ft(Hh),Yh=Y({},Mr,{data:0}),eu=Ft(Yh),Jh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qh[e])?!!t[e]:!1}function ml(){return Qh}var Xh=Y({},bs,{key:function(e){if(e.key){var t=Jh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=So(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Kh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ml,charCode:function(e){return e.type==="keypress"?So(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?So(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zh=Ft(Xh),ep=Y({},Co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tu=Ft(ep),tp=Y({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ml}),np=Ft(tp),rp=Y({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),sp=Ft(rp),op=Y({},Co,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ap=Ft(op),lp=[9,13,27,32],hl=p&&"CompositionEvent"in window,ks=null;p&&"documentMode"in document&&(ks=document.documentMode);var ip=p&&"TextEvent"in window&&!ks,nu=p&&(!hl||ks&&8<ks&&11>=ks),ru=" ",su=!1;function ou(e,t){switch(e){case"keyup":return lp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function au(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dr=!1;function cp(e,t){switch(e){case"compositionend":return au(t);case"keypress":return t.which!==32?null:(su=!0,ru);case"textInput":return e=t.data,e===ru&&su?null:e;default:return null}}function up(e,t){if(Dr)return e==="compositionend"||!hl&&ou(e,t)?(e=Qc(),bo=il=Bn=null,Dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nu&&t.locale!=="ko"?null:t.data;default:return null}}var dp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dp[e.type]:t==="textarea"}function iu(e,t,s,a){co(a),t=To(t,"onChange"),0<t.length&&(s=new cl("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var Cs=null,_s=null;function fp(e){Cu(e,0)}function _o(e){var t=zr(e);if(Mn(t))return e}function mp(e,t){if(e==="change")return t}var cu=!1;if(p){var pl;if(p){var gl="oninput"in document;if(!gl){var uu=document.createElement("div");uu.setAttribute("oninput","return;"),gl=typeof uu.oninput=="function"}pl=gl}else pl=!1;cu=pl&&(!document.documentMode||9<document.documentMode)}function du(){Cs&&(Cs.detachEvent("onpropertychange",fu),_s=Cs=null)}function fu(e){if(e.propertyName==="value"&&_o(_s)){var t=[];iu(t,_s,e,ms(e)),R(fp,t)}}function hp(e,t,s){e==="focusin"?(du(),Cs=t,_s=s,Cs.attachEvent("onpropertychange",fu)):e==="focusout"&&du()}function pp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _o(_s)}function gp(e,t){if(e==="click")return _o(t)}function xp(e,t){if(e==="input"||e==="change")return _o(t)}function vp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kt=typeof Object.is=="function"?Object.is:vp;function Es(e,t){if(Kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var c=s[a];if(!w.call(t,c)||!Kt(e[c],t[c]))return!1}return!0}function mu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hu(e,t){var s=mu(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=t&&a>=t)return{node:s,offset:t-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=mu(s)}}function pu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gu(){for(var e=window,t=Yt();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Yt(e.document)}return t}function xl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yp(e){var t=gu(),s=e.focusedElem,a=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&pu(s.ownerDocument.documentElement,s)){if(a!==null&&xl(s)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=s.textContent.length,d=Math.min(a.start,c);a=a.end===void 0?d:Math.min(a.end,c),!e.extend&&d>a&&(c=a,a=d,d=c),c=hu(s,d);var h=hu(s,a);c&&h&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>a?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var wp=p&&"documentMode"in document&&11>=document.documentMode,Fr=null,vl=null,Ps=null,yl=!1;function xu(e,t,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;yl||Fr==null||Fr!==Yt(a)||(a=Fr,"selectionStart"in a&&xl(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ps&&Es(Ps,a)||(Ps=a,a=To(vl,"onSelect"),0<a.length&&(t=new cl("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=Fr)))}function Eo(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Ir={animationend:Eo("Animation","AnimationEnd"),animationiteration:Eo("Animation","AnimationIteration"),animationstart:Eo("Animation","AnimationStart"),transitionend:Eo("Transition","TransitionEnd")},wl={},vu={};p&&(vu=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);function Po(e){if(wl[e])return wl[e];if(!Ir[e])return e;var t=Ir[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in vu)return wl[e]=t[s];return e}var yu=Po("animationend"),wu=Po("animationiteration"),ju=Po("animationstart"),Nu=Po("transitionend"),bu=new Map,Su="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vn(e,t){bu.set(e,t),f(t,[e])}for(var jl=0;jl<Su.length;jl++){var Nl=Su[jl],jp=Nl.toLowerCase(),Np=Nl[0].toUpperCase()+Nl.slice(1);Vn(jp,"on"+Np)}Vn(yu,"onAnimationEnd"),Vn(wu,"onAnimationIteration"),Vn(ju,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(Nu,"onTransitionEnd"),g("onMouseEnter",["mouseout","mouseover"]),g("onMouseLeave",["mouseout","mouseover"]),g("onPointerEnter",["pointerout","pointerover"]),g("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var As="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bp=new Set("cancel close invalid load scroll toggle".split(" ").concat(As));function ku(e,t,s){var a=e.type||"unknown-event";e.currentTarget=s,Ge(a,t,void 0,e),e.currentTarget=null}function Cu(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],c=a.event;a=a.listeners;e:{var d=void 0;if(t)for(var h=a.length-1;0<=h;h--){var y=a[h],b=y.instance,L=y.currentTarget;if(y=y.listener,b!==d&&c.isPropagationStopped())break e;ku(c,y,L),d=b}else for(h=0;h<a.length;h++){if(y=a[h],b=y.instance,L=y.currentTarget,y=y.listener,b!==d&&c.isPropagationStopped())break e;ku(c,y,L),d=b}}}if(zt)throw e=Ve,zt=!1,Ve=null,e}function Qe(e,t){var s=t[Al];s===void 0&&(s=t[Al]=new Set);var a=e+"__bubble";s.has(a)||(_u(t,e,2,!1),s.add(a))}function bl(e,t,s){var a=0;t&&(a|=4),_u(s,e,a,t)}var Ao="_reactListening"+Math.random().toString(36).slice(2);function Ts(e){if(!e[Ao]){e[Ao]=!0,i.forEach(function(s){s!=="selectionchange"&&(bp.has(s)||bl(s,!1,e),bl(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ao]||(t[Ao]=!0,bl("selectionchange",!1,t))}}function _u(e,t,s,a){switch(qc(t)){case 1:var c=Lh;break;case 4:c=Oh;break;default:c=al}s=c.bind(null,t,s,e),c=void 0,!Ie||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,s,{capture:!0,passive:c}):e.addEventListener(t,s,!0):c!==void 0?e.addEventListener(t,s,{passive:c}):e.addEventListener(t,s,!1)}function Sl(e,t,s,a,c){var d=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var h=a.tag;if(h===3||h===4){var y=a.stateNode.containerInfo;if(y===c||y.nodeType===8&&y.parentNode===c)break;if(h===4)for(h=a.return;h!==null;){var b=h.tag;if((b===3||b===4)&&(b=h.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;h=h.return}for(;y!==null;){if(h=cr(y),h===null)return;if(b=h.tag,b===5||b===6){a=d=h;continue e}y=y.parentNode}}a=a.return}R(function(){var L=d,Q=ms(s),Z=[];e:{var q=bu.get(e);if(q!==void 0){var ue=cl,pe=e;switch(e){case"keypress":if(So(s)===0)break e;case"keydown":case"keyup":ue=Zh;break;case"focusin":pe="focus",ue=fl;break;case"focusout":pe="blur",ue=fl;break;case"beforeblur":case"afterblur":ue=fl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Uh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=np;break;case yu:case wu:case ju:ue=Wh;break;case Nu:ue=sp;break;case"scroll":ue=zh;break;case"wheel":ue=ap;break;case"copy":case"cut":case"paste":ue=Gh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=tu}var ge=(t&4)!==0,ut=!ge&&e==="scroll",M=ge?q!==null?q+"Capture":null:q;ge=[];for(var C=L,F;C!==null;){F=C;var ee=F.stateNode;if(F.tag===5&&ee!==null&&(F=ee,M!==null&&(ee=ne(C,M),ee!=null&&ge.push(Rs(C,ee,F)))),ut)break;C=C.return}0<ge.length&&(q=new ue(q,pe,null,s,Q),Z.push({event:q,listeners:ge}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",ue=e==="mouseout"||e==="pointerout",q&&s!==fs&&(pe=s.relatedTarget||s.fromElement)&&(cr(pe)||pe[wn]))break e;if((ue||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,ue?(pe=s.relatedTarget||s.toElement,ue=L,pe=pe?cr(pe):null,pe!==null&&(ut=be(pe),pe!==ut||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(ue=null,pe=L),ue!==pe)){if(ge=Zc,ee="onMouseLeave",M="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(ge=tu,ee="onPointerLeave",M="onPointerEnter",C="pointer"),ut=ue==null?q:zr(ue),F=pe==null?q:zr(pe),q=new ge(ee,C+"leave",ue,s,Q),q.target=ut,q.relatedTarget=F,ee=null,cr(Q)===L&&(ge=new ge(M,C+"enter",pe,s,Q),ge.target=F,ge.relatedTarget=ut,ee=ge),ut=ee,ue&&pe)t:{for(ge=ue,M=pe,C=0,F=ge;F;F=Lr(F))C++;for(F=0,ee=M;ee;ee=Lr(ee))F++;for(;0<C-F;)ge=Lr(ge),C--;for(;0<F-C;)M=Lr(M),F--;for(;C--;){if(ge===M||M!==null&&ge===M.alternate)break t;ge=Lr(ge),M=Lr(M)}ge=null}else ge=null;ue!==null&&Eu(Z,q,ue,ge,!1),pe!==null&&ut!==null&&Eu(Z,ut,pe,ge,!0)}}e:{if(q=L?zr(L):window,ue=q.nodeName&&q.nodeName.toLowerCase(),ue==="select"||ue==="input"&&q.type==="file")var xe=mp;else if(lu(q))if(cu)xe=xp;else{xe=pp;var we=hp}else(ue=q.nodeName)&&ue.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(xe=gp);if(xe&&(xe=xe(e,L))){iu(Z,xe,s,Q);break e}we&&we(e,q,L),e==="focusout"&&(we=q._wrapperState)&&we.controlled&&q.type==="number"&&vn(q,"number",q.value)}switch(we=L?zr(L):window,e){case"focusin":(lu(we)||we.contentEditable==="true")&&(Fr=we,vl=L,Ps=null);break;case"focusout":Ps=vl=Fr=null;break;case"mousedown":yl=!0;break;case"contextmenu":case"mouseup":case"dragend":yl=!1,xu(Z,s,Q);break;case"selectionchange":if(wp)break;case"keydown":case"keyup":xu(Z,s,Q)}var je;if(hl)e:{switch(e){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Dr?ou(e,s)&&(Se="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Se="onCompositionStart");Se&&(nu&&s.locale!=="ko"&&(Dr||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Dr&&(je=Qc()):(Bn=Q,il="value"in Bn?Bn.value:Bn.textContent,Dr=!0)),we=To(L,Se),0<we.length&&(Se=new eu(Se,e,null,s,Q),Z.push({event:Se,listeners:we}),je?Se.data=je:(je=au(s),je!==null&&(Se.data=je)))),(je=ip?cp(e,s):up(e,s))&&(L=To(L,"onBeforeInput"),0<L.length&&(Q=new eu("onBeforeInput","beforeinput",null,s,Q),Z.push({event:Q,listeners:L}),Q.data=je))}Cu(Z,t)})}function Rs(e,t,s){return{instance:e,listener:t,currentTarget:s}}function To(e,t){for(var s=t+"Capture",a=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=ne(e,s),d!=null&&a.unshift(Rs(e,d,c)),d=ne(e,t),d!=null&&a.push(Rs(e,d,c))),e=e.return}return a}function Lr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Eu(e,t,s,a,c){for(var d=t._reactName,h=[];s!==null&&s!==a;){var y=s,b=y.alternate,L=y.stateNode;if(b!==null&&b===a)break;y.tag===5&&L!==null&&(y=L,c?(b=ne(s,d),b!=null&&h.unshift(Rs(s,b,y))):c||(b=ne(s,d),b!=null&&h.push(Rs(s,b,y)))),s=s.return}h.length!==0&&e.push({event:t,listeners:h})}var Sp=/\r\n?/g,kp=/\u0000|\uFFFD/g;function Pu(e){return(typeof e=="string"?e:""+e).replace(Sp,`
`).replace(kp,"")}function Ro(e,t,s){if(t=Pu(t),Pu(e)!==t&&s)throw Error(l(425))}function Mo(){}var kl=null,Cl=null;function _l(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var El=typeof setTimeout=="function"?setTimeout:void 0,Cp=typeof clearTimeout=="function"?clearTimeout:void 0,Au=typeof Promise=="function"?Promise:void 0,_p=typeof queueMicrotask=="function"?queueMicrotask:typeof Au<"u"?function(e){return Au.resolve(null).then(e).catch(Ep)}:El;function Ep(e){setTimeout(function(){throw e})}function Pl(e,t){var s=t,a=0;do{var c=s.nextSibling;if(e.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(a===0){e.removeChild(c),Ns(t);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=c}while(s);Ns(t)}function Wn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Tu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var Or=Math.random().toString(36).slice(2),ln="__reactFiber$"+Or,Ms="__reactProps$"+Or,wn="__reactContainer$"+Or,Al="__reactEvents$"+Or,Pp="__reactListeners$"+Or,Ap="__reactHandles$"+Or;function cr(e){var t=e[ln];if(t)return t;for(var s=e.parentNode;s;){if(t=s[wn]||s[ln]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Tu(e);e!==null;){if(s=e[ln])return s;e=Tu(e)}return t}e=s,s=e.parentNode}return null}function Ds(e){return e=e[ln]||e[wn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(l(33))}function Do(e){return e[Ms]||null}var Tl=[],$r=-1;function Hn(e){return{current:e}}function Xe(e){0>$r||(e.current=Tl[$r],Tl[$r]=null,$r--)}function Je(e,t){$r++,Tl[$r]=e.current,e.current=t}var Gn={},wt=Hn(Gn),_t=Hn(!1),ur=Gn;function Ur(e,t){var s=e.type.contextTypes;if(!s)return Gn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in s)c[d]=t[d];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Et(e){return e=e.childContextTypes,e!=null}function Fo(){Xe(_t),Xe(wt)}function Ru(e,t,s){if(wt.current!==Gn)throw Error(l(168));Je(wt,t),Je(_t,s)}function Mu(e,t,s){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(l(108,Fe(e)||"Unknown",c));return Y({},s,a)}function Io(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gn,ur=wt.current,Je(wt,e),Je(_t,_t.current),!0}function Du(e,t,s){var a=e.stateNode;if(!a)throw Error(l(169));s?(e=Mu(e,t,ur),a.__reactInternalMemoizedMergedChildContext=e,Xe(_t),Xe(wt),Je(wt,e)):Xe(_t),Je(_t,s)}var jn=null,Lo=!1,Rl=!1;function Fu(e){jn===null?jn=[e]:jn.push(e)}function Tp(e){Lo=!0,Fu(e)}function Yn(){if(!Rl&&jn!==null){Rl=!0;var e=0,t=We;try{var s=jn;for(We=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}jn=null,Lo=!1}catch(c){throw jn!==null&&(jn=jn.slice(e+1)),Lc(el,Yn),c}finally{We=t,Rl=!1}}return null}var Br=[],Vr=0,Oo=null,zo=0,Ut=[],Bt=0,dr=null,Nn=1,bn="";function fr(e,t){Br[Vr++]=zo,Br[Vr++]=Oo,Oo=e,zo=t}function Iu(e,t,s){Ut[Bt++]=Nn,Ut[Bt++]=bn,Ut[Bt++]=dr,dr=e;var a=Nn;e=bn;var c=32-Jt(a)-1;a&=~(1<<c),s+=1;var d=32-Jt(t)+c;if(30<d){var h=c-c%5;d=(a&(1<<h)-1).toString(32),a>>=h,c-=h,Nn=1<<32-Jt(t)+c|s<<c|a,bn=d+e}else Nn=1<<d|s<<c|a,bn=e}function Ml(e){e.return!==null&&(fr(e,1),Iu(e,1,0))}function Dl(e){for(;e===Oo;)Oo=Br[--Vr],Br[Vr]=null,zo=Br[--Vr],Br[Vr]=null;for(;e===dr;)dr=Ut[--Bt],Ut[Bt]=null,bn=Ut[--Bt],Ut[Bt]=null,Nn=Ut[--Bt],Ut[Bt]=null}var It=null,Lt=null,et=!1,qt=null;function Lu(e,t){var s=Gt(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Ou(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,It=e,Lt=Wn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,It=e,Lt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=dr!==null?{id:Nn,overflow:bn}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Gt(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,It=e,Lt=null,!0):!1;default:return!1}}function Fl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Il(e){if(et){var t=Lt;if(t){var s=t;if(!Ou(e,t)){if(Fl(e))throw Error(l(418));t=Wn(s.nextSibling);var a=It;t&&Ou(e,t)?Lu(a,s):(e.flags=e.flags&-4097|2,et=!1,It=e)}}else{if(Fl(e))throw Error(l(418));e.flags=e.flags&-4097|2,et=!1,It=e}}}function zu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;It=e}function $o(e){if(e!==It)return!1;if(!et)return zu(e),et=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_l(e.type,e.memoizedProps)),t&&(t=Lt)){if(Fl(e))throw $u(),Error(l(418));for(;t;)Lu(e,t),t=Wn(t.nextSibling)}if(zu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Lt=Wn(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Lt=null}}else Lt=It?Wn(e.stateNode.nextSibling):null;return!0}function $u(){for(var e=Lt;e;)e=Wn(e.nextSibling)}function Wr(){Lt=It=null,et=!1}function Ll(e){qt===null?qt=[e]:qt.push(e)}var Rp=G.ReactCurrentBatchConfig;function Fs(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(l(309));var a=s.stateNode}if(!a)throw Error(l(147,e));var c=a,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(h){var y=c.refs;h===null?delete y[d]:y[d]=h},t._stringRef=d,t)}if(typeof e!="string")throw Error(l(284));if(!s._owner)throw Error(l(290,e))}return e}function Uo(e,t){throw e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Uu(e){var t=e._init;return t(e._payload)}function Bu(e){function t(M,C){if(e){var F=M.deletions;F===null?(M.deletions=[C],M.flags|=16):F.push(C)}}function s(M,C){if(!e)return null;for(;C!==null;)t(M,C),C=C.sibling;return null}function a(M,C){for(M=new Map;C!==null;)C.key!==null?M.set(C.key,C):M.set(C.index,C),C=C.sibling;return M}function c(M,C){return M=tr(M,C),M.index=0,M.sibling=null,M}function d(M,C,F){return M.index=F,e?(F=M.alternate,F!==null?(F=F.index,F<C?(M.flags|=2,C):F):(M.flags|=2,C)):(M.flags|=1048576,C)}function h(M){return e&&M.alternate===null&&(M.flags|=2),M}function y(M,C,F,ee){return C===null||C.tag!==6?(C=Ei(F,M.mode,ee),C.return=M,C):(C=c(C,F),C.return=M,C)}function b(M,C,F,ee){var xe=F.type;return xe===B?Q(M,C,F.props.children,ee,F.key):C!==null&&(C.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===ye&&Uu(xe)===C.type)?(ee=c(C,F.props),ee.ref=Fs(M,C,F),ee.return=M,ee):(ee=da(F.type,F.key,F.props,null,M.mode,ee),ee.ref=Fs(M,C,F),ee.return=M,ee)}function L(M,C,F,ee){return C===null||C.tag!==4||C.stateNode.containerInfo!==F.containerInfo||C.stateNode.implementation!==F.implementation?(C=Pi(F,M.mode,ee),C.return=M,C):(C=c(C,F.children||[]),C.return=M,C)}function Q(M,C,F,ee,xe){return C===null||C.tag!==7?(C=wr(F,M.mode,ee,xe),C.return=M,C):(C=c(C,F),C.return=M,C)}function Z(M,C,F){if(typeof C=="string"&&C!==""||typeof C=="number")return C=Ei(""+C,M.mode,F),C.return=M,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case j:return F=da(C.type,C.key,C.props,null,M.mode,F),F.ref=Fs(M,null,C),F.return=M,F;case S:return C=Pi(C,M.mode,F),C.return=M,C;case ye:var ee=C._init;return Z(M,ee(C._payload),F)}if(sn(C)||U(C))return C=wr(C,M.mode,F,null),C.return=M,C;Uo(M,C)}return null}function q(M,C,F,ee){var xe=C!==null?C.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return xe!==null?null:y(M,C,""+F,ee);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case j:return F.key===xe?b(M,C,F,ee):null;case S:return F.key===xe?L(M,C,F,ee):null;case ye:return xe=F._init,q(M,C,xe(F._payload),ee)}if(sn(F)||U(F))return xe!==null?null:Q(M,C,F,ee,null);Uo(M,F)}return null}function ue(M,C,F,ee,xe){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return M=M.get(F)||null,y(C,M,""+ee,xe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case j:return M=M.get(ee.key===null?F:ee.key)||null,b(C,M,ee,xe);case S:return M=M.get(ee.key===null?F:ee.key)||null,L(C,M,ee,xe);case ye:var we=ee._init;return ue(M,C,F,we(ee._payload),xe)}if(sn(ee)||U(ee))return M=M.get(F)||null,Q(C,M,ee,xe,null);Uo(C,ee)}return null}function pe(M,C,F,ee){for(var xe=null,we=null,je=C,Se=C=0,xt=null;je!==null&&Se<F.length;Se++){je.index>Se?(xt=je,je=null):xt=je.sibling;var Ue=q(M,je,F[Se],ee);if(Ue===null){je===null&&(je=xt);break}e&&je&&Ue.alternate===null&&t(M,je),C=d(Ue,C,Se),we===null?xe=Ue:we.sibling=Ue,we=Ue,je=xt}if(Se===F.length)return s(M,je),et&&fr(M,Se),xe;if(je===null){for(;Se<F.length;Se++)je=Z(M,F[Se],ee),je!==null&&(C=d(je,C,Se),we===null?xe=je:we.sibling=je,we=je);return et&&fr(M,Se),xe}for(je=a(M,je);Se<F.length;Se++)xt=ue(je,M,Se,F[Se],ee),xt!==null&&(e&&xt.alternate!==null&&je.delete(xt.key===null?Se:xt.key),C=d(xt,C,Se),we===null?xe=xt:we.sibling=xt,we=xt);return e&&je.forEach(function(nr){return t(M,nr)}),et&&fr(M,Se),xe}function ge(M,C,F,ee){var xe=U(F);if(typeof xe!="function")throw Error(l(150));if(F=xe.call(F),F==null)throw Error(l(151));for(var we=xe=null,je=C,Se=C=0,xt=null,Ue=F.next();je!==null&&!Ue.done;Se++,Ue=F.next()){je.index>Se?(xt=je,je=null):xt=je.sibling;var nr=q(M,je,Ue.value,ee);if(nr===null){je===null&&(je=xt);break}e&&je&&nr.alternate===null&&t(M,je),C=d(nr,C,Se),we===null?xe=nr:we.sibling=nr,we=nr,je=xt}if(Ue.done)return s(M,je),et&&fr(M,Se),xe;if(je===null){for(;!Ue.done;Se++,Ue=F.next())Ue=Z(M,Ue.value,ee),Ue!==null&&(C=d(Ue,C,Se),we===null?xe=Ue:we.sibling=Ue,we=Ue);return et&&fr(M,Se),xe}for(je=a(M,je);!Ue.done;Se++,Ue=F.next())Ue=ue(je,M,Se,Ue.value,ee),Ue!==null&&(e&&Ue.alternate!==null&&je.delete(Ue.key===null?Se:Ue.key),C=d(Ue,C,Se),we===null?xe=Ue:we.sibling=Ue,we=Ue);return e&&je.forEach(function(dg){return t(M,dg)}),et&&fr(M,Se),xe}function ut(M,C,F,ee){if(typeof F=="object"&&F!==null&&F.type===B&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case j:e:{for(var xe=F.key,we=C;we!==null;){if(we.key===xe){if(xe=F.type,xe===B){if(we.tag===7){s(M,we.sibling),C=c(we,F.props.children),C.return=M,M=C;break e}}else if(we.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===ye&&Uu(xe)===we.type){s(M,we.sibling),C=c(we,F.props),C.ref=Fs(M,we,F),C.return=M,M=C;break e}s(M,we);break}else t(M,we);we=we.sibling}F.type===B?(C=wr(F.props.children,M.mode,ee,F.key),C.return=M,M=C):(ee=da(F.type,F.key,F.props,null,M.mode,ee),ee.ref=Fs(M,C,F),ee.return=M,M=ee)}return h(M);case S:e:{for(we=F.key;C!==null;){if(C.key===we)if(C.tag===4&&C.stateNode.containerInfo===F.containerInfo&&C.stateNode.implementation===F.implementation){s(M,C.sibling),C=c(C,F.children||[]),C.return=M,M=C;break e}else{s(M,C);break}else t(M,C);C=C.sibling}C=Pi(F,M.mode,ee),C.return=M,M=C}return h(M);case ye:return we=F._init,ut(M,C,we(F._payload),ee)}if(sn(F))return pe(M,C,F,ee);if(U(F))return ge(M,C,F,ee);Uo(M,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,C!==null&&C.tag===6?(s(M,C.sibling),C=c(C,F),C.return=M,M=C):(s(M,C),C=Ei(F,M.mode,ee),C.return=M,M=C),h(M)):s(M,C)}return ut}var Hr=Bu(!0),Vu=Bu(!1),Bo=Hn(null),Vo=null,Gr=null,Ol=null;function zl(){Ol=Gr=Vo=null}function $l(e){var t=Bo.current;Xe(Bo),e._currentValue=t}function Ul(e,t,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function Yr(e,t){Vo=e,Ol=Gr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Pt=!0),e.firstContext=null)}function Vt(e){var t=e._currentValue;if(Ol!==e)if(e={context:e,memoizedValue:t,next:null},Gr===null){if(Vo===null)throw Error(l(308));Gr=e,Vo.dependencies={lanes:0,firstContext:e}}else Gr=Gr.next=e;return t}var mr=null;function Bl(e){mr===null?mr=[e]:mr.push(e)}function Wu(e,t,s,a){var c=t.interleaved;return c===null?(s.next=s,Bl(t)):(s.next=c.next,c.next=s),t.interleaved=s,Sn(e,a)}function Sn(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Jn=!1;function Vl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kn(e,t,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(ze&2)!==0){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Sn(e,s)}return c=a.interleaved,c===null?(t.next=t,Bl(a)):(t.next=c.next,c.next=t),a.interleaved=t,Sn(e,s)}function Wo(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,rl(e,s)}}function Gu(e,t){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var c=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var h={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};d===null?c=d=h:d=d.next=h,s=s.next}while(s!==null);d===null?c=d=t:d=d.next=t}else c=d=t;s={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Ho(e,t,s,a){var c=e.updateQueue;Jn=!1;var d=c.firstBaseUpdate,h=c.lastBaseUpdate,y=c.shared.pending;if(y!==null){c.shared.pending=null;var b=y,L=b.next;b.next=null,h===null?d=L:h.next=L,h=b;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,y=Q.lastBaseUpdate,y!==h&&(y===null?Q.firstBaseUpdate=L:y.next=L,Q.lastBaseUpdate=b))}if(d!==null){var Z=c.baseState;h=0,Q=L=b=null,y=d;do{var q=y.lane,ue=y.eventTime;if((a&q)===q){Q!==null&&(Q=Q.next={eventTime:ue,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var pe=e,ge=y;switch(q=t,ue=s,ge.tag){case 1:if(pe=ge.payload,typeof pe=="function"){Z=pe.call(ue,Z,q);break e}Z=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=ge.payload,q=typeof pe=="function"?pe.call(ue,Z,q):pe,q==null)break e;Z=Y({},Z,q);break e;case 2:Jn=!0}}y.callback!==null&&y.lane!==0&&(e.flags|=64,q=c.effects,q===null?c.effects=[y]:q.push(y))}else ue={eventTime:ue,lane:q,tag:y.tag,payload:y.payload,callback:y.callback,next:null},Q===null?(L=Q=ue,b=Z):Q=Q.next=ue,h|=q;if(y=y.next,y===null){if(y=c.shared.pending,y===null)break;q=y,y=q.next,q.next=null,c.lastBaseUpdate=q,c.shared.pending=null}}while(!0);if(Q===null&&(b=Z),c.baseState=b,c.firstBaseUpdate=L,c.lastBaseUpdate=Q,t=c.shared.interleaved,t!==null){c=t;do h|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);gr|=h,e.lanes=h,e.memoizedState=Z}}function Yu(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=s,typeof c!="function")throw Error(l(191,c));c.call(a)}}}var Is={},cn=Hn(Is),Ls=Hn(Is),Os=Hn(Is);function hr(e){if(e===Is)throw Error(l(174));return e}function Wl(e,t){switch(Je(Os,t),Je(Ls,e),Je(cn,Is),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ae(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ae(t,e)}Xe(cn),Je(cn,t)}function Jr(){Xe(cn),Xe(Ls),Xe(Os)}function Ju(e){hr(Os.current);var t=hr(cn.current),s=Ae(t,e.type);t!==s&&(Je(Ls,e),Je(cn,s))}function Hl(e){Ls.current===e&&(Xe(cn),Xe(Ls))}var nt=Hn(0);function Go(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Gl=[];function Yl(){for(var e=0;e<Gl.length;e++)Gl[e]._workInProgressVersionPrimary=null;Gl.length=0}var Yo=G.ReactCurrentDispatcher,Jl=G.ReactCurrentBatchConfig,pr=0,rt=null,ft=null,pt=null,Jo=!1,zs=!1,$s=0,Mp=0;function jt(){throw Error(l(321))}function Kl(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Kt(e[s],t[s]))return!1;return!0}function ql(e,t,s,a,c,d){if(pr=d,rt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yo.current=e===null||e.memoizedState===null?Lp:Op,e=s(a,c),zs){d=0;do{if(zs=!1,$s=0,25<=d)throw Error(l(301));d+=1,pt=ft=null,t.updateQueue=null,Yo.current=zp,e=s(a,c)}while(zs)}if(Yo.current=Qo,t=ft!==null&&ft.next!==null,pr=0,pt=ft=rt=null,Jo=!1,t)throw Error(l(300));return e}function Ql(){var e=$s!==0;return $s=0,e}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?rt.memoizedState=pt=e:pt=pt.next=e,pt}function Wt(){if(ft===null){var e=rt.alternate;e=e!==null?e.memoizedState:null}else e=ft.next;var t=pt===null?rt.memoizedState:pt.next;if(t!==null)pt=t,ft=e;else{if(e===null)throw Error(l(310));ft=e,e={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},pt===null?rt.memoizedState=pt=e:pt=pt.next=e}return pt}function Us(e,t){return typeof t=="function"?t(e):t}function Xl(e){var t=Wt(),s=t.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=e;var a=ft,c=a.baseQueue,d=s.pending;if(d!==null){if(c!==null){var h=c.next;c.next=d.next,d.next=h}a.baseQueue=c=d,s.pending=null}if(c!==null){d=c.next,a=a.baseState;var y=h=null,b=null,L=d;do{var Q=L.lane;if((pr&Q)===Q)b!==null&&(b=b.next={lane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),a=L.hasEagerState?L.eagerState:e(a,L.action);else{var Z={lane:Q,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null};b===null?(y=b=Z,h=a):b=b.next=Z,rt.lanes|=Q,gr|=Q}L=L.next}while(L!==null&&L!==d);b===null?h=a:b.next=y,Kt(a,t.memoizedState)||(Pt=!0),t.memoizedState=a,t.baseState=h,t.baseQueue=b,s.lastRenderedState=a}if(e=s.interleaved,e!==null){c=e;do d=c.lane,rt.lanes|=d,gr|=d,c=c.next;while(c!==e)}else c===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Zl(e){var t=Wt(),s=t.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=e;var a=s.dispatch,c=s.pending,d=t.memoizedState;if(c!==null){s.pending=null;var h=c=c.next;do d=e(d,h.action),h=h.next;while(h!==c);Kt(d,t.memoizedState)||(Pt=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),s.lastRenderedState=d}return[d,a]}function Ku(){}function qu(e,t){var s=rt,a=Wt(),c=t(),d=!Kt(a.memoizedState,c);if(d&&(a.memoizedState=c,Pt=!0),a=a.queue,ei(Zu.bind(null,s,a,e),[e]),a.getSnapshot!==t||d||pt!==null&&pt.memoizedState.tag&1){if(s.flags|=2048,Bs(9,Xu.bind(null,s,a,c,t),void 0,null),gt===null)throw Error(l(349));(pr&30)!==0||Qu(s,t,c)}return c}function Qu(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=rt.updateQueue,t===null?(t={lastEffect:null,stores:null},rt.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Xu(e,t,s,a){t.value=s,t.getSnapshot=a,ed(t)&&td(e)}function Zu(e,t,s){return s(function(){ed(t)&&td(e)})}function ed(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Kt(e,s)}catch{return!0}}function td(e){var t=Sn(e,1);t!==null&&en(t,e,1,-1)}function nd(e){var t=un();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:e},t.queue=e,e=e.dispatch=Ip.bind(null,rt,e),[t.memoizedState,e]}function Bs(e,t,s,a){return e={tag:e,create:t,destroy:s,deps:a,next:null},t=rt.updateQueue,t===null?(t={lastEffect:null,stores:null},rt.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e)),e}function rd(){return Wt().memoizedState}function Ko(e,t,s,a){var c=un();rt.flags|=e,c.memoizedState=Bs(1|t,s,void 0,a===void 0?null:a)}function qo(e,t,s,a){var c=Wt();a=a===void 0?null:a;var d=void 0;if(ft!==null){var h=ft.memoizedState;if(d=h.destroy,a!==null&&Kl(a,h.deps)){c.memoizedState=Bs(t,s,d,a);return}}rt.flags|=e,c.memoizedState=Bs(1|t,s,d,a)}function sd(e,t){return Ko(8390656,8,e,t)}function ei(e,t){return qo(2048,8,e,t)}function od(e,t){return qo(4,2,e,t)}function ad(e,t){return qo(4,4,e,t)}function ld(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function id(e,t,s){return s=s!=null?s.concat([e]):null,qo(4,4,ld.bind(null,t,e),s)}function ti(){}function cd(e,t){var s=Wt();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&Kl(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function ud(e,t){var s=Wt();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&Kl(t,a[1])?a[0]:(e=e(),s.memoizedState=[e,t],e)}function dd(e,t,s){return(pr&21)===0?(e.baseState&&(e.baseState=!1,Pt=!0),e.memoizedState=s):(Kt(s,t)||(s=Uc(),rt.lanes|=s,gr|=s,e.baseState=!0),t)}function Dp(e,t){var s=We;We=s!==0&&4>s?s:4,e(!0);var a=Jl.transition;Jl.transition={};try{e(!1),t()}finally{We=s,Jl.transition=a}}function fd(){return Wt().memoizedState}function Fp(e,t,s){var a=Zn(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},md(e))hd(t,s);else if(s=Wu(e,t,s,a),s!==null){var c=Ct();en(s,e,a,c),pd(s,t,a)}}function Ip(e,t,s){var a=Zn(e),c={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(md(e))hd(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var h=t.lastRenderedState,y=d(h,s);if(c.hasEagerState=!0,c.eagerState=y,Kt(y,h)){var b=t.interleaved;b===null?(c.next=c,Bl(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}s=Wu(e,t,c,a),s!==null&&(c=Ct(),en(s,e,a,c),pd(s,t,a))}}function md(e){var t=e.alternate;return e===rt||t!==null&&t===rt}function hd(e,t){zs=Jo=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function pd(e,t,s){if((s&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,rl(e,s)}}var Qo={readContext:Vt,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},Lp={readContext:Vt,useCallback:function(e,t){return un().memoizedState=[e,t===void 0?null:t],e},useContext:Vt,useEffect:sd,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Ko(4194308,4,ld.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Ko(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ko(4,2,e,t)},useMemo:function(e,t){var s=un();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var a=un();return t=s!==void 0?s(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Fp.bind(null,rt,e),[a.memoizedState,e]},useRef:function(e){var t=un();return e={current:e},t.memoizedState=e},useState:nd,useDebugValue:ti,useDeferredValue:function(e){return un().memoizedState=e},useTransition:function(){var e=nd(!1),t=e[0];return e=Dp.bind(null,e[1]),un().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var a=rt,c=un();if(et){if(s===void 0)throw Error(l(407));s=s()}else{if(s=t(),gt===null)throw Error(l(349));(pr&30)!==0||Qu(a,t,s)}c.memoizedState=s;var d={value:s,getSnapshot:t};return c.queue=d,sd(Zu.bind(null,a,d,e),[e]),a.flags|=2048,Bs(9,Xu.bind(null,a,d,s,t),void 0,null),s},useId:function(){var e=un(),t=gt.identifierPrefix;if(et){var s=bn,a=Nn;s=(a&~(1<<32-Jt(a)-1)).toString(32)+s,t=":"+t+"R"+s,s=$s++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Mp++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Op={readContext:Vt,useCallback:cd,useContext:Vt,useEffect:ei,useImperativeHandle:id,useInsertionEffect:od,useLayoutEffect:ad,useMemo:ud,useReducer:Xl,useRef:rd,useState:function(){return Xl(Us)},useDebugValue:ti,useDeferredValue:function(e){var t=Wt();return dd(t,ft.memoizedState,e)},useTransition:function(){var e=Xl(Us)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:Ku,useSyncExternalStore:qu,useId:fd,unstable_isNewReconciler:!1},zp={readContext:Vt,useCallback:cd,useContext:Vt,useEffect:ei,useImperativeHandle:id,useInsertionEffect:od,useLayoutEffect:ad,useMemo:ud,useReducer:Zl,useRef:rd,useState:function(){return Zl(Us)},useDebugValue:ti,useDeferredValue:function(e){var t=Wt();return ft===null?t.memoizedState=e:dd(t,ft.memoizedState,e)},useTransition:function(){var e=Zl(Us)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:Ku,useSyncExternalStore:qu,useId:fd,unstable_isNewReconciler:!1};function Qt(e,t){if(e&&e.defaultProps){t=Y({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function ni(e,t,s,a){t=e.memoizedState,s=s(a,t),s=s==null?t:Y({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Xo={isMounted:function(e){return(e=e._reactInternals)?be(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var a=Ct(),c=Zn(e),d=kn(a,c);d.payload=t,s!=null&&(d.callback=s),t=Kn(e,d,c),t!==null&&(en(t,e,c,a),Wo(t,e,c))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=Ct(),c=Zn(e),d=kn(a,c);d.tag=1,d.payload=t,s!=null&&(d.callback=s),t=Kn(e,d,c),t!==null&&(en(t,e,c,a),Wo(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Ct(),a=Zn(e),c=kn(s,a);c.tag=2,t!=null&&(c.callback=t),t=Kn(e,c,a),t!==null&&(en(t,e,a,s),Wo(t,e,a))}};function gd(e,t,s,a,c,d,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,h):t.prototype&&t.prototype.isPureReactComponent?!Es(s,a)||!Es(c,d):!0}function xd(e,t,s){var a=!1,c=Gn,d=t.contextType;return typeof d=="object"&&d!==null?d=Vt(d):(c=Et(t)?ur:wt.current,a=t.contextTypes,d=(a=a!=null)?Ur(e,c):Gn),t=new t(s,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Xo,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function vd(e,t,s,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&Xo.enqueueReplaceState(t,t.state,null)}function ri(e,t,s,a){var c=e.stateNode;c.props=s,c.state=e.memoizedState,c.refs={},Vl(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=Vt(d):(d=Et(t)?ur:wt.current,c.context=Ur(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(ni(e,t,d,s),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Xo.enqueueReplaceState(c,c.state,null),Ho(e,s,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Kr(e,t){try{var s="",a=t;do s+=X(a),a=a.return;while(a);var c=s}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function si(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function oi(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var $p=typeof WeakMap=="function"?WeakMap:Map;function yd(e,t,s){s=kn(-1,s),s.tag=3,s.payload={element:null};var a=t.value;return s.callback=function(){oa||(oa=!0,wi=a),oi(e,t)},s}function wd(e,t,s){s=kn(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;s.payload=function(){return a(c)},s.callback=function(){oi(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(s.callback=function(){oi(e,t),typeof a!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),s}function jd(e,t,s){var a=e.pingCache;if(a===null){a=e.pingCache=new $p;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(s)||(c.add(s),e=eg.bind(null,e,t,s),t.then(e,e))}function Nd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function bd(e,t,s,a,c){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=kn(-1,1),t.tag=2,Kn(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=c,e)}var Up=G.ReactCurrentOwner,Pt=!1;function kt(e,t,s,a){t.child=e===null?Vu(t,null,s,a):Hr(t,e.child,s,a)}function Sd(e,t,s,a,c){s=s.render;var d=t.ref;return Yr(t,c),a=ql(e,t,s,a,d,c),s=Ql(),e!==null&&!Pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Cn(e,t,c)):(et&&s&&Ml(t),t.flags|=1,kt(e,t,a,c),t.child)}function kd(e,t,s,a,c){if(e===null){var d=s.type;return typeof d=="function"&&!_i(d)&&d.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=d,Cd(e,t,d,a,c)):(e=da(s.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,(e.lanes&c)===0){var h=d.memoizedProps;if(s=s.compare,s=s!==null?s:Es,s(h,a)&&e.ref===t.ref)return Cn(e,t,c)}return t.flags|=1,e=tr(d,a),e.ref=t.ref,e.return=t,t.child=e}function Cd(e,t,s,a,c){if(e!==null){var d=e.memoizedProps;if(Es(d,a)&&e.ref===t.ref)if(Pt=!1,t.pendingProps=a=d,(e.lanes&c)!==0)(e.flags&131072)!==0&&(Pt=!0);else return t.lanes=e.lanes,Cn(e,t,c)}return ai(e,t,s,a,c)}function _d(e,t,s){var a=t.pendingProps,c=a.children,d=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(Qr,Ot),Ot|=s;else{if((s&1073741824)===0)return e=d!==null?d.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Je(Qr,Ot),Ot|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=d!==null?d.baseLanes:s,Je(Qr,Ot),Ot|=a}else d!==null?(a=d.baseLanes|s,t.memoizedState=null):a=s,Je(Qr,Ot),Ot|=a;return kt(e,t,c,s),t.child}function Ed(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function ai(e,t,s,a,c){var d=Et(s)?ur:wt.current;return d=Ur(t,d),Yr(t,c),s=ql(e,t,s,a,d,c),a=Ql(),e!==null&&!Pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Cn(e,t,c)):(et&&a&&Ml(t),t.flags|=1,kt(e,t,s,c),t.child)}function Pd(e,t,s,a,c){if(Et(s)){var d=!0;Io(t)}else d=!1;if(Yr(t,c),t.stateNode===null)ea(e,t),xd(t,s,a),ri(t,s,a,c),a=!0;else if(e===null){var h=t.stateNode,y=t.memoizedProps;h.props=y;var b=h.context,L=s.contextType;typeof L=="object"&&L!==null?L=Vt(L):(L=Et(s)?ur:wt.current,L=Ur(t,L));var Q=s.getDerivedStateFromProps,Z=typeof Q=="function"||typeof h.getSnapshotBeforeUpdate=="function";Z||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y!==a||b!==L)&&vd(t,h,a,L),Jn=!1;var q=t.memoizedState;h.state=q,Ho(t,a,h,c),b=t.memoizedState,y!==a||q!==b||_t.current||Jn?(typeof Q=="function"&&(ni(t,s,Q,a),b=t.memoizedState),(y=Jn||gd(t,s,y,a,q,b,L))?(Z||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=b),h.props=a,h.state=b,h.context=L,a=y):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{h=t.stateNode,Hu(e,t),y=t.memoizedProps,L=t.type===t.elementType?y:Qt(t.type,y),h.props=L,Z=t.pendingProps,q=h.context,b=s.contextType,typeof b=="object"&&b!==null?b=Vt(b):(b=Et(s)?ur:wt.current,b=Ur(t,b));var ue=s.getDerivedStateFromProps;(Q=typeof ue=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y!==Z||q!==b)&&vd(t,h,a,b),Jn=!1,q=t.memoizedState,h.state=q,Ho(t,a,h,c);var pe=t.memoizedState;y!==Z||q!==pe||_t.current||Jn?(typeof ue=="function"&&(ni(t,s,ue,a),pe=t.memoizedState),(L=Jn||gd(t,s,L,a,q,pe,b)||!1)?(Q||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(a,pe,b),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(a,pe,b)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||y===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=pe),h.props=a,h.state=pe,h.context=b,a=L):(typeof h.componentDidUpdate!="function"||y===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),a=!1)}return li(e,t,s,a,d,c)}function li(e,t,s,a,c,d){Ed(e,t);var h=(t.flags&128)!==0;if(!a&&!h)return c&&Du(t,s,!1),Cn(e,t,d);a=t.stateNode,Up.current=t;var y=h&&typeof s.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&h?(t.child=Hr(t,e.child,null,d),t.child=Hr(t,null,y,d)):kt(e,t,y,d),t.memoizedState=a.state,c&&Du(t,s,!0),t.child}function Ad(e){var t=e.stateNode;t.pendingContext?Ru(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ru(e,t.context,!1),Wl(e,t.containerInfo)}function Td(e,t,s,a,c){return Wr(),Ll(c),t.flags|=256,kt(e,t,s,a),t.child}var ii={dehydrated:null,treeContext:null,retryLane:0};function ci(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rd(e,t,s){var a=t.pendingProps,c=nt.current,d=!1,h=(t.flags&128)!==0,y;if((y=h)||(y=e!==null&&e.memoizedState===null?!1:(c&2)!==0),y?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Je(nt,c&1),e===null)return Il(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(h=a.children,e=a.fallback,d?(a=t.mode,d=t.child,h={mode:"hidden",children:h},(a&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=h):d=fa(h,a,0,null),e=wr(e,a,s,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=ci(s),t.memoizedState=ii,e):ui(t,h));if(c=e.memoizedState,c!==null&&(y=c.dehydrated,y!==null))return Bp(e,t,h,a,y,c,s);if(d){d=a.fallback,h=t.mode,c=e.child,y=c.sibling;var b={mode:"hidden",children:a.children};return(h&1)===0&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=b,t.deletions=null):(a=tr(c,b),a.subtreeFlags=c.subtreeFlags&14680064),y!==null?d=tr(y,d):(d=wr(d,h,s,null),d.flags|=2),d.return=t,a.return=t,a.sibling=d,t.child=a,a=d,d=t.child,h=e.child.memoizedState,h=h===null?ci(s):{baseLanes:h.baseLanes|s,cachePool:null,transitions:h.transitions},d.memoizedState=h,d.childLanes=e.childLanes&~s,t.memoizedState=ii,a}return d=e.child,e=d.sibling,a=tr(d,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=s),a.return=t,a.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=a,t.memoizedState=null,a}function ui(e,t){return t=fa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zo(e,t,s,a){return a!==null&&Ll(a),Hr(t,e.child,null,s),e=ui(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bp(e,t,s,a,c,d,h){if(s)return t.flags&256?(t.flags&=-257,a=si(Error(l(422))),Zo(e,t,h,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=a.fallback,c=t.mode,a=fa({mode:"visible",children:a.children},c,0,null),d=wr(d,c,h,null),d.flags|=2,a.return=t,d.return=t,a.sibling=d,t.child=a,(t.mode&1)!==0&&Hr(t,e.child,null,h),t.child.memoizedState=ci(h),t.memoizedState=ii,d);if((t.mode&1)===0)return Zo(e,t,h,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var y=a.dgst;return a=y,d=Error(l(419)),a=si(d,a,void 0),Zo(e,t,h,a)}if(y=(h&e.childLanes)!==0,Pt||y){if(a=gt,a!==null){switch(h&-h){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(a.suspendedLanes|h))!==0?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,Sn(e,c),en(a,e,c,-1))}return Ci(),a=si(Error(l(421))),Zo(e,t,h,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=tg.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,Lt=Wn(c.nextSibling),It=t,et=!0,qt=null,e!==null&&(Ut[Bt++]=Nn,Ut[Bt++]=bn,Ut[Bt++]=dr,Nn=e.id,bn=e.overflow,dr=t),t=ui(t,a.children),t.flags|=4096,t)}function Md(e,t,s){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Ul(e.return,t,s)}function di(e,t,s,a,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=s,d.tailMode=c)}function Dd(e,t,s){var a=t.pendingProps,c=a.revealOrder,d=a.tail;if(kt(e,t,a.children,s),a=nt.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Md(e,s,t);else if(e.tag===19)Md(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Je(nt,a),(t.mode&1)===0)t.memoizedState=null;else switch(c){case"forwards":for(s=t.child,c=null;s!==null;)e=s.alternate,e!==null&&Go(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=t.child,t.child=null):(c=s.sibling,s.sibling=null),di(t,!1,c,s,d);break;case"backwards":for(s=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Go(e)===null){t.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}di(t,!0,s,null,d);break;case"together":di(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ea(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Cn(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),gr|=t.lanes,(s&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,s=tr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=tr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Vp(e,t,s){switch(t.tag){case 3:Ad(t),Wr();break;case 5:Ju(t);break;case 1:Et(t.type)&&Io(t);break;case 4:Wl(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;Je(Bo,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Je(nt,nt.current&1),t.flags|=128,null):(s&t.child.childLanes)!==0?Rd(e,t,s):(Je(nt,nt.current&1),e=Cn(e,t,s),e!==null?e.sibling:null);Je(nt,nt.current&1);break;case 19:if(a=(s&t.childLanes)!==0,(e.flags&128)!==0){if(a)return Dd(e,t,s);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Je(nt,nt.current),a)break;return null;case 22:case 23:return t.lanes=0,_d(e,t,s)}return Cn(e,t,s)}var Fd,fi,Id,Ld;Fd=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},fi=function(){},Id=function(e,t,s,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,hr(cn.current);var d=null;switch(s){case"input":c=rn(e,c),a=rn(e,a),d=[];break;case"select":c=Y({},c,{value:void 0}),a=Y({},a,{value:void 0}),d=[];break;case"textarea":c=re(e,c),a=re(e,a),d=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Mo)}Ar(s,a);var h;s=null;for(L in c)if(!a.hasOwnProperty(L)&&c.hasOwnProperty(L)&&c[L]!=null)if(L==="style"){var y=c[L];for(h in y)y.hasOwnProperty(h)&&(s||(s={}),s[h]="")}else L!=="dangerouslySetInnerHTML"&&L!=="children"&&L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(u.hasOwnProperty(L)?d||(d=[]):(d=d||[]).push(L,null));for(L in a){var b=a[L];if(y=c?.[L],a.hasOwnProperty(L)&&b!==y&&(b!=null||y!=null))if(L==="style")if(y){for(h in y)!y.hasOwnProperty(h)||b&&b.hasOwnProperty(h)||(s||(s={}),s[h]="");for(h in b)b.hasOwnProperty(h)&&y[h]!==b[h]&&(s||(s={}),s[h]=b[h])}else s||(d||(d=[]),d.push(L,s)),s=b;else L==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,y=y?y.__html:void 0,b!=null&&y!==b&&(d=d||[]).push(L,b)):L==="children"?typeof b!="string"&&typeof b!="number"||(d=d||[]).push(L,""+b):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&(u.hasOwnProperty(L)?(b!=null&&L==="onScroll"&&Qe("scroll",e),d||y===b||(d=[])):(d=d||[]).push(L,b))}s&&(d=d||[]).push("style",s);var L=d;(t.updateQueue=L)&&(t.flags|=4)}},Ld=function(e,t,s,a){s!==a&&(t.flags|=4)};function Vs(e,t){if(!et)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(t)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function Wp(e,t,s){var a=t.pendingProps;switch(Dl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(t),null;case 1:return Et(t.type)&&Fo(),Nt(t),null;case 3:return a=t.stateNode,Jr(),Xe(_t),Xe(wt),Yl(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&($o(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,qt!==null&&(bi(qt),qt=null))),fi(e,t),Nt(t),null;case 5:Hl(t);var c=hr(Os.current);if(s=t.type,e!==null&&t.stateNode!=null)Id(e,t,s,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(l(166));return Nt(t),null}if(e=hr(cn.current),$o(t)){a=t.stateNode,s=t.type;var d=t.memoizedProps;switch(a[ln]=t,a[Ms]=d,e=(t.mode&1)!==0,s){case"dialog":Qe("cancel",a),Qe("close",a);break;case"iframe":case"object":case"embed":Qe("load",a);break;case"video":case"audio":for(c=0;c<As.length;c++)Qe(As[c],a);break;case"source":Qe("error",a);break;case"img":case"image":case"link":Qe("error",a),Qe("load",a);break;case"details":Qe("toggle",a);break;case"input":Dn(a,d),Qe("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},Qe("invalid",a);break;case"textarea":de(a,d),Qe("invalid",a)}Ar(s,d),c=null;for(var h in d)if(d.hasOwnProperty(h)){var y=d[h];h==="children"?typeof y=="string"?a.textContent!==y&&(d.suppressHydrationWarning!==!0&&Ro(a.textContent,y,e),c=["children",y]):typeof y=="number"&&a.textContent!==""+y&&(d.suppressHydrationWarning!==!0&&Ro(a.textContent,y,e),c=["children",""+y]):u.hasOwnProperty(h)&&y!=null&&h==="onScroll"&&Qe("scroll",a)}switch(s){case"input":Mt(a),xn(a,d,!0);break;case"textarea":Mt(a),He(a);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(a.onclick=Mo)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{h=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Oe(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=h.createElement(s,{is:a.is}):(e=h.createElement(s),s==="select"&&(h=e,a.multiple?h.multiple=!0:a.size&&(h.size=a.size))):e=h.createElementNS(e,s),e[ln]=t,e[Ms]=a,Fd(e,t,!1,!1),t.stateNode=e;e:{switch(h=ds(s,a),s){case"dialog":Qe("cancel",e),Qe("close",e),c=a;break;case"iframe":case"object":case"embed":Qe("load",e),c=a;break;case"video":case"audio":for(c=0;c<As.length;c++)Qe(As[c],e);c=a;break;case"source":Qe("error",e),c=a;break;case"img":case"image":case"link":Qe("error",e),Qe("load",e),c=a;break;case"details":Qe("toggle",e),c=a;break;case"input":Dn(e,a),c=rn(e,a),Qe("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Y({},a,{value:void 0}),Qe("invalid",e);break;case"textarea":de(e,a),c=re(e,a),Qe("invalid",e);break;default:c=a}Ar(s,c),y=c;for(d in y)if(y.hasOwnProperty(d)){var b=y[d];d==="style"?io(e,b):d==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&Ke(e,b)):d==="children"?typeof b=="string"?(s!=="textarea"||b!=="")&&it(e,b):typeof b=="number"&&it(e,""+b):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(u.hasOwnProperty(d)?b!=null&&d==="onScroll"&&Qe("scroll",e):b!=null&&T(e,d,b,h))}switch(s){case"input":Mt(e),xn(e,a,!1);break;case"textarea":Mt(e),He(e);break;case"option":a.value!=null&&e.setAttribute("value",""+De(a.value));break;case"select":e.multiple=!!a.multiple,d=a.value,d!=null?D(e,!!a.multiple,d,!1):a.defaultValue!=null&&D(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Mo)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Nt(t),null;case 6:if(e&&t.stateNode!=null)Ld(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(l(166));if(s=hr(Os.current),hr(cn.current),$o(t)){if(a=t.stateNode,s=t.memoizedProps,a[ln]=t,(d=a.nodeValue!==s)&&(e=It,e!==null))switch(e.tag){case 3:Ro(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ro(a.nodeValue,s,(e.mode&1)!==0)}d&&(t.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[ln]=t,t.stateNode=a}return Nt(t),null;case 13:if(Xe(nt),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(et&&Lt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)$u(),Wr(),t.flags|=98560,d=!1;else if(d=$o(t),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(l(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(l(317));d[ln]=t}else Wr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Nt(t),d=!1}else qt!==null&&(bi(qt),qt=null),d=!0;if(!d)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=s,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(nt.current&1)!==0?mt===0&&(mt=3):Ci())),t.updateQueue!==null&&(t.flags|=4),Nt(t),null);case 4:return Jr(),fi(e,t),e===null&&Ts(t.stateNode.containerInfo),Nt(t),null;case 10:return $l(t.type._context),Nt(t),null;case 17:return Et(t.type)&&Fo(),Nt(t),null;case 19:if(Xe(nt),d=t.memoizedState,d===null)return Nt(t),null;if(a=(t.flags&128)!==0,h=d.rendering,h===null)if(a)Vs(d,!1);else{if(mt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=Go(e),h!==null){for(t.flags|=128,Vs(d,!1),a=h.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=s,s=t.child;s!==null;)d=s,e=a,d.flags&=14680066,h=d.alternate,h===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=h.childLanes,d.lanes=h.lanes,d.child=h.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=h.memoizedProps,d.memoizedState=h.memoizedState,d.updateQueue=h.updateQueue,d.type=h.type,e=h.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Je(nt,nt.current&1|2),t.child}e=e.sibling}d.tail!==null&&ct()>Xr&&(t.flags|=128,a=!0,Vs(d,!1),t.lanes=4194304)}else{if(!a)if(e=Go(h),e!==null){if(t.flags|=128,a=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Vs(d,!0),d.tail===null&&d.tailMode==="hidden"&&!h.alternate&&!et)return Nt(t),null}else 2*ct()-d.renderingStartTime>Xr&&s!==1073741824&&(t.flags|=128,a=!0,Vs(d,!1),t.lanes=4194304);d.isBackwards?(h.sibling=t.child,t.child=h):(s=d.last,s!==null?s.sibling=h:t.child=h,d.last=h)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=ct(),t.sibling=null,s=nt.current,Je(nt,a?s&1|2:s&1),t):(Nt(t),null);case 22:case 23:return ki(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(Ot&1073741824)!==0&&(Nt(t),t.subtreeFlags&6&&(t.flags|=8192)):Nt(t),null;case 24:return null;case 25:return null}throw Error(l(156,t.tag))}function Hp(e,t){switch(Dl(t),t.tag){case 1:return Et(t.type)&&Fo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jr(),Xe(_t),Xe(wt),Yl(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Hl(t),null;case 13:if(Xe(nt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));Wr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Xe(nt),null;case 4:return Jr(),null;case 10:return $l(t.type._context),null;case 22:case 23:return ki(),null;case 24:return null;default:return null}}var ta=!1,bt=!1,Gp=typeof WeakSet=="function"?WeakSet:Set,he=null;function qr(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){at(e,t,a)}else s.current=null}function mi(e,t,s){try{s()}catch(a){at(e,t,a)}}var Od=!1;function Yp(e,t){if(kl=jo,e=gu(),xl(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var c=a.anchorOffset,d=a.focusNode;a=a.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var h=0,y=-1,b=-1,L=0,Q=0,Z=e,q=null;t:for(;;){for(var ue;Z!==s||c!==0&&Z.nodeType!==3||(y=h+c),Z!==d||a!==0&&Z.nodeType!==3||(b=h+a),Z.nodeType===3&&(h+=Z.nodeValue.length),(ue=Z.firstChild)!==null;)q=Z,Z=ue;for(;;){if(Z===e)break t;if(q===s&&++L===c&&(y=h),q===d&&++Q===a&&(b=h),(ue=Z.nextSibling)!==null)break;Z=q,q=Z.parentNode}Z=ue}s=y===-1||b===-1?null:{start:y,end:b}}else s=null}s=s||{start:0,end:0}}else s=null;for(Cl={focusedElem:e,selectionRange:s},jo=!1,he=t;he!==null;)if(t=he,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,he=e;else for(;he!==null;){t=he;try{var pe=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var ge=pe.memoizedProps,ut=pe.memoizedState,M=t.stateNode,C=M.getSnapshotBeforeUpdate(t.elementType===t.type?ge:Qt(t.type,ge),ut);M.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var F=t.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(ee){at(t,t.return,ee)}if(e=t.sibling,e!==null){e.return=t.return,he=e;break}he=t.return}return pe=Od,Od=!1,pe}function Ws(e,t,s){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&mi(t,s,d)}c=c.next}while(c!==a)}}function na(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==t)}}function hi(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function zd(e){var t=e.alternate;t!==null&&(e.alternate=null,zd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ln],delete t[Ms],delete t[Al],delete t[Pp],delete t[Ap])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $d(e){return e.tag===5||e.tag===3||e.tag===4}function Ud(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$d(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pi(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Mo));else if(a!==4&&(e=e.child,e!==null))for(pi(e,t,s),e=e.sibling;e!==null;)pi(e,t,s),e=e.sibling}function gi(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(gi(e,t,s),e=e.sibling;e!==null;)gi(e,t,s),e=e.sibling}var vt=null,Xt=!1;function qn(e,t,s){for(s=s.child;s!==null;)Bd(e,t,s),s=s.sibling}function Bd(e,t,s){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(po,s)}catch{}switch(s.tag){case 5:bt||qr(s,t);case 6:var a=vt,c=Xt;vt=null,qn(e,t,s),vt=a,Xt=c,vt!==null&&(Xt?(e=vt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):vt.removeChild(s.stateNode));break;case 18:vt!==null&&(Xt?(e=vt,s=s.stateNode,e.nodeType===8?Pl(e.parentNode,s):e.nodeType===1&&Pl(e,s),Ns(e)):Pl(vt,s.stateNode));break;case 4:a=vt,c=Xt,vt=s.stateNode.containerInfo,Xt=!0,qn(e,t,s),vt=a,Xt=c;break;case 0:case 11:case 14:case 15:if(!bt&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var d=c,h=d.destroy;d=d.tag,h!==void 0&&((d&2)!==0||(d&4)!==0)&&mi(s,t,h),c=c.next}while(c!==a)}qn(e,t,s);break;case 1:if(!bt&&(qr(s,t),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(y){at(s,t,y)}qn(e,t,s);break;case 21:qn(e,t,s);break;case 22:s.mode&1?(bt=(a=bt)||s.memoizedState!==null,qn(e,t,s),bt=a):qn(e,t,s);break;default:qn(e,t,s)}}function Vd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Gp),t.forEach(function(a){var c=ng.bind(null,e,a);s.has(a)||(s.add(a),a.then(c,c))})}}function Zt(e,t){var s=t.deletions;if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];try{var d=e,h=t,y=h;e:for(;y!==null;){switch(y.tag){case 5:vt=y.stateNode,Xt=!1;break e;case 3:vt=y.stateNode.containerInfo,Xt=!0;break e;case 4:vt=y.stateNode.containerInfo,Xt=!0;break e}y=y.return}if(vt===null)throw Error(l(160));Bd(d,h,c),vt=null,Xt=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(L){at(c,t,L)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wd(t,e),t=t.sibling}function Wd(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zt(t,e),dn(e),a&4){try{Ws(3,e,e.return),na(3,e)}catch(ge){at(e,e.return,ge)}try{Ws(5,e,e.return)}catch(ge){at(e,e.return,ge)}}break;case 1:Zt(t,e),dn(e),a&512&&s!==null&&qr(s,s.return);break;case 5:if(Zt(t,e),dn(e),a&512&&s!==null&&qr(s,s.return),e.flags&32){var c=e.stateNode;try{it(c,"")}catch(ge){at(e,e.return,ge)}}if(a&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,h=s!==null?s.memoizedProps:d,y=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{y==="input"&&d.type==="radio"&&d.name!=null&&gn(c,d),ds(y,h);var L=ds(y,d);for(h=0;h<b.length;h+=2){var Q=b[h],Z=b[h+1];Q==="style"?io(c,Z):Q==="dangerouslySetInnerHTML"?Ke(c,Z):Q==="children"?it(c,Z):T(c,Q,Z,L)}switch(y){case"input":Fn(c,d);break;case"textarea":Ne(c,d);break;case"select":var q=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var ue=d.value;ue!=null?D(c,!!d.multiple,ue,!1):q!==!!d.multiple&&(d.defaultValue!=null?D(c,!!d.multiple,d.defaultValue,!0):D(c,!!d.multiple,d.multiple?[]:"",!1))}c[Ms]=d}catch(ge){at(e,e.return,ge)}}break;case 6:if(Zt(t,e),dn(e),a&4){if(e.stateNode===null)throw Error(l(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(ge){at(e,e.return,ge)}}break;case 3:if(Zt(t,e),dn(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{Ns(t.containerInfo)}catch(ge){at(e,e.return,ge)}break;case 4:Zt(t,e),dn(e);break;case 13:Zt(t,e),dn(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(yi=ct())),a&4&&Vd(e);break;case 22:if(Q=s!==null&&s.memoizedState!==null,e.mode&1?(bt=(L=bt)||Q,Zt(t,e),bt=L):Zt(t,e),dn(e),a&8192){if(L=e.memoizedState!==null,(e.stateNode.isHidden=L)&&!Q&&(e.mode&1)!==0)for(he=e,Q=e.child;Q!==null;){for(Z=he=Q;he!==null;){switch(q=he,ue=q.child,q.tag){case 0:case 11:case 14:case 15:Ws(4,q,q.return);break;case 1:qr(q,q.return);var pe=q.stateNode;if(typeof pe.componentWillUnmount=="function"){a=q,s=q.return;try{t=a,pe.props=t.memoizedProps,pe.state=t.memoizedState,pe.componentWillUnmount()}catch(ge){at(a,s,ge)}}break;case 5:qr(q,q.return);break;case 22:if(q.memoizedState!==null){Yd(Z);continue}}ue!==null?(ue.return=q,he=ue):Yd(Z)}Q=Q.sibling}e:for(Q=null,Z=e;;){if(Z.tag===5){if(Q===null){Q=Z;try{c=Z.stateNode,L?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(y=Z.stateNode,b=Z.memoizedProps.style,h=b!=null&&b.hasOwnProperty("display")?b.display:null,y.style.display=lo("display",h))}catch(ge){at(e,e.return,ge)}}}else if(Z.tag===6){if(Q===null)try{Z.stateNode.nodeValue=L?"":Z.memoizedProps}catch(ge){at(e,e.return,ge)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===e)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===e)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===e)break e;Q===Z&&(Q=null),Z=Z.return}Q===Z&&(Q=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Zt(t,e),dn(e),a&4&&Vd(e);break;case 21:break;default:Zt(t,e),dn(e)}}function dn(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if($d(s)){var a=s;break e}s=s.return}throw Error(l(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(it(c,""),a.flags&=-33);var d=Ud(e);gi(e,d,c);break;case 3:case 4:var h=a.stateNode.containerInfo,y=Ud(e);pi(e,y,h);break;default:throw Error(l(161))}}catch(b){at(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jp(e,t,s){he=e,Hd(e)}function Hd(e,t,s){for(var a=(e.mode&1)!==0;he!==null;){var c=he,d=c.child;if(c.tag===22&&a){var h=c.memoizedState!==null||ta;if(!h){var y=c.alternate,b=y!==null&&y.memoizedState!==null||bt;y=ta;var L=bt;if(ta=h,(bt=b)&&!L)for(he=c;he!==null;)h=he,b=h.child,h.tag===22&&h.memoizedState!==null?Jd(c):b!==null?(b.return=h,he=b):Jd(c);for(;d!==null;)he=d,Hd(d),d=d.sibling;he=c,ta=y,bt=L}Gd(e)}else(c.subtreeFlags&8772)!==0&&d!==null?(d.return=c,he=d):Gd(e)}}function Gd(e){for(;he!==null;){var t=he;if((t.flags&8772)!==0){var s=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:bt||na(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!bt)if(s===null)a.componentDidMount();else{var c=t.elementType===t.type?s.memoizedProps:Qt(t.type,s.memoizedProps);a.componentDidUpdate(c,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&Yu(t,d,a);break;case 3:var h=t.updateQueue;if(h!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Yu(t,h,s)}break;case 5:var y=t.stateNode;if(s===null&&t.flags&4){s=y;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&s.focus();break;case"img":b.src&&(s.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var L=t.alternate;if(L!==null){var Q=L.memoizedState;if(Q!==null){var Z=Q.dehydrated;Z!==null&&Ns(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(l(163))}bt||t.flags&512&&hi(t)}catch(q){at(t,t.return,q)}}if(t===e){he=null;break}if(s=t.sibling,s!==null){s.return=t.return,he=s;break}he=t.return}}function Yd(e){for(;he!==null;){var t=he;if(t===e){he=null;break}var s=t.sibling;if(s!==null){s.return=t.return,he=s;break}he=t.return}}function Jd(e){for(;he!==null;){var t=he;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{na(4,t)}catch(b){at(t,s,b)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(b){at(t,c,b)}}var d=t.return;try{hi(t)}catch(b){at(t,d,b)}break;case 5:var h=t.return;try{hi(t)}catch(b){at(t,h,b)}}}catch(b){at(t,t.return,b)}if(t===e){he=null;break}var y=t.sibling;if(y!==null){y.return=t.return,he=y;break}he=t.return}}var Kp=Math.ceil,ra=G.ReactCurrentDispatcher,xi=G.ReactCurrentOwner,Ht=G.ReactCurrentBatchConfig,ze=0,gt=null,dt=null,yt=0,Ot=0,Qr=Hn(0),mt=0,Hs=null,gr=0,sa=0,vi=0,Gs=null,At=null,yi=0,Xr=1/0,_n=null,oa=!1,wi=null,Qn=null,aa=!1,Xn=null,la=0,Ys=0,ji=null,ia=-1,ca=0;function Ct(){return(ze&6)!==0?ct():ia!==-1?ia:ia=ct()}function Zn(e){return(e.mode&1)===0?1:(ze&2)!==0&&yt!==0?yt&-yt:Rp.transition!==null?(ca===0&&(ca=Uc()),ca):(e=We,e!==0||(e=window.event,e=e===void 0?16:qc(e.type)),e)}function en(e,t,s,a){if(50<Ys)throw Ys=0,ji=null,Error(l(185));xs(e,s,a),((ze&2)===0||e!==gt)&&(e===gt&&((ze&2)===0&&(sa|=s),mt===4&&er(e,yt)),Tt(e,a),s===1&&ze===0&&(t.mode&1)===0&&(Xr=ct()+500,Lo&&Yn()))}function Tt(e,t){var s=e.callbackNode;Rh(e,t);var a=vo(e,e===gt?yt:0);if(a===0)s!==null&&Oc(s),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(s!=null&&Oc(s),t===1)e.tag===0?Tp(qd.bind(null,e)):Fu(qd.bind(null,e)),_p(function(){(ze&6)===0&&Yn()}),s=null;else{switch(Bc(a)){case 1:s=el;break;case 4:s=zc;break;case 16:s=ho;break;case 536870912:s=$c;break;default:s=ho}s=sf(s,Kd.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Kd(e,t){if(ia=-1,ca=0,(ze&6)!==0)throw Error(l(327));var s=e.callbackNode;if(Zr()&&e.callbackNode!==s)return null;var a=vo(e,e===gt?yt:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=ua(e,a);else{t=a;var c=ze;ze|=2;var d=Xd();(gt!==e||yt!==t)&&(_n=null,Xr=ct()+500,vr(e,t));do try{Xp();break}catch(y){Qd(e,y)}while(!0);zl(),ra.current=d,ze=c,dt!==null?t=0:(gt=null,yt=0,t=mt)}if(t!==0){if(t===2&&(c=tl(e),c!==0&&(a=c,t=Ni(e,c))),t===1)throw s=Hs,vr(e,0),er(e,a),Tt(e,ct()),s;if(t===6)er(e,a);else{if(c=e.current.alternate,(a&30)===0&&!qp(c)&&(t=ua(e,a),t===2&&(d=tl(e),d!==0&&(a=d,t=Ni(e,d))),t===1))throw s=Hs,vr(e,0),er(e,a),Tt(e,ct()),s;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(l(345));case 2:yr(e,At,_n);break;case 3:if(er(e,a),(a&130023424)===a&&(t=yi+500-ct(),10<t)){if(vo(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){Ct(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=El(yr.bind(null,e,At,_n),t);break}yr(e,At,_n);break;case 4:if(er(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var h=31-Jt(a);d=1<<h,h=t[h],h>c&&(c=h),a&=~d}if(a=c,a=ct()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Kp(a/1960))-a,10<a){e.timeoutHandle=El(yr.bind(null,e,At,_n),a);break}yr(e,At,_n);break;case 5:yr(e,At,_n);break;default:throw Error(l(329))}}}return Tt(e,ct()),e.callbackNode===s?Kd.bind(null,e):null}function Ni(e,t){var s=Gs;return e.current.memoizedState.isDehydrated&&(vr(e,t).flags|=256),e=ua(e,t),e!==2&&(t=At,At=s,t!==null&&bi(t)),e}function bi(e){At===null?At=e:At.push.apply(At,e)}function qp(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var c=s[a],d=c.getSnapshot;c=c.value;try{if(!Kt(d(),c))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function er(e,t){for(t&=~vi,t&=~sa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Jt(t),a=1<<s;e[s]=-1,t&=~a}}function qd(e){if((ze&6)!==0)throw Error(l(327));Zr();var t=vo(e,0);if((t&1)===0)return Tt(e,ct()),null;var s=ua(e,t);if(e.tag!==0&&s===2){var a=tl(e);a!==0&&(t=a,s=Ni(e,a))}if(s===1)throw s=Hs,vr(e,0),er(e,t),Tt(e,ct()),s;if(s===6)throw Error(l(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yr(e,At,_n),Tt(e,ct()),null}function Si(e,t){var s=ze;ze|=1;try{return e(t)}finally{ze=s,ze===0&&(Xr=ct()+500,Lo&&Yn())}}function xr(e){Xn!==null&&Xn.tag===0&&(ze&6)===0&&Zr();var t=ze;ze|=1;var s=Ht.transition,a=We;try{if(Ht.transition=null,We=1,e)return e()}finally{We=a,Ht.transition=s,ze=t,(ze&6)===0&&Yn()}}function ki(){Ot=Qr.current,Xe(Qr)}function vr(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Cp(s)),dt!==null)for(s=dt.return;s!==null;){var a=s;switch(Dl(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Fo();break;case 3:Jr(),Xe(_t),Xe(wt),Yl();break;case 5:Hl(a);break;case 4:Jr();break;case 13:Xe(nt);break;case 19:Xe(nt);break;case 10:$l(a.type._context);break;case 22:case 23:ki()}s=s.return}if(gt=e,dt=e=tr(e.current,null),yt=Ot=t,mt=0,Hs=null,vi=sa=gr=0,At=Gs=null,mr!==null){for(t=0;t<mr.length;t++)if(s=mr[t],a=s.interleaved,a!==null){s.interleaved=null;var c=a.next,d=s.pending;if(d!==null){var h=d.next;d.next=c,a.next=h}s.pending=a}mr=null}return e}function Qd(e,t){do{var s=dt;try{if(zl(),Yo.current=Qo,Jo){for(var a=rt.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Jo=!1}if(pr=0,pt=ft=rt=null,zs=!1,$s=0,xi.current=null,s===null||s.return===null){mt=1,Hs=t,dt=null;break}e:{var d=e,h=s.return,y=s,b=t;if(t=yt,y.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var L=b,Q=y,Z=Q.tag;if((Q.mode&1)===0&&(Z===0||Z===11||Z===15)){var q=Q.alternate;q?(Q.updateQueue=q.updateQueue,Q.memoizedState=q.memoizedState,Q.lanes=q.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ue=Nd(h);if(ue!==null){ue.flags&=-257,bd(ue,h,y,d,t),ue.mode&1&&jd(d,L,t),t=ue,b=L;var pe=t.updateQueue;if(pe===null){var ge=new Set;ge.add(b),t.updateQueue=ge}else pe.add(b);break e}else{if((t&1)===0){jd(d,L,t),Ci();break e}b=Error(l(426))}}else if(et&&y.mode&1){var ut=Nd(h);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),bd(ut,h,y,d,t),Ll(Kr(b,y));break e}}d=b=Kr(b,y),mt!==4&&(mt=2),Gs===null?Gs=[d]:Gs.push(d),d=h;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var M=yd(d,b,t);Gu(d,M);break e;case 1:y=b;var C=d.type,F=d.stateNode;if((d.flags&128)===0&&(typeof C.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Qn===null||!Qn.has(F)))){d.flags|=65536,t&=-t,d.lanes|=t;var ee=wd(d,y,t);Gu(d,ee);break e}}d=d.return}while(d!==null)}ef(s)}catch(xe){t=xe,dt===s&&s!==null&&(dt=s=s.return);continue}break}while(!0)}function Xd(){var e=ra.current;return ra.current=Qo,e===null?Qo:e}function Ci(){(mt===0||mt===3||mt===2)&&(mt=4),gt===null||(gr&268435455)===0&&(sa&268435455)===0||er(gt,yt)}function ua(e,t){var s=ze;ze|=2;var a=Xd();(gt!==e||yt!==t)&&(_n=null,vr(e,t));do try{Qp();break}catch(c){Qd(e,c)}while(!0);if(zl(),ze=s,ra.current=a,dt!==null)throw Error(l(261));return gt=null,yt=0,mt}function Qp(){for(;dt!==null;)Zd(dt)}function Xp(){for(;dt!==null&&!bh();)Zd(dt)}function Zd(e){var t=rf(e.alternate,e,Ot);e.memoizedProps=e.pendingProps,t===null?ef(e):dt=t,xi.current=null}function ef(e){var t=e;do{var s=t.alternate;if(e=t.return,(t.flags&32768)===0){if(s=Wp(s,t,Ot),s!==null){dt=s;return}}else{if(s=Hp(s,t),s!==null){s.flags&=32767,dt=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{mt=6,dt=null;return}}if(t=t.sibling,t!==null){dt=t;return}dt=t=e}while(t!==null);mt===0&&(mt=5)}function yr(e,t,s){var a=We,c=Ht.transition;try{Ht.transition=null,We=1,Zp(e,t,s,a)}finally{Ht.transition=c,We=a}return null}function Zp(e,t,s,a){do Zr();while(Xn!==null);if((ze&6)!==0)throw Error(l(327));s=e.finishedWork;var c=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(l(177));e.callbackNode=null,e.callbackPriority=0;var d=s.lanes|s.childLanes;if(Mh(e,d),e===gt&&(dt=gt=null,yt=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||aa||(aa=!0,sf(ho,function(){return Zr(),null})),d=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||d){d=Ht.transition,Ht.transition=null;var h=We;We=1;var y=ze;ze|=4,xi.current=null,Yp(e,s),Wd(s,e),yp(Cl),jo=!!kl,Cl=kl=null,e.current=s,Jp(s),Sh(),ze=y,We=h,Ht.transition=d}else e.current=s;if(aa&&(aa=!1,Xn=e,la=c),d=e.pendingLanes,d===0&&(Qn=null),_h(s.stateNode),Tt(e,ct()),t!==null)for(a=e.onRecoverableError,s=0;s<t.length;s++)c=t[s],a(c.value,{componentStack:c.stack,digest:c.digest});if(oa)throw oa=!1,e=wi,wi=null,e;return(la&1)!==0&&e.tag!==0&&Zr(),d=e.pendingLanes,(d&1)!==0?e===ji?Ys++:(Ys=0,ji=e):Ys=0,Yn(),null}function Zr(){if(Xn!==null){var e=Bc(la),t=Ht.transition,s=We;try{if(Ht.transition=null,We=16>e?16:e,Xn===null)var a=!1;else{if(e=Xn,Xn=null,la=0,(ze&6)!==0)throw Error(l(331));var c=ze;for(ze|=4,he=e.current;he!==null;){var d=he,h=d.child;if((he.flags&16)!==0){var y=d.deletions;if(y!==null){for(var b=0;b<y.length;b++){var L=y[b];for(he=L;he!==null;){var Q=he;switch(Q.tag){case 0:case 11:case 15:Ws(8,Q,d)}var Z=Q.child;if(Z!==null)Z.return=Q,he=Z;else for(;he!==null;){Q=he;var q=Q.sibling,ue=Q.return;if(zd(Q),Q===L){he=null;break}if(q!==null){q.return=ue,he=q;break}he=ue}}}var pe=d.alternate;if(pe!==null){var ge=pe.child;if(ge!==null){pe.child=null;do{var ut=ge.sibling;ge.sibling=null,ge=ut}while(ge!==null)}}he=d}}if((d.subtreeFlags&2064)!==0&&h!==null)h.return=d,he=h;else e:for(;he!==null;){if(d=he,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:Ws(9,d,d.return)}var M=d.sibling;if(M!==null){M.return=d.return,he=M;break e}he=d.return}}var C=e.current;for(he=C;he!==null;){h=he;var F=h.child;if((h.subtreeFlags&2064)!==0&&F!==null)F.return=h,he=F;else e:for(h=C;he!==null;){if(y=he,(y.flags&2048)!==0)try{switch(y.tag){case 0:case 11:case 15:na(9,y)}}catch(xe){at(y,y.return,xe)}if(y===h){he=null;break e}var ee=y.sibling;if(ee!==null){ee.return=y.return,he=ee;break e}he=y.return}}if(ze=c,Yn(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(po,e)}catch{}a=!0}return a}finally{We=s,Ht.transition=t}}return!1}function tf(e,t,s){t=Kr(s,t),t=yd(e,t,1),e=Kn(e,t,1),t=Ct(),e!==null&&(xs(e,1,t),Tt(e,t))}function at(e,t,s){if(e.tag===3)tf(e,e,s);else for(;t!==null;){if(t.tag===3){tf(t,e,s);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Qn===null||!Qn.has(a))){e=Kr(s,e),e=wd(t,e,1),t=Kn(t,e,1),e=Ct(),t!==null&&(xs(t,1,e),Tt(t,e));break}}t=t.return}}function eg(e,t,s){var a=e.pingCache;a!==null&&a.delete(t),t=Ct(),e.pingedLanes|=e.suspendedLanes&s,gt===e&&(yt&s)===s&&(mt===4||mt===3&&(yt&130023424)===yt&&500>ct()-yi?vr(e,0):vi|=s),Tt(e,t)}function nf(e,t){t===0&&((e.mode&1)===0?t=1:(t=xo,xo<<=1,(xo&130023424)===0&&(xo=4194304)));var s=Ct();e=Sn(e,t),e!==null&&(xs(e,t,s),Tt(e,s))}function tg(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),nf(e,s)}function ng(e,t){var s=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(l(314))}a!==null&&a.delete(t),nf(e,s)}var rf;rf=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||_t.current)Pt=!0;else{if((e.lanes&s)===0&&(t.flags&128)===0)return Pt=!1,Vp(e,t,s);Pt=(e.flags&131072)!==0}else Pt=!1,et&&(t.flags&1048576)!==0&&Iu(t,zo,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;ea(e,t),e=t.pendingProps;var c=Ur(t,wt.current);Yr(t,s),c=ql(null,t,a,e,c,s);var d=Ql();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Et(a)?(d=!0,Io(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,Vl(t),c.updater=Xo,t.stateNode=c,c._reactInternals=t,ri(t,a,e,s),t=li(null,t,a,!0,d,s)):(t.tag=0,et&&d&&Ml(t),kt(null,t,c,s),t=t.child),t;case 16:a=t.elementType;e:{switch(ea(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=sg(a),e=Qt(a,e),c){case 0:t=ai(null,t,a,e,s);break e;case 1:t=Pd(null,t,a,e,s);break e;case 11:t=Sd(null,t,a,e,s);break e;case 14:t=kd(null,t,a,Qt(a.type,e),s);break e}throw Error(l(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Qt(a,c),ai(e,t,a,c,s);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Qt(a,c),Pd(e,t,a,c,s);case 3:e:{if(Ad(t),e===null)throw Error(l(387));a=t.pendingProps,d=t.memoizedState,c=d.element,Hu(e,t),Ho(t,a,null,s);var h=t.memoizedState;if(a=h.element,d.isDehydrated)if(d={element:a,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=Kr(Error(l(423)),t),t=Td(e,t,a,s,c);break e}else if(a!==c){c=Kr(Error(l(424)),t),t=Td(e,t,a,s,c);break e}else for(Lt=Wn(t.stateNode.containerInfo.firstChild),It=t,et=!0,qt=null,s=Vu(t,null,a,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Wr(),a===c){t=Cn(e,t,s);break e}kt(e,t,a,s)}t=t.child}return t;case 5:return Ju(t),e===null&&Il(t),a=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,h=c.children,_l(a,c)?h=null:d!==null&&_l(a,d)&&(t.flags|=32),Ed(e,t),kt(e,t,h,s),t.child;case 6:return e===null&&Il(t),null;case 13:return Rd(e,t,s);case 4:return Wl(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Hr(t,null,a,s):kt(e,t,a,s),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Qt(a,c),Sd(e,t,a,c,s);case 7:return kt(e,t,t.pendingProps,s),t.child;case 8:return kt(e,t,t.pendingProps.children,s),t.child;case 12:return kt(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,d=t.memoizedProps,h=c.value,Je(Bo,a._currentValue),a._currentValue=h,d!==null)if(Kt(d.value,h)){if(d.children===c.children&&!_t.current){t=Cn(e,t,s);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var y=d.dependencies;if(y!==null){h=d.child;for(var b=y.firstContext;b!==null;){if(b.context===a){if(d.tag===1){b=kn(-1,s&-s),b.tag=2;var L=d.updateQueue;if(L!==null){L=L.shared;var Q=L.pending;Q===null?b.next=b:(b.next=Q.next,Q.next=b),L.pending=b}}d.lanes|=s,b=d.alternate,b!==null&&(b.lanes|=s),Ul(d.return,s,t),y.lanes|=s;break}b=b.next}}else if(d.tag===10)h=d.type===t.type?null:d.child;else if(d.tag===18){if(h=d.return,h===null)throw Error(l(341));h.lanes|=s,y=h.alternate,y!==null&&(y.lanes|=s),Ul(h,s,t),h=d.sibling}else h=d.child;if(h!==null)h.return=d;else for(h=d;h!==null;){if(h===t){h=null;break}if(d=h.sibling,d!==null){d.return=h.return,h=d;break}h=h.return}d=h}kt(e,t,c.children,s),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,Yr(t,s),c=Vt(c),a=a(c),t.flags|=1,kt(e,t,a,s),t.child;case 14:return a=t.type,c=Qt(a,t.pendingProps),c=Qt(a.type,c),kd(e,t,a,c,s);case 15:return Cd(e,t,t.type,t.pendingProps,s);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Qt(a,c),ea(e,t),t.tag=1,Et(a)?(e=!0,Io(t)):e=!1,Yr(t,s),xd(t,a,c),ri(t,a,c,s),li(null,t,a,!0,e,s);case 19:return Dd(e,t,s);case 22:return _d(e,t,s)}throw Error(l(156,t.tag))};function sf(e,t){return Lc(e,t)}function rg(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,s,a){return new rg(e,t,s,a)}function _i(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sg(e){if(typeof e=="function")return _i(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ae)return 11;if(e===fe)return 14}return 2}function tr(e,t){var s=e.alternate;return s===null?(s=Gt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function da(e,t,s,a,c,d){var h=2;if(a=e,typeof e=="function")_i(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case B:return wr(s.children,c,d,t);case oe:h=8,c|=8;break;case P:return e=Gt(12,s,t,c|2),e.elementType=P,e.lanes=d,e;case V:return e=Gt(13,s,t,c),e.elementType=V,e.lanes=d,e;case me:return e=Gt(19,s,t,c),e.elementType=me,e.lanes=d,e;case ke:return fa(s,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H:h=10;break e;case se:h=9;break e;case ae:h=11;break e;case fe:h=14;break e;case ye:h=16,a=null;break e}throw Error(l(130,e==null?e:typeof e,""))}return t=Gt(h,s,t,c),t.elementType=e,t.type=a,t.lanes=d,t}function wr(e,t,s,a){return e=Gt(7,e,a,t),e.lanes=s,e}function fa(e,t,s,a){return e=Gt(22,e,a,t),e.elementType=ke,e.lanes=s,e.stateNode={isHidden:!1},e}function Ei(e,t,s){return e=Gt(6,e,null,t),e.lanes=s,e}function Pi(e,t,s){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function og(e,t,s,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nl(0),this.expirationTimes=nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Ai(e,t,s,a,c,d,h,y,b){return e=new og(e,t,s,y,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=Gt(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vl(d),e}function ag(e,t,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:S,key:a==null?null:""+a,children:e,containerInfo:t,implementation:s}}function of(e){if(!e)return Gn;e=e._reactInternals;e:{if(be(e)!==e||e.tag!==1)throw Error(l(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(l(171))}if(e.tag===1){var s=e.type;if(Et(s))return Mu(e,s,t)}return t}function af(e,t,s,a,c,d,h,y,b){return e=Ai(s,a,!0,e,c,d,h,y,b),e.context=of(null),s=e.current,a=Ct(),c=Zn(s),d=kn(a,c),d.callback=t??null,Kn(s,d,c),e.current.lanes=c,xs(e,c,a),Tt(e,a),e}function ma(e,t,s,a){var c=t.current,d=Ct(),h=Zn(c);return s=of(s),t.context===null?t.context=s:t.pendingContext=s,t=kn(d,h),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Kn(c,t,h),e!==null&&(en(e,c,h,d),Wo(e,c,h)),h}function ha(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Ti(e,t){lf(e,t),(e=e.alternate)&&lf(e,t)}function lg(){return null}var cf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ri(e){this._internalRoot=e}pa.prototype.render=Ri.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));ma(e,t,null,null)},pa.prototype.unmount=Ri.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xr(function(){ma(null,e,null,null)}),t[wn]=null}};function pa(e){this._internalRoot=e}pa.prototype.unstable_scheduleHydration=function(e){if(e){var t=Hc();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Un.length&&t!==0&&t<Un[s].priority;s++);Un.splice(s,0,e),s===0&&Jc(e)}};function Mi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ga(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uf(){}function ig(e,t,s,a,c){if(c){if(typeof a=="function"){var d=a;a=function(){var L=ha(h);d.call(L)}}var h=af(t,a,e,0,null,!1,!1,"",uf);return e._reactRootContainer=h,e[wn]=h.current,Ts(e.nodeType===8?e.parentNode:e),xr(),h}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var y=a;a=function(){var L=ha(b);y.call(L)}}var b=Ai(e,0,!1,null,null,!1,!1,"",uf);return e._reactRootContainer=b,e[wn]=b.current,Ts(e.nodeType===8?e.parentNode:e),xr(function(){ma(t,b,s,a)}),b}function xa(e,t,s,a,c){var d=s._reactRootContainer;if(d){var h=d;if(typeof c=="function"){var y=c;c=function(){var b=ha(h);y.call(b)}}ma(t,h,e,c)}else h=ig(s,t,e,c,a);return ha(h)}Vc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=gs(t.pendingLanes);s!==0&&(rl(t,s|1),Tt(t,ct()),(ze&6)===0&&(Xr=ct()+500,Yn()))}break;case 13:xr(function(){var a=Sn(e,1);if(a!==null){var c=Ct();en(a,e,1,c)}}),Ti(e,1)}},sl=function(e){if(e.tag===13){var t=Sn(e,134217728);if(t!==null){var s=Ct();en(t,e,134217728,s)}Ti(e,134217728)}},Wc=function(e){if(e.tag===13){var t=Zn(e),s=Sn(e,t);if(s!==null){var a=Ct();en(s,e,t,a)}Ti(e,t)}},Hc=function(){return We},Gc=function(e,t){var s=We;try{return We=e,t()}finally{We=s}},hs=function(e,t,s){switch(t){case"input":if(Fn(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var c=Do(a);if(!c)throw Error(l(90));Mn(a),Fn(a,c)}}}break;case"textarea":Ne(e,s);break;case"select":t=s.value,t!=null&&D(e,!!s.multiple,t,!1)}},fo=Si,mo=xr;var cg={usingClientEntryPoint:!1,Events:[Ds,zr,Do,co,uo,Si]},Js={findFiberByHostInstance:cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ug={bundleType:Js.bundleType,version:Js.version,rendererPackageName:Js.rendererPackageName,rendererConfig:Js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Fc(e),e===null?null:e.stateNode},findFiberByHostInstance:Js.findFiberByHostInstance||lg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var va=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!va.isDisabled&&va.supportsFiber)try{po=va.inject(ug),an=va}catch{}}return Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cg,Rt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mi(t))throw Error(l(200));return ag(e,t,null,s)},Rt.createRoot=function(e,t){if(!Mi(e))throw Error(l(299));var s=!1,a="",c=cf;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=Ai(e,1,!1,null,null,s,!1,a,c),e[wn]=t.current,Ts(e.nodeType===8?e.parentNode:e),new Ri(t)},Rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=Fc(t),e=e===null?null:e.stateNode,e},Rt.flushSync=function(e){return xr(e)},Rt.hydrate=function(e,t,s){if(!ga(t))throw Error(l(200));return xa(null,e,t,!0,s)},Rt.hydrateRoot=function(e,t,s){if(!Mi(e))throw Error(l(405));var a=s!=null&&s.hydratedSources||null,c=!1,d="",h=cf;if(s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(h=s.onRecoverableError)),t=af(t,null,e,1,s??null,c,!1,d,h),e[wn]=t.current,Ts(e),a)for(e=0;e<a.length;e++)s=a[e],c=s._getVersion,c=c(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,c]:t.mutableSourceEagerHydrationData.push(s,c);return new pa(t)},Rt.render=function(e,t,s){if(!ga(t))throw Error(l(200));return xa(null,e,t,!1,s)},Rt.unmountComponentAtNode=function(e){if(!ga(e))throw Error(l(40));return e._reactRootContainer?(xr(function(){xa(null,null,e,!1,function(){e._reactRootContainer=null,e[wn]=null})}),!0):!1},Rt.unstable_batchedUpdates=Si,Rt.unstable_renderSubtreeIntoContainer=function(e,t,s,a){if(!ga(s))throw Error(l(200));if(e==null||e._reactInternals===void 0)throw Error(l(38));return xa(e,t,s,!1,a)},Rt.version="18.3.1-next-f1338f8080-20240426",Rt}var vf;function em(){if(vf)return Ii.exports;vf=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(o){console.error(o)}}return r(),Ii.exports=vg(),Ii.exports}var yf;function yg(){if(yf)return ya;yf=1;var r=em();return ya.createRoot=r.createRoot,ya.hydrateRoot=r.hydrateRoot,ya}var wg=yg();const Ta="v8.0.9-stable-20251107",zi="aurora_nuclear_clear";console.log("[NUCLEAR]  Starting NUCLEAR session cleaner...");console.log("[NUCLEAR] Version:",Ta);try{if(localStorage.getItem(zi)!==Ta){console.log("[NUCLEAR]  PERFORMING NUCLEAR CLEAR "),console.log("[NUCLEAR] This will clear ALL localStorage and sessionStorage"),console.log("[NUCLEAR] Users will need to log in again");const o=[];for(let l=0;l<localStorage.length;l++){const i=localStorage.key(l);i&&o.push(i)}console.log("[NUCLEAR] Found",o.length,"localStorage keys"),console.log("[NUCLEAR] Keys:",o.join(", ")),localStorage.clear(),sessionStorage.clear();try{const l=[];for(let i=0;i<localStorage.length;i++){const u=localStorage.key(i);u&&l.push(u)}l.forEach(i=>{try{localStorage.removeItem(i)}catch{console.error("[NUCLEAR] Could not remove key:",i)}})}catch(l){console.error("[NUCLEAR] Error in second pass:",l)}if(localStorage.setItem(zi,Ta),localStorage.setItem("aurora_migration_v2_direct_api","2024-11-01-direct-api-v2"),sessionStorage.setItem("nuclear_clear_in_progress","true"),window.indexedDB)try{indexedDB.databases().then(l=>{l.forEach(i=>{i.name&&i.name.includes("supabase")&&(console.log("[NUCLEAR] Deleting IndexedDB:",i.name),indexedDB.deleteDatabase(i.name))})})}catch{}console.log("[NUCLEAR]  NUCLEAR CLEAR COMPLETE"),console.log("[NUCLEAR] All auth data has been wiped"),console.log("[NUCLEAR] Application will start fresh"),console.log(`
`),console.log("%c","color: #00D4A6; font-weight: bold;"),console.log("%c   AuroraLink Updated Successfully            ","color: #00D4A6; font-weight: bold;"),console.log("%c  Your session has been refreshed               ","color: #00D4A6;"),console.log("%c  Please log in to continue                     ","color: #00D4A6;"),console.log("%c","color: #00D4A6; font-weight: bold;"),console.log(`
`),sessionStorage.setItem("nuclear_clear_performed","true")}else console.log("[NUCLEAR]  Nuclear clear already performed for this version"),console.log("[NUCLEAR] Skipping clear")}catch(r){console.error("[NUCLEAR] Error during nuclear clear:",r);try{localStorage.clear(),sessionStorage.clear(),localStorage.setItem(zi,Ta)}catch(o){console.error("[NUCLEAR] Failed to clear storage:",o)}}console.log("[NUCLEAR]  Nuclear session cleaner finished");function jg(){if(typeof window>"u")return;const r={title:"color: #0057FF; font-size: 24px; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,87,255,0.3);",subtitle:"color: #00D4A6; font-size: 14px; font-weight: 600;",info:"color: #666; font-size: 12px;",success:"color: #00D4A6; font-size: 12px; font-weight: bold;"};console.log("%c AuroraLink",r.title),console.log("%cProduction Build v8.0.5",r.subtitle),console.log("%c",r.info),console.log("%c Zero external dependencies",r.success),console.log("%c Direct API authentication",r.success),console.log("%c No CDN dependencies",r.success),console.log("%c Production ready",r.success),console.log("%c",r.info),console.log("%c Console Commands Available:",r.info),console.log("%c   window.forceReauth() - Force fresh login",r.info),console.log("%c   window.checkTokenCache() - Check token status",r.info),console.log("%c   window.emergencyClearSession() - Emergency clear",r.info),console.log("%c",r.info)}typeof window<"u"&&setTimeout(jg,100);var m=ic();const Ng=Zf(m),tm=fg({__proto__:null,default:Ng},[m]),bg=({...r})=>null,le=(r,o)=>{const l=({size:i=24,className:u="",...f})=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,...f,children:r});return l.displayName=o,l},sr=le(n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),n.jsx("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),"AlertCircle");le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),n.jsx("path",{d:"M12 9v4"}),n.jsx("path",{d:"M12 17h.01"})]}),"AlertTriangle");const ro=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"m12 19-7-7 7-7"}),n.jsx("path",{d:"M19 12H5"})]}),"ArrowLeft"),Qi=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M5 12h14"}),n.jsx("path",{d:"m12 5 7 7-7 7"})]}),"ArrowRight"),Sg=le(n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"m4.9 4.9 14.2 14.2"})]}),"Ban"),kg=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),n.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),"Bell"),Cg=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"m8 2 1.88 1.88"}),n.jsx("path",{d:"M14.12 3.88 16 2"}),n.jsx("path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1"}),n.jsx("path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6"}),n.jsx("path",{d:"M12 20v-9"}),n.jsx("path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5"}),n.jsx("path",{d:"M6 13H2"}),n.jsx("path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4"}),n.jsx("path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4"}),n.jsx("path",{d:"M22 13h-4"}),n.jsx("path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4"})]}),"Bug"),nm=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),n.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),"Camera"),Sr=le(n.jsx("polyline",{points:"20 6 9 17 4 12"}),"Check"),Nr=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M18 6 7 17l-5-5"}),n.jsx("path",{d:"m22 10-7.5 7.5L13 16"})]}),"CheckCheck"),wa=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),n.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),"CheckCircle");le(n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"m9 12 2 2 4-4"})]}),"CheckCircle2");const _g=le(n.jsx("path",{d:"m6 9 6 6 6-6"}),"ChevronDown");le(n.jsx("path",{d:"m15 18-6-6 6-6"}),"ChevronLeft");const ja=le(n.jsx("path",{d:"m9 18 6-6-6-6"}),"ChevronRight"),Eg=le(n.jsx("path",{d:"m18 15-6-6-6 6"}),"ChevronUp");le(n.jsx("circle",{cx:"12",cy:"12",r:"10"}),"Circle");le(n.jsx("circle",{cx:"12",cy:"12",r:"10"}),"CircleIcon");const Xi=le(n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Clock");le(n.jsxs(n.Fragment,{children:[n.jsx("polyline",{points:"16 18 22 12 16 6"}),n.jsx("polyline",{points:"8 6 2 12 8 18"})]}),"Code");le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M5.5 8.5 9 12l-3.5 3.5L2 12l3.5-3.5Z"}),n.jsx("path",{d:"m12 2 3.5 3.5L12 9 8.5 5.5 12 2Z"}),n.jsx("path",{d:"M18.5 8.5 22 12l-3.5 3.5L15 12l3.5-3.5Z"}),n.jsx("path",{d:"m12 15 3.5 3.5L12 22l-3.5-3.5L12 15Z"})]}),"Component");const Pg=le(n.jsxs(n.Fragment,{children:[n.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),n.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),"Copy");le(n.jsxs(n.Fragment,{children:[n.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),n.jsx("path",{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"}),n.jsx("path",{d:"M3 12c0 1.66 4 3 9 3s9-1.34 9-3"})]}),"Database");const Ag=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n.jsx("polyline",{points:"7 10 12 15 17 10"}),n.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),"Download"),Zi=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),n.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Eye");le(n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),n.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),"Globe");le(n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"9",cy:"12",r:"1"}),n.jsx("circle",{cx:"9",cy:"5",r:"1"}),n.jsx("circle",{cx:"9",cy:"19",r:"1"}),n.jsx("circle",{cx:"15",cy:"12",r:"1"}),n.jsx("circle",{cx:"15",cy:"5",r:"1"}),n.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),"GripVerticalIcon");const Tg=le(n.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"}),"Heart"),Rg=le(n.jsxs(n.Fragment,{children:[n.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),n.jsx("circle",{cx:"9",cy:"9",r:"2"}),n.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),"Image");le(n.jsxs(n.Fragment,{children:[n.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),n.jsx("circle",{cx:"9",cy:"9",r:"2"}),n.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),"ImageIcon");const rm=le(n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M12 16v-4"}),n.jsx("path",{d:"M12 8h.01"})]}),"Info"),Mg=le(n.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}),"Loader"),sm=Mg,Dg=le(n.jsxs(n.Fragment,{children:[n.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),n.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),"Lock"),Fg=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),n.jsx("polyline",{points:"16 17 21 12 16 7"}),n.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),"LogOut"),om=le(n.jsxs(n.Fragment,{children:[n.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),n.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),"Mail"),Ig=le(n.jsxs(n.Fragment,{children:[n.jsx("polyline",{points:"15 3 21 3 21 9"}),n.jsx("polyline",{points:"9 21 3 21 3 15"}),n.jsx("line",{x1:"21",x2:"14",y1:"3",y2:"10"}),n.jsx("line",{x1:"3",x2:"10",y1:"21",y2:"14"})]}),"Maximize2"),Ba=le(n.jsx("path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"}),"MessageCircle"),kr=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}),n.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),n.jsx("line",{x1:"12",x2:"12",y1:"19",y2:"22"})]}),"Mic"),wf=le(n.jsxs(n.Fragment,{children:[n.jsx("line",{x1:"2",x2:"22",y1:"2",y2:"22"}),n.jsx("path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2"}),n.jsx("path",{d:"M5 10v2a7 7 0 0 0 12 5"}),n.jsx("path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33"}),n.jsx("path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12"}),n.jsx("line",{x1:"12",x2:"12",y1:"19",y2:"22"})]}),"MicOff"),Lg=le(n.jsxs(n.Fragment,{children:[n.jsx("polyline",{points:"4 14 10 14 10 20"}),n.jsx("polyline",{points:"20 10 14 10 14 4"}),n.jsx("line",{x1:"14",x2:"21",y1:"10",y2:"3"}),n.jsx("line",{x1:"3",x2:"10",y1:"21",y2:"14"})]}),"Minimize2");le(n.jsx("path",{d:"M5 12h14"}),"MinusIcon");le(n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"1"}),n.jsx("circle",{cx:"19",cy:"12",r:"1"}),n.jsx("circle",{cx:"5",cy:"12",r:"1"})]}),"MoreHorizontal");const cc=le(n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"1"}),n.jsx("circle",{cx:"12",cy:"5",r:"1"}),n.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),"MoreVertical");le(n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"13.5",cy:"6.5",r:".5"}),n.jsx("circle",{cx:"17.5",cy:"10.5",r:".5"}),n.jsx("circle",{cx:"8.5",cy:"7.5",r:".5"}),n.jsx("circle",{cx:"6.5",cy:"12.5",r:".5"}),n.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"})]}),"Palette");le(n.jsxs(n.Fragment,{children:[n.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),n.jsx("path",{d:"M9 3v18"})]}),"PanelLeftIcon");const Og=le(n.jsx(n.Fragment,{children:n.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),"Paperclip"),zg=le(n.jsxs(n.Fragment,{children:[n.jsx("rect",{width:"4",height:"16",x:"6",y:"4"}),n.jsx("rect",{width:"4",height:"16",x:"14",y:"4"})]}),"Pause"),pn=le(n.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}),"Phone"),ec=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"}),n.jsx("line",{x1:"23",x2:"1",y1:"1",y2:"23"})]}),"PhoneOff"),$g=le(n.jsx("polygon",{points:"5 3 19 12 5 21 5 3"}),"Play"),Zs=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M5 12h14"}),n.jsx("path",{d:"M12 5v14"})]}),"Plus"),Ra=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),n.jsx("path",{d:"M21 3v5h-5"}),n.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),n.jsx("path",{d:"M8 16H3v5"})]}),"RefreshCw"),jf=le(n.jsxs(n.Fragment,{children:[n.jsx("polyline",{points:"9 17 4 12 9 7"}),n.jsx("path",{d:"M20 18v-2a4 4 0 0 0-4-4H4"})]}),"Reply"),Va=le(n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"11",cy:"11",r:"8"}),n.jsx("path",{d:"m21 21-4.3-4.3"})]}),"Search"),Wa=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"m22 2-7 20-4-9-9-4Z"}),n.jsx("path",{d:"M22 2 11 13"})]}),"Send"),am=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),n.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Settings"),Ug=le(n.jsx("path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}),"Shield");le(n.jsxs(n.Fragment,{children:[n.jsx("rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2"}),n.jsx("path",{d:"M12 18h.01"})]}),"Smartphone");const Bg=le(n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),n.jsx("line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}),n.jsx("line",{x1:"15",x2:"15.01",y1:"9",y2:"9"})]}),"Smile"),Vg=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"}),n.jsx("path",{d:"M5 3v4"}),n.jsx("path",{d:"M19 17v4"}),n.jsx("path",{d:"M3 5h4"}),n.jsx("path",{d:"M17 19h4"})]}),"Sparkles");le(n.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}),"Star");const lr=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M3 6h18"}),n.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),n.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),n.jsx("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),n.jsx("line",{x1:"14",x2:"14",y1:"11",y2:"17"})]}),"Trash2"),Wg=le(n.jsxs(n.Fragment,{children:[n.jsx("polyline",{points:"4 7 4 4 20 4 20 7"}),n.jsx("line",{x1:"9",x2:"15",y1:"20",y2:"20"}),n.jsx("line",{x1:"12",x2:"12",y1:"4",y2:"20"})]}),"Type");le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n.jsx("polyline",{points:"17 8 12 3 7 8"}),n.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),"Upload");const uc=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"User"),dc=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"9",cy:"7",r:"4"}),n.jsx("line",{x1:"19",x2:"19",y1:"8",y2:"14"}),n.jsx("line",{x1:"22",x2:"16",y1:"11",y2:"11"})]}),"UserPlus"),Hg=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"9",cy:"7",r:"4"}),n.jsx("line",{x1:"22",x2:"16",y1:"11",y2:"11"})]}),"UserMinus"),Nf=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"9",cy:"7",r:"4"}),n.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),n.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),"Users"),Gg=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"9",cy:"7",r:"4"}),n.jsx("line",{x1:"17",x2:"22",y1:"8",y2:"13"}),n.jsx("line",{x1:"22",x2:"17",y1:"8",y2:"13"})]}),"UserX"),ls=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5"}),n.jsx("rect",{x:"2",y:"6",width:"14",height:"12",rx:"2"})]}),"Video"),Yg=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M10.66 5H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 6.87v10.26a.5.5 0 0 1-.752.432L16 14.5V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2.34"}),n.jsx("line",{x1:"2",x2:"22",y1:"2",y2:"22"})]}),"VideoOff"),Jg=le(n.jsxs(n.Fragment,{children:[n.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),n.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"}),n.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]}),"Volume2"),Tn=le(n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M18 6 6 18"}),n.jsx("path",{d:"m6 6 12 12"})]}),"X"),Kg=le(n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"m15 9-6 6"}),n.jsx("path",{d:"m9 9 6 6"})]}),"XCircle"),qg=Tn,Qg=le(n.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}),"Zap");function Xg({onComplete:r,duration:o=2500}){const[l,i]=m.useState(0),[u,f]=m.useState(!1);return m.useEffect(()=>{f(!0);const g=setInterval(()=>{i(w=>w>=100?(clearInterval(g),100):w+2)},o/50),p=setTimeout(()=>{r?.()},o);return()=>{clearInterval(g),clearTimeout(p)}},[r,o]),n.jsxs("div",{className:"h-screen w-full flex items-center justify-center relative overflow-hidden bg-gradient-to-br from-[#0057FF] via-[#0047DD] to-[#00D4A6] px-4 sm:px-6 pt-safe pb-safe",children:[n.jsx("div",{className:"absolute inset-0",children:n.jsx("div",{className:"absolute inset-0 animate-pulse",style:{background:"radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%)",animationDuration:"4s"}})}),n.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(15)].map((g,p)=>n.jsx("div",{className:"absolute rounded-full bg-white/10 backdrop-blur-sm animate-float",style:{width:Math.random()*80+20,height:Math.random()*80+20,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`,animationDuration:`${Math.random()*8+10}s`}},p))}),n.jsxs("div",{className:"relative z-10 flex flex-col items-center w-full max-w-md",children:[n.jsxs("div",{className:`relative mb-8 sm:mb-10 transition-all duration-1000 ${u?"scale-100 rotate-0 opacity-100":"scale-0 -rotate-180 opacity-0"}`,children:[n.jsx("div",{className:"absolute inset-0 -m-6",children:n.jsx("div",{className:"w-44 h-44 rounded-full border-3 border-white/40 animate-ping",style:{animationDuration:"2s"}})}),n.jsx("div",{className:"absolute inset-0 -m-3",children:n.jsx("div",{className:"w-38 h-38 rounded-full border-2 border-white/30 animate-ping",style:{animationDuration:"2s",animationDelay:"0.3s"}})}),n.jsxs("div",{className:"relative w-24 h-24 xs:w-28 xs:h-28 sm:w-32 sm:h-32 rounded-full bg-white shadow-2xl flex items-center justify-center ring-4 xs:ring-6 sm:ring-8 ring-white/30",children:[n.jsx("div",{className:"absolute inset-0 rounded-full animate-spin",style:{background:"conic-gradient(from 0deg, transparent, rgba(255,255,255,0.3), transparent)",animationDuration:"20s"}}),n.jsx("div",{className:"relative animate-pulse",style:{animationDuration:"2s"},children:n.jsx(Ba,{className:"w-12 h-12 xs:w-14 xs:h-14 sm:w-16 sm:h-16 text-primary",strokeWidth:2.5})})]}),n.jsx("div",{className:"absolute -top-2 -right-2 xs:-top-3 xs:-right-3 sm:-top-4 sm:-right-4 animate-spin",style:{animationDuration:"3s"},children:n.jsx(Vg,{className:"w-6 h-6 xs:w-7 xs:h-7 sm:w-8 sm:h-8 text-white",fill:"white"})})]}),n.jsxs("div",{className:`text-center mb-12 sm:mb-16 transition-all duration-800 delay-500 ${u?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}`,children:[n.jsx("h1",{className:"text-4xl xs:text-5xl sm:text-6xl md:text-7xl font-bold text-white mb-2 sm:mb-3 tracking-tight animate-glow",children:"AuroraLink"}),n.jsx("p",{className:`text-white/90 text-base xs:text-lg sm:text-xl font-medium tracking-wide px-4 transition-opacity delay-800 ${u?"opacity-100":"opacity-0"}`,children:"Connect. Communicate. Collaborate."})]}),n.jsxs("div",{className:`w-48 xs:w-56 sm:w-64 space-y-2.5 sm:space-y-3 px-4 transition-all delay-1000 ${u?"opacity-100":"opacity-0"}`,children:[n.jsx("div",{className:"h-1.5 bg-white/20 rounded-full overflow-hidden backdrop-blur-sm",children:n.jsx("div",{className:"h-full bg-white rounded-full shadow-lg shadow-white/50 transition-all duration-300",style:{width:`${l}%`}})}),n.jsx("p",{className:"text-center text-white/70 text-sm animate-pulse",children:"Loading..."})]})]}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-black/10 to-transparent"}),n.jsx("style",{children:`
        @keyframes float {
          0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.3; }
          50% { transform: translate(30px, -40px) scale(1.2); opacity: 0.6; }
        }
        
        @keyframes glow {
          0%, 100% { text-shadow: 0 0 20px rgba(255,255,255,0.5); }
          50% { text-shadow: 0 0 40px rgba(255,255,255,0.8); }
        }
        
        .animate-float {
          animation: float ease-in-out infinite;
        }
        
        .animate-glow {
          animation: glow 2s ease-in-out infinite;
        }
      `})]})}const fc=m.forwardRef(({children:r,...o},l)=>m.isValidElement(r)?m.cloneElement(r,{...o,...r.props,ref:l}):m.Children.count(r)>1?m.Children.only(null):null);fc.displayName="Slot";function Ha(r,o){return l=>{const{className:i,...u}=l||{},f=[r];return o?.variants&&u&&Object.keys(o.variants).forEach(g=>{const p=u[g]||o?.defaultVariants?.[g];p&&o.variants[g][p]&&f.push(o.variants[g][p])}),i&&f.push(i),f.filter(Boolean).join(" ")}}function lm(r){let o="";if(typeof r=="string"||typeof r=="number")o+=r;else if(typeof r=="object")if(Array.isArray(r)){for(let l=0;l<r.length;l++)if(r[l]){const i=lm(r[l]);i&&(o&&(o+=" "),o+=i)}}else for(const l in r)r[l]&&(o&&(o+=" "),o+=l);return o}function Zg(...r){let o=0,l,i="";for(;o<r.length;)if(l=r[o++]){const u=lm(l);u&&(i&&(i+=" "),i+=u)}return i}function ex(...r){const l=r.filter(Boolean).join(" ").split(/\s+/).filter(Boolean),i=new Map;for(const u of l){const f=u.match(/^([a-z]+(?:-[a-z]+)?)-/),g=f?f[1]:u;i.set(g+":"+u,u)}return Array.from(i.values()).join(" ")}function Pe(...r){return ex(Zg(...r))}const mc=Ha("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Me=m.forwardRef(({className:r,variant:o,size:l,asChild:i=!1,...u},f)=>{const g=i?fc:"button";return n.jsx(g,{ref:f,"data-slot":"button",className:Pe(mc({variant:o,size:l,className:r})),...u})});Me.displayName="Button";const Na=[{icon:Ba,title:"Welcome to AuroraLink",description:"Connect with friends and family through secure, encrypted messaging, voice and video calls. Your conversations, always within reach.",gradient:"from-primary via-primary/80 to-accent",features:["Instant Messaging","Voice & Video Calls","Media Sharing"]},{icon:Ug,title:"Private & Secure",description:"Your messages are protected with end-to-end encryption. Only you and your recipients can read them. Your privacy is our priority.",gradient:"from-accent via-accent/80 to-primary",features:["End-to-End Encryption","Privacy First","Secure Storage"]},{icon:Qg,title:"Fast & Reliable",description:"Send messages, share media, and make calls instantly with real-time delivery and notifications. Lightning-fast communication.",gradient:"from-primary via-accent/60 to-primary",features:["Real-Time Sync","Instant Delivery","Always Connected"]}];function tx(){const r=Array.from({length:20},(o,l)=>({id:l,size:Math.random()*60+20,x:Math.random()*100,y:Math.random()*100,duration:Math.random()*10+15,delay:Math.random()*5}));return n.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:r.map(o=>n.jsx("div",{className:"absolute rounded-full bg-gradient-to-br from-primary/10 to-accent/10 backdrop-blur-sm animate-float",style:{width:o.size,height:o.size,left:`${o.x}%`,top:`${o.y}%`,animationDuration:`${o.duration}s`,animationDelay:`${o.delay}s`}},o.id))})}function nx({onComplete:r}){const[o,l]=m.useState(0),[i,u]=m.useState(1),f=()=>{o<Na.length-1?(u(1),l(o+1)):r()},g=()=>{o>0&&(u(-1),l(o-1))},p=N=>{u(N>o?1:-1),l(N)},w=Na[o],v=w.icon;return n.jsxs("div",{className:"h-screen w-full flex flex-col relative overflow-hidden bg-background",children:[n.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${w.gradient} transition-all duration-1000`}),n.jsx(tx,{}),n.jsx("div",{className:"absolute top-4 right-4 sm:top-6 sm:right-6 z-20",children:n.jsx(Me,{variant:"ghost",onClick:r,className:"text-white/90 hover:text-white hover:bg-white/10 backdrop-blur-sm px-4 py-2 text-sm sm:text-base",children:"Skip"})}),n.jsxs("div",{className:"relative z-10 flex-1 flex flex-col items-center justify-center px-6 sm:px-8 md:px-12 pt-16 pb-8",children:[n.jsx("div",{className:"mb-8 sm:mb-10 transition-all duration-500",style:{opacity:1,transform:`translateX(${i*0}px) scale(1)`},children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 -m-8 sm:-m-10",children:n.jsx("div",{className:"w-full h-full rounded-full border-4 border-white/30 animate-ping",style:{animationDuration:"2s"}})}),n.jsx("div",{className:"relative w-20 h-20 xs:w-24 xs:h-24 sm:w-28 sm:h-28 md:w-32 md:h-32 rounded-full bg-white/95 shadow-2xl flex items-center justify-center ring-6 sm:ring-8 ring-white/40 backdrop-blur-sm",children:n.jsx(v,{className:"w-10 h-10 xs:w-12 xs:h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 text-primary",strokeWidth:2})})]})}),n.jsxs("div",{className:"text-center max-w-md lg:max-w-lg space-y-4 sm:space-y-6 transition-all duration-500",style:{opacity:1,transform:`translateX(${i*0}px)`},children:[n.jsx("h1",{className:"text-3xl xs:text-4xl sm:text-5xl md:text-6xl font-bold text-white tracking-tight px-2",children:w.title}),n.jsx("p",{className:"text-base xs:text-lg sm:text-xl text-white/90 leading-relaxed px-4 sm:px-0",children:w.description}),n.jsx("div",{className:"flex flex-col gap-3 sm:gap-4 pt-4 sm:pt-6",children:w.features.map((N,k)=>n.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-md rounded-lg px-4 sm:px-5 py-3 sm:py-3.5 border border-white/20 transition-all duration-300",style:{animationDelay:`${k*100}ms`},children:[n.jsx("div",{className:"flex-shrink-0 w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center",children:n.jsx(Sr,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white",strokeWidth:3})}),n.jsx("span",{className:"text-white font-medium text-sm xs:text-base sm:text-lg",children:N})]},k))})]})]}),n.jsxs("div",{className:"relative z-10 px-6 sm:px-8 md:px-12 pb-8 sm:pb-10 space-y-6 sm:space-y-8",children:[n.jsx("div",{className:"flex justify-center gap-2 sm:gap-3",children:Na.map((N,k)=>n.jsx("button",{onClick:()=>p(k),className:`h-2 rounded-full transition-all duration-300 ${k===o?"w-8 sm:w-10 bg-white":"w-2 bg-white/40 hover:bg-white/60"}`,"aria-label":`Go to slide ${k+1}`},k))}),n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsx(Me,{variant:"ghost",onClick:g,disabled:o===0,className:"text-white/90 hover:text-white hover:bg-white/10 backdrop-blur-sm disabled:opacity-0 disabled:pointer-events-none px-4 sm:px-6 py-2 sm:py-3 text-sm sm:text-base",children:"Previous"}),n.jsxs(Me,{onClick:f,size:"lg",className:"bg-white hover:bg-white/90 shadow-xl hover:shadow-2xl transition-all duration-300 gap-2 px-6 sm:px-8 py-2 sm:py-3 text-sm sm:text-base font-semibold",children:[n.jsx("span",{className:"text-[#0057FF]",children:o===Na.length-1?"Get Started":"Next"}),n.jsx(Qi,{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#0057FF]"})]})]})]}),n.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes float {
            0%, 100% {
              transform: translate(0, 0) scale(1);
              opacity: 0.3;
            }
            50% {
              transform: translate(20px, -30px) scale(1.1);
              opacity: 0.6;
            }
          }

          .animate-float {
            animation: float ease-in-out infinite;
          }
        `}})]})}const hn=m.forwardRef(({className:r,type:o,...l},i)=>n.jsx("input",{ref:i,type:o,"data-slot":"input",className:Pe("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 aria-invalid:border-destructive",r),...l}));hn.displayName="Input";const rx=Ha("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ss=m.forwardRef(({className:r,...o},l)=>n.jsx("label",{ref:l,className:Pe(rx(),r),...o}));ss.displayName="Label";const sx=Ha("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function im({className:r,variant:o,...l}){return n.jsx("div",{"data-slot":"alert",role:"alert",className:Pe(sx({variant:o}),r),...l})}function ox({className:r,...o}){return n.jsx("div",{"data-slot":"alert-title",className:Pe("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",r),...o})}function cm({className:r,...o}){return n.jsx("div",{"data-slot":"alert-description",className:Pe("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",r),...o})}const so="aavljgcuaajnimeohelq",Er="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFhdmxqZ2N1YWFqbmltZW9oZWxxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA5OTE1ODUsImV4cCI6MjA3NjU2NzU4NX0.4cfyCfXlVLYmlLwa5Y7aGj0-BuVF4RDTpNooURWZXAo",ax=`https://${so}.supabase.co`,us=`${ax}/auth/v1`,hc=`sb-${so}-auth-token`,pc={getItem:r=>localStorage.getItem(r),setItem:(r,o)=>localStorage.setItem(r,o),removeItem:r=>localStorage.removeItem(r)},Ma=[];function or(r,o){Ma.forEach(l=>{try{l(r,o)}catch(i){console.error("[Auth] Listener error:",i)}})}function gc(){try{const r=pc.getItem(hc);if(!r)return null;const o=JSON.parse(r);return!o.access_token||!o.refresh_token?null:o}catch(r){return console.error("[Session] Parse error:",r),null}}function Ga(r){try{pc.setItem(hc,JSON.stringify(r))}catch(o){console.error("[Session] Save error:",o)}}function fn(){pc.removeItem(hc),localStorage.clear()}async function lx(r,o,l){try{const i=await fetch(`${us}/signup`,{method:"POST",headers:{"Content-Type":"application/json",apikey:Er},body:JSON.stringify({email:r,password:o,data:l||{}})}),u=await i.json();if(!i.ok)return{session:null,error:{message:u.message||"Sign up failed",status:i.status}};if(u.access_token&&u.refresh_token&&u.user){const f={access_token:u.access_token,refresh_token:u.refresh_token,expires_at:u.expires_at||0,expires_in:u.expires_in||0,token_type:u.token_type||"bearer",user:u.user};return Ga(f),or("SIGNED_IN",f),{session:f,error:null}}return{session:null,error:{message:"Invalid response"}}}catch(i){return{session:null,error:{message:i instanceof Error?i.message:"Network error"}}}}async function ix(r,o){try{const l=await fetch(`${us}/token?grant_type=password`,{method:"POST",headers:{"Content-Type":"application/json",apikey:Er},body:JSON.stringify({email:r,password:o})}),i=await l.json();if(!l.ok)return console.error("[Auth] Sign in failed:",{status:l.status,statusText:l.statusText,data:i,message:i.message,error:i.error,error_description:i.error_description,msg:i.msg}),{session:null,error:{message:i.error_description||i.message||i.msg||i.error||`Sign in failed (${l.status})`,status:l.status}};if(i.access_token&&i.refresh_token&&i.user){const u={access_token:i.access_token,refresh_token:i.refresh_token,expires_at:i.expires_at||0,expires_in:i.expires_in||0,token_type:i.token_type||"bearer",user:i.user};return Ga(u),or("SIGNED_IN",u),{session:u,error:null}}return{session:null,error:{message:"Invalid response"}}}catch(l){return{session:null,error:{message:l instanceof Error?l.message:"Network error"}}}}async function cx(){try{const r=gc();return r?.access_token&&await fetch(`${us}/logout`,{method:"POST",headers:{"Content-Type":"application/json",apikey:Er,Authorization:`Bearer ${r.access_token}`}}),fn(),or("SIGNED_OUT",null),{error:null}}catch(r){return fn(),or("SIGNED_OUT",null),{error:{message:r instanceof Error?r.message:"Sign out error"}}}}async function xc(){try{const r=gc();if(!r)return{session:null,error:null};if(!r.access_token||!r.access_token.startsWith("eyJ"))return console.error("[getSession] Invalid token format detected - clearing"),fn(),{session:null,error:{message:"Invalid token format"}};try{const o=um(r.access_token),l=`https://${so}.supabase.co/auth/v1`;if(o?.iss!==l)return console.error("[getSession] Token from wrong project detected - clearing"),console.error("[getSession] Expected:",l),console.error("[getSession] Got:",o?.iss),fn(),{session:null,error:{message:"Token from wrong project"}}}catch(o){return console.error("[getSession] Error decoding token:",o),fn(),{session:null,error:{message:"Invalid token"}}}if(r.expires_at){const o=Math.floor(Date.now()/1e3);if(r.expires_at<o)return console.log("[getSession] Token expired, attempting refresh..."),await dm()}return{session:r,error:null}}catch(r){return{session:null,error:{message:r instanceof Error?r.message:"Session error"}}}}function um(r){try{const o=r.split(".");if(o.length!==3)return null;const l=o[1],i=atob(l.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(i)}catch(o){return console.error("[decodeJWT] Failed:",o),null}}async function dm(){try{const r=gc();if(!r?.refresh_token)return fn(),{session:null,error:{message:"No refresh token"}};console.log("[refreshSession] Attempting to refresh session...");const o=await fetch(`${us}/token?grant_type=refresh_token`,{method:"POST",headers:{"Content-Type":"application/json",apikey:Er},body:JSON.stringify({refresh_token:r.refresh_token})}),l=await o.json();if(!o.ok)return console.error("[refreshSession] Refresh failed:",l.message,"Status:",o.status),(o.status===400||o.status===401||l.message?.includes("Invalid Refresh Token")||l.message?.includes("Auth session missing")||l.message?.includes("invalid_grant")||l.message?.includes("refresh_token_not_found"))&&(console.error("[refreshSession] Terminal error - clearing session"),fn(),or("SIGNED_OUT",null)),{session:null,error:{message:l.message||"Refresh failed",status:o.status}};if(l.access_token&&l.refresh_token&&l.user){console.log("[refreshSession]  Session refreshed successfully");const i=um(l.access_token),u=`https://${so}.supabase.co/auth/v1`;if(i?.iss!==u)return console.error("[refreshSession] New token from wrong project!"),fn(),or("SIGNED_OUT",null),{session:null,error:{message:"Token from wrong project"}};const f={access_token:l.access_token,refresh_token:l.refresh_token,expires_at:l.expires_at||0,expires_in:l.expires_in||0,token_type:l.token_type||"bearer",user:l.user};return Ga(f),or("TOKEN_REFRESHED",f),{session:f,error:null}}return console.error("[refreshSession] Invalid response - no tokens returned"),fn(),{session:null,error:{message:"Invalid refresh response"}}}catch(r){return console.error("[refreshSession] Unexpected error:",r),r instanceof TypeError||r instanceof Error&&(r.message==="Failed to fetch"||r.message.includes("network")||r.message.includes("fetch")||r.message.includes("NetworkError"))?(console.warn("[refreshSession] Network error - keeping session for retry"),{session:null,error:{message:"Network error during refresh"}}):(fn(),{session:null,error:{message:r instanceof Error?r.message:"Refresh error"}})}}async function ux(){try{const{session:r}=await xc();if(!r)return{user:null,error:{message:"No session"}};const o=await fetch(`${us}/user`,{method:"GET",headers:{apikey:Er,Authorization:`Bearer ${r.access_token}`}}),l=await o.json();return o.ok?{user:l,error:null}:{user:null,error:{message:l.message||"Get user failed",status:o.status}}}catch(r){return{user:null,error:{message:r instanceof Error?r.message:"Get user error"}}}}function dx(r){return Ma.push(r),()=>{const o=Ma.indexOf(r);o>-1&&Ma.splice(o,1)}}function lt(){return{auth:{signUp:async r=>{const{session:o,error:l}=await lx(r.email,r.password,r.options?.data);return{data:{session:o,user:o?.user||null},error:l}},signInWithPassword:async r=>{const{session:o,error:l}=await ix(r.email,r.password);return{data:{session:o,user:o?.user||null},error:l}},signOut:async()=>{const{error:r}=await cx();return{error:r}},getSession:async()=>{const{session:r,error:o}=await xc();return{data:{session:r},error:o}},getUser:async()=>{const{user:r,error:o}=await ux();return{data:{user:r},error:o}},refreshSession:async()=>{const{session:r,error:o}=await dm();return{data:{session:r,user:r?.user||null},error:o}},onAuthStateChange:r=>({data:{subscription:{unsubscribe:dx(r)}}}),setSession:async r=>{try{const o={access_token:r.access_token,refresh_token:r.refresh_token,expires_at:0,expires_in:3600,token_type:"bearer",user:{}},l=await fetch(`${us}/user`,{method:"GET",headers:{apikey:Er,Authorization:`Bearer ${r.access_token}`}});if(l.ok){const i=await l.json();o.user=i}return Ga(o),or("SIGNED_IN",o),{data:{session:o,user:o.user},error:null}}catch(o){return{data:{session:null,user:null},error:{message:o instanceof Error?o.message:"Set session failed"}}}}}}}async function vc(){const{session:r}=await xc();return r?.access_token||null}const ht=so,is=Er,fm=300*1e3,bf=120*1e3;let Re=null,eo=null,Xs=!1;function mm(r){try{const o=r.split(".");if(o.length!==3)return null;const l=o[1],i=atob(l.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(i)}catch(o){return console.error("[TokenManager] Failed to decode JWT:",o),null}}function hm(r){const o=mm(r);if(!o)return console.error("[TokenManager] Cannot decode token for validation"),!1;const l=`https://${ht}.supabase.co/auth/v1`,i=o.iss===l;return i||(console.error("[TokenManager]  TOKEN PROJECT MISMATCH!"),console.error("[TokenManager] Expected:",l),console.error("[TokenManager] Got:",o.iss),console.error("[TokenManager] This token is from a DIFFERENT Supabase project!"),console.error("[TokenManager] Clearing invalid token..."),Re=null,lt().auth.signOut().catch(f=>{console.error("[TokenManager] Error signing out:",f)}),localStorage.clear()),i}function pm(r){const o=mm(r);return o?.exp?o.exp*1e3:null}function za(r){const o=Date.now();return r-o<=fm}function cs(r){return Date.now()>=r}async function tc(){if(Xs){console.log("[TokenManager] Refresh already in progress, waiting...");let r=0;for(;Xs&&r<50;)await new Promise(o=>setTimeout(o,100)),r++;return Re?.token?Re.token:null}Xs=!0;try{const r=lt();console.log("[TokenManager]  Refreshing session...");const{data:{session:o},error:l}=await r.auth.refreshSession();if(l)return console.error("[TokenManager]  Refresh failed:",l.message),l.message==="Failed to fetch"||l.message.includes("network")||l.message.includes("fetch")||l.message.includes("NetworkError")?(console.warn("[TokenManager] Network error during refresh - using cached token if available"),Re?.token&&!cs(Re.expiresAt)?(console.log("[TokenManager]  Using cached token as fallback (network error)"),Re.token):null):l.message.includes("Invalid Refresh Token")||l.message.includes("refresh_token_not_found")||l.message.includes("invalid_grant")||l.message.includes("No refresh token")?(console.error("[TokenManager]  Terminal error - session is invalid"),Re=null,null):Re?.token&&!cs(Re.expiresAt)?(console.warn("[TokenManager]  Using cached token as fallback"),Re.token):null;if(!o?.access_token)return console.error("[TokenManager]  Refresh succeeded but no token returned"),Re=null,null;if(!hm(o.access_token))return console.error("[TokenManager]  Refreshed token is from wrong project"),Re=null,null;const i=pm(o.access_token);if(!i)return console.error("[TokenManager]  Cannot determine token expiry"),Re=null,null;Re={token:o.access_token,expiresAt:i,lastRefreshed:Date.now()};const u=Math.floor((i-Date.now())/6e4);return console.log(`[TokenManager]  Token refreshed successfully (valid for ${u} minutes)`),o.access_token}catch(r){return console.error("[TokenManager]  Unexpected error during refresh:",r),Re=null,null}finally{Xs=!1}}async function fx(){try{const r=sessionStorage.getItem("nuclear_clear_in_progress"),o=sessionStorage.getItem("nuclear_clear_performed");if(r==="true"||o==="true")return console.log("[TokenManager] Nuclear clear detected - clearing token cache"),Re=null,null;const l=lt(),{data:{session:i},error:u}=await l.auth.getSession();if(u||!i)return Re=null,null;const f=i.access_token;if(!f||!f.startsWith("eyJ"))return console.error("[TokenManager] Invalid token format"),Re=null,null;if(!hm(f))return console.error("[TokenManager] Token is from wrong project"),Re=null,null;const g=pm(f);if(!g)return console.error("[TokenManager] Cannot determine token expiry"),Re=null,null;if(cs(g))return console.log("[TokenManager] Token is expired, refreshing immediately..."),await tc();if(Re?.token===f&&!za(Re.expiresAt))return Re.token;if(za(g)){console.log("[TokenManager] Token approaching expiry, refreshing...");const p=await tc();return!p&&!cs(g)?(console.warn("[TokenManager]  Refresh failed but current token still valid"),Re={token:f,expiresAt:g,lastRefreshed:Date.now()},f):p}return Re={token:f,expiresAt:g,lastRefreshed:Date.now()},f}catch(r){return console.error("[TokenManager] Error getting token:",r),null}}async function Sf(){try{if(!Re)return;const r=Date.now(),o=Re.expiresAt-r;if(cs(Re.expiresAt)||za(Re.expiresAt))console.log("[TokenManager]  Background refresh triggered"),await tc();else{const l=Math.floor(o/6e4);console.log(`[TokenManager]  Token healthy (${l} min until refresh needed)`)}}catch(r){console.error("[TokenManager] Background refresh check failed:",r)}}function Da(){if(eo){console.log("[TokenManager] Background refresh already running");return}console.log("[TokenManager]  Starting background refresh system"),console.log(`[TokenManager] Checking every ${bf/6e4} minutes`),console.log(`[TokenManager] Refreshing ${fm/6e4} minutes before expiry`),setTimeout(Sf,5e3),eo=setInterval(Sf,bf)}function Ya(){eo&&(console.log("[TokenManager] Stopping background refresh system"),clearInterval(eo),eo=null)}function yc(){console.log("[TokenManager] Clearing token cache"),Re=null,Ya()}function mx(){console.log("[TokenManager]  FORCE clearing token cache"),Re=null,Xs=!1,Ya()}function hx(){if(!Re)return{cached:!1};const r=Date.now(),o=Re.expiresAt-r,l=Math.floor(o/6e4),i=za(Re.expiresAt);return{cached:!0,expiresAt:new Date(Re.expiresAt).toLocaleString(),minutesUntilExpiry:l,needsRefresh:i,isExpired:cs(Re.expiresAt),lastRefreshed:new Date(Re.lastRefreshed).toLocaleString()}}typeof window<"u"&&window.addEventListener("beforeunload",()=>{Ya()});const gm="v1",px=1e3*60*60*24;function gx(r,o){try{const l={data:o,timestamp:Date.now(),version:gm};localStorage.setItem(`cache:${r}`,JSON.stringify(l))}catch(l){console.warn("[Offline Cache] Failed to save to cache:",l)}}function xx(r,o=px){try{const l=localStorage.getItem(`cache:${r}`);if(!l)return null;const i=JSON.parse(l);if(i.version!==gm)return console.log("[Offline Cache] Cache version mismatch, ignoring"),localStorage.removeItem(`cache:${r}`),null;const u=Date.now()-i.timestamp;return u>o?(console.log("[Offline Cache] Cache expired, ignoring"),localStorage.removeItem(`cache:${r}`),null):(console.log("[Offline Cache]  Using cached data for:",r,`(age: ${Math.round(u/1e3)}s)`),i.data)}catch(l){return console.warn("[Offline Cache] Failed to read from cache:",l),null}}const wc=`https://${ht}.supabase.co/functions/v1/make-server-29f6739b`;async function ie(r,o={},l=0,i=!1,u=!0){try{const f=sessionStorage.getItem("nuclear_clear_in_progress"),p=["/auth/signup","/auth/login","/health"].some(x=>r.includes(x));if(f==="true"&&!p)return console.warn(`[API]  Blocking ${r} - nuclear clear in progress`),console.warn("[API] User must log in again before making API calls"),{success:!1,error:"Session cleared. Please log in again.",requiresReauth:!0};console.log(`[API] ========== REQUEST START: ${r} ==========`);const w=["/conversations/","/profile/"],v=u&&(!o.method||o.method==="GET")&&w.some(x=>r.includes(x));console.log(`[API] Endpoint: ${r}`),console.log(`[API] Is public: ${p}`),console.log(`[API] Retry count: ${l}`),!p&&l===0&&await new Promise(x=>setTimeout(x,100));const N=await fx();if(N&&f==="true")return console.error("[API]  CRITICAL: Token exists but nuclear clear is in progress!"),console.error("[API] This should never happen - clearing token and blocking request"),console.error("[API] The user must complete login first"),{success:!1,error:"Session is being reset. Please wait for login screen.",requiresReauth:!0};if(!N&&!p){const x=lt(),{data:{session:I}}=await x.auth.getSession();return I?l===0?(console.warn(`[API]   No access token on first attempt for: ${r}, retrying...`),await new Promise(W=>setTimeout(W,200)),ie(r,o,1,i,u)):(console.warn(`[API]   No access token available for: ${r} after retry`),console.log("[API] getAccessToken() returned null - session may have expired"),{success:!1,error:"Authentication token not available. Please try logging in again.",requiresReauth:!0}):(console.log("[API] No session available - user may need to log in"),{success:!1,error:"Authentication required. Please log in.",requiresReauth:!0})}const k={"Content-Type":"application/json",Authorization:`Bearer ${N||is}`,...o.headers},A=`${wc}${r}`;console.log(`[API] ${o.method||"GET"} ${A}`,N?"(authenticated)":"(public)"),N?console.log("[API] Using access_token, preview:",N.substring(0,30)+"..."):console.log("[API] Using anon_key (public endpoint)");let E;try{E=await fetch(A,{...o,headers:k}),console.log(`[API Response] ${r} - Status: ${E.status} ${E.statusText}`)}catch(x){if(i||console.log(`[API] Network connectivity issue on ${r}`),v){const I=`${r}`,W=xx(I);if(W)return console.log("[API]  Using cached data"),{success:!0,data:W,fromCache:!0}}return{success:!1,error:"Unable to complete request",details:x instanceof Error?x.message:String(x)}}if(E.status===401&&!p){if(console.warn(`[API]   401 Unauthorized on ${r}`),l===0){console.log("[API]  Attempting to refresh session...");try{const x=lt(),{data:{session:I},error:W}=await x.auth.refreshSession();if(!W&&I?.access_token)return console.log("[API]  Session refreshed successfully, retrying request..."),ie(r,o,l+1,i,u);console.error("[API]  Session refresh failed:",W?.message)}catch(x){console.error("[API]  Error refreshing session:",x)}}return console.error("[API]  Session is invalid - forcing logout"),console.error("[API] Please log in again with your credentials"),localStorage.clear(),sessionStorage.clear(),setTimeout(()=>{window.location.href=window.location.origin},1500),{success:!1,error:"Your session has expired. Please log in again.",requiresReauth:!0}}if(!E.ok){const x=await E.text();if(i||console.error(`[API Error] ${r} (${E.status}):`,x),x.includes("Unauthorized")||x.includes("Auth session missing")||x.includes("Invalid Refresh Token")||x.includes("JWT expired")){if(console.warn("[API]   AUTH ERROR DETECTED IN RESPONSE"),console.warn("[API] Error message:",x),l===0){console.log("[API]  Attempting to refresh session...");try{const I=lt(),{data:{session:W},error:K}=await I.auth.refreshSession();if(!K&&W?.access_token)return console.log("[API]  Session refreshed, retrying request..."),ie(r,o,l+1,i,u)}catch(I){console.error("[API]  Error refreshing session:",I)}}return console.error("[API]  Session cannot be recovered - logging out"),localStorage.clear(),sessionStorage.clear(),setTimeout(()=>{window.location.href=window.location.origin},1500),{success:!1,error:"Authentication error. Please log in again.",requiresReauth:!0}}return{success:!1,error:x||`HTTP ${E.status}`}}const O=await E.json();if(v&&O){const x=`${r}`;gx(x,O),console.log("[API]  Cached response for offline use")}return{success:!0,data:O}}catch{return console.log(`[API] Request error on ${r}`),{success:!1,error:"Request failed"}}}const vx={signup:(r,o,l,i)=>ie("/auth/signup",{method:"POST",body:JSON.stringify({email:r,password:o,full_name:l,phone_number:i})}),login:async(r,o)=>({success:!0})},es={send:(r,o,l="text",i,u)=>ie("/messages/send",{method:"POST",body:JSON.stringify({conversation_id:r,body:o,type:l,reply_to:i,attachments:u})}),markAsRead:r=>ie("/messages/mark-read",{method:"POST",body:JSON.stringify({message_ids:r})}),react:(r,o)=>ie("/messages/react",{method:"POST",body:JSON.stringify({message_id:r,emoji:o})}),deleteForMe:r=>ie("/messages/delete-for-me",{method:"POST",body:JSON.stringify({message_id:r})}),deleteForEveryone:r=>ie("/messages/delete-for-everyone",{method:"POST",body:JSON.stringify({message_id:r})})},Cr={create:(r,o,l)=>ie("/conversations/create",{method:"POST",body:JSON.stringify({type:r,member_ids:o,title:l})}),list:()=>ie("/conversations"),get:r=>ie(`/conversations/${r}`),delete:r=>ie("/conversations/delete",{method:"POST",body:JSON.stringify({conversation_id:r})})},$a={uploadFile:async(r,o)=>{const l=new FormData;l.append("file",r),l.append("type",o);const i=await vc();try{const u=await fetch(`${wc}/upload`,{method:"POST",headers:{Authorization:`Bearer ${i||is}`},body:l});return u.ok?{success:!0,data:await u.json()}:{success:!1,error:await u.text()}}catch(u){return{success:!1,error:u instanceof Error?u.message:"Upload failed"}}}},$i={start:r=>ie("/typing/start",{method:"POST",body:JSON.stringify({conversation_id:r})},0,!0),stop:r=>ie("/typing/stop",{method:"POST",body:JSON.stringify({conversation_id:r})},0,!0)},ba={updateStatus:r=>ie("/presence/update",{method:"POST",body:JSON.stringify({is_online:r})})},jr={update:r=>ie("/profile/update",{method:"POST",body:JSON.stringify(r)}),get:r=>ie(`/profile/${r}`),repairCounts:()=>ie("/follow/repair-counts",{method:"POST"}),diagnostic:()=>ie("/profile/diagnostic")},kf={block:r=>ie("/users/block",{method:"POST",body:JSON.stringify({user_id:r})}),unblock:r=>ie("/users/unblock",{method:"POST",body:JSON.stringify({user_id:r})}),getBlockedUsers:()=>ie("/users/blocked")},yx={searchByPhone:r=>ie("/users/search-by-phone",{method:"POST",body:JSON.stringify({phone_number:r})})},Cf={initiate:(r,o)=>ie("/calls/initiate",{method:"POST",body:JSON.stringify({recipient_id:r,call_type:o})}),signal:(r,o,l)=>ie("/calls/signal",{method:"POST",body:JSON.stringify({call_id:r,signal_type:o,signal_data:l})}),accept:r=>ie("/calls/accept",{method:"POST",body:JSON.stringify({call_id:r})}),reject:r=>ie("/calls/reject",{method:"POST",body:JSON.stringify({call_id:r})}),end:r=>ie("/calls/end",{method:"POST",body:JSON.stringify({call_id:r})}),getSignals:(r,o)=>ie(`/calls/${r}/signals${o?`?after=${o}`:""}`),checkIncoming:()=>ie("/calls/incoming")};function xm(r){const o=new Date;return r.filter(l=>l.expires_at?new Date(l.expires_at)>o:!0)}function wx(r){return r.map(o=>{if(!o.stories)return null;const l=xm(o.stories);return l.length===0?null:{...o,stories:l}}).filter(o=>o!==null)}const tn={getAllStories:async()=>{const r=await ie("/stories");return r.success&&r.data?.stories&&(r.data.stories=wx(r.data.stories)),r},getUserStories:r=>ie(`/stories/user/${r}`),create:(r,o)=>ie("/stories/create",{method:"POST",body:JSON.stringify({type:r,...o})}),view:r=>ie("/stories/view",{method:"POST",body:JSON.stringify({story_id:r})}),getViews:r=>ie(`/stories/${r}/views`),reply:(r,o)=>ie("/stories/reply",{method:"POST",body:JSON.stringify({story_id:r,message:o})}),delete:r=>ie("/stories/delete",{method:"POST",body:JSON.stringify({story_id:r})}),getMyStories:async()=>{const r=await ie("/stories/my-stories");return r.success&&r.data?.stories&&(r.data.stories=xm(r.data.stories)),r},cleanup:()=>ie("/stories/cleanup",{method:"POST"})},Ze={getFeed:()=>ie("/feed"),getExploreFeed:()=>ie("/feed/explore"),getUserPosts:r=>ie(`/feed/user/${r}`),getPost:r=>ie(`/feed/post/${r}`),getUserProfile:r=>ie(`/feed/profile/${r}`),createPost:async r=>{const o=new FormData;o.append("file",r.file),o.append("type",r.type),o.append("caption",r.caption),r.location&&o.append("location",r.location);const l=await vc();try{const i=await fetch(`${wc}/feed/create`,{method:"POST",headers:{Authorization:`Bearer ${l||is}`},body:o});return i.ok?{success:!0,data:await i.json()}:{success:!1,error:await i.text()}}catch(i){return{success:!1,error:i instanceof Error?i.message:"Upload failed"}}},deletePost:r=>ie(`/feed/post/${r}`,{method:"DELETE"}),likePost:r=>ie("/feed/like",{method:"POST",body:JSON.stringify({post_id:r})}),unlikePost:r=>ie("/feed/unlike",{method:"POST",body:JSON.stringify({post_id:r})}),savePost:r=>ie("/feed/save",{method:"POST",body:JSON.stringify({post_id:r})}),unsavePost:r=>ie("/feed/unsave",{method:"POST",body:JSON.stringify({post_id:r})}),getComments:r=>ie(`/feed/post/${r}/comments`),addComment:(r,o)=>ie("/feed/comment",{method:"POST",body:JSON.stringify({post_id:r,text:o})}),deleteComment:r=>ie("/feed/comment/delete",{method:"POST",body:JSON.stringify({comment_id:r})}),getReels:()=>ie("/feed/reels"),getNotifications:()=>ie("/notifications"),markNotificationAsRead:r=>ie(`/notifications/${r}/read`,{method:"POST"}),markAllNotificationsAsRead:()=>ie("/notifications/read-all",{method:"POST"}),followUser:r=>ie("/follow",{method:"POST",body:JSON.stringify({user_id:r})}),unfollowUser:r=>ie("/unfollow",{method:"POST",body:JSON.stringify({user_id:r})})},St={follow:r=>ie("/follow",{method:"POST",body:JSON.stringify({user_id:r})}),acceptFollowRequest:r=>ie("/follow/accept",{method:"POST",body:JSON.stringify({follower_id:r})}),rejectFollowRequest:r=>ie("/follow/reject",{method:"POST",body:JSON.stringify({follower_id:r})}),cancelFollowRequest:r=>ie("/follow/cancel",{method:"POST",body:JSON.stringify({user_id:r})}),getFollowRequests:()=>ie("/follow/requests"),unfollow:r=>ie("/unfollow",{method:"POST",body:JSON.stringify({user_id:r})}),getFollowers:r=>ie(`/followers/${r}`),getFollowing:r=>ie(`/following/${r}`),getFollowStatus:r=>ie(`/follow/status/${r}`),repairCounts:r=>ie("/follow/repair-counts",{method:"POST",body:JSON.stringify({user_id:r})}),repairAllCounts:()=>ie("/follow/repair-all-counts",{method:"POST"}),initCounts:()=>ie("/follow/init-counts",{method:"POST"})},vm=m.createContext({value:"",onValueChange:()=>{}});function jx({className:r,children:o,...l}){const[i,u]=m.useState("");return n.jsx(vm.Provider,{value:{value:i,onValueChange:u},children:n.jsx("div",{className:Pe("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",r),...l,children:o})})}function Nx({className:r,...o}){const{onValueChange:l}=m.useContext(vm);return n.jsx("div",{className:"flex items-center border-b px-3","data-slot":"command-input-wrapper",children:n.jsx("input",{className:Pe("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",r),onChange:i=>l(i.target.value),...o})})}function bx({className:r,...o}){return n.jsx("div",{className:Pe("max-h-[300px] overflow-y-auto overflow-x-hidden",r),...o})}function Sx({className:r,...o}){return n.jsx("div",{className:Pe("py-6 text-center text-sm",r),...o})}function kx({className:r,...o}){return n.jsx("div",{className:Pe("overflow-hidden p-1 text-foreground [&_[data-slot=command-group-heading]]:px-2 [&_[data-slot=command-group-heading]]:py-1.5 [&_[data-slot=command-group-heading]]:text-xs [&_[data-slot=command-group-heading]]:font-medium [&_[data-slot=command-group-heading]]:text-muted-foreground",r),...o})}function Cx({className:r,onSelect:o,value:l,...i}){const u=()=>{o&&l!==void 0&&o(l)};return n.jsx("div",{className:Pe("relative flex cursor-pointer select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0 hover:bg-accent hover:text-accent-foreground",r),onClick:u,...i})}const ym=m.createContext(null);function _x(){const r=m.useContext(ym);if(!r)throw new Error("Dialog components must be used within Dialog");return r}function Ex({open:r,onOpenChange:o,children:l}){const[i,u]=m.useState(!1),f=r!==void 0?r:i,g=o||u;return n.jsx(ym.Provider,{value:{open:f,onOpenChange:g},children:l})}function Px({className:r,...o}){return n.jsx("div",{"data-slot":"dialog-overlay",className:Pe("fixed inset-0 z-50 bg-black/50 animate-in fade-in-0",r),...o})}function Ax({className:r,children:o,...l}){const{open:i,onOpenChange:u}=_x();return i?n.jsxs(n.Fragment,{children:[n.jsx(Px,{onClick:()=>u(!1)}),n.jsxs("div",{"data-slot":"dialog-content",className:Pe("bg-background fixed top-[50%] left-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 animate-in fade-in-0 zoom-in-95 sm:rounded-lg",r),...l,children:[o,n.jsxs("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[n.jsx(Tn,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}):null}function Tx({className:r,...o}){return n.jsx("div",{"data-slot":"dialog-header",className:Pe("flex flex-col gap-1.5 text-center sm:text-left",r),...o})}function Rx({className:r,...o}){return n.jsx("h2",{"data-slot":"dialog-title",className:Pe("text-lg font-semibold leading-none tracking-tight",r),...o})}function Mx({className:r,...o}){return n.jsx("p",{"data-slot":"dialog-description",className:Pe("text-muted-foreground text-sm",r),...o})}const wm=m.createContext(null);function jm(){const r=m.useContext(wm);if(!r)throw new Error("Popover components must be used within Popover");return r}function Nm({open:r,onOpenChange:o,children:l}){const[i,u]=m.useState(!1),f=r!==void 0?r:i,g=o||u;return n.jsx(wm.Provider,{value:{open:f,onOpenChange:g},children:n.jsx("div",{className:"relative inline-block",children:l})})}function bm({children:r,asChild:o,...l}){const{open:i,onOpenChange:u}=jm();return o&&m.isValidElement(r)?m.cloneElement(r,{...l,onClick:f=>{u(!i),r.props.onClick?.(f)}}):n.jsx("button",{onClick:()=>u(!i),...l,children:r})}function Sm({className:r,align:o="center",sideOffset:l=4,children:i,...u}){const{open:f,onOpenChange:g}=jm(),p=m.useRef(null);if(m.useEffect(()=>{if(!f)return;const v=k=>{p.current&&!p.current.contains(k.target)&&g(!1)},N=k=>{k.key==="Escape"&&g(!1)};return document.addEventListener("mousedown",v),document.addEventListener("keydown",N),()=>{document.removeEventListener("mousedown",v),document.removeEventListener("keydown",N)}},[f,g]),!f)return null;const w={start:"left-0",center:"left-1/2 -translate-x-1/2",end:"right-0"}[o];return n.jsx("div",{ref:p,"data-slot":"popover-content",className:Pe("absolute z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none animate-in fade-in-0 zoom-in-95",w,r),style:{top:`calc(100% + ${l}px)`},...u,children:i})}const br=[{code:"US",name:"United States",dialCode:"+1",flag:"",placeholder:"(555) 123-4567"},{code:"GB",name:"United Kingdom",dialCode:"+44",flag:"",placeholder:"7400 123456"},{code:"AF",name:"Afghanistan",dialCode:"+93",flag:"",placeholder:"70 123 4567"},{code:"AL",name:"Albania",dialCode:"+355",flag:"",placeholder:"66 123 4567"},{code:"DZ",name:"Algeria",dialCode:"+213",flag:"",placeholder:"551 23 45 67"},{code:"AS",name:"American Samoa",dialCode:"+1684",flag:"",placeholder:"733 1234"},{code:"AD",name:"Andorra",dialCode:"+376",flag:"",placeholder:"312 345"},{code:"AO",name:"Angola",dialCode:"+244",flag:"",placeholder:"923 123 456"},{code:"AR",name:"Argentina",dialCode:"+54",flag:"",placeholder:"11 2345-6789"},{code:"AM",name:"Armenia",dialCode:"+374",flag:"",placeholder:"77 123456"},{code:"AU",name:"Australia",dialCode:"+61",flag:"",placeholder:"412 345 678"},{code:"AT",name:"Austria",dialCode:"+43",flag:"",placeholder:"664 1234567"},{code:"AZ",name:"Azerbaijan",dialCode:"+994",flag:"",placeholder:"40 123 45 67"},{code:"BH",name:"Bahrain",dialCode:"+973",flag:"",placeholder:"3600 1234"},{code:"BD",name:"Bangladesh",dialCode:"+880",flag:"",placeholder:"1812 345678"},{code:"BY",name:"Belarus",dialCode:"+375",flag:"",placeholder:"29 123 45 67"},{code:"BE",name:"Belgium",dialCode:"+32",flag:"",placeholder:"470 12 34 56"},{code:"BZ",name:"Belize",dialCode:"+501",flag:"",placeholder:"622 1234"},{code:"BJ",name:"Benin",dialCode:"+229",flag:"",placeholder:"90 01 12 34"},{code:"BT",name:"Bhutan",dialCode:"+975",flag:"",placeholder:"17 12 34 56"},{code:"BO",name:"Bolivia",dialCode:"+591",flag:"",placeholder:"71234567"},{code:"BA",name:"Bosnia and Herzegovina",dialCode:"+387",flag:"",placeholder:"61 123 456"},{code:"BW",name:"Botswana",dialCode:"+267",flag:"",placeholder:"71 123 456"},{code:"BR",name:"Brazil",dialCode:"+55",flag:"",placeholder:"11 91234-5678"},{code:"BN",name:"Brunei",dialCode:"+673",flag:"",placeholder:"712 3456"},{code:"BG",name:"Bulgaria",dialCode:"+359",flag:"",placeholder:"48 123 456"},{code:"BF",name:"Burkina Faso",dialCode:"+226",flag:"",placeholder:"70 12 34 56"},{code:"BI",name:"Burundi",dialCode:"+257",flag:"",placeholder:"79 56 12 34"},{code:"KH",name:"Cambodia",dialCode:"+855",flag:"",placeholder:"91 234 567"},{code:"CM",name:"Cameroon",dialCode:"+237",flag:"",placeholder:"6 71 23 45 67"},{code:"CA",name:"Canada",dialCode:"+1",flag:"",placeholder:"(555) 123-4567"},{code:"CV",name:"Cape Verde",dialCode:"+238",flag:"",placeholder:"991 12 34"},{code:"CF",name:"Central African Republic",dialCode:"+236",flag:"",placeholder:"70 01 23 45"},{code:"TD",name:"Chad",dialCode:"+235",flag:"",placeholder:"63 01 23 45"},{code:"CL",name:"Chile",dialCode:"+56",flag:"",placeholder:"9 1234 5678"},{code:"CN",name:"China",dialCode:"+86",flag:"",placeholder:"138 0013 8000"},{code:"CO",name:"Colombia",dialCode:"+57",flag:"",placeholder:"321 1234567"},{code:"KM",name:"Comoros",dialCode:"+269",flag:"",placeholder:"321 23 45"},{code:"CG",name:"Congo",dialCode:"+242",flag:"",placeholder:"06 123 4567"},{code:"CD",name:"Congo (DRC)",dialCode:"+243",flag:"",placeholder:"991 234 567"},{code:"CR",name:"Costa Rica",dialCode:"+506",flag:"",placeholder:"8312 3456"},{code:"HR",name:"Croatia",dialCode:"+385",flag:"",placeholder:"92 123 4567"},{code:"CU",name:"Cuba",dialCode:"+53",flag:"",placeholder:"5 1234567"},{code:"CY",name:"Cyprus",dialCode:"+357",flag:"",placeholder:"96 123456"},{code:"CZ",name:"Czech Republic",dialCode:"+420",flag:"",placeholder:"601 123 456"},{code:"DK",name:"Denmark",dialCode:"+45",flag:"",placeholder:"32 12 34 56"},{code:"DJ",name:"Djibouti",dialCode:"+253",flag:"",placeholder:"77 83 10 01"},{code:"DO",name:"Dominican Republic",dialCode:"+1809",flag:"",placeholder:"809 234 5678"},{code:"EC",name:"Ecuador",dialCode:"+593",flag:"",placeholder:"99 123 4567"},{code:"EG",name:"Egypt",dialCode:"+20",flag:"",placeholder:"100 123 4567"},{code:"SV",name:"El Salvador",dialCode:"+503",flag:"",placeholder:"7012 3456"},{code:"GQ",name:"Equatorial Guinea",dialCode:"+240",flag:"",placeholder:"222 123 456"},{code:"ER",name:"Eritrea",dialCode:"+291",flag:"",placeholder:"7 123 456"},{code:"EE",name:"Estonia",dialCode:"+372",flag:"",placeholder:"5123 4567"},{code:"ET",name:"Ethiopia",dialCode:"+251",flag:"",placeholder:"91 123 4567"},{code:"FJ",name:"Fiji",dialCode:"+679",flag:"",placeholder:"701 2345"},{code:"FI",name:"Finland",dialCode:"+358",flag:"",placeholder:"41 2345678"},{code:"FR",name:"France",dialCode:"+33",flag:"",placeholder:"6 12 34 56 78"},{code:"GA",name:"Gabon",dialCode:"+241",flag:"",placeholder:"06 03 12 34"},{code:"GM",name:"Gambia",dialCode:"+220",flag:"",placeholder:"301 2345"},{code:"GE",name:"Georgia",dialCode:"+995",flag:"",placeholder:"555 12 34 56"},{code:"DE",name:"Germany",dialCode:"+49",flag:"",placeholder:"1512 3456789"},{code:"GH",name:"Ghana",dialCode:"+233",flag:"",placeholder:"23 123 4567"},{code:"GR",name:"Greece",dialCode:"+30",flag:"",placeholder:"691 234 5678"},{code:"GT",name:"Guatemala",dialCode:"+502",flag:"",placeholder:"5123 4567"},{code:"GN",name:"Guinea",dialCode:"+224",flag:"",placeholder:"601 12 34 56"},{code:"GW",name:"Guinea-Bissau",dialCode:"+245",flag:"",placeholder:"955 012 345"},{code:"GY",name:"Guyana",dialCode:"+592",flag:"",placeholder:"609 1234"},{code:"HT",name:"Haiti",dialCode:"+509",flag:"",placeholder:"34 10 1234"},{code:"HN",name:"Honduras",dialCode:"+504",flag:"",placeholder:"9123 4567"},{code:"HK",name:"Hong Kong",dialCode:"+852",flag:"",placeholder:"5123 4567"},{code:"HU",name:"Hungary",dialCode:"+36",flag:"",placeholder:"20 123 4567"},{code:"IS",name:"Iceland",dialCode:"+354",flag:"",placeholder:"611 1234"},{code:"IN",name:"India",dialCode:"+91",flag:"",placeholder:"98765 43210"},{code:"ID",name:"Indonesia",dialCode:"+62",flag:"",placeholder:"812 3456 7890"},{code:"IR",name:"Iran",dialCode:"+98",flag:"",placeholder:"912 345 6789"},{code:"IQ",name:"Iraq",dialCode:"+964",flag:"",placeholder:"791 234 5678"},{code:"IE",name:"Ireland",dialCode:"+353",flag:"",placeholder:"85 012 3456"},{code:"IL",name:"Israel",dialCode:"+972",flag:"",placeholder:"50 123 4567"},{code:"IT",name:"Italy",dialCode:"+39",flag:"",placeholder:"312 345 6789"},{code:"CI",name:"Ivory Coast",dialCode:"+225",flag:"",placeholder:"01 23 45 67"},{code:"JM",name:"Jamaica",dialCode:"+1876",flag:"",placeholder:"876 210 1234"},{code:"JP",name:"Japan",dialCode:"+81",flag:"",placeholder:"90 1234 5678"},{code:"JO",name:"Jordan",dialCode:"+962",flag:"",placeholder:"7 9012 3456"},{code:"KZ",name:"Kazakhstan",dialCode:"+7",flag:"",placeholder:"771 000 9998"},{code:"KE",name:"Kenya",dialCode:"+254",flag:"",placeholder:"712 345678"},{code:"KW",name:"Kuwait",dialCode:"+965",flag:"",placeholder:"500 12345"},{code:"KG",name:"Kyrgyzstan",dialCode:"+996",flag:"",placeholder:"700 123 456"},{code:"LA",name:"Laos",dialCode:"+856",flag:"",placeholder:"20 23 123 456"},{code:"LV",name:"Latvia",dialCode:"+371",flag:"",placeholder:"21 234 567"},{code:"LB",name:"Lebanon",dialCode:"+961",flag:"",placeholder:"71 123 456"},{code:"LS",name:"Lesotho",dialCode:"+266",flag:"",placeholder:"5012 3456"},{code:"LR",name:"Liberia",dialCode:"+231",flag:"",placeholder:"77 012 3456"},{code:"LY",name:"Libya",dialCode:"+218",flag:"",placeholder:"91 2345678"},{code:"LI",name:"Liechtenstein",dialCode:"+423",flag:"",placeholder:"660 234 567"},{code:"LT",name:"Lithuania",dialCode:"+370",flag:"",placeholder:"612 34567"},{code:"LU",name:"Luxembourg",dialCode:"+352",flag:"",placeholder:"628 123 456"},{code:"MO",name:"Macau",dialCode:"+853",flag:"",placeholder:"6612 3456"},{code:"MK",name:"Macedonia",dialCode:"+389",flag:"",placeholder:"72 345 678"},{code:"MG",name:"Madagascar",dialCode:"+261",flag:"",placeholder:"32 12 345 67"},{code:"MW",name:"Malawi",dialCode:"+265",flag:"",placeholder:"991 23 45 67"},{code:"MY",name:"Malaysia",dialCode:"+60",flag:"",placeholder:"12 345 6789"},{code:"MV",name:"Maldives",dialCode:"+960",flag:"",placeholder:"771 2345"},{code:"ML",name:"Mali",dialCode:"+223",flag:"",placeholder:"65 01 23 45"},{code:"MT",name:"Malta",dialCode:"+356",flag:"",placeholder:"9696 1234"},{code:"MR",name:"Mauritania",dialCode:"+222",flag:"",placeholder:"22 12 34 56"},{code:"MU",name:"Mauritius",dialCode:"+230",flag:"",placeholder:"5251 2345"},{code:"MX",name:"Mexico",dialCode:"+52",flag:"",placeholder:"55 1234 5678"},{code:"MD",name:"Moldova",dialCode:"+373",flag:"",placeholder:"621 12 345"},{code:"MC",name:"Monaco",dialCode:"+377",flag:"",placeholder:"6 12 34 56 78"},{code:"MN",name:"Mongolia",dialCode:"+976",flag:"",placeholder:"8812 3456"},{code:"ME",name:"Montenegro",dialCode:"+382",flag:"",placeholder:"67 622 901"},{code:"MA",name:"Morocco",dialCode:"+212",flag:"",placeholder:"650 123456"},{code:"MZ",name:"Mozambique",dialCode:"+258",flag:"",placeholder:"82 123 4567"},{code:"MM",name:"Myanmar",dialCode:"+95",flag:"",placeholder:"9 212 3456"},{code:"NA",name:"Namibia",dialCode:"+264",flag:"",placeholder:"81 123 4567"},{code:"NP",name:"Nepal",dialCode:"+977",flag:"",placeholder:"984 1234567"},{code:"NL",name:"Netherlands",dialCode:"+31",flag:"",placeholder:"6 12345678"},{code:"NZ",name:"New Zealand",dialCode:"+64",flag:"",placeholder:"21 123 4567"},{code:"NI",name:"Nicaragua",dialCode:"+505",flag:"",placeholder:"8123 4567"},{code:"NE",name:"Niger",dialCode:"+227",flag:"",placeholder:"93 12 34 56"},{code:"NG",name:"Nigeria",dialCode:"+234",flag:"",placeholder:"802 123 4567"},{code:"NO",name:"Norway",dialCode:"+47",flag:"",placeholder:"412 34 567"},{code:"OM",name:"Oman",dialCode:"+968",flag:"",placeholder:"9212 3456"},{code:"PK",name:"Pakistan",dialCode:"+92",flag:"",placeholder:"301 2345678"},{code:"PS",name:"Palestine",dialCode:"+970",flag:"",placeholder:"599 123 456"},{code:"PA",name:"Panama",dialCode:"+507",flag:"",placeholder:"6123 4567"},{code:"PG",name:"Papua New Guinea",dialCode:"+675",flag:"",placeholder:"7012 3456"},{code:"PY",name:"Paraguay",dialCode:"+595",flag:"",placeholder:"961 456789"},{code:"PE",name:"Peru",dialCode:"+51",flag:"",placeholder:"912 345 678"},{code:"PH",name:"Philippines",dialCode:"+63",flag:"",placeholder:"917 123 4567"},{code:"PL",name:"Poland",dialCode:"+48",flag:"",placeholder:"512 345 678"},{code:"PT",name:"Portugal",dialCode:"+351",flag:"",placeholder:"912 345 678"},{code:"PR",name:"Puerto Rico",dialCode:"+1787",flag:"",placeholder:"787 234 5678"},{code:"QA",name:"Qatar",dialCode:"+974",flag:"",placeholder:"3312 3456"},{code:"RO",name:"Romania",dialCode:"+40",flag:"",placeholder:"712 034 567"},{code:"RU",name:"Russia",dialCode:"+7",flag:"",placeholder:"912 345-67-89"},{code:"RW",name:"Rwanda",dialCode:"+250",flag:"",placeholder:"720 123 456"},{code:"SA",name:"Saudi Arabia",dialCode:"+966",flag:"",placeholder:"50 123 4567"},{code:"SN",name:"Senegal",dialCode:"+221",flag:"",placeholder:"70 123 45 67"},{code:"RS",name:"Serbia",dialCode:"+381",flag:"",placeholder:"60 1234567"},{code:"SC",name:"Seychelles",dialCode:"+248",flag:"",placeholder:"2 510 123"},{code:"SL",name:"Sierra Leone",dialCode:"+232",flag:"",placeholder:"25 123456"},{code:"SG",name:"Singapore",dialCode:"+65",flag:"",placeholder:"8123 4567"},{code:"SK",name:"Slovakia",dialCode:"+421",flag:"",placeholder:"912 123 456"},{code:"SI",name:"Slovenia",dialCode:"+386",flag:"",placeholder:"31 234 567"},{code:"SO",name:"Somalia",dialCode:"+252",flag:"",placeholder:"7 1123456"},{code:"ZA",name:"South Africa",dialCode:"+27",flag:"",placeholder:"71 123 4567"},{code:"KR",name:"South Korea",dialCode:"+82",flag:"",placeholder:"10-1234-5678"},{code:"SS",name:"South Sudan",dialCode:"+211",flag:"",placeholder:"977 123 456"},{code:"ES",name:"Spain",dialCode:"+34",flag:"",placeholder:"612 34 56 78"},{code:"LK",name:"Sri Lanka",dialCode:"+94",flag:"",placeholder:"71 234 5678"},{code:"SD",name:"Sudan",dialCode:"+249",flag:"",placeholder:"91 123 1234"},{code:"SR",name:"Suriname",dialCode:"+597",flag:"",placeholder:"741 2345"},{code:"SZ",name:"Swaziland",dialCode:"+268",flag:"",placeholder:"7612 3456"},{code:"SE",name:"Sweden",dialCode:"+46",flag:"",placeholder:"70 123 45 67"},{code:"CH",name:"Switzerland",dialCode:"+41",flag:"",placeholder:"78 123 45 67"},{code:"SY",name:"Syria",dialCode:"+963",flag:"",placeholder:"944 567 890"},{code:"TW",name:"Taiwan",dialCode:"+886",flag:"",placeholder:"912 345 678"},{code:"TJ",name:"Tajikistan",dialCode:"+992",flag:"",placeholder:"917 12 3456"},{code:"TZ",name:"Tanzania",dialCode:"+255",flag:"",placeholder:"621 234 567"},{code:"TH",name:"Thailand",dialCode:"+66",flag:"",placeholder:"81 234 5678"},{code:"TG",name:"Togo",dialCode:"+228",flag:"",placeholder:"90 11 23 45"},{code:"TO",name:"Tonga",dialCode:"+676",flag:"",placeholder:"771 5123"},{code:"TT",name:"Trinidad and Tobago",dialCode:"+1868",flag:"",placeholder:"868 291 1234"},{code:"TN",name:"Tunisia",dialCode:"+216",flag:"",placeholder:"20 123 456"},{code:"TR",name:"Turkey",dialCode:"+90",flag:"",placeholder:"532 123 4567"},{code:"TM",name:"Turkmenistan",dialCode:"+993",flag:"",placeholder:"66 123456"},{code:"UG",name:"Uganda",dialCode:"+256",flag:"",placeholder:"712 345678"},{code:"UA",name:"Ukraine",dialCode:"+380",flag:"",placeholder:"50 123 4567"},{code:"AE",name:"UAE",dialCode:"+971",flag:"",placeholder:"50 123 4567"},{code:"UY",name:"Uruguay",dialCode:"+598",flag:"",placeholder:"94 231 234"},{code:"UZ",name:"Uzbekistan",dialCode:"+998",flag:"",placeholder:"91 234 56 78"},{code:"VU",name:"Vanuatu",dialCode:"+678",flag:"",placeholder:"591 2345"},{code:"VE",name:"Venezuela",dialCode:"+58",flag:"",placeholder:"412 1234567"},{code:"VN",name:"Vietnam",dialCode:"+84",flag:"",placeholder:"91 234 5678"},{code:"YE",name:"Yemen",dialCode:"+967",flag:"",placeholder:"712 345 678"},{code:"ZM",name:"Zambia",dialCode:"+260",flag:"",placeholder:"95 5123456"},{code:"ZW",name:"Zimbabwe",dialCode:"+263",flag:"",placeholder:"71 234 5678"}];function _f(r){const o=r.replace(/\D/g,"");return o.length>=7&&o.length<=15}function Dx(r,o){const l=o.replace(/\D/g,"");return`${r.startsWith("+")?r:`+${r}`}${l}`}function Fx(r){if(!r.startsWith("+"))return null;for(const o of br)if(r.startsWith(o.dialCode))return{dialCode:o.dialCode,phone:r.slice(o.dialCode.length)};return null}function km(r,o){br.find(i=>i.dialCode===r);const l=o.replace(/\D/g,"");return(r==="+1"||r==="+7")&&l.length===10?`(${l.slice(0,3)}) ${l.slice(3,6)}-${l.slice(6)}`:l.replace(/(\d{3,4})(?=\d)/g,"$1 ").trim()}function Ef(r){if(!r)return"";const o=Fx(r);if(o){const l=km(o.dialCode,o.phone);return`${o.dialCode} ${l}`}return r.replace(/(\d{1,4})(?=\d)/g,"$1 ").trim()}function Cm({value:r,dialCode:o,onChange:l,onValidationChange:i,error:u,disabled:f,autoFocus:g}){const[p,w]=m.useState(!1),[v,N]=m.useState(br.find(x=>x.dialCode===o)||br[0]),k=m.useRef(null);m.useEffect(()=>{const x=br.find(I=>I.dialCode===o);x&&N(x)},[o]),m.useEffect(()=>{r&&i&&i(_f(r))},[r,i]);const A=x=>{N(x),l(r,x.dialCode),w(!1),setTimeout(()=>{k.current?.focus()},100)},E=x=>{const I=x.target.value.replace(/[^\d\s\-()]/g,"");l(I,v.dialCode)},O=r?_f(r):null;return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex gap-1.5 sm:gap-2",children:[n.jsxs(Nm,{open:p,onOpenChange:w,children:[n.jsx(bm,{asChild:!0,children:n.jsxs(Me,{variant:"outline",role:"combobox","aria-expanded":p,"aria-label":"Select country code",disabled:f,className:"w-[100px] xs:w-[110px] sm:w-[130px] justify-between bg-input-background border-border hover:bg-[var(--hover-surface)] transition-colors h-11 sm:h-10 touch-manipulation px-2 sm:px-3",children:[n.jsxs("span",{className:"flex items-center gap-1 sm:gap-1.5 truncate min-w-0",children:[n.jsx("span",{className:"text-base sm:text-lg flex-shrink-0",children:v.flag}),n.jsx("span",{className:"text-xs sm:text-sm truncate",children:v.dialCode})]}),n.jsx(_g,{className:"ml-1 h-3.5 w-3.5 sm:h-4 sm:w-4 shrink-0 opacity-50"})]})}),n.jsx(Sm,{className:"w-[min(320px,calc(100vw-2rem))] p-0",align:"start",sideOffset:5,children:n.jsxs(jx,{children:[n.jsx(Nx,{placeholder:"Search country...",className:"h-9 text-sm"}),n.jsxs(bx,{className:"max-h-[min(300px,50vh)]",children:[n.jsx(Sx,{className:"text-sm py-6",children:"No country found."}),n.jsx(kx,{children:br.map(x=>n.jsxs(Cx,{value:`${x.name} ${x.dialCode} ${x.code}`,onSelect:()=>A(x),className:"cursor-pointer py-2.5 touch-manipulation",children:[n.jsx("span",{className:"mr-2 text-base sm:text-lg flex-shrink-0",children:x.flag}),n.jsx("span",{className:"flex-1 truncate text-sm",children:x.name}),n.jsx("span",{className:"text-muted-foreground ml-2 text-xs sm:text-sm flex-shrink-0",children:x.dialCode}),v.code===x.code&&n.jsx(Sr,{className:"ml-2 h-4 w-4 text-primary flex-shrink-0"})]},x.code))})]})]})})]}),n.jsxs("div",{className:"relative flex-1 min-w-0",children:[n.jsx(hn,{ref:k,type:"tel",value:r,onChange:E,placeholder:v.placeholder,disabled:f,autoFocus:g,"aria-invalid":u?"true":"false","aria-describedby":u?"phone-error":void 0,className:`
              bg-input-background border-border transition-all h-11 sm:h-10 touch-manipulation text-sm sm:text-base
              ${u?"border-error focus-visible:ring-error":""}
              ${O===!0?"border-success pr-10":"pr-3"}
            `}),O===!0&&n.jsx("div",{className:"absolute right-2 sm:right-3 top-1/2 -translate-y-1/2",children:n.jsx(Sr,{className:"h-4 w-4 text-success flex-shrink-0"})})]})]}),u&&n.jsx("p",{id:"phone-error",className:"text-xs sm:text-sm text-error px-1",role:"alert",children:u}),!u&&r&&n.jsxs("p",{className:"text-[11px] sm:text-xs text-muted-foreground px-1 truncate",children:["Format: ",v.dialCode," ",km(v.dialCode,r)]})]})}function Ix({onAuthSuccess:r}){const[o,l]=m.useState("login"),[i,u]=m.useState(""),[f,g]=m.useState(""),[p,w]=m.useState(""),[v,N]=m.useState(""),[k,A]=m.useState("+1"),[E,O]=m.useState(!1),[x,I]=m.useState(""),W=async K=>{K.preventDefault(),I(""),O(!0);try{const T=lt();if(o==="signup"){if(!v){I("Phone number is required"),O(!1);return}const G=`${k}${v}`,j=await vx.signup(i,f,p,G);if(!j.success){let H=j.error||"Signup failed";try{H=JSON.parse(H).error||H}catch{}H.includes("Phone number is already registered")&&(H="This phone number is already registered. Please use a different phone number or sign in."),I(H),O(!1);return}console.log("[Auth] Signing in after signup...");const{data:S,error:B}=await T.auth.signInWithPassword({email:i,password:f});if(B){console.error("[Auth] Sign in error after signup:",B),I(B.message),O(!1);return}if(!S.session){console.error("[Auth] No session returned after sign in"),I("Failed to establish session. Please try logging in."),O(!1);return}console.log("[Auth] Sign in successful, session established"),console.log("[Auth] Session user:",S.session.user.id),console.log("[Auth] Access token available:",!!S.session.access_token),console.log("[Auth] Explicitly setting session...");const{error:oe}=await T.auth.setSession({access_token:S.session.access_token,refresh_token:S.session.refresh_token});if(oe){console.error("[Auth] Failed to set session:",oe),I("Failed to save session. Please try again."),O(!1);return}console.log("[Auth] Waiting for session persistence..."),await new Promise(H=>setTimeout(H,1500)),console.log("[Auth] Verifying session in storage...");const{data:{session:P}}=await T.auth.getSession();if(!P){console.error("[Auth] CRITICAL: Session not persisted to storage!");const H=Object.keys(localStorage);console.error("[Auth] Available localStorage keys:",H),I("Session failed to save. Please ensure cookies/storage is enabled."),O(!1);return}console.log("[Auth]  Session verified in storage"),sessionStorage.removeItem("nuclear_clear_performed"),sessionStorage.removeItem("nuclear_clear_in_progress"),console.log("[Auth] Cleared nuclear clear flags"),r()}else{console.log("[Auth] Attempting login..."),console.log("[Auth] Email:",i),console.log("[Auth] Password length:",f.length),console.log("[Auth] Email valid format:",/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i));const{data:G,error:j}=await T.auth.signInWithPassword({email:i,password:f});if(j){console.error("[Auth] Login error:",j),console.error("[Auth] Error message:",j.message),console.error("[Auth] Error status:",j.status);let P=j.message;j.status===400&&(j.message.includes("Invalid login credentials")?P="Invalid email or password. Please check your credentials and try again.":j.message.includes("Email not confirmed")?P="Please confirm your email address before logging in.":P=`Login failed: ${j.message}`),I(P),O(!1);return}if(!G.session){console.error("[Auth] No session returned after login"),I("Failed to establish session. Please try again."),O(!1);return}console.log("[Auth] Login successful, session established"),console.log("[Auth] Session user:",G.session.user.id),console.log("[Auth] Access token available:",!!G.session.access_token),console.log("[Auth] Access token preview:",G.session.access_token?.substring(0,30)+"..."),console.log("[Auth] Explicitly setting session...");const{error:S}=await T.auth.setSession({access_token:G.session.access_token,refresh_token:G.session.refresh_token});if(S){console.error("[Auth] Failed to set session:",S),I("Failed to save session. Please try again."),O(!1);return}console.log("[Auth] Waiting for session persistence..."),await new Promise(P=>setTimeout(P,1500)),console.log("[Auth] Verifying session in storage...");const{data:{session:B},error:oe}=await T.auth.getSession();if(oe&&console.error("[Auth] Error verifying session:",oe),!B){console.error("[Auth] CRITICAL: Session not persisted to storage!"),console.error("[Auth] This means localStorage may be disabled or cleared");const P=Object.keys(localStorage);console.error("[Auth] Available localStorage keys:",P),console.error("[Auth] Total localStorage keys:",P.length),I("Session failed to save. Please ensure cookies/storage is enabled."),O(!1);return}console.log("[Auth]  Session verified in storage"),console.log("[Auth] Stored session user:",B.user.id),console.log("[Auth] Stored access token preview:",B.access_token?.substring(0,30)+"..."),sessionStorage.removeItem("nuclear_clear_performed"),sessionStorage.removeItem("nuclear_clear_in_progress"),console.log("[Auth] Cleared nuclear clear flags"),r()}}catch(T){I(T instanceof Error?T.message:"An error occurred"),O(!1)}};return n.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center p-4 sm:p-6 md:p-8 pt-safe pb-safe pl-safe pr-safe relative overflow-hidden bg-gradient-to-br from-background via-surface to-background",children:[n.jsx("div",{className:"absolute inset-0 opacity-40 animate-gradient-shift"}),n.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(4)].map((K,T)=>n.jsx("div",{className:"absolute rounded-full bg-gradient-to-br from-primary/15 to-accent/15 backdrop-blur-2xl animate-float-slow",style:{width:200,height:200,left:`${T*25%100}%`,top:`${(T*30+20)%80}%`,animationDelay:`${T*3}s`}},T))}),n.jsxs("div",{className:"relative w-full max-w-sm xs:max-w-md animate-in fade-in zoom-in-95 slide-in-from-bottom-4 duration-700",children:[n.jsxs("div",{className:"bg-card/90 dark:bg-card/50 backdrop-blur-3xl rounded-2xl sm:rounded-3xl shadow-2xl border border-border/50 p-6 xs:p-8 sm:p-10 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-accent/5 opacity-50 pointer-events-none"}),n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"text-center mb-8 sm:mb-10 animate-in fade-in slide-in-from-top-2 duration-500 delay-100",children:[n.jsx("div",{className:"inline-flex items-center justify-center gap-2.5 sm:gap-3 mb-5 sm:mb-6 hover:scale-105 transition-transform duration-200",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-12 h-12 xs:w-14 xs:h-14 sm:w-16 sm:h-16 rounded-xl sm:rounded-2xl bg-gradient-to-br from-primary to-accent shadow-xl shadow-primary/30 flex items-center justify-center",children:n.jsx(Ba,{className:"w-7 h-7 xs:w-8 xs:h-8 sm:w-9 sm:h-9 text-white",strokeWidth:2.5})}),n.jsx("div",{className:"absolute inset-0 rounded-xl sm:rounded-2xl bg-gradient-to-br from-primary to-accent opacity-30 blur-xl animate-pulse-slow"})]})}),n.jsx("h1",{className:"mb-2.5 sm:mb-3 text-2xl xs:text-3xl sm:text-4xl font-bold bg-gradient-to-r from-primary via-primary to-accent bg-clip-text text-transparent",children:"AuroraLink"}),n.jsx("p",{className:"text-muted-foreground text-base animate-in fade-in slide-in-from-bottom-2 duration-300",children:o==="login"?"Welcome back! Sign in to continue.":"Create your account to get started"},o)]}),x&&n.jsx("div",{className:"animate-in fade-in zoom-in-95 duration-300",children:n.jsxs(im,{variant:"destructive",className:"mb-6",children:[n.jsx(sr,{className:"h-4 w-4"}),n.jsx(cm,{children:x})]})}),n.jsxs("form",{onSubmit:W,className:"space-y-6 animate-in fade-in duration-500 delay-200",children:[o==="signup"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ss,{htmlFor:"fullName",className:"text-sm font-semibold",children:"Full Name"}),n.jsxs("div",{className:"relative",children:[n.jsx(uc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),n.jsx(hn,{id:"fullName",type:"text",value:p,onChange:K=>w(K.target.value),placeholder:"John Doe",className:"pl-11 h-12 text-base",required:!0,disabled:E})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ss,{htmlFor:"phoneNumber",className:"text-sm font-semibold",children:"Phone Number"}),n.jsxs("div",{children:[n.jsx(Cm,{value:v,dialCode:k,onChange:(K,T)=>{N(K),A(T)},disabled:E}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Used to find and connect with others on AuroraLink"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ss,{htmlFor:"email",className:"text-sm font-semibold",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(om,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),n.jsx(hn,{id:"email",type:"email",value:i,onChange:K=>u(K.target.value),placeholder:"you@example.com",className:"pl-11 h-12 text-base",required:!0,disabled:E})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ss,{htmlFor:"password",className:"text-sm font-semibold",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Dg,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),n.jsx(hn,{id:"password",type:"password",value:f,onChange:K=>g(K.target.value),placeholder:"",className:"pl-11 h-12 text-base",required:!0,disabled:E,minLength:6})]}),o==="signup"&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"At least 6 characters"})]}),n.jsx("div",{className:"mt-2",children:n.jsx(Me,{type:"submit",className:"w-full h-14 text-base font-semibold bg-gradient-to-r from-primary to-accent hover:opacity-90 shadow-xl shadow-primary/30 transition-all duration-300 hover:scale-[1.01] active:scale-[0.99]",disabled:E,children:E?n.jsxs(n.Fragment,{children:[n.jsx(sm,{className:"mr-2 h-5 w-5 animate-spin"}),o==="login"?"Signing in...":"Creating account..."]}):n.jsxs(n.Fragment,{children:[o==="login"?"Sign In":"Create Account",n.jsx(Qi,{className:"ml-2 h-5 w-5"})]})})})]}),n.jsx("div",{className:"mt-8 text-center animate-in fade-in duration-500 delay-300",children:n.jsxs("button",{onClick:()=>{l(o==="login"?"signup":"login"),I("")},className:"text-sm text-primary hover:text-primary/80 transition-colors font-medium inline-flex items-center gap-1",disabled:E,children:[o==="login"?"Don't have an account? Sign up":"Already have an account? Sign in",n.jsx(Qi,{className:"w-4 h-4"})]})}),n.jsx("div",{className:"mt-10 pt-6 border-t border-border/30 text-center animate-in fade-in duration-500 delay-[400ms]",children:n.jsxs("p",{className:"text-xs text-muted-foreground leading-relaxed",children:["By continuing, you agree to our"," ",n.jsx("span",{className:"text-primary hover:underline cursor-pointer font-medium",children:"Terms of Service"})," ","and"," ",n.jsx("span",{className:"text-primary hover:underline cursor-pointer font-medium",children:"Privacy Policy"})]})})]})]}),n.jsx("div",{className:"absolute -z-10 top-0 left-0 w-40 h-40 bg-gradient-to-br from-primary/15 to-transparent rounded-full blur-3xl"}),n.jsx("div",{className:"absolute -z-10 bottom-0 right-0 w-40 h-40 bg-gradient-to-tl from-accent/15 to-transparent rounded-full blur-3xl"})]})]})}const Lx="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function ir(r){const[o,l]=m.useState(!1),[i,u]=m.useState(!0),f=()=>{l(!0),u(!1)},g=()=>{u(!1)},{src:p,alt:w,className:v,style:N,fallback:k,...A}=r;return o?k?n.jsx(n.Fragment,{children:k}):n.jsx("div",{className:v,style:{...N,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--muted)"},children:n.jsx("div",{className:"flex items-center justify-center w-full h-full",children:n.jsx("img",{src:Lx,alt:"Error loading image",...A,"data-original-url":p,style:{maxWidth:"60%",maxHeight:"60%",opacity:.5}})})}):n.jsxs("div",{className:"relative w-full h-full",style:N,children:[i&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted animate-pulse",style:{borderRadius:"inherit"},children:n.jsx("div",{className:"w-8 h-8 border-3 border-primary/30 border-t-primary rounded-full animate-spin"})}),n.jsx("img",{src:p,alt:w,className:v,style:{...N,opacity:i?0:1,transition:"opacity 0.2s ease-in-out"},...A,onError:f,onLoad:g})]})}const Ox={xs:"w-6 h-6",sm:"w-10 h-10",md:"w-12 h-12",lg:"w-14 h-14",xl:"w-20 h-20","2xl":"w-24 h-24"},Pf={xs:"text-[8px]",sm:"text-xs",md:"text-sm",lg:"text-base",xl:"text-xl","2xl":"text-2xl"},zx={xs:"w-1.5 h-1.5",sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3",xl:"w-4 h-4","2xl":"w-5 h-5"},Ui=["from-blue-500 to-cyan-500","from-purple-500 to-pink-500","from-green-500 to-teal-500","from-orange-500 to-red-500","from-indigo-500 to-blue-500","from-pink-500 to-rose-500","from-teal-500 to-green-500","from-amber-500 to-orange-500","from-violet-500 to-purple-500","from-cyan-500 to-blue-500"];function $x(r){if(!r)return Ui[0];const o=r.split("").reduce((l,i)=>l+i.charCodeAt(0),0)%Ui.length;return Ui[o]}function Ux(r){if(!r)return"";const o=r.trim().split(/\s+/);return o.length===1?o[0].substring(0,2).toUpperCase():(o[0][0]+o[o.length-1][0]).toUpperCase()}function st({user:r,src:o,alt:l="Avatar",fallbackText:i,size:u="md",status:f,className:g="",showBorder:p=!0,onClick:w}){const v={online:"bg-success",offline:"bg-muted-foreground",away:"bg-warning"},N=r?.avatar_url||o,k=r?.full_name||l,A=r?.full_name||i||l,E=r?r.is_online?"online":"offline":f,O=Ux(A),x=$x(A);return n.jsxs("div",{className:`relative inline-block ${g}`,onClick:w,role:w?"button":void 0,tabIndex:w?0:void 0,children:[n.jsx("div",{className:`${Ox[u]} rounded-full flex items-center justify-center overflow-hidden ${p?"ring-2 ring-border/20 shadow-md hover:shadow-lg":"shadow-sm"} transition-all duration-300 hover:ring-primary/40`,children:N?n.jsx("div",{className:"w-full h-full avatar-image-container",children:n.jsx(ir,{src:N,alt:k,className:"w-full h-full object-cover object-center",style:{display:"block",width:"100%",height:"100%",objectFit:"cover",objectPosition:"center center"},fallback:n.jsx("div",{className:`w-full h-full bg-gradient-to-br ${x} flex items-center justify-center`,children:n.jsx("span",{className:`${Pf[u]} font-semibold text-white select-none`,children:O})})})}):n.jsx("div",{className:`w-full h-full bg-gradient-to-br ${x} flex items-center justify-center`,children:n.jsx("span",{className:`${Pf[u]} font-semibold text-white select-none`,children:O})})}),E&&n.jsx("span",{className:`absolute bottom-0 right-0 ${zx[u]} ${v[E]} rounded-full border-3 border-background shadow-lg ${E==="online"?"animate-pulse":""}`,"aria-label":`Status: ${E}`,style:{borderWidth:"3px"}})]})}const Bx=Ha("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Vx({className:r,variant:o,asChild:l=!1,...i}){const u=l?fc:"span";return n.jsx(u,{"data-slot":"badge",className:Pe(Bx({variant:o}),r),...i})}function Wx({conversation:r,isActive:o=!1,onClick:l,onHover:i,currentUserId:u}){const f=A=>{if(!A)return"";const E=new Date(A),x=new Date().getTime()-E.getTime();return x<864e5?E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):x<6048e5?E.toLocaleDateString("en-US",{weekday:"short"}):E.toLocaleDateString("en-US",{month:"short",day:"numeric"})},g=()=>r.type==="group"?r.title||"Group Chat":r.members?.find(E=>E.user_id!==u)?.user?.full_name||"Unknown",p=()=>r.type==="group"?r.avatar_url:r.members?.find(E=>E.user_id!==u)?.user?.avatar_url,w=()=>r.type==="group"?void 0:r.members?.find(E=>E.user_id!==u)?.user?.is_online?"online":"offline",v=()=>{if(!r.last_message||!(r.last_message.sender_id===u))return null;const E=r.last_message.statuses?.some(x=>x.status==="read"),O=r.last_message.statuses?.some(x=>x.status==="delivered");return E?"read":O?"delivered":"sent"},N=()=>{if(!r.last_message)return"Tap to start chatting";const A=r.last_message,E=A.sender_id===u,O="";if(A.type==="story_reply"){const x=A.story_reply?.story_type,I=x==="text"?"":x==="image"?"":"";return E?A.body||`${I} Replied to your status`:`${I} Replied to their status: ${A.body||""}`}return A.type==="voice"?`${O} Voice message`:A.type==="image"?`${O} Photo`:A.type==="file"?`${O} File`:`${O}${A.body||""}`},k=r.unread_count&&r.unread_count>0;return n.jsxs("button",{onClick:l,onMouseEnter:i,className:`w-full max-w-full flex items-center gap-3 px-3 py-3 transition-all duration-150 text-left border-b border-border/50 hover:bg-[var(--hover-surface)] overflow-hidden active:bg-[var(--hover-muted)] touch-manipulation ${o?"bg-muted":""}`,"aria-label":`Conversation with ${g()}`,children:[n.jsx(st,{src:p(),alt:g(),fallbackText:g(),size:"md",status:w(),className:"shrink-0 w-[52px] h-[52px]",showBorder:!0}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-baseline justify-between mb-0.5 gap-2",children:[n.jsx("h3",{className:`truncate text-[15px] leading-tight ${k?"font-semibold":""}`,children:g()}),n.jsx("span",{className:`text-xs flex-shrink-0 leading-tight ${k?"text-primary":"text-muted-foreground"}`,children:f(r.last_message?.created_at||r.updated_at)})]}),n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-1 min-w-0 flex-1",children:[r.last_message?.sender_id===u&&n.jsx("span",{className:"flex-shrink-0 flex items-center",children:v()==="read"?n.jsx(Nr,{className:"w-[15px] h-[15px] text-[#53bdeb]"}):v()==="delivered"?n.jsx(Nr,{className:"w-[15px] h-[15px] text-muted-foreground"}):n.jsx(Sr,{className:"w-[15px] h-[15px] text-muted-foreground"})}),n.jsx("p",{className:`text-[13.5px] truncate leading-tight ${k?"text-foreground font-medium":"text-muted-foreground"}`,children:N()})]}),k&&n.jsx(Vx,{className:"bg-primary text-primary-foreground rounded-full h-5 min-w-[20px] px-1.5 flex items-center justify-center flex-shrink-0 text-[11px] shadow-sm",children:r.unread_count>99?"99+":r.unread_count})]})]})]})}function nc({icon:r,title:o,description:l,actionLabel:i,onAction:u}){return n.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[n.jsxs("div",{className:"relative mb-6 animate-in zoom-in-50 duration-500",children:[n.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 animate-pulse",style:{width:80,height:80,marginLeft:-8,marginTop:-8,animationDuration:"3s"}}),n.jsx("div",{className:"relative w-16 h-16 rounded-full bg-gradient-to-br from-primary/10 to-accent/10 flex items-center justify-center shadow-soft",children:n.jsx(r,{className:"w-8 h-8 text-primary"})})]}),n.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-500 delay-200",children:[n.jsx("h3",{className:"mb-2 text-xl",children:o}),l&&n.jsx("p",{className:"text-muted-foreground mb-6 max-w-sm leading-relaxed",children:l}),i&&u&&n.jsx(Me,{onClick:u,className:"bg-gradient-to-r from-primary to-accent hover:opacity-90 shadow-lg shadow-primary/20 hover:scale-105 active:scale-95 transition-transform",children:i})]})]})}function Hx(){return n.jsxs("div",{className:"flex items-center gap-3 p-3 animate-pulse",children:[n.jsx("div",{className:"w-12 h-12 bg-muted rounded-full"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]})}function Af({userStories:r,isMyStory:o,currentUser:l,onClick:i,onAddStory:u}){const f=r?.has_unviewed??!1,g=r?.user||l,p=r?.stories.length||0,w=r?.stories&&r.stories.length>0?r.stories[r.stories.length-1]:null;if(!g)return null;const v=()=>{o&&p>0,i()},N=k=>{k.stopPropagation(),u?u():i()};return n.jsxs("div",{className:"flex flex-col items-center gap-1 min-w-[68px] group",children:[n.jsxs("div",{className:"relative cursor-pointer active:scale-95 transition-transform duration-100",children:[f&&!o&&n.jsx("div",{className:"absolute inset-0 rounded-full p-[2px] pointer-events-none",children:n.jsx("div",{className:"w-full h-full rounded-full story-ring-gradient",style:{background:"linear-gradient(135deg, var(--story-ring-unviewed-start), var(--story-ring-unviewed-mid), var(--story-ring-unviewed-end))",backgroundSize:"200% 200%"},children:n.jsx("div",{className:"w-full h-full rounded-full bg-background scale-[0.93]"})})}),!f&&!o&&p>0&&n.jsx("div",{className:"absolute inset-0 rounded-full border-[2px] pointer-events-none",style:{borderColor:"var(--story-ring-viewed)"}}),o&&p>0&&n.jsx("div",{className:"absolute inset-0 rounded-full border-[2px] pointer-events-none",style:{borderColor:"var(--story-ring-my-story)"}}),n.jsx("button",{onClick:v,className:"absolute inset-0 rounded-full w-full h-full z-0 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","aria-label":o?"View my status":`View ${g.full_name}'s status`}),n.jsxs("div",{className:`relative rounded-full ${f&&!o||o&&p>0||!f&&!o&&p>0?"p-[3px]":"p-0"} bg-background pointer-events-none`,children:[n.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden bg-muted flex items-center justify-center",children:w&&p>0?n.jsxs(n.Fragment,{children:[w.type==="image"&&w.media_url&&n.jsx(ir,{src:w.media_url,alt:"Story",className:"w-full h-full object-cover object-center"}),w.type==="video"&&w.media_url&&n.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[n.jsx(ir,{src:w.media_url,alt:"Story",className:"w-full h-full object-cover object-center"}),n.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center",children:n.jsx("div",{className:"w-5 h-5 rounded-full bg-white/90 flex items-center justify-center",children:n.jsx("svg",{className:"w-2.5 h-2.5 text-black ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),w.type==="text"&&n.jsx("div",{className:"w-full h-full flex items-center justify-center p-2",style:{background:w.background_color||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:n.jsx("p",{className:"text-white text-[8px] font-medium text-center leading-tight line-clamp-4",children:w.text_content})})]}):n.jsx(st,{user:g,size:"md",className:"w-full h-full",showBorder:!1})}),o&&n.jsx("button",{onClick:N,className:"absolute bottom-0 right-0 w-5 h-5 bg-primary rounded-full flex items-center justify-center border-[2.5px] border-background shadow-sm hover:bg-primary/90 transition-colors z-10 pointer-events-auto focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1 active:scale-90 transition-transform duration-100","aria-label":"Add status",children:n.jsx(Zs,{className:"w-[14px] h-[14px] text-white",strokeWidth:3})})]})]}),n.jsx("div",{className:"flex flex-col items-center gap-0 max-w-[68px]",children:n.jsx("span",{className:"text-[11px] text-center truncate transition-colors w-full leading-tight",style:{color:"var(--text-secondary)"},children:o?"My status":g.full_name})})]})}async function Gx(){return"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.warn("Browser does not support notifications"),!1)}function Yx(r,o,l,i){if(!(!("Notification"in window)||Notification.permission!=="granted"))try{const u=new Notification(`${r}`,{body:o,icon:l||"/favicon.ico",badge:"/favicon.ico",tag:"auroralink-message",renotify:!0,requireInteraction:!1,silent:!1});u.onclick=()=>{window.focus(),u.close(),i?.()},setTimeout(()=>{u.close()},5e3)}catch(u){console.error("Failed to show notification:",u)}}function Jx(){try{const r=new(window.AudioContext||window.webkitAudioContext),o=r.createOscillator(),l=r.createGain();o.connect(l),l.connect(r.destination),o.frequency.value=800,o.type="sine",l.gain.setValueAtTime(0,r.currentTime),l.gain.linearRampToValueAtTime(.3,r.currentTime+.01),l.gain.exponentialRampToValueAtTime(.01,r.currentTime+.15),o.start(r.currentTime),o.stop(r.currentTime+.15)}catch(r){console.error("Failed to play notification sound:",r)}}function Kx(r,o,l,i=!0,u){i&&!document.hidden&&Jx(),document.hidden&&Yx(r,o,l,u)}function Tf(){return"Notification"in window?Notification.permission:"unsupported"}const Sa={MESSAGE_PAGE_SIZE:50,CONVERSATION_PREVIEW_SIZE:20,CACHE_DURATION:{MESSAGES:1e3*60*30,CONVERSATIONS:1e3*60*15,PROFILES:1e3*60*60},PREFETCH_DELAY:100},ka="1.0";class qx{memoryCache=new Map;prefetchQueue=new Set;dbPromise=null;constructor(){this.initDB()}async initDB(){return this.dbPromise?this.dbPromise:(this.dbPromise=new Promise((o,l)=>{const i=indexedDB.open("AuroraLinkCache",2);i.onerror=()=>l(i.error),i.onsuccess=()=>o(i.result),i.onupgradeneeded=u=>{const f=u.target.result;f.objectStoreNames.contains("messages")||f.createObjectStore("messages",{keyPath:"conversationId"}),f.objectStoreNames.contains("conversations")||f.createObjectStore("conversations",{keyPath:"id"}),f.objectStoreNames.contains("profiles")||f.createObjectStore("profiles",{keyPath:"id"})}}),this.dbPromise)}getMemory(o){return this.memoryCache.get(o)||null}setMemory(o,l){this.memoryCache.set(o,l)}async getDB(o,l){try{const i=await this.initDB();return new Promise((u,f)=>{const w=i.transaction(o,"readonly").objectStore(o).get(l);w.onsuccess=()=>{const v=w.result;if(!v){u(null);return}if(v.version!==ka){u(null);return}u(v.data)},w.onerror=()=>f(w.error)})}catch(i){return console.warn("[PerformanceCache] IndexedDB read error:",i),null}}async setDB(o,l,i){try{const u=await this.initDB(),f={data:i,timestamp:Date.now(),version:ka};return new Promise((g,p)=>{const N=u.transaction(o,"readwrite").objectStore(o).put({...f,[o==="messages"?"conversationId":"id"]:l});N.onsuccess=()=>g(),N.onerror=()=>p(N.error)})}catch(u){console.warn("[PerformanceCache] IndexedDB write error:",u)}}async getMessages(o,l=0){const i=`messages:${o}`,u=this.getMemory(i);if(u){const g=l,p=l+Sa.MESSAGE_PAGE_SIZE;return{messages:u.messages.slice(g,p),hasMore:p<u.messages.length,fromCache:!0}}const f=await this.getDB("messages",o);if(f){this.setMemory(i,f);const g=l,p=l+Sa.MESSAGE_PAGE_SIZE;return{messages:f.messages.slice(g,p),hasMore:p<f.messages.length,fromCache:!0}}return{messages:[],hasMore:!1,fromCache:!1}}async saveMessages(o,l){const i=`messages:${o}`,u={messages:l,hasMore:!1,lastFetchTime:Date.now(),totalCount:l.length};this.setMemory(i,u),await this.setDB("messages",o,u)}async updateMessages(o,l){const i=`messages:${o}`;let u=this.getMemory(i);if(u||(u=await this.getDB("messages",o)),!u){await this.saveMessages(o,l);return}const f=new Set(u.messages.map(p=>p.id)),g=l.filter(p=>!f.has(p.id));if(g.length>0){const p=[...u.messages,...g].sort((w,v)=>new Date(w.created_at).getTime()-new Date(v.created_at).getTime());await this.saveMessages(o,p)}}async getConversation(o){const l=`conversation:${o}`,i=this.getMemory(l);if(i)return{conversation:i.conversation,fromCache:!0};const u=await this.getDB("conversations",o);return u?(this.setMemory(l,u),{conversation:u.conversation,fromCache:!0}):{conversation:null,fromCache:!1}}async saveConversation(o){const l=`conversation:${o.id}`,i={conversation:o,unreadCount:0,lastFetchTime:Date.now()};this.setMemory(l,i),await this.setDB("conversations",o.id,i)}async getAllConversations(){const o="all_conversations",l=this.getMemory(o);if(l)return{conversations:l,fromCache:!0};try{const i=localStorage.getItem("cache:conversations_list");if(i){const u=JSON.parse(i);if(Date.now()-u.timestamp<Sa.CACHE_DURATION.CONVERSATIONS&&u.version===ka)return this.setMemory(o,u.conversations),{conversations:u.conversations,fromCache:!0}}}catch(i){console.warn("[PerformanceCache] Failed to read conversations list cache:",i)}return{conversations:[],fromCache:!1}}async saveAllConversations(o){this.setMemory("all_conversations",o);try{localStorage.setItem("cache:conversations_list",JSON.stringify({conversations:o,timestamp:Date.now(),version:ka}))}catch(i){console.warn("[PerformanceCache] Failed to save conversations list:",i)}o.forEach(i=>{this.saveConversation(i)})}async prefetchConversation(o,l){(await this.getConversation(o)).conversation||this.prefetchQueue.has(o)||(this.prefetchQueue.add(o),setTimeout(async()=>{try{const u=await l();u&&(await this.saveConversation(u.conversation),await this.saveMessages(o,u.messages||[]))}catch(u){console.warn("[PerformanceCache] Prefetch failed:",u)}finally{this.prefetchQueue.delete(o)}},Sa.PREFETCH_DELAY))}async clearAll(){this.memoryCache.clear();try{Object.keys(localStorage).forEach(l=>{l.startsWith("cache:")&&localStorage.removeItem(l)})}catch(o){console.warn("[PerformanceCache] Failed to clear localStorage:",o)}try{const o=await this.initDB();["messages","conversations","profiles"].forEach(i=>{o.transaction(i,"readwrite").objectStore(i).clear()})}catch(o){console.warn("[PerformanceCache] Failed to clear IndexedDB:",o)}}async clearConversation(o){this.memoryCache.delete(`messages:${o}`),this.memoryCache.delete(`conversation:${o}`);try{const l=await this.initDB();l.transaction("messages","readwrite").objectStore("messages").delete(o),l.transaction("conversations","readwrite").objectStore("conversations").delete(o)}catch(l){console.warn("[PerformanceCache] Failed to clear conversation cache:",l)}}}const En=new qx;function Qx(){return{prefetchConversation:m.useCallback(o=>{En.prefetchConversation(o,()=>Cr.get(o).then(l=>l.data))},[])}}function Xx({currentUser:r,onSelectConversation:o,onNewChat:l,onSettings:i,onLogout:u,onViewStory:f,onCreateStory:g}){const[p,w]=m.useState([]),[v,N]=m.useState(!0),[k,A]=m.useState(""),[E,O]=m.useState("chats"),[x,I]=m.useState([]),[W,K]=m.useState(null),[T,G]=m.useState(!0),{prefetchConversation:j}=Qx();m.useEffect(()=>{S(!0),B();const P=setInterval(()=>{S(!1)},5e3),H=setInterval(()=>{B()},3e4),se=setInterval(async()=>{console.log("[HomeScreen] Running periodic story cleanup..."),await tn.cleanup(),await B()},300*1e3);return()=>{clearInterval(P),clearInterval(H),clearInterval(se)}},[]);const S=async(P=!1)=>{if(P){const V=await En.getAllConversations();V.fromCache&&V.conversations.length>0?(w(V.conversations),N(!1)):N(!0)}const H=lt(),{data:{session:se}}=await H.auth.getSession();if(!se?.access_token){console.log("[HomeScreen] No valid session available"),P&&N(!1);return}let ae;try{ae=await Cr.list()}catch(V){console.error("[HomeScreen] Network error loading conversations:",V),P&&N(!1);return}if(ae.requiresReauth){console.log("[HomeScreen] Authentication required - user may need to re-login"),P&&N(!1);return}if(ae.success&&ae.data?.conversations){const V=ae.data.conversations;if(await En.saveAllConversations(V),!P&&p.length>0)for(const me of V){const fe=p.find(ye=>ye.id===me.id);if(fe&&me.last_message){const ye=!fe.last_message||fe.last_message.id!==me.last_message.id,ke=me.last_message.sender_id!==r.id;if(ye&&ke){const te=me.members?.find(_=>_.user_id===me.last_message?.sender_id)?.user,U=te?.full_name||"Someone",Y=me.last_message.body||" Photo";Kx(U,Y,te?.avatar_url,!0,()=>o(me.id))}}}w(V)}else P&&console.error("[HomeScreen] Failed to load conversations:",ae.error);P&&N(!1)},B=async()=>{try{const P=await tn.getAllStories();P.success&&P.data?.stories&&(console.log("[HomeScreen]  Loaded stories:",P.data.stories.map(se=>({user:se.user.full_name,count:se.stories.length,has_unviewed:se.has_unviewed}))),I(P.data.stories));const H=await tn.getMyStories();H.success&&H.data?.stories&&(H.data.stories.length>0?K({user:r,stories:H.data.stories,has_unviewed:!1}):K(null))}catch(P){console.error("[Stories] Error loading stories:",P)}finally{G(!1)}},oe=p.filter(P=>{if(!k)return!0;const H=k.toLowerCase();return P.type==="group"?P.title?.toLowerCase().includes(H):P.members?.find(ae=>ae.user_id!==r.id)?.user?.full_name?.toLowerCase().includes(H)});return n.jsxs("div",{className:"h-screen-safe flex flex-col bg-background overflow-hidden w-full max-w-full no-overscroll",children:[n.jsx("div",{className:"bg-gradient-to-r from-primary to-accent px-3 py-2.5 shadow-lg shrink-0 pt-safe",children:n.jsxs("div",{className:"flex items-center justify-between w-full",children:[n.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[n.jsx("div",{className:"w-8 h-8 rounded-xl bg-white/20 backdrop-blur-sm flex items-center justify-center shrink-0",children:n.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),n.jsx("h1",{className:"text-white text-lg font-semibold tracking-wide truncate",children:"AuroraLink"})]}),n.jsxs("div",{className:"flex items-center gap-0.5 shrink-0",children:[n.jsx(Me,{variant:"ghost",size:"icon",onClick:i,className:"h-9 w-9 rounded-full hover:bg-white/20 text-white touch-target","aria-label":"Settings",children:n.jsx(am,{className:"w-[18px] h-[18px]"})}),n.jsx(Me,{variant:"ghost",size:"icon",onClick:u,className:"h-9 w-9 rounded-full hover:bg-white/20 text-white touch-target","aria-label":"Logout",children:n.jsx(Fg,{className:"w-[18px] h-[18px]"})})]})]})}),n.jsxs("div",{className:"flex border-b border-border bg-surface shrink-0 w-full",children:[n.jsxs("button",{onClick:()=>O("chats"),className:`flex-1 py-3 flex items-center justify-center gap-1.5 relative font-medium touch-target transition-all ${E==="chats"?"text-primary":"text-muted-foreground hover:text-foreground"}`,children:[n.jsx(Nf,{className:"w-[18px] h-[18px]"}),n.jsx("span",{className:"text-sm",children:"Chats"}),E==="chats"&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[2px] bg-gradient-to-r from-primary to-accent rounded-t-full"})]}),n.jsxs("button",{onClick:()=>O("calls"),className:`flex-1 py-3 flex items-center justify-center gap-1.5 relative font-medium touch-target transition-all ${E==="calls"?"text-primary":"text-muted-foreground hover:text-foreground"}`,children:[n.jsx(pn,{className:"w-[18px] h-[18px]"}),n.jsx("span",{className:"text-sm",children:"Calls"}),E==="calls"&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[2px] bg-gradient-to-r from-primary to-accent rounded-t-full"})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden w-full smooth-scroll",children:E==="chats"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-white px-4 py-3 sticky top-0 z-10 shadow-sm",children:n.jsxs("div",{className:"relative w-full",children:[n.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none z-10 search-icon-modern",children:n.jsx(Va,{className:"w-[18px] h-[18px] text-[#54656F]",strokeWidth:2.5})}),n.jsx(hn,{type:"search",placeholder:"Search or start new chat",value:k,onChange:P=>A(P.target.value),className:"w-full h-[42px] pl-[44px] pr-4 bg-[#F0F2F5] hover:bg-[#E8EAED] focus:bg-white border-0 rounded-[10px] transition-all duration-200 text-[15px] text-[#111B21] placeholder:text-[#667781] focus:ring-2 focus:ring-[#00A884]/20 focus:shadow-md search-input-modern"})]})}),n.jsxs("div",{className:"bg-background",children:[n.jsx("div",{className:"overflow-x-auto scrollbar-hide smooth-scroll",children:n.jsxs("div",{className:"flex gap-2.5 px-2.5 py-2.5",children:[n.jsx(Af,{userStories:W||void 0,isMyStory:!0,currentUser:r,onClick:()=>{if(W&&W.stories.length>0){const P=[W,...x];f(P,0)}else g()},onAddStory:()=>{g()}}),T?n.jsx(n.Fragment,{children:[1,2,3].map(P=>n.jsxs("div",{className:"flex flex-col items-center gap-1 min-w-[62px]",children:[n.jsx("div",{className:"w-[56px] h-[56px] rounded-full bg-muted animate-pulse"}),n.jsx("div",{className:"w-10 h-2 bg-muted rounded animate-pulse"})]},P))}):n.jsx(n.Fragment,{children:x.map((P,H)=>n.jsx(Af,{userStories:P,onClick:()=>{const se=W?[W,...x]:x,ae=W?H+1:H;f(se,ae)}},P.user.id))}),!T&&x.length===0&&!W&&n.jsx("div",{className:"flex-1 flex items-center justify-center py-2",children:n.jsx("p",{className:"text-xs text-muted-foreground",children:"No status updates"})})]})}),n.jsx("div",{className:"h-[6px] bg-muted/30"})]}),v?n.jsx("div",{className:"w-full",children:[1,2,3,4,5,6].map(P=>n.jsx(Hx,{},P))}):oe.length>0?n.jsx("div",{className:"w-full",children:oe.map(P=>n.jsx(Wx,{conversation:P,onClick:()=>o(P.id),onHover:()=>j(P.id),currentUserId:r.id},P.id))}):n.jsx(nc,{icon:Nf,title:k?"No conversations found":"No conversations yet",description:k?"Try a different search term":"Start a new chat to begin messaging",actionLabel:k?void 0:"New Chat",onAction:k?void 0:l})]}):n.jsx(nc,{icon:pn,title:"Calls Coming Soon! ",description:"Voice and video calling feature will be available soon. Stay tuned!"})}),n.jsx(Me,{onClick:l,size:"lg",className:"fixed right-5 rounded-full shadow-2xl shadow-primary/30 hover:shadow-primary/40 h-14 w-14 bg-gradient-to-r from-primary to-accent hover:opacity-90 transition-all hover:scale-105 active:scale-95 touch-target z-[60]",style:{bottom:"calc(max(env(safe-area-inset-bottom, 0px), 0px) + 80px)"},"aria-label":"New conversation",children:n.jsx(Zs,{className:"w-6 h-6"})})]})}function Zx({audioUrl:r,duration:o,isSent:l=!1}){const[i,u]=m.useState(!1),[f,g]=m.useState(0),[p,w]=m.useState(o||0),v=m.useRef(null),N=m.useRef(null);m.useEffect(()=>{const O=new Audio(r);return v.current=O,O.addEventListener("loadedmetadata",()=>{w(Math.floor(O.duration))}),O.addEventListener("ended",()=>{u(!1),g(0),N.current&&clearInterval(N.current)}),()=>{O.pause(),O.src="",N.current&&clearInterval(N.current)}},[r]);const k=()=>{v.current&&(i?(v.current.pause(),N.current&&clearInterval(N.current)):(v.current.play(),N.current=setInterval(()=>{v.current&&g(Math.floor(v.current.currentTime))},100)),u(!i))},A=O=>{const x=Math.floor(O/60),I=O%60;return`${x}:${I.toString().padStart(2,"0")}`},E=p>0?f/p*100:0;return n.jsxs("div",{className:"flex items-center gap-2 min-w-[220px] py-1",children:[n.jsx(Me,{variant:"ghost",size:"icon",onClick:k,className:`h-9 w-9 rounded-full shrink-0 ${l?"hover:bg-primary-foreground/20 text-primary-foreground":"hover:bg-[var(--hover-muted)] text-foreground"}`,"aria-label":i?"Pause":"Play",children:i?n.jsx(zg,{className:"w-5 h-5",fill:"currentColor"}):n.jsx($g,{className:"w-5 h-5 ml-0.5",fill:"currentColor"})}),n.jsxs("div",{className:"flex-1 flex flex-col gap-1.5",children:[n.jsx("div",{className:"relative h-1 bg-black/10 dark:bg-white/10 rounded-full overflow-hidden",children:n.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full transition-all ${l?"bg-primary-foreground/80":"bg-primary"}`,style:{width:`${E}%`}})}),n.jsxs("div",{className:`flex justify-between items-center text-[11px] ${l?"text-primary-foreground/70":"text-muted-foreground"}`,children:[n.jsx("span",{children:A(i?f:p)}),n.jsx("svg",{className:`w-12 h-4 ${l?"opacity-50":"opacity-40"}`,viewBox:"0 0 48 16",fill:"none",children:n.jsx("path",{d:"M1 8 L1 8 M5 6 L5 10 M9 4 L9 12 M13 7 L13 9 M17 5 L17 11 M21 3 L21 13 M25 6 L25 10 M29 4 L29 12 M33 8 L33 8 M37 5 L37 11 M41 7 L41 9 M45 6 L45 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})]})]})]})}function e0({storyReply:r,isOwnMessage:o}){return n.jsxs("div",{className:"overflow-hidden rounded-lg border-[#d1d7db]/80 bg-[#f0f2f5] border relative animate-in fade-in slide-in-from-top-1 duration-200",children:[n.jsx("div",{className:"w-1 h-full absolute left-0 top-0 bottom-0 bg-[#00a884]"}),n.jsxs("div",{className:"flex items-center gap-2.5 px-3 py-2.5 pl-4",children:[n.jsx("div",{className:"relative flex-shrink-0",children:r.story_type==="text"?n.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center overflow-hidden shadow-sm",style:{background:r.story_background_color||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:n.jsx("p",{className:"text-white text-[10px] font-medium leading-tight text-center px-1.5 line-clamp-3",children:r.story_preview})}):r.story_type==="image"?n.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-muted shadow-sm",children:n.jsx(ir,{src:r.story_preview||"",alt:"Story",className:"w-full h-full object-cover"})}):n.jsxs("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-muted shadow-sm relative",children:[n.jsx(ir,{src:r.story_preview||"",alt:"Story",className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:n.jsx("div",{className:"w-6 h-6 rounded-full bg-white/90 flex items-center justify-center",children:n.jsx("svg",{className:"w-3 h-3 text-black ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})})})]})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[n.jsxs("svg",{className:"w-4 h-4 flex-shrink-0 text-[#00a884]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"2"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6l4 2"})]}),n.jsxs("span",{className:"text-xs font-medium truncate text-[#111b21]",children:[r.story_user_name,"'s status"]})]}),n.jsx("p",{className:"text-[11px] truncate text-[#667781]",children:r.story_type==="text"?n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})}),"Text status"]}):r.story_type==="image"?n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),"Photo"]}):n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})}),"Video"]})})]})]})]})}const _m=m.createContext(null);function jc(){const r=m.useContext(_m);if(!r)throw new Error("DropdownMenu components must be used within DropdownMenu");return r}function Em({children:r,open:o,onOpenChange:l}){const[i,u]=m.useState(!1),f=o!==void 0?o:i,g=l||u;return n.jsx(_m.Provider,{value:{open:f,onOpenChange:g},children:n.jsx("div",{className:"relative inline-block",children:r})})}function Pm({children:r,asChild:o,className:l,...i}){const{open:u,onOpenChange:f}=jc();return o&&m.isValidElement(r)?m.cloneElement(r,{...i,onClick:g=>{f(!u),r.props.onClick?.(g)}}):n.jsx("button",{className:Pe("",l),onClick:()=>f(!u),...i,children:r})}function Am({className:r,children:o,align:l="end",sideOffset:i=4,...u}){const{open:f,onOpenChange:g}=jc(),p=m.useRef(null);if(m.useEffect(()=>{if(!f)return;const v=N=>{p.current&&!p.current.contains(N.target)&&g(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[f,g]),!f)return null;const w={start:"left-0",center:"left-1/2 -translate-x-1/2",end:"right-0"}[l];return n.jsx("div",{ref:p,className:Pe("absolute z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95",w,r),style:{top:`calc(100% + ${i}px)`},...u,children:o})}function os({className:r,inset:o,...l}){const{onOpenChange:i}=jc();return n.jsx("div",{className:Pe("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",o&&"pl-8",r),onClick:()=>i(!1),...l})}function t0({message:r,isSent:o,showAvatar:l=!0,showTimestamp:i=!0,currentUserId:u,isFirstInGroup:f=!0,isLastInGroup:g=!0,onReply:p,onDeleteForMe:w,onDeleteForEveryone:v,onCopy:N}){const[k,A]=m.useState(0),[E,O]=m.useState(0),[x,I]=m.useState(!1),W=m.useRef(null),K=P=>{A(P.touches[0].clientX)},T=P=>{const H=P.touches[0].clientX-k;o?H<0&&H>-80&&O(H):H>0&&H<80&&O(H)},G=()=>{(o&&E<-60||!o&&E>60)&&p?.(r),O(0)},j=async()=>{if(r.body)try{await navigator.clipboard.writeText(r.body),N?.(r.body)}catch(P){console.warn("Clipboard API blocked, using fallback method:",P);const H=document.createElement("textarea");H.value=r.body,H.style.position="fixed",H.style.left="-999999px",H.style.top="-999999px",document.body.appendChild(H),H.focus(),H.select();try{document.execCommand("copy")?N?.(r.body):console.error("Fallback copy failed")}catch(se){console.error("Could not copy text:",se)}document.body.removeChild(H)}},S=P=>new Date(P).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),B=r.statuses?.some(P=>P.user_id!==r.sender_id&&P.status==="read"),oe=r.statuses?.some(P=>P.user_id!==r.sender_id&&P.status==="delivered");return r.deleted_for_everyone?n.jsxs("div",{className:`flex ${o?"justify-end":"justify-start"} px-2`,children:[!o&&l&&n.jsx(st,{src:r.sender?.avatar_url,alt:r.sender?.full_name,size:"sm",className:"w-8 h-8 mr-2 self-end"}),!o&&!l&&n.jsx("div",{className:"w-8 mr-2"}),n.jsx("div",{className:`max-w-[65%] px-3 py-2 rounded-lg ${o?"bg-[#d9fdd3]":"bg-white"}`,style:{borderRadius:o?g?"7.5px 7.5px 0px 7.5px":"7.5px":g?"7.5px 7.5px 7.5px 0px":"7.5px"},children:n.jsx("p",{className:"text-[13px] italic text-[#667781]",children:"This message was deleted"})})]}):r.deleted_for_users?.includes(u)?null:n.jsxs("div",{ref:W,className:`flex ${o?"justify-end":"justify-start"} px-2 group relative`,onTouchStart:K,onTouchMove:T,onTouchEnd:G,style:{transform:`translateX(${E}px)`,transition:E===0?"transform 0.2s ease-out":"none"},children:[E!==0&&n.jsx("div",{className:`absolute top-1/2 -translate-y-1/2 ${o?"right-full mr-2":"left-full ml-2"}`,children:n.jsx(jf,{className:"w-6 h-6 text-[#00a884]",style:{opacity:Math.abs(E)/60}})}),!o&&l&&n.jsx(st,{src:r.sender?.avatar_url,alt:r.sender?.full_name,size:"sm",className:"w-8 h-8 mr-2 self-end"}),!o&&!l&&n.jsx("div",{className:"w-8 mr-2"}),n.jsx("div",{className:`absolute top-1 opacity-0 group-hover:opacity-100 transition-opacity ${o?"left-2":"right-2"} z-10`,children:n.jsxs(Em,{children:[n.jsx(Pm,{asChild:!0,children:n.jsx("button",{className:"w-7 h-7 rounded-full bg-white shadow-lg flex items-center justify-center hover:bg-gray-100 transition-colors",children:n.jsx(cc,{className:"w-4 h-4 text-[#54656f]"})})}),n.jsxs(Am,{align:o?"start":"end",className:"w-48",children:[p&&n.jsxs(os,{onClick:()=>p(r),children:[n.jsx(jf,{className:"w-4 h-4 mr-2"}),"Reply"]}),r.body&&n.jsxs(os,{onClick:j,children:[n.jsx(Pg,{className:"w-4 h-4 mr-2"}),"Copy"]}),w&&n.jsxs(os,{onClick:()=>w(r.id),children:[n.jsx(lr,{className:"w-4 h-4 mr-2"}),"Delete for me"]}),v&&o&&n.jsxs(os,{onClick:()=>v(r.id),className:"text-destructive",children:[n.jsx(lr,{className:"w-4 h-4 mr-2"}),"Delete for everyone"]})]})]})}),n.jsxs("div",{className:`max-w-[65%] shadow-[0_1px_0.5px_rgba(11,20,26,0.13)] ${o?"bg-[#d9fdd3]":"bg-white"}`,style:{borderRadius:o?g?"7.5px 7.5px 0px 7.5px":"7.5px":g?"7.5px 7.5px 7.5px 0px":"7.5px"},children:[r.type==="voice"&&r.attachments?.[0]&&n.jsx("div",{className:"px-2 py-1.5",children:n.jsx(Zx,{audioUrl:r.attachments[0].url})}),r.type==="image"&&r.attachments?.[0]&&n.jsxs("div",{className:"relative",children:[n.jsx(ir,{src:r.attachments[0].url,alt:"Image",className:"rounded-lg max-w-full h-auto",style:{maxHeight:"400px",minWidth:"200px"}}),r.body&&n.jsx("div",{className:"px-2 py-1.5",children:n.jsx("p",{className:"text-[14.2px] text-[#111b21] break-words whitespace-pre-wrap",children:r.body})})]}),r.type==="video"&&r.attachments?.[0]&&n.jsxs("div",{children:[n.jsx("video",{src:r.attachments[0].url,controls:!0,className:"rounded-lg max-w-full",style:{maxHeight:"400px",minWidth:"200px"}}),r.body&&n.jsx("div",{className:"px-2 py-1.5",children:n.jsx("p",{className:"text-[14.2px] text-[#111b21] break-words whitespace-pre-wrap",children:r.body})})]}),r.type==="file"&&r.attachments?.[0]&&n.jsx("a",{href:r.attachments[0].url,download:!0,className:"block px-3 py-2 hover:opacity-80",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-[#00a884] flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M8 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0017.414 6L14 2.586A2 2 0 0012.586 2H8z"})})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-[14.2px] text-[#111b21] truncate",children:r.attachments[0].filename}),n.jsxs("p",{className:"text-[12px] text-[#667781]",children:[(r.attachments[0].size/1024).toFixed(1)," KB"]})]})]})}),r.type==="story_reply"&&r.story_reply&&n.jsx("div",{className:"mx-[9px] mt-[6px] mb-1",children:n.jsx(e0,{storyReply:r.story_reply,isOwnMessage:o})}),r.reply_to_message&&n.jsxs("div",{className:"mx-[9px] mt-[6px] mb-1 pl-2 pr-1 py-1 border-l-4 border-[#00a884] bg-black/5 rounded",children:[n.jsx("p",{className:"text-[12.5px] text-[#00a884] font-medium mb-0.5",children:r.reply_to_message.sender?.full_name||"Unknown"}),n.jsx("p",{className:"text-[13px] text-[#667781] truncate",children:r.reply_to_message.type==="image"?" Photo":r.reply_to_message.type==="video"?" Video":r.reply_to_message.type==="voice"?" Voice message":r.reply_to_message.type==="file"?" File":r.reply_to_message.body||"Message"})]}),(r.type==="text"||r.type==="story_reply"||!r.type)&&r.body&&n.jsxs("div",{className:"px-[9px] pt-[6px] pb-[8px]",children:[n.jsx("p",{className:"text-[14.2px] text-[#111b21] break-words whitespace-pre-wrap",style:{lineHeight:"19px"},children:r.body}),n.jsxs("div",{className:"flex items-center justify-end gap-1 mt-1",children:[n.jsx("span",{className:"text-[11px] text-[#667781]",children:S(r.created_at)}),o&&n.jsx(n.Fragment,{children:r.pending?n.jsx(Xi,{className:"w-4 h-4 text-[#667781]"}):r.failed?n.jsx(sr,{className:"w-4 h-4 text-red-500"}):B?n.jsx(Nr,{className:"w-4 h-4 text-[#53bdeb]",strokeWidth:2.5}):oe?n.jsx(Nr,{className:"w-4 h-4 text-[#667781]",strokeWidth:2.5}):n.jsx(Sr,{className:"w-4 h-4 text-[#667781]",strokeWidth:2.5})})]})]}),r.reactions&&r.reactions.length>0&&n.jsx("div",{className:"flex gap-1 px-2 pb-1 flex-wrap",children:r.reactions.map((P,H)=>n.jsx("div",{className:"bg-white rounded-full px-2 py-0.5 text-xs shadow-sm border border-gray-200",children:n.jsx("span",{children:P.emoji})},H))})]}),i&&(r.type==="voice"||r.type==="file")&&n.jsxs("div",{className:`flex items-center gap-1 mt-1 ${o?"justify-end":""}`,children:[n.jsx("span",{className:"text-[11px] text-[#667781]",children:S(r.created_at)}),o&&n.jsx(n.Fragment,{children:r.pending?n.jsx(Xi,{className:"w-3.5 h-3.5 text-[#667781]"}):r.failed?n.jsx(sr,{className:"w-3.5 h-3.5 text-red-500"}):B?n.jsx(Nr,{className:"w-3.5 h-3.5 text-[#53bdeb]",strokeWidth:2.5}):oe?n.jsx(Nr,{className:"w-3.5 h-3.5 text-[#667781]",strokeWidth:2.5}):n.jsx(Sr,{className:"w-3.5 h-3.5 text-[#667781]",strokeWidth:2.5})})]})]})}function n0({userName:r}){return n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-pulse",style:{animationDelay:"0ms"}}),n.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-pulse",style:{animationDelay:"150ms"}}),n.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),r&&n.jsxs("span",{children:[r," is typing..."]})]})}let Rf=0;function qs(r,o){Rf++;const l=`toast-${Rf}`,i=document.createElement("div");i.id=l,i.className="fixed bottom-4 right-4 z-[100] bg-surface border border-border rounded-lg shadow-lg p-4 max-w-md animate-in slide-in-from-bottom-5 fade-in duration-300";const u=document.createElement("div");u.className="flex items-start gap-3";const f=document.createElement("div");f.className="flex-1";const g=document.createElement("div");if(g.className="font-medium text-foreground",g.textContent=r,f.appendChild(g),o?.description){const w=document.createElement("div");w.className="text-sm text-muted-foreground mt-1",w.textContent=o.description,f.appendChild(w)}if(u.appendChild(f),o?.action){const w=document.createElement("button");w.className="text-sm font-medium text-primary hover:text-primary/80 transition-colors",w.textContent=o.action.label,w.onclick=()=>{o.action.onClick(),Mf(l)},u.appendChild(w)}i.appendChild(u),document.body.appendChild(i);const p=o?.duration??4e3;return setTimeout(()=>Mf(l),p),l}function Mf(r){const o=document.getElementById(r);o&&(o.classList.add("animate-out","slide-out-to-bottom-5","fade-out"),setTimeout(()=>o.remove(),300))}const $=Object.assign((r,o)=>qs(r,o),{success:(r,o)=>qs(` ${r}`,o),error:(r,o)=>qs(` ${r}`,o),info:(r,o)=>qs(` ${r}`,o),warning:(r,o)=>qs(` ${r}`,o)});function r0({onRecordingComplete:r,onCancel:o}){const[l,i]=m.useState(!1),[u,f]=m.useState(0),[g,p]=m.useState([]),w=m.useRef(null),v=m.useRef([]),N=m.useRef(null),k=m.useRef(null),A=m.useRef(null),E=m.useRef(null),O=m.useRef(null);m.useEffect(()=>(x(),()=>{W()}),[]);const x=async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){$.error("Voice recording not supported",{description:"Your browser does not support voice recording"}),o();return}const j=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});k.current=j;const S=new AudioContext,B=S.createAnalyser(),oe=S.createMediaStreamSource(j);B.fftSize=256,oe.connect(B),A.current=S,E.current=B,I();const P=new MediaRecorder(j);w.current=P,v.current=[],P.ondataavailable=H=>{H.data.size>0&&v.current.push(H.data)},P.onstop=()=>{const H=new Blob(v.current,{type:"audio/webm"});r(H,u),W()},P.start(),i(!0),N.current=setInterval(()=>{f(H=>{const se=H+1;return se>=3600&&K(),se})},1e3)}catch(j){console.error("Failed to start recording:",j),j instanceof Error?j.name==="NotAllowedError"?$.error("Microphone access denied",{description:"Please allow microphone access in your browser settings to send voice messages",duration:5e3}):j.name==="NotFoundError"?$.error("No microphone found",{description:"Please connect a microphone to record voice messages",duration:5e3}):j.name==="NotReadableError"?$.error("Microphone is busy",{description:"Your microphone is already in use by another application",duration:5e3}):$.error("Failed to access microphone",{description:j.message||"Please check your browser settings",duration:5e3}):$.error("Failed to access microphone",{description:"Please allow microphone access to send voice messages",duration:5e3}),o()}},I=()=>{if(!E.current)return;const j=E.current.frequencyBinCount,S=new Uint8Array(j);E.current.getByteTimeDomainData(S);const B=30,oe=Math.floor(j/B),P=[];for(let H=0;H<B;H++){const se=S[H*oe],ae=Math.abs((se-128)/128);P.push(Math.max(.1,ae))}p(P),O.current=requestAnimationFrame(I)},W=()=>{N.current&&clearInterval(N.current),O.current&&cancelAnimationFrame(O.current),A.current&&A.current.close(),k.current&&k.current.getTracks().forEach(j=>j.stop())},K=()=>{w.current&&w.current.state!=="inactive"&&(w.current.stop(),i(!1))},T=()=>{w.current&&w.current.state!=="inactive"&&w.current.stop(),W(),o()},G=j=>{const S=Math.floor(j/60),B=j%60;return`${S}:${B.toString().padStart(2,"0")}`};return n.jsxs("div",{className:"absolute inset-0 bg-[#efeae2] z-50 flex flex-col",children:[n.jsxs("div",{className:"h-[60px] bg-[#00a884] flex items-center px-4 gap-4 shadow-sm",children:[n.jsx("button",{onClick:T,className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors active:scale-95","aria-label":"Cancel recording",children:n.jsx(Tn,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-white text-[17px] font-medium",children:"Recording..."}),n.jsx("div",{className:"text-white/90 text-[13px]",children:G(u)})]}),n.jsx("button",{onClick:T,className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors active:scale-95","aria-label":"Delete recording",children:n.jsx(lr,{className:"w-5 h-5 text-white"})})]}),n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-8",children:[n.jsxs("div",{className:"relative mb-8",children:[n.jsx("div",{className:"absolute inset-0 bg-[#00a884]/20 rounded-full animate-ping",style:{animationDuration:"2s"}}),n.jsx("div",{className:"relative w-24 h-24 bg-[#00a884] rounded-full flex items-center justify-center shadow-lg",children:n.jsx(kr,{className:"w-12 h-12 text-white"})})]}),n.jsx("div",{className:"w-full max-w-md h-24 flex items-center justify-center gap-[3px] mb-4",children:g.length>0?g.map((j,S)=>n.jsx("div",{className:"w-1 bg-[#00a884] rounded-full transition-all duration-100",style:{height:`${Math.min(j*100,96)}px`,opacity:.6+j*.4}},S)):[...Array(30)].map((j,S)=>n.jsx("div",{className:"w-1 bg-[#00a884]/30 rounded-full",style:{height:"12px"}},S))}),n.jsx("div",{className:"text-[#667781] text-lg font-mono mb-2",children:G(u)}),n.jsx("div",{className:"text-[#667781] text-sm text-center max-w-xs",children:u<1?"Speak now...":"Tap the send button when you're done"})]}),n.jsx("div",{className:"bg-[#efeae2] px-6 py-6 pb-safe",children:n.jsxs("div",{className:"flex items-center justify-center gap-6",children:[n.jsx("button",{onClick:T,className:"w-16 h-16 flex items-center justify-center rounded-full bg-[#f0f2f5] hover:bg-[#e4e6eb] transition-all active:scale-95 shadow-sm","aria-label":"Cancel and delete",children:n.jsx(lr,{className:"w-6 h-6 text-[#54656f]"})}),n.jsx("button",{onClick:K,disabled:u<1,className:"w-20 h-20 flex items-center justify-center rounded-full bg-[#00a884] hover:bg-[#00a884]/90 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg","aria-label":"Send voice message",children:n.jsx(Wa,{className:"w-8 h-8 text-white"})})]})})]})}const Df={Smileys:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Gestures:["","","","","","","","","","","","","","","","","","",""],Hearts:["","","","","","","","","","","","","","","","","","",""],Objects:["","","","","","","","","","","","","","","","","","","","","",""]};function s0({onEmojiSelect:r,trigger:o}){const[l,i]=m.useState(!1),[u,f]=m.useState("Smileys"),g=p=>{r(p),i(!1)};return n.jsxs(Nm,{open:l,onOpenChange:i,children:[n.jsx(bm,{asChild:!0,children:o}),n.jsx(Sm,{className:"w-80 p-0",align:"start",side:"top",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("div",{className:"flex gap-1 p-2 border-b border-border overflow-x-auto",children:Object.keys(Df).map(p=>n.jsx(Me,{variant:u===p?"secondary":"ghost",size:"sm",onClick:()=>f(p),className:"text-xs whitespace-nowrap",children:p},p))}),n.jsx("div",{className:"grid grid-cols-8 gap-1 p-2 max-h-64 overflow-y-auto",children:Df[u].map(p=>n.jsx("button",{onClick:()=>g(p),className:"text-2xl p-2 hover:bg-[var(--hover-surface)] rounded transition-colors","aria-label":`Select ${p}`,children:p},p))})]})})]})}function o0({message:r,onCancel:o}){return n.jsxs("div",{className:"bg-white dark:bg-[#2a3942] border-l-4 border-[#00a884] px-4 py-2 flex items-center gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("div",{className:"w-1 h-full bg-[#00a884] rounded"}),n.jsx("p",{className:"text-[13px] text-[#00a884] font-medium",children:r.sender_id?r.sender?.full_name:"You"})]}),n.jsx("p",{className:"text-[13.5px] text-[#667781] dark:text-[#8696a0] truncate",children:r.type==="image"?" Photo":r.type==="video"?" Video":r.type==="voice"?" Voice message":r.type==="file"?" File":r.body||"Message"})]}),n.jsx("button",{onClick:o,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-black/5 dark:hover:bg-white/5 transition-colors",children:n.jsx(Tn,{className:"w-5 h-5 text-[#667781] dark:text-[#8696a0]"})})]})}const Tm=m.createContext(null);function Nc(){const r=m.useContext(Tm);if(!r)throw new Error("AlertDialog components must be used within AlertDialog");return r}function bc({open:r,onOpenChange:o,children:l}){const[i,u]=m.useState(!1),f=r!==void 0?r:i,g=o||u;return n.jsx(Tm.Provider,{value:{open:f,onOpenChange:g},children:l})}function a0({className:r,...o}){return n.jsx("div",{"data-slot":"alert-dialog-overlay",className:Pe("fixed inset-0 z-50 bg-black/50 animate-in fade-in-0",r),...o})}function Sc({className:r,children:o,...l}){const{open:i}=Nc();return i?n.jsxs(n.Fragment,{children:[n.jsx(a0,{}),n.jsx("div",{"data-slot":"alert-dialog-content",className:Pe("bg-background fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 animate-in fade-in-0 zoom-in-95 sm:max-w-lg",r),...l,children:o})]}):null}function kc({className:r,...o}){return n.jsx("div",{"data-slot":"alert-dialog-header",className:Pe("flex flex-col gap-2 text-center sm:text-left",r),...o})}function Cc({className:r,...o}){return n.jsx("div",{"data-slot":"alert-dialog-footer",className:Pe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",r),...o})}function _c({className:r,...o}){return n.jsx("h2",{"data-slot":"alert-dialog-title",className:Pe("text-lg font-semibold",r),...o})}function Ec({className:r,...o}){return n.jsx("p",{"data-slot":"alert-dialog-description",className:Pe("text-muted-foreground text-sm",r),...o})}function Pc({className:r,onClick:o,...l}){const{onOpenChange:i}=Nc();return n.jsx("button",{className:Pe(mc(),r),onClick:u=>{o?.(u),i(!1)},...l})}function Rm({className:r,onClick:o,...l}){const{onOpenChange:i}=Nc();return n.jsx("button",{className:Pe(mc({variant:"outline"}),r),onClick:u=>{o?.(u),i(!1)},...l})}function l0({open:r,onOpenChange:o,onAllow:l}){return n.jsx(bc,{open:r,onOpenChange:o,children:n.jsxs(Sc,{children:[n.jsxs(kc,{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(kr,{className:"w-6 h-6 text-primary"})}),n.jsx(_c,{children:"Microphone Access Required"})]}),n.jsx(Ec,{children:"AuroraLink needs access to your microphone to record voice messages."})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(rm,{className:"w-4 h-4 text-info mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-sm space-y-2",children:[n.jsx("div",{className:"font-medium",children:"What happens next:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-muted-foreground",children:[n.jsx("li",{children:"Your browser will ask for microphone permission"}),n.jsx("li",{children:'Click "Allow" to enable voice messages'}),n.jsx("li",{children:"You can revoke access anytime in browser settings"})]})]})]})}),n.jsx("div",{className:"bg-warning/10 border border-warning/20 rounded-lg p-3",children:n.jsxs("div",{className:"text-sm text-warning-foreground",children:[n.jsx("strong",{children:"Privacy Note:"})," Your voice is only recorded when you press the microphone button. Recordings are sent directly to the recipient and stored securely."]})})]}),n.jsxs(Cc,{children:[n.jsx(Rm,{children:"Cancel"}),n.jsx(Pc,{onClick:l,children:"Allow Microphone Access"})]})]})})}function i0({open:r,onOpenChange:o}){return n.jsx(bc,{open:r,onOpenChange:o,children:n.jsxs(Sc,{children:[n.jsxs(kc,{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-destructive/10 flex items-center justify-center",children:n.jsx(sr,{className:"w-6 h-6 text-destructive"})}),n.jsx(_c,{children:"Microphone Access Denied"})]}),n.jsx(Ec,{children:"You've denied microphone access. To send voice messages, you need to enable it in your browser settings."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(am,{className:"w-4 h-4 text-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-sm space-y-3",children:[n.jsx("div",{className:"font-medium",children:"How to enable microphone access:"}),n.jsxs("div",{className:"space-y-2 text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-foreground mb-1",children:"Chrome / Edge:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[n.jsx("li",{children:"Click the lock icon  in the address bar"}),n.jsx("li",{children:'Find "Microphone" and select "Allow"'}),n.jsx("li",{children:"Refresh the page"})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-foreground mb-1",children:"Firefox:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[n.jsx("li",{children:"Click the permissions icon in the address bar"}),n.jsx("li",{children:"Remove the microphone block (X)"}),n.jsx("li",{children:"Click the mic button again to allow"})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-foreground mb-1",children:"Safari:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[n.jsx("li",{children:"Go to Safari  Settings for This Website"}),n.jsx("li",{children:'Set Microphone to "Allow"'}),n.jsx("li",{children:"Refresh the page"})]})]})]})]})]})}),n.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-3",children:n.jsxs("div",{className:"text-sm text-foreground",children:[n.jsx("strong",{children:"Tip:"})," After changing your browser settings, try clicking the microphone button again."]})})]}),n.jsx(Cc,{children:n.jsx(Pc,{children:"Got It"})})]})})}function c0(r,o){if(o)return"online";if(!r)return"offline";const l=new Date,i=new Date(r),u=l.getTime()-i.getTime(),f=Math.floor(u/(1e3*60)),g=Math.floor(u/(1e3*60*60*24)),p=v=>v.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return f<1?"last seen just now":f<60?`last seen ${f} ${f===1?"minute":"minutes"} ago`:g===0?`last seen today at ${p(i)}`:g===1?`last seen yesterday at ${p(i)}`:g<7?`last seen ${i.toLocaleDateString("en-US",{weekday:"long"})} at ${p(i)}`:`last seen ${i.toLocaleDateString("en-US",{month:"short",day:"numeric",year:l.getFullYear()!==i.getFullYear()?"numeric":void 0})} at ${p(i)}`}function u0(r,o){if(o)return"online";if(!r)return"";const l=new Date,i=new Date(r),u=l.getTime()-i.getTime(),f=Math.floor(u/(1e3*60)),g=Math.floor(u/(1e3*60*60*24));return f<1?"just now":f<60?`${f}m ago`:g===0?"today":g===1?"yesterday":g<7?i.toLocaleDateString("en-US",{weekday:"short"}):i.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function d0(r){const l=new Date().getTime()-r.getTime(),i=Math.floor(l/(1e3*60)),u=Math.floor(l/(1e3*60*60)),f=Math.floor(l/(1e3*60*60*24)),g=Math.floor(l/(1e3*60*60*24*7));return i<1?"just now":i<60?`${i}m`:u<24?`${u}h`:f<7?`${f}d`:g<4?`${g}w`:r.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function Mm(r,o,l=!1){const[i,u]=m.useState("");return m.useEffect(()=>{const f=()=>{const p=l?u0(r,o):c0(r,o);u(p)};f();const g=setInterval(f,1e4);return()=>clearInterval(g)},[r,o,l]),i}function f0({date:r}){return n.jsx("div",{className:"flex justify-center my-3",children:n.jsx("div",{className:"bg-[#e1f4fb] px-3 py-1 rounded-lg shadow-sm",children:n.jsx("span",{className:"text-[12.5px] text-[#667781]",children:r})})})}function m0({conversationId:r,currentUser:o,onBack:l,onInitiateCall:i,onViewProfile:u,onDeleteChat:f}){const[g,p]=m.useState(null),[w,v]=m.useState([]),[N,k]=m.useState(!0),[A,E]=m.useState(""),[O,x]=m.useState([]),[I,W]=m.useState(!1),[K,T]=m.useState(!1),[G,j]=m.useState(!1),[S,B]=m.useState(!1),[oe,P]=m.useState(!1),[H,se]=m.useState(null),[ae,V]=m.useState(null),me=m.useRef(null),fe=m.useRef(null),ye=m.useRef(null),ke=m.useRef(null),te=m.useRef(),U=m.useRef(0),Y=m.useRef(!1),_=m.useRef(!0),z=m.useMemo(()=>g?.type==="dm"?g.members?.find(D=>D.user_id!==o.id)?.user:null,[g,o.id]),ve=Mm(z?.last_seen,z?.is_online||!1,!1),J=D=>{const re=new Date(D);if(isNaN(re.getTime()))return console.error("Invalid date string:",D),"TODAY";const de=new Date,Ne=new Date(de);return Ne.setDate(Ne.getDate()-1),re.toDateString()===de.toDateString()?"TODAY":re.toDateString()===Ne.toDateString()?"YESTERDAY":re.toLocaleDateString("en-US",{month:"short",day:"numeric",year:re.getFullYear()!==de.getFullYear()?"numeric":void 0}).toUpperCase()},X=m.useMemo(()=>{const D=[];let re="",de=[];return w.forEach(Ne=>{if(!Ne.created_at){console.warn("Message missing created_at:",Ne);return}const He=new Date(Ne.created_at);if(isNaN(He.getTime())){console.warn("Message has invalid created_at:",Ne.created_at,Ne);return}const Oe=He.toDateString();Oe!==re?(de.length>0&&D.push({date:J(de[0].created_at),messages:de}),re=Oe,de=[Ne]):de.push(Ne)}),de.length>0&&D.push({date:J(de[0].created_at),messages:de}),D},[w]);m.useEffect(()=>{_.current=!0,De();const D=setInterval(async()=>{try{const re=await Cr.get(r);if(re.success&&re.data){if(re.fromCache)return;const de=re.data.messages||[];v(Ne=>{const He=new Set(Ne.map(Ae=>Ae.id)),Oe=de.filter(Ae=>!He.has(Ae.id));if(Oe.length>0){const Ae=[...Ne,...Oe].sort((Ke,it)=>new Date(Ke.created_at).getTime()-new Date(it.created_at).getTime());En.updateMessages(r,Ae);const Te=Oe.filter(Ke=>Ke.sender_id!==o.id).map(Ke=>Ke.id);return Te.length>0&&es.markAsRead(Te),Ae}return Ne})}}catch(re){console.error("Error polling messages:",re)}},2e3);return()=>{clearInterval(D)}},[r,o.id]),m.useEffect(()=>{if(_.current&&w.length>0){Fe(),_.current=!1,U.current=w.length;return}const D=w.length>U.current,re=ce();D&&(re||Y.current)&&Fe(),U.current=w.length,Y.current=!1},[w]);const ce=()=>{if(!fe.current)return!0;const{scrollTop:D,scrollHeight:re,clientHeight:de}=fe.current;return re-D-de<150},Fe=()=>{me.current?.scrollIntoView({behavior:"smooth"})},De=async()=>{try{const D=await En.getMessages(r);if(D.fromCache&&D.messages.length>0){const de=await En.getConversation(r);de.conversation&&(p(de.conversation),v(D.messages),k(!1))}else k(!0);const re=await Cr.get(r);if(re.success&&re.data){if(p(re.data.conversation),v(re.data.messages||[]),await En.saveConversation(re.data.conversation),await En.saveMessages(r,re.data.messages||[]),!re.fromCache){const de=re.data.messages?.filter(Ne=>Ne.sender_id!==o.id).map(Ne=>Ne.id)||[];de.length>0&&es.markAsRead(de)}}else console.error("Failed to load conversation:",re.error),!D.fromCache&&!re.error?.includes("Network error")&&$.error("Failed to load conversation")}catch(D){console.error("Error loading conversation:",D),(await En.getMessages(r)).fromCache||$.error("Error loading conversation")}finally{k(!1)}},Be=async()=>{try{if(!navigator.permissions||!navigator.mediaDevices)return!1;const D=await navigator.permissions.query({name:"microphone"});return D.state==="granted"?(se(!0),!0):D.state==="prompt"?null:(se(!1),!1)}catch{return console.log("Permissions API not supported, will request on use"),null}},Ye=async()=>{try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(re=>re.stop()),se(!0),B(!1),W(!0),!0}catch(D){return console.error("Microphone permission denied:",D),se(!1),B(!1),D instanceof Error&&D.name==="NotAllowedError"?P(!0):D instanceof Error&&D.name==="NotFoundError"?$.error("No microphone found",{description:"Please connect a microphone to record voice messages",duration:5e3}):D instanceof Error&&D.name==="NotReadableError"?$.error("Microphone is busy",{description:"Your microphone is already in use by another application",duration:5e3}):$.error("Failed to access microphone",{description:"Please check your browser settings and try again",duration:5e3}),!1}},Mt=async()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){$.error("Voice recording not supported",{description:"Your browser does not support voice recording"});return}if(H===!0){W(!0);return}await Be()===!0?W(!0):B(!0)},Mn=D=>{E(D),ye.current&&(ye.current.style.height="auto",ye.current.style.height=Math.min(ye.current.scrollHeight,100)+"px"),te.current&&clearTimeout(te.current),D.trim()&&($i.start(r),te.current=setTimeout(()=>{$i.stop(r)},2e3))},Yt=async()=>{if(!A.trim()&&O.length===0||G)return;j(!0);const D=`temp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,re={id:D,tempId:D,conversation_id:r,sender_id:o.id,sender:o,body:A.trim(),type:O.length>0?O[0].type.startsWith("image/")?"image":O[0].type.startsWith("video/")?"video":"file":"text",created_at:new Date().toISOString(),pending:!0,reply_to:ae?.id,reply_to_message:ae||void 0,statuses:[]};v(Oe=>[...Oe,re]);const de=A.trim(),Ne=[...O],He=ae;E(""),x([]),V(null),ye.current&&(ye.current.style.height="auto"),$i.stop(r),Y.current=!0;try{let Oe=[];if(Ne.length>0)for(const Te of Ne){const Ke=await $a.uploadFile(Te,"attachment");if(Ke.success&&Ke.data){let it="file";Te.type.startsWith("image/")?it="image":Te.type.startsWith("audio/")?it="audio":Te.type.startsWith("video/")&&(it="video"),Oe.push({id:Math.random().toString(36).substr(2,9),url:Ke.data.url,type:it,filename:Te.name,size:Te.size,mime_type:Te.type})}}const Ae=await es.send(r,de||"",Oe.length>0?Oe[0].type:"text",He?.id,Oe.length>0?Oe:void 0);Ae.success&&Ae.data?.message?v(Te=>Te.map(Ke=>Ke.tempId===D?{...Ae.data.message,pending:!1}:Ke)):(v(Te=>Te.map(Ke=>Ke.tempId===D?{...Ke,pending:!1,failed:!0}:Ke)),$.error("Failed to send message"))}catch{v(Ae=>Ae.map(Te=>Te.tempId===D?{...Te,pending:!1,failed:!0}:Te)),$.error("Failed to send message")}finally{j(!1)}},rn=D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),Yt())},Dn=D=>{D.target.files&&x(Array.from(D.target.files))},gn=async(D,re)=>{j(!0);const de=`temp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Ne={id:de,tempId:de,conversation_id:r,sender_id:o.id,sender:o,body:"",type:"voice",created_at:new Date().toISOString(),pending:!0,reply_to:ae?.id,reply_to_message:ae||void 0,statuses:[],attachments:[{id:de,url:URL.createObjectURL(D),type:"audio",filename:"voice-message.webm",size:D.size,mime_type:"audio/webm",duration:re}]};v(Oe=>[...Oe,Ne]);const He=ae;V(null),Y.current=!0;try{const Oe=new File([D],"voice-message.webm",{type:"audio/webm"}),Ae=await $a.uploadFile(Oe,"voice");if(Ae.success&&Ae.data){const Te=await es.send(r,"","voice",He?.id,[{id:Math.random().toString(36).substr(2,9),url:Ae.data.url,type:"audio",filename:"voice-message.webm",size:D.size,mime_type:"audio/webm",duration:re}]);Te.success&&Te.data?.message?v(Ke=>Ke.map(it=>it.tempId===de?{...Te.data.message,pending:!1}:it)):(v(Ke=>Ke.map(it=>it.tempId===de?{...it,pending:!1,failed:!0}:it)),$.error("Failed to send voice message"))}}catch{v(Ae=>Ae.map(Te=>Te.tempId===de?{...Te,pending:!1,failed:!0}:Te)),$.error("Failed to send voice message")}finally{j(!1),W(!1)}},Fn=D=>{V(D),ye.current?.focus()},xn=async D=>{(await es.deleteForMe(D)).success?($.success("Message deleted"),v(de=>de.filter(Ne=>Ne.id!==D))):$.error("Failed to delete message")},vn=async D=>{(await es.deleteForEveryone(D)).success?($.success("Message deleted for everyone"),v(de=>de.filter(Ne=>Ne.id!==D))):$.error("Failed to delete message")},sn=D=>{$.success("Copied to clipboard")};return N?n.jsx("div",{className:"flex items-center justify-center h-screen bg-[#efeae2]",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 border-4 border-[#00a884] border-t-transparent rounded-full animate-spin mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-[#667781]",children:"Loading..."})]})}):n.jsxs("div",{className:"flex flex-col h-screen bg-[#efeae2] relative",children:[n.jsxs("header",{className:"flex items-center h-[60px] bg-[#f0f2f5] px-4 gap-3 shadow-sm",children:[n.jsx("button",{onClick:l,className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-black/5 transition-colors",children:n.jsx(ro,{className:"w-6 h-6 text-[#54656f]"})}),z&&n.jsxs("button",{onClick:()=>u?.(z,ve),className:"flex items-center gap-3 flex-1 min-w-0 hover:bg-black/5 rounded-lg px-2 py-1.5 -ml-2 transition-colors",children:[n.jsx(st,{src:z.avatar_url,alt:z.full_name,fallbackText:z.full_name,size:"md",className:"w-10 h-10",showOnline:z.is_online}),n.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[n.jsx("div",{className:"font-medium text-[17px] text-[#111b21] truncate",children:z.full_name}),n.jsx("div",{className:"text-[13px] text-[#667781] truncate",children:K?n.jsx("span",{className:"text-[#00a884]",children:"typing..."}):ve})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[z&&i&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>i(z,"video"),className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-black/5 transition-colors",children:n.jsx(ls,{className:"w-5 h-5 text-[#54656f]"})}),n.jsx("button",{onClick:()=>i(z,"voice"),className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-black/5 transition-colors",children:n.jsx(pn,{className:"w-5 h-5 text-[#54656f]"})})]}),n.jsxs(Em,{children:[n.jsx(Pm,{asChild:!0,children:n.jsx("button",{className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-black/5 transition-colors",children:n.jsx(cc,{className:"w-5 h-5 text-[#54656f]"})})}),n.jsxs(Am,{align:"end",className:"w-48",children:[u&&z&&n.jsx(os,{onClick:()=>u(z,ve),children:"View contact"}),f&&n.jsxs(os,{onClick:f,className:"text-destructive",children:[n.jsx(lr,{className:"w-4 h-4 mr-2"}),"Delete chat"]})]})]})]})]}),n.jsxs("div",{ref:fe,className:"flex-1 overflow-y-auto px-4 md:px-[8%] py-3",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h100v100H0z' fill='%23efeae2' fill-opacity='.1'/%3E%3Cpath d='M50 0L0 50M100 50L50 100' stroke='%23d1d7db' stroke-width='.5' opacity='.05'/%3E%3C/svg%3E")`,backgroundSize:"412.5px 749.25px",WebkitOverflowScrolling:"touch"},children:[X.map(D=>n.jsxs("div",{children:[n.jsx(f0,{date:D.date}),D.messages.map((re,de)=>{const Ne=re.sender_id===o.id,He=de>0?D.messages[de-1]:null,Oe=de<D.messages.length-1?D.messages[de+1]:null,Ae=!He||He.sender_id!==re.sender_id,Te=!Oe||Oe.sender_id!==re.sender_id;return n.jsx("div",{className:Te?"mb-2":"mb-[2px]",children:n.jsx(t0,{message:re,isSent:Ne,showAvatar:!Ne&&Ae,showTimestamp:Te,currentUserId:o.id,isFirstInGroup:Ae,isLastInGroup:Te,onReply:Fn,onDeleteForMe:xn,onDeleteForEveryone:Ne?vn:void 0,onCopy:sn})},re.tempId||re.id)})]},`${D.date}-${D.messages[0]?.id||D.messages[0]?.tempId}`)),K&&z&&n.jsx("div",{className:"mb-2",children:n.jsx(n0,{userName:z.full_name})}),n.jsx("div",{ref:me})]}),n.jsxs("div",{className:"bg-[#f0f2f5] px-4 py-2",children:[ae&&n.jsx("div",{className:"mb-2",children:n.jsx(o0,{message:ae,onCancel:()=>V(null)})}),O.length>0&&n.jsx("div",{className:"mb-2 p-3 bg-white rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-sm text-[#667781]",children:[O.length," file(s) selected"]}),n.jsx("button",{onClick:()=>x([]),className:"text-[#667781] hover:text-[#111b21]",children:n.jsx(Tn,{className:"w-5 h-5"})})]})}),n.jsxs("div",{className:"flex items-end gap-2",children:[n.jsx(s0,{onEmojiSelect:D=>{E(A+D),ye.current?.focus()},trigger:n.jsx("button",{className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-black/5 transition-colors",children:n.jsx(Bg,{className:"w-6 h-6 text-[#54656f]"})})}),n.jsx("input",{ref:ke,type:"file",multiple:!0,onChange:Dn,className:"hidden"}),n.jsx("button",{onClick:()=>ke.current?.click(),className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-black/5 transition-colors",children:n.jsx(Og,{className:"w-6 h-6 text-[#54656f]"})}),n.jsx("div",{className:"flex-1 bg-white rounded-[21px] px-4 py-2 shadow-sm",children:n.jsx("textarea",{ref:ye,value:A,onChange:D=>Mn(D.target.value),onKeyPress:rn,placeholder:"Type a message",className:"w-full resize-none outline-none bg-transparent text-[15px] text-[#111b21] placeholder:text-[#667781] max-h-[100px]",rows:1})}),A.trim()||O.length>0?n.jsx("button",{onClick:Yt,disabled:G,className:"w-10 h-10 flex items-center justify-center rounded-full bg-[#00a884] hover:bg-[#00a884]/90 transition-colors disabled:opacity-50",children:n.jsx(Wa,{className:"w-5 h-5 text-white"})}):n.jsx("button",{onClick:Mt,className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-black/5 transition-colors",children:n.jsx(kr,{className:"w-6 h-6 text-[#54656f]"})})]})]}),I&&n.jsx(r0,{onRecordingComplete:gn,onCancel:()=>W(!1)}),n.jsx(l0,{open:S,onOpenChange:B,onAllow:Ye}),n.jsx(i0,{open:oe,onOpenChange:P})]})}const h0="aavljgcuaajnimeohelq",p0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFhdmxqZ2N1YWFqbmltZW9oZWxxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA5OTE1ODUsImV4cCI6MjA3NjU2NzU4NX0.4cfyCfXlVLYmlLwa5Y7aGj0-BuVF4RDTpNooURWZXAo";function g0({open:r,onOpenChange:o,onUserFound:l,currentUserId:i}){const[u,f]=m.useState(""),[g,p]=m.useState(br[0].dialCode),[w,v]=m.useState(""),[N,k]=m.useState(!1),[A,E]=m.useState(null),O=async()=>{if(v(""),E(null),!u||u.trim().length<7){v("Please enter a valid phone number");return}k(!0);try{const W=Dx(g,u),K=await vc(),T=await fetch(`https://${h0}.supabase.co/functions/v1/make-server-29f6739b/users/search-by-phone`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${K||p0}`},body:JSON.stringify({phone_number:W})});if(!T.ok){let j="Failed to search user";try{const S=await T.json();j=S.error||S.message||j}catch{j=T.statusText||j}if(T.status===404||j.includes("not found"))v("No user found with this phone number");else throw new Error(j);return}const G=await T.json();if(!G.found||!G.user){v("No user found with this phone number");return}if(G.user.id===i){v("You cannot add yourself");return}E(G.user),$.success("User found!",{description:`Found ${G.user.full_name}`})}catch(W){console.error("Phone search error:",W),v(W instanceof Error?W.message:"Failed to search user"),$.error("Search failed",{description:"Please check the phone number and try again"})}finally{k(!1)}},x=()=>{A&&(l(A),o(!1),f(""),E(null))},I=()=>{f(""),v(""),E(null)};return n.jsx(Ex,{open:r,onOpenChange:o,children:n.jsxs(Ax,{className:"sm:max-w-md",children:[n.jsxs(Tx,{children:[n.jsxs(Rx,{className:"flex items-center gap-2",children:[n.jsx(pn,{className:"h-5 w-5 text-primary"}),"Find User by Phone"]}),n.jsx(Mx,{children:"Enter a phone number to find and connect with AuroraLink users"})]}),n.jsxs("div",{className:"space-y-4",children:[A?n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"rounded-lg border-2 border-[#00A884]/30 bg-[#00A884]/5 p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(st,{src:A.avatar_url,alt:A.full_name,size:"lg",status:A.is_online?"online":"offline",showBorder:!0}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-medium truncate",children:A.full_name}),n.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["@",A.username]}),A.status_message&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-1",children:A.status_message})]})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Me,{onClick:x,className:"flex-1",children:[n.jsx(dc,{className:"mr-2 h-4 w-4"}),"Start Chat"]}),n.jsx(Me,{onClick:I,variant:"outline",children:"Search Again"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Phone Number"}),n.jsx(Cm,{value:u,dialCode:g,onChange:(W,K)=>{f(W),p(K),v("")},error:w,disabled:N,autoFocus:!0})]}),n.jsx(Me,{onClick:O,disabled:N||!u,className:"w-full",children:N?n.jsxs(n.Fragment,{children:[n.jsx(sm,{className:"mr-2 h-4 w-4 animate-spin"}),"Searching..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Va,{className:"mr-2 h-4 w-4"}),"Search"]})})]}),n.jsx("div",{className:"rounded-lg bg-muted/50 p-3",children:n.jsx("p",{className:"text-xs text-muted-foreground",children:" Search for users by their registered phone number"})})]})]})})}function x0({user:r}){const o=Mm(r.last_seen,r.is_online,!0);return o?n.jsx("span",{className:"text-xs text-muted-foreground",children:o}):null}function v0({currentUser:r,onBack:o,onConversationCreated:l,onViewProfile:i}){const[u,f]=m.useState(""),[g,p]=m.useState([]),[w,v]=m.useState(""),[N,k]=m.useState(!1),[A,E]=m.useState(!1),[O,x]=m.useState([]),I=O.filter(j=>{if(!u)return!0;const S=u.toLowerCase();return j.full_name.toLowerCase().includes(S)||j.username.toLowerCase().includes(S)}),W=async j=>{O.some(S=>S.id===j.id)||x(S=>[j,...S]),k(!0);try{const S=await Cr.create("dm",[j.id]);S.success&&S.data?.conversation?($.success("Chat started!",{description:`You can now message ${j.full_name}`}),l(S.data.conversation.id)):$.error("Failed to create chat",{description:S.error||"Please try again"})}catch(S){console.error("Failed to create conversation:",S),$.error("Failed to create chat",{description:"Please try again"}),K(j.id)}finally{k(!1)}},K=j=>{p(S=>S.includes(j)?S.filter(B=>B!==j):[...S,j])},T=async()=>{if(!(g.length===0||N)){k(!0);try{const j=g.length>1,S=await Cr.create(j?"group":"dm",g,j?w||"New Group":void 0);S.success&&S.data?.conversation&&l(S.data.conversation.id)}catch(j){console.error("Failed to create conversation:",j)}finally{k(!1)}}},G=g.length>1;return n.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[n.jsxs("div",{className:"bg-surface border-b border-border px-4 py-3",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Me,{variant:"ghost",size:"icon",onClick:o,"aria-label":"Back",children:n.jsx(ro,{className:"w-5 h-5"})}),n.jsx("h2",{children:"New Chat"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Va,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),n.jsx(hn,{type:"search",placeholder:"Search contacts...",value:u,onChange:j=>f(j.target.value),className:"pl-10"})]}),n.jsxs(Me,{variant:"outline",onClick:()=>E(!0),className:"w-full",size:"sm",children:[n.jsx(pn,{className:"w-4 h-4 mr-2"}),"Find by Phone Number"]})]}),G&&n.jsxs("div",{className:"mt-4",children:[n.jsx(ss,{htmlFor:"groupName",children:"Group Name"}),n.jsx(hn,{id:"groupName",type:"text",value:w,onChange:j=>v(j.target.value),placeholder:"Enter group name...",className:"mt-2"})]})]}),g.length>0&&n.jsxs("div",{className:"bg-muted px-4 py-3 border-b border-border",children:[n.jsxs("p",{className:"text-sm mb-2",children:["Selected: ",g.length," ",g.length===1?"person":"people"]}),n.jsx("div",{className:"flex gap-2 overflow-x-auto",children:g.map(j=>{const S=O.find(B=>B.id===j);return S?n.jsxs("button",{onClick:()=>K(j),className:"flex flex-col items-center gap-1.5 p-2 rounded-lg bg-background hover:bg-surface transition-colors",children:[n.jsx(st,{src:S.avatar_url,alt:S.full_name,size:"md",showBorder:!0}),n.jsx("span",{className:"text-xs truncate max-w-[60px]",children:S.full_name.split(" ")[0]})]},j):null})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:I.length>0?n.jsx("div",{className:"p-2",children:I.map(j=>{const S=g.includes(j.id);return n.jsxs("div",{className:`w-full flex items-center gap-3 p-3.5 rounded-lg transition-all duration-200 ${S?"bg-primary/10 ring-2 ring-primary/30":"hover:bg-[var(--hover-surface)]"}`,children:[n.jsxs("button",{onClick:()=>K(j.id),className:"flex items-center gap-4 flex-1 min-w-0 text-left",children:[n.jsx(st,{src:j.avatar_url,alt:j.full_name,size:"lg",status:j.is_online?"online":"offline",showBorder:!0}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"truncate",children:j.full_name}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(x0,{user:j}),j.status_message&&!j.is_online&&n.jsxs("span",{className:"text-sm text-muted-foreground truncate",children:[" ",j.status_message]}),!j.status_message&&!j.is_online&&n.jsxs("span",{className:"text-sm text-muted-foreground truncate",children:["@",j.username]})]})]}),S&&n.jsx("div",{className:"w-6 h-6 rounded-full bg-primary flex items-center justify-center",children:n.jsx(dc,{className:"w-4 h-4 text-primary-foreground"})})]}),i&&n.jsx("button",{onClick:()=>i(j.id),className:"px-3 py-1.5 rounded-lg bg-gradient-to-r from-primary to-accent text-white text-xs font-medium hover:opacity-90 transition-opacity whitespace-nowrap",children:"View Profile"})]},j.id)})}):n.jsx(nc,{icon:pn,title:u?"No contacts found":"No contacts yet",description:u?"Try a different search term":"Use 'Find by Phone Number' to add contacts and start chatting"})}),g.length>0&&n.jsx("div",{className:"p-4 border-t border-border bg-surface",children:n.jsx(Me,{onClick:T,disabled:N,className:"w-full",size:"lg",children:N?"Creating...":G?"Create Group":"Start Chat"})}),n.jsx(g0,{open:A,onOpenChange:E,onUserFound:W,currentUserId:r.id})]})}const Fa=m.forwardRef(({className:r,checked:o=!1,onCheckedChange:l,disabled:i,...u},f)=>{const[g,p]=m.useState(o);m.useEffect(()=>{p(o)},[o]);const w=()=>{if(i)return;const v=!g;p(v),l?.(v)};return n.jsx("button",{type:"button",role:"switch","aria-checked":g,"data-state":g?"checked":"unchecked",disabled:i,ref:f,onClick:w,"data-slot":"switch",className:Pe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",g?"bg-primary":"bg-input",r),...u,children:n.jsx("span",{"data-state":g?"checked":"unchecked",className:Pe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform",g?"translate-x-5":"translate-x-0")})})});Fa.displayName="Switch";function y0({currentUser:r,onBack:o,onUserUpdate:l,onLogout:i,onNavigate:u}){const[f,g]=m.useState(r.avatar_url),[p,w]=m.useState(Tf()),[v,N]=m.useState(!1),[k,A]=m.useState(!1),[E,O]=m.useState(r.full_name),[x,I]=m.useState(r.status_message||r.status||"Hey there! I am using AuroraLink."),[W,K]=m.useState(!1),[T,G]=m.useState(!1),[j,S]=m.useState(!1),[B,oe]=m.useState(()=>{const J=localStorage.getItem("soundEnabled");return J!==null?JSON.parse(J):!0}),[P,H]=m.useState(()=>{const J=localStorage.getItem("readReceipts");return J!==null?JSON.parse(J):!0}),[se,ae]=m.useState(()=>{const J=localStorage.getItem("lastSeen");return J!==null?JSON.parse(J):!0}),[V,me]=m.useState(()=>localStorage.getItem("profilePhotoVisibility")||"Everyone");m.useEffect(()=>{const X=setInterval(()=>{w(Tf())},1e3);return()=>clearInterval(X)},[]);const fe=async J=>{const X=J.target.files?.[0];if(!X)return;K(!0);const ce=await $a.uploadFile(X,"avatar");ce.success&&ce.data?.url&&(g(ce.data.url),(await jr.update({avatar_url:ce.data.url})).success&&(l({...r,avatar_url:ce.data.url}),$.success("Profile photo updated"))),K(!1)},ye=async()=>{E.trim()&&E!==r.full_name&&(await jr.update({full_name:E})).success&&(l({...r,full_name:E}),$.success("Name updated")),N(!1)},ke=async()=>{const J=r.status_message||r.status||"Hey there! I am using AuroraLink.";x!==J&&(await jr.update({status_message:x})).success&&(l({...r,status:x,status_message:x,status_updated_at:new Date().toISOString()}),$.success("About updated")),A(!1)},te=J=>{oe(J),localStorage.setItem("soundEnabled",JSON.stringify(J))},U=J=>{H(J),localStorage.setItem("readReceipts",JSON.stringify(J))},Y=J=>{ae(J),localStorage.setItem("lastSeen",JSON.stringify(J))},_=J=>{me(J),localStorage.setItem("profilePhotoVisibility",J)},z=async()=>{S(!0);try{const J=await jr.diagnostic();if(J.success&&J.data){const{diagnostic:X}=J.data;console.log(" Diagnostic Results:",X),console.log(" Your Data:"),console.log(`   Posts: ${X.actual_data.posts.count}`),console.log(`   Followers: ${X.actual_data.followers.count}`),console.log(`   Following: ${X.actual_data.following.count}`),console.log(""),console.log(" Stored Counts:"),console.log(`   Posts: ${X.stored_counts.posts_count}`),console.log(`   Followers: ${X.stored_counts.followers_count}`),console.log(`   Following: ${X.stored_counts.following_count}`),$.success(`Found: ${X.actual_data.posts.count} posts, ${X.actual_data.followers.count} followers, ${X.actual_data.following.count} following. Check console (F12) for details.`)}else $.error(J.error||"Failed to run diagnostic")}catch(J){console.error("Error running diagnostic:",J),$.error("Failed to run diagnostic")}finally{S(!1)}},ve=async()=>{G(!0);try{const J=await jr.repairCounts();if(J.success&&J.data){const{old_counts:X,new_counts:ce}=J.data;console.log(" Counts repaired:",{old_counts:X,new_counts:ce}),$.success(`Counts fixed! Posts: ${ce.posts}, Followers: ${ce.followers}, Following: ${ce.following}`),setTimeout(()=>{window.location.reload()},1500)}else $.error(J.error||"Failed to repair counts")}catch(J){console.error("Error repairing counts:",J),$.error("Failed to repair counts")}finally{G(!1)}};return n.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[n.jsxs("div",{className:"bg-primary px-4 py-4 flex items-center gap-4 shadow-sm",children:[n.jsx(Me,{variant:"ghost",size:"icon",onClick:o,className:"text-primary-foreground hover:bg-primary-foreground/10","aria-label":"Back",children:n.jsx(ro,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-primary-foreground text-xl",children:"Settings"})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n.jsx("div",{className:"bg-surface px-6 py-8",children:n.jsxs("div",{className:"flex items-center gap-5",children:[n.jsxs("div",{className:"relative",children:[n.jsx(st,{src:f,alt:r.full_name,size:"2xl",showBorder:!0}),n.jsxs("label",{className:"absolute bottom-0 right-0 p-3 bg-gradient-to-br from-accent to-primary text-white rounded-full cursor-pointer hover:shadow-xl transition-all shadow-lg hover:scale-110",children:[n.jsx(nm,{className:"w-5 h-5"}),n.jsx("input",{type:"file",accept:"image/*",onChange:fe,className:"hidden",disabled:W})]}),W&&n.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:n.jsx("div",{className:"w-8 h-8 border-3 border-white/30 border-t-white rounded-full animate-spin"})})]}),n.jsxs("div",{className:"flex-1",children:[v?n.jsx("input",{type:"text",value:E,onChange:J=>O(J.target.value),onBlur:ye,onKeyDown:J=>J.key==="Enter"&&ye(),className:"w-full bg-transparent border-b-2 border-primary outline-none pb-1",autoFocus:!0}):n.jsx("h2",{className:"cursor-pointer hover:text-primary transition-colors",onClick:()=>N(!0),children:r.full_name}),k?n.jsx("input",{type:"text",value:x,onChange:J=>I(J.target.value),onBlur:ke,onKeyDown:J=>J.key==="Enter"&&ke(),placeholder:"Hey there! I am using AuroraLink.",className:"w-full bg-transparent border-b border-muted-foreground outline-none text-sm text-muted-foreground mt-1",autoFocus:!0}):n.jsx("p",{className:"text-sm text-muted-foreground cursor-pointer hover:text-primary transition-colors mt-1",onClick:()=>A(!0),children:r.status_message||r.status||"Hey there! I am using AuroraLink."})]})]})}),n.jsxs("div",{className:"mt-6",children:[n.jsx("div",{className:"px-6 py-2",children:n.jsx("p",{className:"text-sm text-primary",children:"Account"})}),n.jsxs("div",{className:"bg-surface",children:[n.jsxs("div",{className:"px-6 py-4 flex items-center gap-4 border-b border-border",children:[n.jsx(pn,{className:"w-5 h-5 text-muted-foreground"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone"}),n.jsx("p",{className:"mt-0.5",children:r.phone_number||"Not set"})]})]}),n.jsxs("div",{className:"px-6 py-4 flex items-center gap-4 border-b border-border",children:[n.jsx(om,{className:"w-5 h-5 text-muted-foreground"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),n.jsx("p",{className:"mt-0.5",children:r.email})]})]}),n.jsxs("div",{className:"px-6 py-4 flex items-center gap-4",children:[n.jsx(uc,{className:"w-5 h-5 text-muted-foreground"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Username"}),n.jsxs("p",{className:"mt-0.5",children:["@",r.username]})]})]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("div",{className:"px-6 py-2",children:n.jsx("p",{className:"text-sm text-primary",children:"Tools"})}),n.jsxs("div",{className:"bg-surface",children:[n.jsxs("button",{onClick:()=>u?.("data-debug"),className:"w-full px-6 py-4 flex items-center gap-4 hover:bg-[var(--hover-surface)] transition-colors border-b border-border",children:[n.jsx(Cg,{className:"w-5 h-5 text-purple-500"}),n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{children:"Data Debug Tool"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"See your real data in detail"})]}),n.jsx(ja,{className:"w-5 h-5 text-muted-foreground"})]}),n.jsxs("button",{onClick:z,disabled:j,className:"w-full px-6 py-4 flex items-center gap-4 hover:bg-[var(--hover-surface)] transition-colors disabled:opacity-50 border-b border-border",children:[n.jsx(Va,{className:`w-5 h-5 text-[#00A8E8] ${j?"animate-pulse":""}`}),n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{children:"Quick Data Check"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:j?"Scanning...":"Check console for data"})]})]}),n.jsxs("button",{onClick:ve,disabled:T,className:"w-full px-6 py-4 flex items-center gap-4 hover:bg-[var(--hover-surface)] transition-colors disabled:opacity-50",children:[n.jsx(Ra,{className:`w-5 h-5 text-[#25D366] ${T?"animate-spin":""}`}),n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{children:"Fix Profile Counts"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:T?"Recalculating...":"Update counts from real data"})]})]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("div",{className:"px-6 py-2",children:n.jsx("p",{className:"text-sm text-primary",children:"Notifications"})}),n.jsxs("div",{className:"bg-surface",children:[n.jsxs("div",{className:"px-6 py-4 flex items-center gap-4 border-b border-border",children:[n.jsx(kg,{className:"w-5 h-5 text-muted-foreground"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{children:"Browser Notifications"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:p==="granted"?"Enabled":p==="denied"?"Blocked in browser settings":"Not enabled"})]}),p!=="granted"&&p!=="denied"&&n.jsx(Me,{size:"sm",onClick:async()=>{await Gx()&&($.success("Notifications enabled"),w("granted"))},children:"Enable"})]}),n.jsxs("div",{className:"px-6 py-4 flex items-center gap-4",children:[n.jsx(Jg,{className:"w-5 h-5 text-muted-foreground"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{children:"Sound"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Play sound for messages"})]}),n.jsx(Fa,{checked:B,onCheckedChange:te})]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("div",{className:"px-6 py-2",children:n.jsx("p",{className:"text-sm text-primary",children:"Privacy"})}),n.jsxs("div",{className:"bg-surface",children:[n.jsxs("div",{className:"px-6 py-4 flex items-center gap-4 border-b border-border",children:[n.jsx(Nr,{className:"w-5 h-5 text-muted-foreground"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{children:"Read Receipts"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Show when you've read messages"})]}),n.jsx(Fa,{checked:P,onCheckedChange:U})]}),n.jsxs("div",{className:"px-6 py-4 flex items-center gap-4 border-b border-border",children:[n.jsx(Xi,{className:"w-5 h-5 text-muted-foreground"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{children:"Last Seen"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Show when you were last active"})]}),n.jsx(Fa,{checked:se,onCheckedChange:Y})]}),n.jsxs("button",{className:"w-full px-6 py-4 flex items-center gap-4 hover:bg-[var(--hover-surface)] transition-colors",onClick:()=>{const J=["Everyone","My Contacts","Nobody"],X=J.indexOf(V),ce=J[(X+1)%J.length];_(ce)},children:[n.jsx(Zi,{className:"w-5 h-5 text-muted-foreground"}),n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{children:"Profile Photo"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:V})]}),n.jsx(ja,{className:"w-5 h-5 text-muted-foreground"})]})]})]}),n.jsxs("div",{className:"mt-6 mb-6",children:[n.jsx("div",{className:"px-6 py-2",children:n.jsx("p",{className:"text-sm text-primary",children:"About"})}),n.jsxs("div",{className:"bg-surface",children:[n.jsx("div",{className:"px-6 py-4 border-b border-border",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(rm,{className:"w-5 h-5 text-muted-foreground"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{children:"Version"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"AuroraLink v1.0.0"})]})]})}),n.jsxs("button",{className:"w-full px-6 py-4 flex items-center gap-4 hover:bg-[var(--hover-surface)] transition-colors border-b border-border",children:[n.jsx("div",{className:"w-5"}),n.jsx("p",{className:"flex-1 text-left",children:"Terms of Service"}),n.jsx(ja,{className:"w-5 h-5 text-muted-foreground"})]}),n.jsxs("button",{className:"w-full px-6 py-4 flex items-center gap-4 hover:bg-[var(--hover-surface)] transition-colors",children:[n.jsx("div",{className:"w-5"}),n.jsx("p",{className:"flex-1 text-left",children:"Privacy Policy"}),n.jsx(ja,{className:"w-5 h-5 text-muted-foreground"})]})]})]}),n.jsx("div",{className:"px-6 py-4 text-center text-sm text-muted-foreground",children:" 2024 AuroraLink. All rights reserved."})]})]})}function w0({callType:r,recipientUser:o,currentUser:l,isInitiator:i,onEndCall:u,onCallConnected:f,onCallFailed:g,peerConnection:p,localStream:w,remoteStream:v}){const[N,k]=m.useState(!1),[A,E]=m.useState(!1),[O,x]=m.useState(!1),[I,W]=m.useState(0),[K,T]=m.useState("connecting"),G=m.useRef(null),j=m.useRef(null),S=m.useRef(null);m.useEffect(()=>{w&&G.current&&(G.current.srcObject=w)},[w]),m.useEffect(()=>(v&&j.current&&(j.current.srcObject=v,T("connected"),f?.(),S.current=setInterval(()=>{W(ae=>ae+1)},1e3)),()=>{S.current&&clearInterval(S.current)}),[v,f]),m.useEffect(()=>{i&&K==="connecting"&&T("ringing")},[i,K]);const B=()=>{w&&(w.getAudioTracks().forEach(ae=>{ae.enabled=!ae.enabled}),k(!N))},oe=()=>{w&&r==="video"&&(w.getVideoTracks().forEach(ae=>{ae.enabled=!ae.enabled}),E(!A))},P=()=>{document.fullscreenElement?(document.exitFullscreen(),x(!1)):(document.documentElement.requestFullscreen(),x(!0))},H=ae=>{const V=Math.floor(ae/60),me=ae%60;return`${V.toString().padStart(2,"0")}:${me.toString().padStart(2,"0")}`},se=()=>{switch(K){case"connecting":return"Connecting...";case"ringing":return"Ringing...";case"connected":return H(I);default:return""}};return n.jsxs("div",{className:"h-screen w-screen bg-gradient-to-br from-surface via-background to-muted flex flex-col items-center justify-center relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 opacity-30 pointer-events-none",children:[n.jsx("div",{className:"absolute top-20 left-20 w-96 h-96 bg-primary/20 rounded-full blur-3xl animate-pulse-slow"}),n.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-accent/20 rounded-full blur-3xl animate-pulse-slow",style:{animationDelay:"2s"}})]}),r==="video"?n.jsxs("div",{className:"w-full h-full relative",children:[n.jsx("div",{className:"w-full h-full bg-black relative",children:v?n.jsx("video",{ref:j,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}):n.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[n.jsx(st,{src:o.avatar_url,alt:o.full_name,fallbackText:o.full_name,size:"2xl",className:"mb-6"}),n.jsx("h2",{className:"text-white text-2xl mb-2",children:o.full_name}),n.jsx("p",{className:"text-white/70",children:se()}),K==="ringing"&&n.jsx("div",{className:"mt-8 flex gap-2 animate-in fade-in duration-300",children:[0,1,2].map(ae=>n.jsx("div",{className:"w-3 h-3 rounded-full bg-white/50 animate-pulse",style:{animationDelay:`${ae*200}ms`}},ae))})]})}),w&&!A&&n.jsx("div",{className:"absolute top-4 right-4 w-40 h-52 rounded-2xl overflow-hidden shadow-2xl border-2 border-white/20 bg-black animate-in zoom-in fade-in duration-300 delay-300",children:n.jsx("video",{ref:G,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover scale-x-[-1]"})}),n.jsx("div",{className:"absolute top-0 left-0 right-0 p-6 bg-gradient-to-b from-black/60 to-transparent",children:n.jsxs("div",{className:"flex items-center justify-between text-white",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(st,{src:o.avatar_url,alt:o.full_name,fallbackText:o.full_name,size:"sm"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium",children:o.full_name}),n.jsx("p",{className:"text-xs text-white/70",children:se()})]})]}),n.jsx(Me,{variant:"ghost",size:"icon",onClick:P,className:"text-white hover:bg-white/10",children:O?n.jsx(Lg,{className:"w-5 h-5"}):n.jsx(Ig,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 bg-gradient-to-t from-black/60 to-transparent",children:n.jsxs("div",{className:"flex items-center justify-center gap-4",children:[n.jsx(Me,{variant:N?"destructive":"secondary",size:"icon",onClick:B,className:"h-14 w-14 rounded-full shadow-lg hover:scale-110 active:scale-95 transition-transform","aria-label":N?"Unmute":"Mute",children:N?n.jsx(wf,{className:"w-6 h-6"}):n.jsx(kr,{className:"w-6 h-6"})}),n.jsx(Me,{variant:A?"destructive":"secondary",size:"icon",onClick:oe,className:"h-14 w-14 rounded-full shadow-lg hover:scale-110 active:scale-95 transition-transform","aria-label":A?"Turn on camera":"Turn off camera",children:A?n.jsx(Yg,{className:"w-6 h-6"}):n.jsx(ls,{className:"w-6 h-6"})}),n.jsx(Me,{variant:"destructive",size:"icon",onClick:u,className:"h-16 w-16 rounded-full shadow-lg bg-red-500 hover:bg-red-600 hover:scale-110 active:scale-95 transition-transform","aria-label":"End call",children:n.jsx(ec,{className:"w-7 h-7"})})]})})]}):n.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center gap-8 p-8",children:[n.jsxs("div",{className:`relative ${K==="ringing"?"animate-pulse-slow":""}`,children:[n.jsx(st,{src:o.avatar_url,alt:o.full_name,fallbackText:o.full_name,size:"2xl",className:"shadow-2xl"}),K==="ringing"&&n.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary animate-ping"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-3xl mb-2",children:o.full_name}),n.jsx("p",{className:"text-muted-foreground text-lg",children:se()})]}),K==="ringing"&&n.jsx("div",{className:"flex gap-2 animate-in fade-in duration-300",children:[0,1,2].map(ae=>n.jsx("div",{className:"w-3 h-3 rounded-full bg-primary animate-pulse",style:{animationDelay:`${ae*200}ms`}},ae))}),n.jsxs("div",{className:"flex items-center gap-6 mt-8",children:[n.jsx(Me,{variant:N?"destructive":"secondary",size:"icon",onClick:B,className:"h-16 w-16 rounded-full shadow-lg hover:scale-110 active:scale-95 transition-transform","aria-label":N?"Unmute":"Mute",children:N?n.jsx(wf,{className:"w-7 h-7"}):n.jsx(kr,{className:"w-7 h-7"})}),n.jsx(Me,{variant:"destructive",size:"icon",onClick:u,className:"h-20 w-20 rounded-full shadow-2xl bg-red-500 hover:bg-red-600 hover:scale-110 active:scale-95 transition-transform","aria-label":"End call",children:n.jsx(ec,{className:"w-8 h-8"})})]}),w&&n.jsx("video",{ref:G,autoPlay:!0,playsInline:!0,muted:!0,className:"hidden"})]})]})}function j0({userStoriesList:r,initialUserIndex:o,currentUser:l,onClose:i,onRefresh:u}){const[f,g]=m.useState(o),[p,w]=m.useState(0),[v,N]=m.useState(!1),[k,A]=m.useState(0),[E,O]=m.useState(""),[x,I]=m.useState(!1),[W,K]=m.useState(!1),[T,G]=m.useState([]),[j,S]=m.useState(0),[B,oe]=m.useState(!1),[P,H]=m.useState(!1),[se,ae]=m.useState(0),[V,me]=m.useState(0),[fe,ye]=m.useState(!1),[ke,te]=m.useState(!1),U=m.useRef(null),Y=m.useRef(null),_=m.useRef(Date.now()),z=m.useRef(null),ve=m.useRef(null),J=r[f],X=J?.stories[p],ce=J?.user.id===l.id,Fe=5e3,De=D=>{const re=new Date(D).getTime(),de=Date.now(),He=re+1440*60*1e3-de;if(He<=0)return"Expired";const Oe=Math.floor(He/(3600*1e3)),Ae=Math.floor(He%(3600*1e3)/(60*1e3));return Oe>0?`${Oe}h ${Ae}m left`:Ae>0?`${Ae}m left`:"Expiring soon"};m.useEffect(()=>{oe(!1),H(!1),A(0)},[X?.id]),m.useEffect(()=>{(async()=>{if(X&&!ce){const re=await tn.view(X.id);re.success?console.log(`[Story]  View recorded for story ${X.id}`):console.error("[Story]  Failed to record view:",re.error)}X&&ce&&Yt()})()},[X?.id,ce]),m.useEffect(()=>{if(v||!X||X.type==="image"&&!B||X.type==="video"&&!P)return;_.current=Date.now();const D=()=>{const re=Date.now()-_.current,de=Math.min(re/Fe*100,100);A(de),de>=100?Be():Y.current=setTimeout(D,16)};return Y.current=setTimeout(D,16),()=>{Y.current&&clearTimeout(Y.current)}},[X?.id,v,B,P]);const Be=()=>{p<J.stories.length-1?(w(p+1),A(0)):f<r.length-1?(g(f+1),w(0),A(0)):i()},Ye=()=>{if(p>0)w(p-1),A(0);else if(f>0){const D=f-1;g(D),w(r[D].stories.length-1),A(0)}},Mt=async()=>{if(!E.trim()||!X)return;(await tn.reply(X.id,E.trim())).success?($.success("Reply sent",{description:`Your message was sent to ${J.user.full_name}`,duration:2e3}),O(""),ve.current&&ve.current.blur()):$.error("Failed to send reply")},Mn=async()=>{if(!X||!ce)return;(await tn.delete(X.id)).success?($.success("Story deleted"),u(),i()):$.error("Failed to delete story")},Yt=async()=>{if(!X||!ce)return;const D=await tn.getViews(X.id);D.success&&D.data?.views&&S(D.data.views.length)},rn=async()=>{if(!X||!ce)return;const D=await tn.getViews(X.id);D.success&&D.data?.views&&(G(D.data.views),S(D.data.views.length),I(!0),N(!0))},Dn=D=>{if(fe)return;const re="touches"in D?D.touches[0].clientX:D.clientX,de=D.currentTarget.getBoundingClientRect(),Ne=re-de.left,He=de.width/3;Ne<He?Ye():Ne>de.width-He&&Be()},gn=D=>{ae(D.touches[0].clientY),me(D.touches[0].clientX),ye(!1),U.current=setTimeout(()=>{ye(!0),N(!0),"vibrate"in navigator&&navigator.vibrate(10)},200)},Fn=D=>{const re=Math.abs(D.touches[0].clientX-V),de=Math.abs(D.touches[0].clientY-se);(re>10||de>10)&&U.current&&clearTimeout(U.current)},xn=D=>{U.current&&clearTimeout(U.current);const re=D.changedTouches[0].clientY,de=D.changedTouches[0].clientX,Ne=se-re,He=Math.abs(V-de);if(Ne<-100&&He<50){i();return}if(Ne>50&&He<50&&ce){rn();return}fe&&(N(!1),ye(!1))},vn=async D=>{if(!X)return;(await tn.reply(X.id,D)).success&&$.success("Reaction sent",{icon:D,duration:1500})},sn=async()=>{if(!X||X.type==="text"){$.error("Cannot download text stories");return}te(!0),K(!1);try{const re=await(await fetch(X.media_url)).blob(),de=window.URL.createObjectURL(re),Ne=document.createElement("a");Ne.href=de;const He=X.type==="image"?"jpg":"mp4",Oe=new Date().getTime();Ne.download=`story_${Oe}.${He}`,document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),window.URL.revokeObjectURL(de),$.success("Story downloaded",{description:"Saved to your downloads folder",duration:2e3})}catch(D){console.error("[Story] Download error:",D),$.error("Failed to download story")}finally{te(!1)}};return X?n.jsxs("div",{className:"fixed inset-0 z-50 bg-black overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 z-30 flex gap-1 p-2 pt-safe",children:J.stories.map((D,re)=>n.jsx("div",{className:"flex-1 h-[3px] bg-white/30 rounded-full overflow-hidden backdrop-blur-sm",children:n.jsx("div",{className:"h-full bg-white shadow-sm transition-all duration-100 ease-linear",style:{width:re<p?"100%":re===p?`${k}%`:"0%"}})},re))}),n.jsxs("div",{className:"absolute top-0 left-0 right-0 z-30 pt-safe",children:[n.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gradient-to-b from-black/70 via-black/40 to-transparent backdrop-blur-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[n.jsxs("div",{className:"relative",children:[n.jsx(st,{user:J.user,size:"sm",showBorder:!1}),J.user.is_online&&!ce&&n.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-success rounded-full border-2 border-black"})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-white font-semibold text-[15px] truncate leading-tight",children:ce?"Your story":J.user.full_name}),n.jsxs("p",{className:"text-white/80 text-xs leading-tight",children:[new Date(X.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),"  ",De(X.created_at)]})]})]}),n.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[n.jsx("button",{onClick:()=>K(!W),className:"w-10 h-10 rounded-full flex items-center justify-center hover:bg-white/10 active:bg-white/20 transition-colors",children:n.jsx(cc,{className:"w-5 h-5 text-white"})}),n.jsx("button",{onClick:i,className:"w-10 h-10 rounded-full flex items-center justify-center hover:bg-white/10 active:bg-white/20 transition-colors",children:n.jsx(Tn,{className:"w-5 h-5 text-white"})})]})]}),W&&n.jsxs("div",{className:"absolute top-full right-3 mt-1 bg-surface rounded-2xl shadow-2xl overflow-hidden min-w-[180px] border border-border/50 animate-in fade-in zoom-in-95 slide-in-from-top-1 duration-150",onClick:()=>K(!1),children:[X.type!=="text"&&n.jsxs("button",{onClick:D=>{D.stopPropagation(),sn()},disabled:ke,className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-hover-surface transition-colors text-left disabled:opacity-50",children:[n.jsx(Ag,{className:"w-[18px] h-[18px] text-foreground"}),n.jsx("span",{className:"text-[15px] font-medium text-foreground",children:ke?"Downloading...":"Download"})]}),ce&&n.jsxs("button",{onClick:D=>{D.stopPropagation(),K(!1),Mn()},className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-hover-destructive transition-colors text-left text-destructive border-t border-border/30",children:[n.jsx(lr,{className:"w-[18px] h-[18px]"}),n.jsx("span",{className:"text-[15px] font-medium",children:"Delete"})]})]})]}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center select-none touch-none",onClick:Dn,onTouchStart:gn,onTouchMove:Fn,onTouchEnd:xn,onMouseDown:()=>N(!0),onMouseUp:()=>N(!1),children:n.jsx("div",{className:"w-full h-full",children:n.jsxs("div",{className:"w-full h-full flex items-center justify-center animate-in fade-in zoom-in-95 duration-200",children:[X.type==="image"&&n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:n.jsx("img",{src:X.media_url,alt:"Story",className:"max-w-full max-h-full w-auto h-auto object-contain",onLoad:()=>oe(!0),onError:()=>oe(!0),style:{imageRendering:"high-quality",display:"block",margin:"0 auto"}})}),X.type==="video"&&n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:n.jsx("video",{ref:z,src:X.media_url,className:"max-w-full max-h-full w-auto h-auto object-contain",autoPlay:!0,muted:!0,playsInline:!0,onLoadedData:()=>H(!0),onError:()=>H(!0),style:{display:"block",margin:"0 auto"}})}),X.type==="text"&&n.jsx("div",{className:"w-full h-full flex items-center justify-center px-8 py-12",style:{background:X.background_color||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:n.jsx("p",{className:"text-white text-[32px] leading-relaxed font-medium text-center max-w-lg px-4",children:X.text_content})}),X.caption&&n.jsx("div",{className:"absolute bottom-24 left-0 right-0 px-4",children:n.jsx("div",{className:"bg-black/50 backdrop-blur-xl rounded-2xl px-4 py-3 max-w-md mx-auto border border-white/10 animate-in fade-in slide-in-from-bottom-2 duration-300",children:n.jsx("p",{className:"text-white text-center text-[15px] leading-relaxed",children:X.caption})})})]},X.id)})}),ce&&j>0&&!x&&n.jsxs("button",{onClick:D=>{D.stopPropagation(),rn()},className:"absolute bottom-20 left-1/2 -translate-x-1/2 z-30 bg-black/60 backdrop-blur-xl rounded-full px-5 py-2.5 flex items-center gap-2 hover:bg-black/70 active:scale-95 active:bg-black/80 transition-all border border-white/10 shadow-lg animate-in fade-in slide-in-from-bottom-2 duration-300 pointer-events-auto touch-manipulation",children:[n.jsx(Zi,{className:"w-[18px] h-[18px] text-white"}),n.jsxs("span",{className:"text-white font-medium text-[15px]",children:[j," ",j===1?"view":"views"]}),n.jsx(Eg,{className:"w-4 h-4 text-white/60"})]}),!ce&&!x&&n.jsx("div",{className:"absolute bottom-20 right-4 z-30 flex flex-col gap-2.5 pointer-events-auto",children:[{emoji:"",label:"Love"},{emoji:"",label:"Laugh"},{emoji:"",label:"Wow"},{emoji:"",label:"Sad"},{emoji:"",label:"Fire"}].map(({emoji:D,label:re})=>n.jsx("button",{onClick:de=>{de.stopPropagation(),vn(D)},className:"w-14 h-14 rounded-full bg-black/60 backdrop-blur-xl flex items-center justify-center hover:bg-black/70 active:scale-90 active:bg-black/80 transition-all border border-white/10 shadow-lg touch-manipulation","aria-label":`React with ${re}`,children:n.jsx("span",{className:"text-2xl leading-none",children:D})},D))}),!ce&&!x&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-30 pb-safe pointer-events-auto",children:n.jsx("div",{className:"px-4 py-3 bg-gradient-to-t from-black/80 via-black/60 to-transparent backdrop-blur-md",children:n.jsxs("div",{className:"flex items-center gap-2.5 max-w-2xl mx-auto",children:[n.jsx("div",{className:"flex-1 relative",children:n.jsx(hn,{ref:ve,value:E,onChange:D=>O(D.target.value),placeholder:`Reply to ${J.user.full_name}`,className:"bg-white/15 backdrop-blur-xl border-white/20 text-white placeholder:text-white/60 rounded-full h-12 px-5 pr-12 focus:bg-white/25 focus:border-white/40 transition-all shadow-lg text-[15px] touch-manipulation",onKeyDown:D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),Mt())},onFocus:()=>{N(!0),setTimeout(()=>{ve.current?.scrollIntoView({behavior:"smooth",block:"center"})},100)},onBlur:()=>{setTimeout(()=>N(!1),100)},autoComplete:"off",autoCapitalize:"sentences"})}),E.trim()?n.jsx("button",{onClick:Mt,className:"w-12 h-12 rounded-full bg-primary hover:bg-primary/90 active:bg-primary/80 active:scale-95 flex items-center justify-center transition-all shadow-lg flex-shrink-0 animate-in zoom-in duration-200 touch-manipulation",children:n.jsx(Wa,{className:"w-5 h-5 text-white"})}):n.jsx("button",{onClick:()=>vn(""),className:"w-12 h-12 rounded-full bg-white/15 backdrop-blur-xl hover:bg-white/20 active:bg-white/30 active:scale-95 flex items-center justify-center transition-all shadow-lg flex-shrink-0 border border-white/20 touch-manipulation",children:n.jsx(Tg,{className:"w-5 h-5 text-white"})})]})})}),x&&ce&&n.jsx("div",{className:"absolute inset-0 z-40 bg-black/95 backdrop-blur-md flex items-end animate-in fade-in duration-200 pointer-events-auto",onClick:()=>{I(!1),N(!1)},children:n.jsxs("div",{className:"bg-surface w-full rounded-t-[28px] overflow-hidden max-h-[75vh] pb-safe shadow-2xl animate-in slide-in-from-bottom duration-300",onClick:D=>D.stopPropagation(),onTouchStart:D=>{const re=D.touches[0];ae(re.clientY)},onTouchMove:D=>{const de=D.touches[0].clientY-se;de>0&&(D.currentTarget.style.transform=`translateY(${de}px)`)},onTouchEnd:D=>{D.changedTouches[0].clientY-se>100?(I(!1),N(!1)):D.currentTarget.style.transform="translateY(0)"},children:[n.jsx("div",{className:"w-full flex justify-center py-3 bg-surface border-b border-border/50 cursor-grab active:cursor-grabbing",children:n.jsx("div",{className:"w-12 h-1.5 bg-muted-foreground/30 rounded-full"})}),n.jsx("div",{className:"px-5 py-4 border-b border-border/50 bg-surface",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Viewers"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:j===0?"No views yet":`${j} ${j===1?"view":"views"}`})]}),n.jsx("button",{onClick:()=>{I(!1),N(!1)},className:"w-10 h-10 rounded-full hover:bg-hover-surface active:bg-hover-muted flex items-center justify-center transition-colors",children:n.jsx(Tn,{className:"w-5 h-5 text-foreground"})})]})}),n.jsx("div",{className:"overflow-y-auto max-h-[calc(75vh-120px)]",children:T.length>0?n.jsx("div",{className:"py-1",children:T.map((D,re)=>n.jsxs("div",{className:"flex items-center gap-3 px-5 py-3 hover:bg-hover-surface active:bg-hover-muted transition-colors animate-in fade-in slide-in-from-left-4 duration-300",style:{animationDelay:`${re*50}ms`},children:[n.jsx(st,{user:D.user,size:"md"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-[15px] text-foreground truncate",children:D.user?.full_name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(D.viewed_at).toLocaleString([],{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric"})})]})]},D.id))}):n.jsxs("div",{className:"py-16 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mx-auto mb-4",children:n.jsx(Zi,{className:"w-8 h-8 text-muted-foreground/50"})}),n.jsx("p",{className:"text-muted-foreground text-[15px]",children:"No views yet"}),n.jsx("p",{className:"text-muted-foreground/60 text-sm mt-1",children:"Check back later to see who viewed your story"})]})})]})}),X.type!=="text"&&!B&&!P&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black z-10",children:n.jsx("div",{className:"relative",children:n.jsx("div",{className:"w-12 h-12 border-4 border-white/10 border-t-white rounded-full animate-spin"})})}),v&&!x&&n.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-20 pointer-events-none",children:n.jsx("div",{className:"bg-black/60 backdrop-blur-xl rounded-full p-4 border border-white/20 shadow-2xl animate-in zoom-in fade-in duration-150",children:n.jsxs("div",{className:"flex gap-1.5",children:[n.jsx("div",{className:"w-1.5 h-8 bg-white rounded-full"}),n.jsx("div",{className:"w-1.5 h-8 bg-white rounded-full"})]})})}),p===0&&f===0&&!ce&&n.jsx("div",{className:"absolute bottom-32 left-0 right-0 z-20 pointer-events-none animate-in fade-in slide-in-from-bottom-4 duration-500",children:n.jsx("div",{className:"text-center px-4",children:n.jsx("p",{className:"text-white/60 text-xs font-medium",children:"Tap left or right to navigate  Hold to pause"})})})]}):null}function N0({className:r,...o}){return n.jsx("textarea",{"data-slot":"textarea",className:Pe("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...o})}const Bi=["#0057FF","#00D4A6","#FF4D4F","#FFB020","#9333EA","#EC4899","#10B981","#3B82F6","#000000","#FFFFFF"];function b0({currentUser:r,onClose:o,onSuccess:l}){const[i,u]=m.useState("select"),[f,g]=m.useState([]),[p,w]=m.useState(""),[v,N]=m.useState(Bi[0]),[k,A]=m.useState(""),[E,O]=m.useState(null),[x,I]=m.useState(null),[W,K]=m.useState(!1),T=m.useRef(null),G=P=>{const H=P.target.files;if(!H||H.length===0)return;const se=[];for(let ae=0;ae<H.length;ae++){const V=H[ae];if(!V.type.startsWith("image/")&&!V.type.startsWith("video/")){$.error(`${V.name}: Invalid file type`);continue}if(V.size>50*1024*1024){$.error(`${V.name}: File too large (max 50MB)`);continue}se.push(V)}if(se.length!==0){if(se.length===1)O(se[0]),I(URL.createObjectURL(se[0])),u("media");else{const ae=se.map(V=>({id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:V.type.startsWith("image/")?"image":"video",file:V,preview_url:URL.createObjectURL(V)}));g(V=>[...V,...ae]),u("queue"),$.success(`${se.length} ${se.length===1?"story":"stories"} added to queue`)}P.target.value=""}},j=()=>{if(!p.trim()){$.error("Please enter some text");return}const P={id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"text",text_content:p.trim(),background_color:v};g(H=>[...H,P]),w(""),N(Bi[0]),u(f.length>0?"queue":"select"),$.success("Text story added to queue")},S=()=>{if(!E)return;const P={id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:E.type.startsWith("image/")?"image":"video",file:E,preview_url:x||void 0,caption:k.trim()||void 0};g(H=>[...H,P]),O(null),I(null),A(""),u("queue"),$.success("Story added to queue")},B=P=>{g(H=>H.filter(se=>se.id!==P)),f.length===1&&u("select")},oe=async()=>{if(f.length===0){$.error("No stories to publish");return}K(!0);let P=0,H=0;try{for(const se of f)try{if(se.type==="text")(await tn.create("text",{text_content:se.text_content,background_color:se.background_color})).success?P++:H++;else{const ae=await $a.uploadFile(se.file,"attachment");if(!ae.success||!ae.data?.url){H++;continue}(await tn.create(se.type,{media_url:ae.data.url,caption:se.caption})).success?P++:H++}await new Promise(ae=>setTimeout(ae,300))}catch(ae){console.error("Error publishing story:",ae),H++}P>0&&H===0?($.success(`${P} ${P===1?"story":"stories"} published successfully! `),l(),o()):P>0&&H>0?($.warning(`${P} published, ${H} failed`),g(se=>se.slice(P))):$.error("Failed to publish stories. Please try again.")}catch(se){console.error("Publish error:",se),$.error("An error occurred while publishing")}finally{K(!1)}};return n.jsxs("div",{className:"fixed inset-0 z-50 bg-background",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 bg-gradient-to-r from-primary to-accent shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[n.jsx("button",{onClick:o,className:"w-10 h-10 rounded-full hover:bg-white/20 flex items-center justify-center transition-colors",disabled:W,children:n.jsx(Tn,{className:"w-5 h-5 text-white"})}),n.jsx("h2",{className:"text-lg font-semibold text-white",children:i==="queue"?`${f.length} ${f.length===1?"Story":"Stories"}`:"Create Story"}),i==="queue"&&f.length>0?n.jsx(Me,{onClick:oe,disabled:W,size:"sm",className:"bg-white text-primary hover:bg-white/90",children:W?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 border-2 border-primary/30 border-t-primary rounded-full animate-spin"}),n.jsx("span",{className:"hidden sm:inline",children:"Publishing..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Wa,{className:"w-4 h-4 mr-1"}),n.jsx("span",{children:"Publish All"})]})}):n.jsx("div",{className:"w-10"})]})}),n.jsxs("div",{className:"pt-16 h-full flex flex-col overflow-hidden",children:[i==="select"&&n.jsx("div",{className:"flex-1 flex items-center justify-center p-6 animate-in fade-in duration-300",children:n.jsxs("div",{className:"w-full max-w-md space-y-4",children:[f.length>0&&n.jsxs("button",{onClick:()=>u("queue"),className:"w-full h-20 rounded-2xl bg-primary/10 border-2 border-primary flex items-center justify-between px-6 hover:bg-primary/20 transition-all group animate-in fade-in slide-in-from-top-4 duration-300",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-primary flex items-center justify-center",children:n.jsx("span",{className:"text-white font-bold text-lg",children:f.length})}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Story Queue"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.length," ",f.length===1?"story":"stories"," ready"]})]})]}),n.jsx("svg",{className:"w-6 h-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),n.jsxs("button",{onClick:()=>u("text"),className:"w-full h-32 rounded-2xl bg-gradient-to-br from-primary to-accent flex flex-col items-center justify-center gap-3 hover:shadow-lg transition-all group animate-in fade-in slide-in-from-bottom-4 duration-300 delay-75",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center group-hover:scale-110 transition-transform",children:n.jsx(Wg,{className:"w-8 h-8 text-white"})}),n.jsx("span",{className:"text-white font-medium",children:"Text Status"})]}),n.jsxs("button",{onClick:()=>T.current?.click(),className:"w-full h-32 rounded-2xl bg-surface border-2 border-dashed border-border flex flex-col items-center justify-center gap-3 hover:border-primary hover:bg-hover-primary transition-all group animate-in fade-in slide-in-from-bottom-4 duration-300 delay-150",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center group-hover:scale-110 transition-transform",children:n.jsx(Rg,{className:"w-8 h-8 text-muted-foreground group-hover:text-primary"})}),n.jsx("span",{className:"text-foreground font-medium",children:"Photo or Video"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Select multiple files"})]}),n.jsx("input",{ref:T,type:"file",accept:"image/*,video/*",onChange:G,className:"hidden",multiple:!0})]})},"select"),i==="text"&&n.jsxs("div",{className:"flex-1 flex flex-col animate-in fade-in slide-in-from-right-4 duration-300",children:[n.jsx("div",{className:"flex-1 flex items-center justify-center p-8",style:{backgroundColor:v},children:n.jsx(N0,{value:p,onChange:P=>w(P.target.value),placeholder:"Type your status...",className:"max-w-lg bg-transparent border-none text-white text-2xl font-medium text-center placeholder:text-white/50 resize-none h-auto min-h-[200px] focus-visible:ring-0",autoFocus:!0,maxLength:250})}),n.jsxs("div",{className:"bg-surface border-t border-border p-4 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Background Color"}),n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:Bi.map(P=>n.jsx("button",{onClick:()=>N(P),className:"flex-shrink-0 w-10 h-10 rounded-full border-2 flex items-center justify-center transition-transform hover:scale-110",style:{backgroundColor:P,borderColor:v===P?"var(--primary)":"transparent"},children:v===P&&n.jsx(Sr,{className:"w-5 h-5",style:{color:P==="#FFFFFF"?"#000000":"#FFFFFF"}})},P))})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(Me,{onClick:()=>{u(f.length>0?"queue":"select"),w("")},variant:"outline",className:"flex-1",children:"Cancel"}),n.jsxs(Me,{onClick:j,disabled:!p.trim(),className:"flex-1",size:"lg",children:[n.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Add to Queue"]})]})]})]},"text"),i==="media"&&x&&E&&n.jsxs("div",{className:"flex-1 flex flex-col animate-in fade-in slide-in-from-right-4 duration-300",children:[n.jsx("div",{className:"flex-1 bg-black flex items-center justify-center p-4 overflow-hidden",children:E.type.startsWith("image/")?n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:n.jsx(ir,{src:x,alt:"Preview",className:"max-w-full max-h-full object-contain",style:{display:"block",margin:"0 auto"}})}):n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:n.jsx("video",{src:x,className:"max-w-full max-h-full object-contain",style:{display:"block",margin:"0 auto"},controls:!0,autoPlay:!0,muted:!0,loop:!0,playsInline:!0})})}),n.jsxs("div",{className:"bg-surface border-t border-border p-4 space-y-4",children:[n.jsx(hn,{value:k,onChange:P=>A(P.target.value),placeholder:"Add a caption (optional)...",maxLength:100}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(Me,{onClick:()=>{u(f.length>0?"queue":"select"),O(null),I(null),A("")},variant:"outline",className:"flex-1",children:"Cancel"}),n.jsxs(Me,{onClick:S,className:"flex-1",size:"lg",children:[n.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Add to Queue"]})]})]})]},"media"),i==="queue"&&n.jsxs("div",{className:"flex-1 flex flex-col animate-in fade-in duration-300",children:[n.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:f.map((P,H)=>n.jsx("div",{className:"bg-surface rounded-xl border border-border overflow-hidden group hover:border-primary/50 transition-colors animate-in fade-in slide-in-from-bottom-4 duration-300",style:{animationDelay:`${H*50}ms`},children:n.jsxs("div",{className:"flex items-center gap-3 p-3",children:[n.jsx("div",{className:"relative flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden bg-muted",children:P.type==="text"?n.jsx("div",{className:"w-full h-full flex items-center justify-center p-2",style:{backgroundColor:P.background_color},children:n.jsx("p",{className:"text-white text-[8px] font-medium text-center leading-tight line-clamp-4",children:P.text_content})}):P.preview_url?n.jsxs(n.Fragment,{children:[n.jsx(ir,{src:P.preview_url,alt:"Preview",className:"w-full h-full object-cover"}),P.type==="video"&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:n.jsx("div",{className:"w-6 h-6 rounded-full bg-white/90 flex items-center justify-center",children:n.jsx("svg",{className:"w-3 h-3 text-black ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})})})]}):null}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-sm truncate",children:P.type==="text"?"Text Status":P.type==="image"?"Photo":"Video"}),P.caption&&n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:P.caption}),P.type==="text"&&P.text_content&&n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:P.text_content})]}),n.jsx("button",{onClick:()=>B(P.id),disabled:W,className:"flex-shrink-0 w-9 h-9 rounded-full bg-destructive/10 hover:bg-destructive hover:text-white text-destructive flex items-center justify-center transition-all opacity-0 group-hover:opacity-100",children:n.jsx(lr,{className:"w-4 h-4"})})]})},P.id))}),n.jsx("div",{className:"border-t border-border p-4 bg-surface",children:n.jsxs(Me,{onClick:()=>u("select"),variant:"outline",className:"w-full",disabled:W,children:[n.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Add More Stories"]})})]},"queue")]})]})}const Dm=m.forwardRef(({className:r,orientation:o="horizontal",decorative:l=!0,...i},u)=>n.jsx("div",{ref:u,role:l?"none":"separator","aria-orientation":o,"data-slot":"separator",className:Pe("shrink-0 bg-border",o==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",r),...i}));Dm.displayName="Separator";function S0({user:r,currentUser:o,onBack:l,onSendMessage:i,onInitiateCall:u,onBlock:f,onUnblock:g,onDelete:p,onViewProfile:w,isBlocked:v=!1,lastSeen:N}){const k=r.is_online,A=k?"online":N||"offline",[E,O]=m.useState("not_following"),[x,I]=m.useState(!1),[W,K]=m.useState(!0);m.useEffect(()=>{T()},[r.id]);const T=async()=>{K(!0);try{const j=await St.getFollowStatus(r.id);j.success&&j.data&&(O(j.data.status||"not_following"),I(j.data.follows_back||!1))}catch(j){console.error("Error loading follow status:",j)}finally{K(!1)}},G=async()=>{E==="following"?(O("not_following"),(await St.unfollow(r.id)).success?($.success("Unfollowed"),I(!1)):(O("following"),$.error("Failed to unfollow"))):E==="pending"?(O("not_following"),(await St.cancelFollowRequest(r.id)).success?$.success("Follow request cancelled"):(O("pending"),$.error("Failed to cancel request"))):(O("pending"),(await St.follow(r.id)).success?($.success("Follow request sent"),await T()):(O("not_following"),$.error("Failed to send follow request")))};return n.jsxs("div",{className:"h-screen flex flex-col bg-background overflow-hidden",children:[n.jsxs("div",{className:"bg-surface border-b border-border px-4 py-3 flex items-center gap-4 shadow-sm shrink-0 animate-in fade-in slide-in-from-top-4 duration-300",children:[n.jsx(Me,{variant:"ghost",size:"icon",onClick:l,className:"h-10 w-10 rounded-full hover:bg-[var(--hover-surface)] shrink-0 transition-colors","aria-label":"Back",children:n.jsx(ro,{className:"w-5 h-5"})}),n.jsx("div",{className:"flex-1",children:n.jsx("h2",{className:"truncate",children:"Contact Info"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:[n.jsxs("div",{className:"bg-surface pb-6 flex flex-col items-center animate-in fade-in zoom-in-95 duration-400 delay-100",children:[n.jsx("div",{className:"w-full bg-background/50 flex items-center justify-center py-12 mb-6",children:n.jsxs("div",{className:"relative group cursor-pointer",children:[n.jsxs("div",{className:"relative w-[280px] h-[280px] sm:w-[320px] sm:h-[320px] rounded-full overflow-hidden shadow-2xl ring-1 ring-border/20 transition-all duration-300 group-hover:shadow-3xl group-hover:scale-[1.02]",children:[r.avatar_url?n.jsx("img",{src:r.avatar_url,alt:r.full_name,className:"w-full h-full object-cover object-center",style:{imageRendering:"auto",WebkitFontSmoothing:"antialiased"}}):n.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary to-accent",children:n.jsx("span",{className:"text-8xl font-semibold text-white select-none",children:r.full_name.split(" ").map(j=>j[0]).join("").substring(0,2).toUpperCase()})}),k&&n.jsx("div",{className:"absolute bottom-6 right-6 w-12 h-12 bg-success rounded-full border-[5px] border-surface shadow-xl"})]}),n.jsx("div",{className:"absolute inset-0 rounded-full bg-black/0 group-hover:bg-black/5 transition-all duration-300 pointer-events-none"})]})}),n.jsx("h1",{className:"text-2xl font-medium mb-1 text-center px-4",children:r.full_name}),n.jsx("p",{className:"text-base text-muted-foreground mb-1",children:r.phone_number?Ef(r.phone_number):"No phone number"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:A})]}),n.jsxs("div",{className:"bg-background px-6 py-6 flex justify-center gap-6 animate-in fade-in slide-in-from-bottom-4 duration-300 delay-200",children:[i&&n.jsxs("button",{onClick:i,className:"flex flex-col items-center gap-2 group active:scale-95 transition-transform",children:[n.jsx("div",{className:"w-14 h-14 rounded-full bg-primary/10 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:n.jsx(Ba,{className:"w-6 h-6 text-primary"})}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Message"})]}),u&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>u("voice"),className:"flex flex-col items-center gap-2 group active:scale-95 transition-transform",children:[n.jsx("div",{className:"w-14 h-14 rounded-full bg-success/10 flex items-center justify-center group-hover:bg-success/20 transition-colors",children:n.jsx(pn,{className:"w-6 h-6 text-success"})}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Audio"})]}),n.jsxs("button",{onClick:()=>u("video"),className:"flex flex-col items-center gap-2 group active:scale-95 transition-transform",children:[n.jsx("div",{className:"w-14 h-14 rounded-full bg-info/10 flex items-center justify-center group-hover:bg-info/20 transition-colors",children:n.jsx(ls,{className:"w-6 h-6 text-info"})}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Video"})]})]})]}),!W&&x&&E==="following"&&n.jsx("div",{className:"mx-6 mb-4 px-4 py-3 bg-gradient-to-r from-primary/10 to-accent/10 rounded-xl border border-primary/30 animate-in fade-in duration-300 delay-250",children:n.jsxs("p",{className:"text-sm text-center",children:[n.jsx("span",{className:"text-primary font-medium",children:" Friends"}),n.jsx("span",{className:"text-muted-foreground ml-1",children:" You follow each other"})]})}),!W&&x&&E!=="following"&&n.jsx("div",{className:"mx-6 mb-4 px-4 py-3 bg-muted rounded-xl animate-in fade-in duration-300 delay-250",children:n.jsx("p",{className:"text-sm text-center text-muted-foreground",children:"Follows you"})}),n.jsxs("div",{className:"px-6 pb-4 flex gap-3 animate-in fade-in duration-300 delay-300",children:[!W&&n.jsx("button",{onClick:G,className:`flex-1 px-4 py-3 rounded-xl font-medium transition-all active:scale-95 flex items-center justify-center gap-2 ${E==="following"?"bg-muted hover:bg-muted/80 text-foreground":E==="pending"?"bg-muted hover:bg-muted/80 text-muted-foreground":"bg-gradient-to-r from-primary to-accent hover:opacity-90 text-white shadow-lg shadow-primary/30"}`,children:E==="following"?n.jsxs(n.Fragment,{children:[n.jsx(Hg,{className:"w-4 h-4"}),n.jsx("span",{children:"Following"})]}):E==="pending"?n.jsxs(n.Fragment,{children:[n.jsx(Tn,{className:"w-4 h-4"}),n.jsx("span",{children:"Requested"})]}):n.jsxs(n.Fragment,{children:[n.jsx(dc,{className:"w-4 h-4"}),n.jsx("span",{children:"Follow"})]})}),w&&n.jsxs("button",{onClick:w,className:"flex-1 px-4 py-3 bg-gradient-to-r from-info/10 to-info/20 hover:from-info/20 hover:to-info/30 text-info font-medium rounded-xl transition-all active:scale-95 flex items-center justify-center gap-2",children:[n.jsx(uc,{className:"w-4 h-4"}),n.jsx("span",{children:"View Profile"})]})]}),n.jsxs("div",{className:"bg-surface mt-2 px-4 py-4 animate-in fade-in duration-300 delay-300",children:[n.jsx("h3",{className:"text-sm text-primary mb-2",children:"About"}),n.jsx("p",{className:"text-base text-foreground mb-1",children:r.status||r.status_message||r.bio||"Hey there! I am using AuroraLink."}),r.status_updated_at&&n.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(r.status_updated_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),r.phone_number&&n.jsxs("div",{className:"bg-surface mt-2 px-4 py-4 animate-in fade-in duration-300 delay-350",children:[n.jsx("h3",{className:"text-sm text-primary mb-2",children:"Phone"}),n.jsx("p",{className:"text-base text-foreground mb-1",children:Ef(r.phone_number)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Mobile"})]}),r.email&&n.jsxs("div",{className:"bg-surface mt-2 px-4 py-4 animate-in fade-in duration-300 delay-400",children:[n.jsx("h3",{className:"text-sm text-primary mb-2",children:"Email"}),n.jsx("p",{className:"text-base text-foreground",children:r.email})]}),r.username&&r.username!==r.email?.split("@")[0]&&n.jsxs("div",{className:"bg-surface mt-2 px-4 py-4 animate-in fade-in duration-300 delay-450",children:[n.jsx("h3",{className:"text-sm text-primary mb-2",children:"Username"}),n.jsxs("p",{className:"text-base text-foreground",children:["@",r.username]})]}),n.jsx("div",{className:"h-4"}),n.jsxs("div",{className:"bg-surface mt-2 animate-in fade-in duration-300 delay-500",children:[v?g&&n.jsxs("button",{onClick:g,className:"w-full px-4 py-3.5 flex items-center gap-3 hover:bg-[var(--hover-surface)] transition-colors text-left",children:[n.jsx(Gg,{className:"w-5 h-5 text-warning"}),n.jsx("span",{className:"text-base text-warning",children:"Unblock Contact"})]}):f&&n.jsxs("button",{onClick:f,className:"w-full px-4 py-3.5 flex items-center gap-3 hover:bg-[var(--hover-surface)] transition-colors text-left",children:[n.jsx(Sg,{className:"w-5 h-5 text-destructive"}),n.jsx("span",{className:"text-base text-destructive",children:"Block Contact"})]}),f&&p&&n.jsx(Dm,{}),p&&n.jsxs("button",{onClick:p,className:"w-full px-4 py-3.5 flex items-center gap-3 hover:bg-[var(--hover-surface)] transition-colors text-left",children:[n.jsx(lr,{className:"w-5 h-5 text-destructive"}),n.jsx("span",{className:"text-base text-destructive",children:"Delete Chat"})]})]}),n.jsx("div",{className:"h-8"})]})]})}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),C0=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,l,i)=>i?i.toUpperCase():l.toLowerCase()),Ff=r=>{const o=C0(r);return o.charAt(0).toUpperCase()+o.slice(1)},Fm=(...r)=>r.filter((o,l,i)=>!!o&&o.trim()!==""&&i.indexOf(o)===l).join(" ").trim(),_0=r=>{for(const o in r)if(o.startsWith("aria-")||o==="role"||o==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var E0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=m.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:u="",children:f,iconNode:g,...p},w)=>m.createElement("svg",{ref:w,...E0,width:o,height:o,stroke:r,strokeWidth:i?Number(l)*24/Number(o):l,className:Fm("lucide",u),...!f&&!_0(p)&&{"aria-hidden":"true"},...p},[...g.map(([v,N])=>m.createElement(v,N)),...Array.isArray(f)?f:[f]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=(r,o)=>{const l=m.forwardRef(({className:i,...u},f)=>m.createElement(P0,{ref:f,iconNode:o,className:Fm(`lucide-${k0(Ff(r))}`,`lucide-${r}`,i),...u}));return l.displayName=Ff(r),l};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Im=tt("arrow-left",A0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Lm=tt("bookmark",T0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],M0=tt("check",R0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Om=tt("ellipsis-vertical",D0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],zm=tt("film",F0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],L0=tt("grid-3x3",I0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],oo=tt("heart",O0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],$0=tt("house",z0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],B0=tt("image",U0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ao=tt("message-circle",V0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],rc=tt("play",W0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],G0=tt("search",H0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ac=tt("send",Y0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],K0=tt("sparkles",J0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Q0=tt("square-plus",q0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],$m=tt("trash-2",X0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ev=tt("upload",Z0);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],If=tt("user-minus",tv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ia=tt("user-plus",nv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],sv=tt("user",rv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],av=tt("video",ov);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],iv=tt("volume-2",lv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],uv=tt("volume-x",cv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],An=tt("x",dv);function fv({currentUser:r,onNavigate:o}){const[l,i]=m.useState([]),[u,f]=m.useState(!0),[g,p]=m.useState(new Set),[w,v]=m.useState(new Set),[N,k]=m.useState(null),[A,E]=m.useState(null),[O,x]=m.useState(!1);m.useEffect(()=>{I()},[]);const I=async()=>{f(!0);try{const S=await Ze.getFeed();if(S.success&&S.data){const B=S.data.posts||S.data,oe=Array.isArray(B)?B:[];i(oe);const P=new Set(oe.filter(se=>se.is_liked).map(se=>se.id)),H=new Set(oe.filter(se=>se.is_saved).map(se=>se.id));p(P),v(H)}else i([])}catch(S){console.error("Error loading feed:",S),i([])}f(!1)},W=async S=>{const B=g.has(S);B?(p(oe=>{const P=new Set(oe);return P.delete(S),P}),i(oe=>oe.map(P=>P.id===S?{...P,likes_count:P.likes_count-1}:P))):(p(oe=>new Set(oe).add(S)),i(oe=>oe.map(P=>P.id===S?{...P,likes_count:P.likes_count+1}:P))),B?await Ze.unlikePost(S):await Ze.likePost(S)},K=async S=>{w.has(S)?(v(oe=>{const P=new Set(oe);return P.delete(S),P}),await Ze.unsavePost(S),$.success("Removed from saved")):(v(oe=>new Set(oe).add(S)),await Ze.savePost(S),$.success("Saved to collection"))},T=S=>{o("post-detail",{postId:S})},G=S=>{console.log("Share post:",S),$.info("Share feature coming soon")},j=async S=>{try{x(!0),await Ze.deletePost(S),i(B=>B.filter(oe=>oe.id!==S)),E(null),k(null),$.success("Post deleted successfully")}catch(B){console.error("Failed to delete post:",B),$.error("Failed to delete post")}finally{x(!1)}};return u?n.jsx("div",{className:"flex items-center justify-center h-screen bg-gradient-to-b from-[#f5f5f5] to-white",children:n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-[#25D366]/20 border-t-[#25D366]"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"Loading your feed..."})]})}):n.jsxs("div",{className:"flex flex-col h-screen bg-gradient-to-b from-[#f5f5f5] to-white",children:[n.jsx("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-[#25D366] to-[#128C7E] px-5 py-4 shadow-lg",children:n.jsx("h1",{className:"text-white text-2xl tracking-wide",style:{fontFamily:"system-ui, -apple-system, sans-serif"},children:"AuroraLink"})}),n.jsx("div",{className:"flex-1 overflow-y-auto pb-20",children:l.length===0?n.jsx("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 px-6 text-center",children:n.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-sm border border-gray-100",children:[n.jsx("p",{className:"mb-2 text-gray-700",children:"No posts yet"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Follow people to see their posts here"})]})}):l.map(S=>{const B=r.id===S.user.id;return n.jsxs("div",{className:"mb-3 bg-white shadow-sm",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"ring-2 ring-[#25D366]/20 rounded-full p-0.5",children:n.jsx(st,{name:S.user.full_name,imageUrl:S.user.avatar_url,size:"md",onClick:()=>o("profile-view",{userId:S.user.id})})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:S.user.full_name}),S.location&&n.jsx("p",{className:"text-xs text-gray-500",children:S.location})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:()=>k(N===S.id?null:S.id),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:n.jsx(Om,{className:"w-5 h-5 text-gray-700"})}),N===S.id&&n.jsxs("div",{className:"absolute right-0 mt-1 bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden min-w-[160px] z-20",children:[B&&n.jsxs("button",{onClick:()=>{E(S.id),k(null)},className:"w-full px-4 py-3 text-left text-red-600 hover:bg-red-50 flex items-center gap-3 transition-colors",children:[n.jsx($m,{size:18}),n.jsx("span",{className:"text-sm font-medium",children:"Delete"})]}),n.jsx("button",{onClick:()=>k(null),className:"w-full px-4 py-3 text-left text-gray-700 hover:bg-gray-50 transition-colors",children:n.jsx("span",{className:"text-sm",children:"Cancel"})})]})]})]}),n.jsx("div",{className:"w-full bg-black",children:S.type==="reel"?n.jsx("video",{src:S.media_url,className:"w-full max-h-[600px] object-contain",controls:!0,playsInline:!0}):n.jsx("img",{src:S.media_url,alt:"Post",className:"w-full max-h-[600px] object-contain"})}),n.jsxs("div",{className:"px-4 py-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center space-x-5",children:[n.jsx("button",{onClick:()=>W(S.id),className:"transition-transform active:scale-110",children:n.jsx(oo,{className:`w-7 h-7 transition-colors ${g.has(S.id)?"fill-red-500 text-red-500":"text-gray-900 hover:text-gray-600"}`,strokeWidth:2})}),n.jsx("button",{onClick:()=>T(S.id),className:"transition-transform active:scale-110",children:n.jsx(ao,{className:"w-7 h-7 text-gray-900 hover:text-gray-600",strokeWidth:2})}),n.jsx("button",{onClick:()=>G(S.id),className:"transition-transform active:scale-110",children:n.jsx(Ac,{className:"w-7 h-7 text-gray-900 hover:text-gray-600",strokeWidth:2})})]}),n.jsx("button",{onClick:()=>K(S.id),className:"transition-transform active:scale-110",children:n.jsx(Lm,{className:`w-7 h-7 transition-colors ${w.has(S.id)?"fill-[#25D366] text-[#25D366]":"text-gray-900 hover:text-gray-600"}`,strokeWidth:2})})]}),S.likes_count>0&&n.jsxs("p",{className:"font-semibold text-sm mb-2 text-gray-900",children:[S.likes_count.toLocaleString()," ",S.likes_count===1?"like":"likes"]}),S.caption&&n.jsxs("p",{className:"text-sm mb-2 text-gray-900",children:[n.jsx("span",{className:"font-semibold mr-2",children:S.user.full_name}),n.jsx("span",{className:"text-gray-700",children:S.caption})]}),S.comments_count>0&&n.jsxs("button",{onClick:()=>T(S.id),className:"text-sm text-gray-500 mb-2 hover:text-gray-700",children:["View all ",S.comments_count," comments"]}),n.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wide",children:mv(S.created_at)})]})]},S.id)})}),A&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-sm mx-4 shadow-2xl",children:[n.jsx("h3",{className:"text-gray-900 text-xl font-semibold mb-3",children:"Delete Post?"}),n.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"This post will be permanently deleted. This action cannot be undone."}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>E(null),disabled:O,className:"flex-1 px-4 py-3 rounded-full bg-gray-100 text-gray-700 hover:bg-gray-200 transition-all disabled:opacity-50 font-medium",children:"Cancel"}),n.jsx("button",{onClick:()=>j(A),disabled:O,className:"flex-1 px-4 py-3 rounded-full bg-gradient-to-r from-red-500 to-red-600 text-white hover:from-red-600 hover:to-red-700 transition-all disabled:opacity-50 font-medium shadow-lg",children:O?"Deleting...":"Delete"})]})]})}),N&&n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>k(null)})]})}function mv(r){const o=Date.now(),l=new Date(r).getTime(),i=o-l,u=Math.floor(i/1e3),f=Math.floor(u/60),g=Math.floor(f/60),p=Math.floor(g/24),w=Math.floor(p/7);return w>0?`${w}w ago`:p>0?`${p}d ago`:g>0?`${g}h ago`:f>0?`${f}m ago`:"Just now"}function hv({currentUser:r,onClose:o,onPostCreated:l}){const[i,u]=m.useState(null),[f,g]=m.useState(null),[p,w]=m.useState(null),[v,N]=m.useState(""),[k,A]=m.useState(""),[E,O]=m.useState(!1),x=m.useRef(null),I=T=>{const G=T.target.files?.[0];if(!G)return;const j=G.type.startsWith("video/"),S=G.type.startsWith("image/");if(!j&&!S){$.error("Please select a photo or video file");return}if(G.size>100*1024*1024){$.error("File size must be less than 100MB");return}g(G),u(j?"reel":"photo");const B=URL.createObjectURL(G);w(B)},W=async()=>{if(!f||!i){$.error("Please select a photo or video");return}if(!v.trim()){$.error("Please add a caption");return}O(!0);try{const T=await Ze.createPost({file:f,type:i,caption:v.trim(),location:k.trim()||void 0});T.success?($.success("Post published successfully!"),l(),o()):$.error(T.error||"Failed to publish post")}catch(T){console.error("Error publishing post:",T),$.error("Failed to publish post")}finally{O(!1)}},K=()=>{g(null),w(null),u(null),N(""),A(""),x.current&&(x.current.value="")};return n.jsxs("div",{className:"fixed inset-0 z-50 bg-white flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[n.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:n.jsx(An,{className:"w-6 h-6"})}),n.jsx("h1",{className:"font-semibold text-lg",children:"New Post"}),n.jsx("button",{onClick:W,disabled:!f||!v.trim()||E,className:"px-4 py-2 bg-[#25D366] text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:E?"Publishing...":"Publish"})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:f?n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",children:[i==="reel"?n.jsx("video",{src:p,className:"w-full max-h-96 object-contain",controls:!0,playsInline:!0}):n.jsx("img",{src:p,alt:"Preview",className:"w-full max-h-96 object-contain"}),n.jsx("button",{onClick:K,className:"absolute top-2 right-2 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors",children:n.jsx(An,{className:"w-5 h-5"})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Caption *"}),n.jsx("textarea",{value:v,onChange:T=>N(T.target.value),placeholder:"Write a caption...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-[#25D366] focus:border-transparent",rows:4,maxLength:2200}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[v.length,"/2200"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location (Optional)"}),n.jsx("input",{type:"text",value:k,onChange:T=>A(T.target.value),placeholder:"Add location...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#25D366] focus:border-transparent",maxLength:100})]}),n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium ${i==="reel"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:i==="reel"?" Reel":" Photo"})})]}):n.jsxs("div",{className:"flex flex-col items-center justify-center h-full px-6",children:[n.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:n.jsx(ev,{className:"w-12 h-12 text-gray-400"})}),n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Create a new post"}),n.jsx("p",{className:"text-gray-500 text-center mb-8",children:"Share photos and videos with your followers"}),n.jsx("input",{ref:x,type:"file",accept:"image/*,video/*",onChange:I,className:"hidden"}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsxs("button",{onClick:()=>{x.current&&(x.current.accept="image/*",x.current.click())},className:"flex items-center space-x-2 px-6 py-3 bg-[#25D366] text-white rounded-lg font-medium hover:bg-[#20BA5A] transition-colors",children:[n.jsx(B0,{className:"w-5 h-5"}),n.jsx("span",{children:"Select Photo"})]}),n.jsxs("button",{onClick:()=>{x.current&&(x.current.accept="video/*",x.current.click())},className:"flex items-center space-x-2 px-6 py-3 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors",children:[n.jsx(av,{className:"w-5 h-5"}),n.jsx("span",{children:"Select Reel"})]})]})]})})]})}function pv({postId:r,currentUser:o,onClose:l,onNavigate:i}){const[u,f]=m.useState(null),[g,p]=m.useState([]),[w,v]=m.useState(""),[N,k]=m.useState(!0),[A,E]=m.useState(!1),[O,x]=m.useState(!1),I=m.useRef(null);m.useEffect(()=>{W()},[r]);const W=async()=>{k(!0);try{const[j,S]=await Promise.all([Ze.getPost(r),Ze.getComments(r)]);if(j.success&&j.data){const B=j.data.post||j.data;f(B),x(B.is_liked||!1)}if(S.success&&S.data){const B=S.data.comments||S.data;p(Array.isArray(B)?B:[])}else p([])}catch(j){console.error("Error loading post details:",j),p([])}k(!1)},K=async()=>{if(!u)return;const j=O;x(!j),f({...u,likes_count:u.likes_count+(j?-1:1)}),(j?await Ze.unlikePost(r):await Ze.likePost(r)).success||(x(j),f({...u,likes_count:u.likes_count+(j?1:-1)}))},T=async()=>{if(!w.trim()||!u)return;E(!0);const j=await Ze.addComment(r,w.trim());if(j.success&&j.data){const S=j.data.comment||j.data;p([...g,S]),v(""),f({...u,comments_count:j.data.comments_count||u.comments_count+1})}else $.error("Failed to post comment");E(!1)},G=async j=>{if(!u)return;(await Ze.deleteComment(j)).success?(p(g.filter(B=>B.id!==j)),f({...u,comments_count:u.comments_count-1}),$.success("Comment deleted")):$.error("Failed to delete comment")};return N?n.jsx("div",{className:"fixed inset-0 z-50 bg-white flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#25D366]"})}):u?n.jsxs("div",{className:"fixed inset-0 z-50 bg-white flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[n.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:n.jsx(An,{className:"w-6 h-6"})}),n.jsx("h1",{className:"font-semibold text-lg",children:"Post"}),n.jsx("div",{className:"w-10"})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(st,{name:u.user.full_name,imageUrl:u.user.avatar_url,size:"md",onClick:()=>i("profile-view",{userId:u.user.id})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-sm",children:u.user.full_name}),u.location&&n.jsx("p",{className:"text-xs text-gray-500",children:u.location})]})]}),n.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:n.jsx(Om,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"w-full bg-black",children:u.type==="reel"?n.jsx("video",{src:u.media_url,className:"w-full max-h-[400px] object-contain",controls:!0,playsInline:!0}):n.jsx("img",{src:u.media_url,alt:"Post",className:"w-full max-h-[400px] object-contain"})}),n.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsx("div",{className:"flex items-center space-x-4",children:n.jsx("button",{onClick:K,className:"transition-transform active:scale-110",children:n.jsx(oo,{className:`w-7 h-7 ${O?"fill-red-500 text-red-500":"text-gray-900"}`})})})}),u.likes_count>0&&n.jsxs("p",{className:"font-semibold text-sm mb-2",children:[u.likes_count.toLocaleString()," ",u.likes_count===1?"like":"likes"]}),u.caption&&n.jsxs("p",{className:"text-sm mb-2",children:[n.jsx("span",{className:"font-semibold mr-2",children:u.user.full_name}),u.caption]})]}),n.jsx("div",{className:"px-4 py-3 space-y-4 mb-20",children:g.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx("p",{children:"No comments yet"}),n.jsx("p",{className:"text-sm mt-1",children:"Be the first to comment"})]}):g.filter(j=>j.user).map(j=>n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(st,{name:j.user?.full_name||"Unknown User",imageUrl:j.user?.avatar_url,size:"sm",onClick:()=>i("profile-view",{userId:j.user.id})}),n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-semibold mr-2",children:j.user?.full_name||"Unknown User"}),j.text]}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:gv(j.created_at)})]}),j.user?.id===o.id&&n.jsx("button",{onClick:()=>G(j.id),className:"text-xs text-red-500 ml-2",children:"Delete"})]})})]},j.id))})]}),n.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(st,{name:o.full_name||o.fullName,imageUrl:o.avatar_url||o.avatarUrl,size:"sm"}),n.jsx("input",{ref:I,type:"text",value:w,onChange:j=>v(j.target.value),onKeyDown:j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),T())},placeholder:"Add a comment...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-[#25D366] focus:border-transparent",disabled:A}),n.jsx("button",{onClick:T,disabled:!w.trim()||A,className:"p-2 text-[#25D366] disabled:text-gray-300 transition-colors",children:n.jsx(Ac,{className:"w-6 h-6"})})]})})]}):n.jsx("div",{className:"fixed inset-0 z-50 bg-white flex items-center justify-center",children:n.jsx("p",{className:"text-gray-500",children:"Post not found"})})}function gv(r){const o=Date.now(),l=new Date(r).getTime(),i=o-l,u=Math.floor(i/1e3),f=Math.floor(u/60),g=Math.floor(f/60),p=Math.floor(g/24),w=Math.floor(p/7);return w>0?`${w}w ago`:p>0?`${p}d ago`:g>0?`${g}h ago`:f>0?`${f}m ago`:"Just now"}function xv({currentUser:r,onNavigate:o}){const[l,i]=m.useState([]),[u,f]=m.useState(""),[g,p]=m.useState([]),[w,v]=m.useState(!0),[N,k]=m.useState(!1);m.useEffect(()=>{A()},[]),m.useEffect(()=>{u.trim()?E():p([])},[u]);const A=async()=>{v(!0);try{const x=await Ze.getExploreFeed();if(x.success&&x.data){const I=x.data.posts||x.data;i(Array.isArray(I)?I:[])}else i([])}catch(x){console.error("Error loading explore posts:",x),i([])}v(!1)},E=async()=>{if(k(!0),u.startsWith("+")){const x=await yx.searchByPhone(u);x.success&&x.data&&p([x.data])}k(!1)},O=x=>{o("post-detail",{postId:x})};return n.jsxs("div",{className:"flex flex-col h-screen bg-gradient-to-b from-[#f5f5f5] to-white",children:[n.jsx("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-[#25D366] to-[#128C7E] px-4 py-4 shadow-lg",children:n.jsxs("div",{className:"relative",children:[n.jsx(G0,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:u,onChange:x=>f(x.target.value),placeholder:"Search people...",className:"w-full pl-12 pr-4 py-3 bg-white rounded-full focus:outline-none focus:ring-2 focus:ring-white/50 shadow-sm"})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto pb-20",children:u.trim()?n.jsx("div",{className:"p-4",children:N?n.jsx("div",{className:"flex justify-center py-12",children:n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-[#25D366]/20 border-t-[#25D366]"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"Searching..."})]})}):g.length>0?n.jsx("div",{className:"space-y-2",children:g.map(x=>n.jsxs("button",{onClick:()=>o("profile-view",{userId:x.id}),className:"w-full flex items-center space-x-4 p-4 bg-white hover:bg-gray-50 rounded-2xl transition-all shadow-sm border border-gray-100",children:[n.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-[#25D366] to-[#128C7E] rounded-full flex items-center justify-center ring-2 ring-white shadow-md",children:x.avatar_url?n.jsx("img",{src:x.avatar_url,alt:x.full_name,className:"w-full h-full rounded-full object-cover"}):n.jsx("span",{className:"text-xl font-semibold text-white",children:x.full_name[0].toUpperCase()})}),n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{className:"font-semibold text-gray-900",children:x.full_name}),x.phone_number&&n.jsx("p",{className:"text-sm text-gray-500",children:x.phone_number})]})]},x.id))}):n.jsx("div",{className:"text-center py-12",children:n.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-sm border border-gray-100 inline-block",children:[n.jsx("p",{className:"text-gray-600",children:"No users found"}),n.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try a different search"})]})})}):n.jsx("div",{className:"grid grid-cols-3 gap-0.5 bg-gray-200",children:w?Array.from({length:9}).map((x,I)=>n.jsx("div",{className:"aspect-square bg-gradient-to-br from-gray-300 to-gray-200 animate-pulse"},I)):l.length===0?n.jsx("div",{className:"col-span-3 flex flex-col items-center justify-center h-96 bg-white",children:n.jsxs("div",{className:"bg-gradient-to-br from-[#25D366]/10 to-[#128C7E]/10 rounded-3xl p-8",children:[n.jsx("p",{className:"text-gray-600",children:"No posts to explore"}),n.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Check back later"})]})}):l.map(x=>n.jsx("button",{onClick:()=>O(x.id),className:"aspect-square bg-black relative overflow-hidden group",children:x.type==="reel"?n.jsxs(n.Fragment,{children:[n.jsx("video",{src:x.media_url,className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-center justify-center",children:n.jsx("div",{className:"bg-white/90 backdrop-blur-sm p-3 rounded-full",children:n.jsx(rc,{size:24,className:"text-[#25D366]",fill:"currentColor"})})}),n.jsx("div",{className:"absolute top-2 right-2",children:n.jsx(rc,{size:20,className:"text-white drop-shadow-lg",fill:"white"})})]}):n.jsxs(n.Fragment,{children:[n.jsx("img",{src:x.media_url,alt:"Post",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),n.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors duration-300"})]})},x.id))})})]})}function ar(r,o,{checkForDefaultPrevented:l=!0}={}){return function(u){if(r?.(u),l===!1||!u.defaultPrevented)return o?.(u)}}function Lf(r,o){if(typeof r=="function")return r(o);r!=null&&(r.current=o)}function Tc(...r){return o=>{let l=!1;const i=r.map(u=>{const f=Lf(u,o);return!l&&typeof f=="function"&&(l=!0),f});if(l)return()=>{for(let u=0;u<i.length;u++){const f=i[u];typeof f=="function"?f():Lf(r[u],null)}}}}function Pr(...r){return m.useCallback(Tc(...r),r)}function vv(r,o){const l=m.createContext(o),i=f=>{const{children:g,...p}=f,w=m.useMemo(()=>p,Object.values(p));return n.jsx(l.Provider,{value:w,children:g})};i.displayName=r+"Provider";function u(f){const g=m.useContext(l);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${r}\``)}return[i,u]}function yv(r,o=[]){let l=[];function i(f,g){const p=m.createContext(g),w=l.length;l=[...l,g];const v=k=>{const{scope:A,children:E,...O}=k,x=A?.[r]?.[w]||p,I=m.useMemo(()=>O,Object.values(O));return n.jsx(x.Provider,{value:I,children:E})};v.displayName=f+"Provider";function N(k,A){const E=A?.[r]?.[w]||p,O=m.useContext(E);if(O)return O;if(g!==void 0)return g;throw new Error(`\`${k}\` must be used within \`${f}\``)}return[v,N]}const u=()=>{const f=l.map(g=>m.createContext(g));return function(p){const w=p?.[r]||f;return m.useMemo(()=>({[`__scope${r}`]:{...p,[r]:w}}),[p,w])}};return u.scopeName=r,[i,wv(u,...o)]}function wv(...r){const o=r[0];if(r.length===1)return o;const l=()=>{const i=r.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(f){const g=i.reduce((p,{useScope:w,scopeName:v})=>{const k=w(f)[`__scope${v}`];return{...p,...k}},{});return m.useMemo(()=>({[`__scope${o.scopeName}`]:g}),[g])}};return l.scopeName=o.scopeName,l}var to=globalThis?.document?m.useLayoutEffect:()=>{},jv=tm[" useId ".trim().toString()]||(()=>{}),Nv=0;function Vi(r){const[o,l]=m.useState(jv());return to(()=>{l(i=>i??String(Nv++))},[r]),r||(o?`radix-${o}`:"")}var bv=tm[" useInsertionEffect ".trim().toString()]||to;function Sv({prop:r,defaultProp:o,onChange:l=()=>{},caller:i}){const[u,f,g]=kv({defaultProp:o,onChange:l}),p=r!==void 0,w=p?r:u;{const N=m.useRef(r!==void 0);m.useEffect(()=>{const k=N.current;k!==p&&console.warn(`${i} is changing from ${k?"controlled":"uncontrolled"} to ${p?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),N.current=p},[p,i])}const v=m.useCallback(N=>{if(p){const k=Cv(N)?N(r):N;k!==r&&g.current?.(k)}else f(N)},[p,r,f,g]);return[w,v]}function kv({defaultProp:r,onChange:o}){const[l,i]=m.useState(r),u=m.useRef(l),f=m.useRef(o);return bv(()=>{f.current=o},[o]),m.useEffect(()=>{u.current!==l&&(f.current?.(l),u.current=l)},[l,u]),[l,i,f]}function Cv(r){return typeof r=="function"}var Um=em();const _v=Zf(Um);function Ev(r){const o=Pv(r),l=m.forwardRef((i,u)=>{const{children:f,...g}=i,p=m.Children.toArray(f),w=p.find(Tv);if(w){const v=w.props.children,N=p.map(k=>k===w?m.Children.count(v)>1?m.Children.only(null):m.isValidElement(v)?v.props.children:null:k);return n.jsx(o,{...g,ref:u,children:m.isValidElement(v)?m.cloneElement(v,void 0,N):null})}return n.jsx(o,{...g,ref:u,children:f})});return l.displayName=`${r}.Slot`,l}function Pv(r){const o=m.forwardRef((l,i)=>{const{children:u,...f}=l;if(m.isValidElement(u)){const g=Mv(u),p=Rv(f,u.props);return u.type!==m.Fragment&&(p.ref=i?Tc(i,g):g),m.cloneElement(u,p)}return m.Children.count(u)>1?m.Children.only(null):null});return o.displayName=`${r}.SlotClone`,o}var Av=Symbol("radix.slottable");function Tv(r){return m.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===Av}function Rv(r,o){const l={...o};for(const i in o){const u=r[i],f=o[i];/^on[A-Z]/.test(i)?u&&f?l[i]=(...p)=>{const w=f(...p);return u(...p),w}:u&&(l[i]=u):i==="style"?l[i]={...u,...f}:i==="className"&&(l[i]=[u,f].filter(Boolean).join(" "))}return{...r,...l}}function Mv(r){let o=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,l=o&&"isReactWarning"in o&&o.isReactWarning;return l?r.ref:(o=Object.getOwnPropertyDescriptor(r,"ref")?.get,l=o&&"isReactWarning"in o&&o.isReactWarning,l?r.props.ref:r.props.ref||r.ref)}var Dv=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Rn=Dv.reduce((r,o)=>{const l=Ev(`Primitive.${o}`),i=m.forwardRef((u,f)=>{const{asChild:g,...p}=u,w=g?l:o;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(w,{...p,ref:f})});return i.displayName=`Primitive.${o}`,{...r,[o]:i}},{});function Fv(r,o){r&&Um.flushSync(()=>r.dispatchEvent(o))}function no(r){const o=m.useRef(r);return m.useEffect(()=>{o.current=r}),m.useMemo(()=>(...l)=>o.current?.(...l),[])}function Iv(r,o=globalThis?.document){const l=no(r);m.useEffect(()=>{const i=u=>{u.key==="Escape"&&l(u)};return o.addEventListener("keydown",i,{capture:!0}),()=>o.removeEventListener("keydown",i,{capture:!0})},[l,o])}var Lv="DismissableLayer",sc="dismissableLayer.update",Ov="dismissableLayer.pointerDownOutside",zv="dismissableLayer.focusOutside",Of,Bm=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Vm=m.forwardRef((r,o)=>{const{disableOutsidePointerEvents:l=!1,onEscapeKeyDown:i,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:g,onDismiss:p,...w}=r,v=m.useContext(Bm),[N,k]=m.useState(null),A=N?.ownerDocument??globalThis?.document,[,E]=m.useState({}),O=Pr(o,B=>k(B)),x=Array.from(v.layers),[I]=[...v.layersWithOutsidePointerEventsDisabled].slice(-1),W=x.indexOf(I),K=N?x.indexOf(N):-1,T=v.layersWithOutsidePointerEventsDisabled.size>0,G=K>=W,j=Bv(B=>{const oe=B.target,P=[...v.branches].some(H=>H.contains(oe));!G||P||(u?.(B),g?.(B),B.defaultPrevented||p?.())},A),S=Vv(B=>{const oe=B.target;[...v.branches].some(H=>H.contains(oe))||(f?.(B),g?.(B),B.defaultPrevented||p?.())},A);return Iv(B=>{K===v.layers.size-1&&(i?.(B),!B.defaultPrevented&&p&&(B.preventDefault(),p()))},A),m.useEffect(()=>{if(N)return l&&(v.layersWithOutsidePointerEventsDisabled.size===0&&(Of=A.body.style.pointerEvents,A.body.style.pointerEvents="none"),v.layersWithOutsidePointerEventsDisabled.add(N)),v.layers.add(N),zf(),()=>{l&&v.layersWithOutsidePointerEventsDisabled.size===1&&(A.body.style.pointerEvents=Of)}},[N,A,l,v]),m.useEffect(()=>()=>{N&&(v.layers.delete(N),v.layersWithOutsidePointerEventsDisabled.delete(N),zf())},[N,v]),m.useEffect(()=>{const B=()=>E({});return document.addEventListener(sc,B),()=>document.removeEventListener(sc,B)},[]),n.jsx(Rn.div,{...w,ref:O,style:{pointerEvents:T?G?"auto":"none":void 0,...r.style},onFocusCapture:ar(r.onFocusCapture,S.onFocusCapture),onBlurCapture:ar(r.onBlurCapture,S.onBlurCapture),onPointerDownCapture:ar(r.onPointerDownCapture,j.onPointerDownCapture)})});Vm.displayName=Lv;var $v="DismissableLayerBranch",Uv=m.forwardRef((r,o)=>{const l=m.useContext(Bm),i=m.useRef(null),u=Pr(o,i);return m.useEffect(()=>{const f=i.current;if(f)return l.branches.add(f),()=>{l.branches.delete(f)}},[l.branches]),n.jsx(Rn.div,{...r,ref:u})});Uv.displayName=$v;function Bv(r,o=globalThis?.document){const l=no(r),i=m.useRef(!1),u=m.useRef(()=>{});return m.useEffect(()=>{const f=p=>{if(p.target&&!i.current){let w=function(){Wm(Ov,l,v,{discrete:!0})};const v={originalEvent:p};p.pointerType==="touch"?(o.removeEventListener("click",u.current),u.current=w,o.addEventListener("click",u.current,{once:!0})):w()}else o.removeEventListener("click",u.current);i.current=!1},g=window.setTimeout(()=>{o.addEventListener("pointerdown",f)},0);return()=>{window.clearTimeout(g),o.removeEventListener("pointerdown",f),o.removeEventListener("click",u.current)}},[o,l]),{onPointerDownCapture:()=>i.current=!0}}function Vv(r,o=globalThis?.document){const l=no(r),i=m.useRef(!1);return m.useEffect(()=>{const u=f=>{f.target&&!i.current&&Wm(zv,l,{originalEvent:f},{discrete:!1})};return o.addEventListener("focusin",u),()=>o.removeEventListener("focusin",u)},[o,l]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function zf(){const r=new CustomEvent(sc);document.dispatchEvent(r)}function Wm(r,o,l,{discrete:i}){const u=l.originalEvent.target,f=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:l});o&&u.addEventListener(r,o,{once:!0}),i?Fv(u,f):u.dispatchEvent(f)}var Wi="focusScope.autoFocusOnMount",Hi="focusScope.autoFocusOnUnmount",$f={bubbles:!1,cancelable:!0},Wv="FocusScope",Hm=m.forwardRef((r,o)=>{const{loop:l=!1,trapped:i=!1,onMountAutoFocus:u,onUnmountAutoFocus:f,...g}=r,[p,w]=m.useState(null),v=no(u),N=no(f),k=m.useRef(null),A=Pr(o,x=>w(x)),E=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(i){let x=function(T){if(E.paused||!p)return;const G=T.target;p.contains(G)?k.current=G:rr(k.current,{select:!0})},I=function(T){if(E.paused||!p)return;const G=T.relatedTarget;G!==null&&(p.contains(G)||rr(k.current,{select:!0}))},W=function(T){if(document.activeElement===document.body)for(const j of T)j.removedNodes.length>0&&rr(p)};document.addEventListener("focusin",x),document.addEventListener("focusout",I);const K=new MutationObserver(W);return p&&K.observe(p,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",I),K.disconnect()}}},[i,p,E.paused]),m.useEffect(()=>{if(p){Bf.add(E);const x=document.activeElement;if(!p.contains(x)){const W=new CustomEvent(Wi,$f);p.addEventListener(Wi,v),p.dispatchEvent(W),W.defaultPrevented||(Hv(qv(Gm(p)),{select:!0}),document.activeElement===x&&rr(p))}return()=>{p.removeEventListener(Wi,v),setTimeout(()=>{const W=new CustomEvent(Hi,$f);p.addEventListener(Hi,N),p.dispatchEvent(W),W.defaultPrevented||rr(x??document.body,{select:!0}),p.removeEventListener(Hi,N),Bf.remove(E)},0)}}},[p,v,N,E]);const O=m.useCallback(x=>{if(!l&&!i||E.paused)return;const I=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,W=document.activeElement;if(I&&W){const K=x.currentTarget,[T,G]=Gv(K);T&&G?!x.shiftKey&&W===G?(x.preventDefault(),l&&rr(T,{select:!0})):x.shiftKey&&W===T&&(x.preventDefault(),l&&rr(G,{select:!0})):W===K&&x.preventDefault()}},[l,i,E.paused]);return n.jsx(Rn.div,{tabIndex:-1,...g,ref:A,onKeyDown:O})});Hm.displayName=Wv;function Hv(r,{select:o=!1}={}){const l=document.activeElement;for(const i of r)if(rr(i,{select:o}),document.activeElement!==l)return}function Gv(r){const o=Gm(r),l=Uf(o,r),i=Uf(o.reverse(),r);return[l,i]}function Gm(r){const o=[],l=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const u=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||u?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;l.nextNode();)o.push(l.currentNode);return o}function Uf(r,o){for(const l of r)if(!Yv(l,{upTo:o}))return l}function Yv(r,{upTo:o}){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(o!==void 0&&r===o)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function Jv(r){return r instanceof HTMLInputElement&&"select"in r}function rr(r,{select:o=!1}={}){if(r&&r.focus){const l=document.activeElement;r.focus({preventScroll:!0}),r!==l&&Jv(r)&&o&&r.select()}}var Bf=Kv();function Kv(){let r=[];return{add(o){const l=r[0];o!==l&&l?.pause(),r=Vf(r,o),r.unshift(o)},remove(o){r=Vf(r,o),r[0]?.resume()}}}function Vf(r,o){const l=[...r],i=l.indexOf(o);return i!==-1&&l.splice(i,1),l}function qv(r){return r.filter(o=>o.tagName!=="A")}var Qv="Portal",Ym=m.forwardRef((r,o)=>{const{container:l,...i}=r,[u,f]=m.useState(!1);to(()=>f(!0),[]);const g=l||u&&globalThis?.document?.body;return g?_v.createPortal(n.jsx(Rn.div,{...i,ref:o}),g):null});Ym.displayName=Qv;function Xv(r,o){return m.useReducer((l,i)=>o[l][i]??l,r)}var Ja=r=>{const{present:o,children:l}=r,i=Zv(o),u=typeof l=="function"?l({present:i.isPresent}):m.Children.only(l),f=Pr(i.ref,ey(u));return typeof l=="function"||i.isPresent?m.cloneElement(u,{ref:f}):null};Ja.displayName="Presence";function Zv(r){const[o,l]=m.useState(),i=m.useRef(null),u=m.useRef(r),f=m.useRef("none"),g=r?"mounted":"unmounted",[p,w]=Xv(g,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const v=Ca(i.current);f.current=p==="mounted"?v:"none"},[p]),to(()=>{const v=i.current,N=u.current;if(N!==r){const A=f.current,E=Ca(v);r?w("MOUNT"):E==="none"||v?.display==="none"?w("UNMOUNT"):w(N&&A!==E?"ANIMATION_OUT":"UNMOUNT"),u.current=r}},[r,w]),to(()=>{if(o){let v;const N=o.ownerDocument.defaultView??window,k=E=>{const x=Ca(i.current).includes(CSS.escape(E.animationName));if(E.target===o&&x&&(w("ANIMATION_END"),!u.current)){const I=o.style.animationFillMode;o.style.animationFillMode="forwards",v=N.setTimeout(()=>{o.style.animationFillMode==="forwards"&&(o.style.animationFillMode=I)})}},A=E=>{E.target===o&&(f.current=Ca(i.current))};return o.addEventListener("animationstart",A),o.addEventListener("animationcancel",k),o.addEventListener("animationend",k),()=>{N.clearTimeout(v),o.removeEventListener("animationstart",A),o.removeEventListener("animationcancel",k),o.removeEventListener("animationend",k)}}else w("ANIMATION_END")},[o,w]),{isPresent:["mounted","unmountSuspended"].includes(p),ref:m.useCallback(v=>{i.current=v?getComputedStyle(v):null,l(v)},[])}}function Ca(r){return r?.animationName||"none"}function ey(r){let o=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,l=o&&"isReactWarning"in o&&o.isReactWarning;return l?r.ref:(o=Object.getOwnPropertyDescriptor(r,"ref")?.get,l=o&&"isReactWarning"in o&&o.isReactWarning,l?r.props.ref:r.props.ref||r.ref)}var Gi=0;function ty(){m.useEffect(()=>{const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",r[0]??Wf()),document.body.insertAdjacentElement("beforeend",r[1]??Wf()),Gi++,()=>{Gi===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(o=>o.remove()),Gi--}},[])}function Wf(){const r=document.createElement("span");return r.setAttribute("data-radix-focus-guard",""),r.tabIndex=0,r.style.outline="none",r.style.opacity="0",r.style.position="fixed",r.style.pointerEvents="none",r}var mn=function(){return mn=Object.assign||function(o){for(var l,i=1,u=arguments.length;i<u;i++){l=arguments[i];for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(o[f]=l[f])}return o},mn.apply(this,arguments)};function Jm(r,o){var l={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&o.indexOf(i)<0&&(l[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,i=Object.getOwnPropertySymbols(r);u<i.length;u++)o.indexOf(i[u])<0&&Object.prototype.propertyIsEnumerable.call(r,i[u])&&(l[i[u]]=r[i[u]]);return l}function ny(r,o,l){if(l||arguments.length===2)for(var i=0,u=o.length,f;i<u;i++)(f||!(i in o))&&(f||(f=Array.prototype.slice.call(o,0,i)),f[i]=o[i]);return r.concat(f||Array.prototype.slice.call(o))}var La="right-scroll-bar-position",Oa="width-before-scroll-bar",ry="with-scroll-bars-hidden",sy="--removed-body-scroll-bar-size";function Yi(r,o){return typeof r=="function"?r(o):r&&(r.current=o),r}function oy(r,o){var l=m.useState(function(){return{value:r,callback:o,facade:{get current(){return l.value},set current(i){var u=l.value;u!==i&&(l.value=i,l.callback(i,u))}}}})[0];return l.callback=o,l.facade}var ay=typeof window<"u"?m.useLayoutEffect:m.useEffect,Hf=new WeakMap;function ly(r,o){var l=oy(null,function(i){return r.forEach(function(u){return Yi(u,i)})});return ay(function(){var i=Hf.get(l);if(i){var u=new Set(i),f=new Set(r),g=l.current;u.forEach(function(p){f.has(p)||Yi(p,null)}),f.forEach(function(p){u.has(p)||Yi(p,g)})}Hf.set(l,r)},[r]),l}function iy(r){return r}function cy(r,o){o===void 0&&(o=iy);var l=[],i=!1,u={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return l.length?l[l.length-1]:r},useMedium:function(f){var g=o(f,i);return l.push(g),function(){l=l.filter(function(p){return p!==g})}},assignSyncMedium:function(f){for(i=!0;l.length;){var g=l;l=[],g.forEach(f)}l={push:function(p){return f(p)},filter:function(){return l}}},assignMedium:function(f){i=!0;var g=[];if(l.length){var p=l;l=[],p.forEach(f),g=l}var w=function(){var N=g;g=[],N.forEach(f)},v=function(){return Promise.resolve().then(w)};v(),l={push:function(N){g.push(N),v()},filter:function(N){return g=g.filter(N),l}}}};return u}function uy(r){r===void 0&&(r={});var o=cy(null);return o.options=mn({async:!0,ssr:!1},r),o}var Km=function(r){var o=r.sideCar,l=Jm(r,["sideCar"]);if(!o)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=o.read();if(!i)throw new Error("Sidecar medium not found");return m.createElement(i,mn({},l))};Km.isSideCarExport=!0;function dy(r,o){return r.useMedium(o),Km}var qm=uy(),Ji=function(){},Ka=m.forwardRef(function(r,o){var l=m.useRef(null),i=m.useState({onScrollCapture:Ji,onWheelCapture:Ji,onTouchMoveCapture:Ji}),u=i[0],f=i[1],g=r.forwardProps,p=r.children,w=r.className,v=r.removeScrollBar,N=r.enabled,k=r.shards,A=r.sideCar,E=r.noRelative,O=r.noIsolation,x=r.inert,I=r.allowPinchZoom,W=r.as,K=W===void 0?"div":W,T=r.gapMode,G=Jm(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=A,S=ly([l,o]),B=mn(mn({},G),u);return m.createElement(m.Fragment,null,N&&m.createElement(j,{sideCar:qm,removeScrollBar:v,shards:k,noRelative:E,noIsolation:O,inert:x,setCallbacks:f,allowPinchZoom:!!I,lockRef:l,gapMode:T}),g?m.cloneElement(m.Children.only(p),mn(mn({},B),{ref:S})):m.createElement(K,mn({},B,{className:w,ref:S}),p))});Ka.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ka.classNames={fullWidth:Oa,zeroRight:La};var fy=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function my(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var o=fy();return o&&r.setAttribute("nonce",o),r}function hy(r,o){r.styleSheet?r.styleSheet.cssText=o:r.appendChild(document.createTextNode(o))}function py(r){var o=document.head||document.getElementsByTagName("head")[0];o.appendChild(r)}var gy=function(){var r=0,o=null;return{add:function(l){r==0&&(o=my())&&(hy(o,l),py(o)),r++},remove:function(){r--,!r&&o&&(o.parentNode&&o.parentNode.removeChild(o),o=null)}}},xy=function(){var r=gy();return function(o,l){m.useEffect(function(){return r.add(o),function(){r.remove()}},[o&&l])}},Qm=function(){var r=xy(),o=function(l){var i=l.styles,u=l.dynamic;return r(i,u),null};return o},vy={left:0,top:0,right:0,gap:0},Ki=function(r){return parseInt(r||"",10)||0},yy=function(r){var o=window.getComputedStyle(document.body),l=o[r==="padding"?"paddingLeft":"marginLeft"],i=o[r==="padding"?"paddingTop":"marginTop"],u=o[r==="padding"?"paddingRight":"marginRight"];return[Ki(l),Ki(i),Ki(u)]},wy=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return vy;var o=yy(r),l=document.documentElement.clientWidth,i=window.innerWidth;return{left:o[0],top:o[1],right:o[2],gap:Math.max(0,i-l+o[2]-o[0])}},jy=Qm(),as="data-scroll-locked",Ny=function(r,o,l,i){var u=r.left,f=r.top,g=r.right,p=r.gap;return l===void 0&&(l="margin"),`
  .`.concat(ry,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(p,"px ").concat(i,`;
  }
  body[`).concat(as,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([o&&"position: relative ".concat(i,";"),l==="margin"&&`
    padding-left: `.concat(u,`px;
    padding-top: `).concat(f,`px;
    padding-right: `).concat(g,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(p,"px ").concat(i,`;
    `),l==="padding"&&"padding-right: ".concat(p,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(La,` {
    right: `).concat(p,"px ").concat(i,`;
  }
  
  .`).concat(Oa,` {
    margin-right: `).concat(p,"px ").concat(i,`;
  }
  
  .`).concat(La," .").concat(La,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Oa," .").concat(Oa,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(as,`] {
    `).concat(sy,": ").concat(p,`px;
  }
`)},Gf=function(){var r=parseInt(document.body.getAttribute(as)||"0",10);return isFinite(r)?r:0},by=function(){m.useEffect(function(){return document.body.setAttribute(as,(Gf()+1).toString()),function(){var r=Gf()-1;r<=0?document.body.removeAttribute(as):document.body.setAttribute(as,r.toString())}},[])},Sy=function(r){var o=r.noRelative,l=r.noImportant,i=r.gapMode,u=i===void 0?"margin":i;by();var f=m.useMemo(function(){return wy(u)},[u]);return m.createElement(jy,{styles:Ny(f,!o,u,l?"":"!important")})},oc=!1;if(typeof window<"u")try{var _a=Object.defineProperty({},"passive",{get:function(){return oc=!0,!0}});window.addEventListener("test",_a,_a),window.removeEventListener("test",_a,_a)}catch{oc=!1}var ts=oc?{passive:!1}:!1,ky=function(r){return r.tagName==="TEXTAREA"},Xm=function(r,o){if(!(r instanceof Element))return!1;var l=window.getComputedStyle(r);return l[o]!=="hidden"&&!(l.overflowY===l.overflowX&&!ky(r)&&l[o]==="visible")},Cy=function(r){return Xm(r,"overflowY")},_y=function(r){return Xm(r,"overflowX")},Yf=function(r,o){var l=o.ownerDocument,i=o;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var u=Zm(r,i);if(u){var f=eh(r,i),g=f[1],p=f[2];if(g>p)return!0}i=i.parentNode}while(i&&i!==l.body);return!1},Ey=function(r){var o=r.scrollTop,l=r.scrollHeight,i=r.clientHeight;return[o,l,i]},Py=function(r){var o=r.scrollLeft,l=r.scrollWidth,i=r.clientWidth;return[o,l,i]},Zm=function(r,o){return r==="v"?Cy(o):_y(o)},eh=function(r,o){return r==="v"?Ey(o):Py(o)},Ay=function(r,o){return r==="h"&&o==="rtl"?-1:1},Ty=function(r,o,l,i,u){var f=Ay(r,window.getComputedStyle(o).direction),g=f*i,p=l.target,w=o.contains(p),v=!1,N=g>0,k=0,A=0;do{if(!p)break;var E=eh(r,p),O=E[0],x=E[1],I=E[2],W=x-I-f*O;(O||W)&&Zm(r,p)&&(k+=W,A+=O);var K=p.parentNode;p=K&&K.nodeType===Node.DOCUMENT_FRAGMENT_NODE?K.host:K}while(!w&&p!==document.body||w&&(o.contains(p)||o===p));return(N&&Math.abs(k)<1||!N&&Math.abs(A)<1)&&(v=!0),v},Ea=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},Jf=function(r){return[r.deltaX,r.deltaY]},Kf=function(r){return r&&"current"in r?r.current:r},Ry=function(r,o){return r[0]===o[0]&&r[1]===o[1]},My=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},Dy=0,ns=[];function Fy(r){var o=m.useRef([]),l=m.useRef([0,0]),i=m.useRef(),u=m.useState(Dy++)[0],f=m.useState(Qm)[0],g=m.useRef(r);m.useEffect(function(){g.current=r},[r]),m.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(u));var x=ny([r.lockRef.current],(r.shards||[]).map(Kf),!0).filter(Boolean);return x.forEach(function(I){return I.classList.add("allow-interactivity-".concat(u))}),function(){document.body.classList.remove("block-interactivity-".concat(u)),x.forEach(function(I){return I.classList.remove("allow-interactivity-".concat(u))})}}},[r.inert,r.lockRef.current,r.shards]);var p=m.useCallback(function(x,I){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!g.current.allowPinchZoom;var W=Ea(x),K=l.current,T="deltaX"in x?x.deltaX:K[0]-W[0],G="deltaY"in x?x.deltaY:K[1]-W[1],j,S=x.target,B=Math.abs(T)>Math.abs(G)?"h":"v";if("touches"in x&&B==="h"&&S.type==="range")return!1;var oe=Yf(B,S);if(!oe)return!0;if(oe?j=B:(j=B==="v"?"h":"v",oe=Yf(B,S)),!oe)return!1;if(!i.current&&"changedTouches"in x&&(T||G)&&(i.current=j),!j)return!0;var P=i.current||j;return Ty(P,I,x,P==="h"?T:G)},[]),w=m.useCallback(function(x){var I=x;if(!(!ns.length||ns[ns.length-1]!==f)){var W="deltaY"in I?Jf(I):Ea(I),K=o.current.filter(function(j){return j.name===I.type&&(j.target===I.target||I.target===j.shadowParent)&&Ry(j.delta,W)})[0];if(K&&K.should){I.cancelable&&I.preventDefault();return}if(!K){var T=(g.current.shards||[]).map(Kf).filter(Boolean).filter(function(j){return j.contains(I.target)}),G=T.length>0?p(I,T[0]):!g.current.noIsolation;G&&I.cancelable&&I.preventDefault()}}},[]),v=m.useCallback(function(x,I,W,K){var T={name:x,delta:I,target:W,should:K,shadowParent:Iy(W)};o.current.push(T),setTimeout(function(){o.current=o.current.filter(function(G){return G!==T})},1)},[]),N=m.useCallback(function(x){l.current=Ea(x),i.current=void 0},[]),k=m.useCallback(function(x){v(x.type,Jf(x),x.target,p(x,r.lockRef.current))},[]),A=m.useCallback(function(x){v(x.type,Ea(x),x.target,p(x,r.lockRef.current))},[]);m.useEffect(function(){return ns.push(f),r.setCallbacks({onScrollCapture:k,onWheelCapture:k,onTouchMoveCapture:A}),document.addEventListener("wheel",w,ts),document.addEventListener("touchmove",w,ts),document.addEventListener("touchstart",N,ts),function(){ns=ns.filter(function(x){return x!==f}),document.removeEventListener("wheel",w,ts),document.removeEventListener("touchmove",w,ts),document.removeEventListener("touchstart",N,ts)}},[]);var E=r.removeScrollBar,O=r.inert;return m.createElement(m.Fragment,null,O?m.createElement(f,{styles:My(u)}):null,E?m.createElement(Sy,{noRelative:r.noRelative,gapMode:r.gapMode}):null)}function Iy(r){for(var o=null;r!==null;)r instanceof ShadowRoot&&(o=r.host,r=r.host),r=r.parentNode;return o}const Ly=dy(qm,Fy);var th=m.forwardRef(function(r,o){return m.createElement(Ka,mn({},r,{ref:o,sideCar:Ly}))});th.classNames=Ka.classNames;var Oy=function(r){if(typeof document>"u")return null;var o=Array.isArray(r)?r[0]:r;return o.ownerDocument.body},rs=new WeakMap,Pa=new WeakMap,Aa={},qi=0,nh=function(r){return r&&(r.host||nh(r.parentNode))},zy=function(r,o){return o.map(function(l){if(r.contains(l))return l;var i=nh(l);return i&&r.contains(i)?i:(console.error("aria-hidden",l,"in not contained inside",r,". Doing nothing"),null)}).filter(function(l){return!!l})},$y=function(r,o,l,i){var u=zy(o,Array.isArray(r)?r:[r]);Aa[l]||(Aa[l]=new WeakMap);var f=Aa[l],g=[],p=new Set,w=new Set(u),v=function(k){!k||p.has(k)||(p.add(k),v(k.parentNode))};u.forEach(v);var N=function(k){!k||w.has(k)||Array.prototype.forEach.call(k.children,function(A){if(p.has(A))N(A);else try{var E=A.getAttribute(i),O=E!==null&&E!=="false",x=(rs.get(A)||0)+1,I=(f.get(A)||0)+1;rs.set(A,x),f.set(A,I),g.push(A),x===1&&O&&Pa.set(A,!0),I===1&&A.setAttribute(l,"true"),O||A.setAttribute(i,"true")}catch(W){console.error("aria-hidden: cannot operate on ",A,W)}})};return N(o),p.clear(),qi++,function(){g.forEach(function(k){var A=rs.get(k)-1,E=f.get(k)-1;rs.set(k,A),f.set(k,E),A||(Pa.has(k)||k.removeAttribute(i),Pa.delete(k)),E||k.removeAttribute(l)}),qi--,qi||(rs=new WeakMap,rs=new WeakMap,Pa=new WeakMap,Aa={})}},Uy=function(r,o,l){l===void 0&&(l="data-aria-hidden");var i=Array.from(Array.isArray(r)?r:[r]),u=Oy(r);return u?(i.push.apply(i,Array.from(u.querySelectorAll("[aria-live], script"))),$y(i,u,l,"aria-hidden")):function(){return null}};function By(r){const o=Vy(r),l=m.forwardRef((i,u)=>{const{children:f,...g}=i,p=m.Children.toArray(f),w=p.find(Hy);if(w){const v=w.props.children,N=p.map(k=>k===w?m.Children.count(v)>1?m.Children.only(null):m.isValidElement(v)?v.props.children:null:k);return n.jsx(o,{...g,ref:u,children:m.isValidElement(v)?m.cloneElement(v,void 0,N):null})}return n.jsx(o,{...g,ref:u,children:f})});return l.displayName=`${r}.Slot`,l}function Vy(r){const o=m.forwardRef((l,i)=>{const{children:u,...f}=l;if(m.isValidElement(u)){const g=Yy(u),p=Gy(f,u.props);return u.type!==m.Fragment&&(p.ref=i?Tc(i,g):g),m.cloneElement(u,p)}return m.Children.count(u)>1?m.Children.only(null):null});return o.displayName=`${r}.SlotClone`,o}var Wy=Symbol("radix.slottable");function Hy(r){return m.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===Wy}function Gy(r,o){const l={...o};for(const i in o){const u=r[i],f=o[i];/^on[A-Z]/.test(i)?u&&f?l[i]=(...p)=>{const w=f(...p);return u(...p),w}:u&&(l[i]=u):i==="style"?l[i]={...u,...f}:i==="className"&&(l[i]=[u,f].filter(Boolean).join(" "))}return{...r,...l}}function Yy(r){let o=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,l=o&&"isReactWarning"in o&&o.isReactWarning;return l?r.ref:(o=Object.getOwnPropertyDescriptor(r,"ref")?.get,l=o&&"isReactWarning"in o&&o.isReactWarning,l?r.props.ref:r.props.ref||r.ref)}var qa="Dialog",[rh]=yv(qa),[Jy,nn]=rh(qa),sh=r=>{const{__scopeDialog:o,children:l,open:i,defaultOpen:u,onOpenChange:f,modal:g=!0}=r,p=m.useRef(null),w=m.useRef(null),[v,N]=Sv({prop:i,defaultProp:u??!1,onChange:f,caller:qa});return n.jsx(Jy,{scope:o,triggerRef:p,contentRef:w,contentId:Vi(),titleId:Vi(),descriptionId:Vi(),open:v,onOpenChange:N,onOpenToggle:m.useCallback(()=>N(k=>!k),[N]),modal:g,children:l})};sh.displayName=qa;var oh="DialogTrigger",Ky=m.forwardRef((r,o)=>{const{__scopeDialog:l,...i}=r,u=nn(oh,l),f=Pr(o,u.triggerRef);return n.jsx(Rn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":u.open,"aria-controls":u.contentId,"data-state":Dc(u.open),...i,ref:f,onClick:ar(r.onClick,u.onOpenToggle)})});Ky.displayName=oh;var Rc="DialogPortal",[qy,ah]=rh(Rc,{forceMount:void 0}),lh=r=>{const{__scopeDialog:o,forceMount:l,children:i,container:u}=r,f=nn(Rc,o);return n.jsx(qy,{scope:o,forceMount:l,children:m.Children.map(i,g=>n.jsx(Ja,{present:l||f.open,children:n.jsx(Ym,{asChild:!0,container:u,children:g})}))})};lh.displayName=Rc;var Ua="DialogOverlay",ih=m.forwardRef((r,o)=>{const l=ah(Ua,r.__scopeDialog),{forceMount:i=l.forceMount,...u}=r,f=nn(Ua,r.__scopeDialog);return f.modal?n.jsx(Ja,{present:i||f.open,children:n.jsx(Xy,{...u,ref:o})}):null});ih.displayName=Ua;var Qy=By("DialogOverlay.RemoveScroll"),Xy=m.forwardRef((r,o)=>{const{__scopeDialog:l,...i}=r,u=nn(Ua,l);return n.jsx(th,{as:Qy,allowPinchZoom:!0,shards:[u.contentRef],children:n.jsx(Rn.div,{"data-state":Dc(u.open),...i,ref:o,style:{pointerEvents:"auto",...i.style}})})}),_r="DialogContent",ch=m.forwardRef((r,o)=>{const l=ah(_r,r.__scopeDialog),{forceMount:i=l.forceMount,...u}=r,f=nn(_r,r.__scopeDialog);return n.jsx(Ja,{present:i||f.open,children:f.modal?n.jsx(Zy,{...u,ref:o}):n.jsx(e1,{...u,ref:o})})});ch.displayName=_r;var Zy=m.forwardRef((r,o)=>{const l=nn(_r,r.__scopeDialog),i=m.useRef(null),u=Pr(o,l.contentRef,i);return m.useEffect(()=>{const f=i.current;if(f)return Uy(f)},[]),n.jsx(uh,{...r,ref:u,trapFocus:l.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ar(r.onCloseAutoFocus,f=>{f.preventDefault(),l.triggerRef.current?.focus()}),onPointerDownOutside:ar(r.onPointerDownOutside,f=>{const g=f.detail.originalEvent,p=g.button===0&&g.ctrlKey===!0;(g.button===2||p)&&f.preventDefault()}),onFocusOutside:ar(r.onFocusOutside,f=>f.preventDefault())})}),e1=m.forwardRef((r,o)=>{const l=nn(_r,r.__scopeDialog),i=m.useRef(!1),u=m.useRef(!1);return n.jsx(uh,{...r,ref:o,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:f=>{r.onCloseAutoFocus?.(f),f.defaultPrevented||(i.current||l.triggerRef.current?.focus(),f.preventDefault()),i.current=!1,u.current=!1},onInteractOutside:f=>{r.onInteractOutside?.(f),f.defaultPrevented||(i.current=!0,f.detail.originalEvent.type==="pointerdown"&&(u.current=!0));const g=f.target;l.triggerRef.current?.contains(g)&&f.preventDefault(),f.detail.originalEvent.type==="focusin"&&u.current&&f.preventDefault()}})}),uh=m.forwardRef((r,o)=>{const{__scopeDialog:l,trapFocus:i,onOpenAutoFocus:u,onCloseAutoFocus:f,...g}=r,p=nn(_r,l),w=m.useRef(null),v=Pr(o,w);return ty(),n.jsxs(n.Fragment,{children:[n.jsx(Hm,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:u,onUnmountAutoFocus:f,children:n.jsx(Vm,{role:"dialog",id:p.contentId,"aria-describedby":p.descriptionId,"aria-labelledby":p.titleId,"data-state":Dc(p.open),...g,ref:v,onDismiss:()=>p.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(n1,{titleId:p.titleId}),n.jsx(s1,{contentRef:w,descriptionId:p.descriptionId})]})]})}),Mc="DialogTitle",dh=m.forwardRef((r,o)=>{const{__scopeDialog:l,...i}=r,u=nn(Mc,l);return n.jsx(Rn.h2,{id:u.titleId,...i,ref:o})});dh.displayName=Mc;var fh="DialogDescription",t1=m.forwardRef((r,o)=>{const{__scopeDialog:l,...i}=r,u=nn(fh,l);return n.jsx(Rn.p,{id:u.descriptionId,...i,ref:o})});t1.displayName=fh;var mh="DialogClose",hh=m.forwardRef((r,o)=>{const{__scopeDialog:l,...i}=r,u=nn(mh,l);return n.jsx(Rn.button,{type:"button",...i,ref:o,onClick:ar(r.onClick,()=>u.onOpenChange(!1))})});hh.displayName=mh;function Dc(r){return r?"open":"closed"}var ph="DialogTitleWarning",[G1,gh]=vv(ph,{contentName:_r,titleName:Mc,docsSlug:"dialog"}),n1=({titleId:r})=>{const o=gh(ph),l=`\`${o.contentName}\` requires a \`${o.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${o.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${o.docsSlug}`;return m.useEffect(()=>{r&&(document.getElementById(r)||console.error(l))},[l,r]),null},r1="DialogDescriptionWarning",s1=({contentRef:r,descriptionId:o})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${gh(r1).contentName}}.`;return m.useEffect(()=>{const u=r.current?.getAttribute("aria-describedby");o&&u&&(document.getElementById(o)||console.warn(i))},[i,r,o]),null},o1=sh,a1=lh,xh=ih,l1=ch,i1=dh,c1=hh;function u1({...r}){return n.jsx(o1,{"data-slot":"sheet",...r})}function d1({...r}){return n.jsx(a1,{"data-slot":"sheet-portal",...r})}const vh=m.forwardRef(({className:r,...o},l)=>n.jsx(xh,{ref:l,"data-slot":"sheet-overlay",className:Pe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",r),...o}));vh.displayName=xh.displayName;function f1({className:r,children:o,side:l="right",...i}){return n.jsxs(d1,{children:[n.jsx(vh,{}),n.jsxs(l1,{"data-slot":"sheet-content","aria-describedby":void 0,className:Pe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",l==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",l==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",l==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",l==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",r),...i,children:[o,n.jsxs(c1,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[n.jsx(qg,{className:"size-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function m1({className:r,...o}){return n.jsx("div",{"data-slot":"sheet-header",className:Pe("flex flex-col gap-1.5 p-4",r),...o})}function h1({className:r,...o}){return n.jsx(i1,{"data-slot":"sheet-title",className:Pe("text-foreground font-semibold",r),...o})}function qf({userId:r,currentUser:o,onBack:l,onNavigate:i,onUserUpdate:u}){const[f,g]=m.useState(null),[p,w]=m.useState([]),[v,N]=m.useState(!0),[k,A]=m.useState("not_following"),[E,O]=m.useState("posts"),[x,I]=m.useState(!1),[W,K]=m.useState("followers"),[T,G]=m.useState([]),[j,S]=m.useState(!1),[B,oe]=m.useState({}),P=r===o.id;m.useEffect(()=>{H(),ae(),P||se()},[r]),m.useEffect(()=>{const U=setInterval(()=>{H(),P||se()},3e3);return()=>clearInterval(U)},[r,P]);const H=async()=>{console.log("[PROFILE] Repairing counts for user",r);try{await St.repairCounts(r),console.log("[PROFILE]  Counts repaired")}catch(Y){console.error("[PROFILE] Failed to repair counts:",Y)}const U=await Ze.getUserProfile(r);if(U.success&&U.data){const Y=U.data.user||U.data;console.log("[PROFILE] Loaded profile data:",{id:Y.id,username:Y.username,posts_count:Y.posts_count,followers_count:Y.followers_count,following_count:Y.following_count}),g(Y)}},se=async()=>{const U=await St.getFollowStatus(r);U.success&&U.data&&(A(U.data.status||"not_following"),f&&g({...f,follows_back:U.data.follows_back||!1}))},ae=async()=>{N(!0);try{const U=await Ze.getUserPosts(r);if(U.success&&U.data){const Y=U.data.posts||U.data;w(Array.isArray(Y)?Y:[])}else w([])}catch(U){console.error("Error loading user posts:",U),w([])}N(!1)},V=async U=>{S(!0);try{const Y=U==="followers"?await St.getFollowers(r):await St.getFollowing(r);if(Y.success&&Y.data){const _=Y.data.followers||Y.data.following||[];G(_);const z={};_.forEach(ve=>{z[ve.id]=ve.follow_status||(ve.is_following?"following":"not_following")}),oe(z)}else G([]),$.error(`Failed to load ${U}`)}catch(Y){console.error("Error loading followers/following:",Y),G([]),$.error(`Failed to load ${U}`)}finally{S(!1)}},me=async U=>{const Y=B[U]||"not_following";Y==="following"?(oe(z=>({...z,[U]:"not_following"})),(await St.unfollow(U)).success||(oe(z=>({...z,[U]:"following"})),$.error("Failed to unfollow"))):Y==="pending"?(oe(z=>({...z,[U]:"not_following"})),(await St.cancelFollowRequest(U)).success||(oe(z=>({...z,[U]:"pending"})),$.error("Failed to cancel request"))):(oe(z=>({...z,[U]:"pending"})),(await St.follow(U)).success?$.success("Follow request sent"):(oe(z=>({...z,[U]:"not_following"})),$.error("Failed to send follow request")))},fe=U=>{K(U),I(!0),V(U)},ye=async()=>{if(k==="following"){A("not_following");const U=await St.unfollow(r);U.success?(U.data?.following_profile&&f&&g({...f,followers_count:U.data.following_profile.followers_count,follows_back:!1}),U.data?.follower_profile&&u&&(u({following_count:U.data.follower_profile.following_count,followers_count:U.data.follower_profile.followers_count}),console.log(" Updated current user counts after unfollow:",U.data.follower_profile)),await H(),await se()):(A("following"),$.error("Failed to unfollow"))}else k==="pending"?(A("not_following"),(await St.cancelFollowRequest(r)).success||(A("pending"),$.error("Failed to cancel request"))):(A("pending"),(await St.follow(r)).success?($.success("Follow request sent"),await H(),await se()):(A("not_following"),$.error("Failed to send follow request")))},ke=()=>{i("new-chat",{userId:r})},te=p.filter(U=>E==="posts"?U.type==="photo":U.type==="reel");return f?n.jsxs("div",{className:"flex flex-col h-screen bg-white",children:[n.jsx("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 px-4 py-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:n.jsx(Im,{className:"w-6 h-6"})}),n.jsx("h1",{className:"font-semibold text-lg",children:f.full_name}),n.jsx("div",{className:"w-10"})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto pb-20",children:[n.jsxs("div",{className:"px-4 py-6",children:[n.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[n.jsx(st,{name:f.full_name,imageUrl:f.avatar_url,size:"xl"}),n.jsxs("div",{className:"flex-1 flex justify-around text-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-xl",children:f.posts_count||0}),n.jsx("p",{className:"text-sm text-gray-600",children:"Posts"})]}),n.jsxs("button",{onClick:()=>fe("followers"),className:"hover:opacity-70 transition-opacity",children:[n.jsx("p",{className:"font-semibold text-xl",children:f.followers_count||0}),n.jsx("p",{className:"text-sm text-gray-600",children:"Followers"})]}),n.jsxs("button",{onClick:()=>fe("following"),className:"hover:opacity-70 transition-opacity",children:[n.jsx("p",{className:"font-semibold text-xl",children:f.following_count||0}),n.jsx("p",{className:"text-sm text-gray-600",children:"Following"})]})]})]}),f.status_message&&n.jsx("div",{className:"mb-4",children:n.jsx("p",{className:"text-sm",children:f.status_message})}),!P&&f.follows_back&&k==="following"&&n.jsx("div",{className:"mb-3 px-3 py-2 bg-gradient-to-r from-[#25D366]/10 to-[#128C7E]/10 rounded-lg border border-[#25D366]/30",children:n.jsxs("p",{className:"text-sm text-center",children:[n.jsx("span",{className:"text-[#128C7E] font-medium",children:" Friends"}),n.jsx("span",{className:"text-gray-600 ml-1",children:" You follow each other"})]})}),!P&&f.follows_back&&k!=="following"&&n.jsx("div",{className:"mb-3 px-3 py-2 bg-gray-100 rounded-lg",children:n.jsx("p",{className:"text-sm text-center text-gray-600",children:"Follows you"})}),!P&&n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:ye,className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors ${k==="following"?"bg-gray-200 text-gray-900 hover:bg-gray-300":k==="pending"?"bg-gray-300 text-gray-700 hover:bg-gray-400":"bg-[#25D366] text-white hover:bg-[#20BA5A]"}`,children:k==="following"?n.jsxs(n.Fragment,{children:[n.jsx(If,{className:"w-4 h-4 inline mr-2"}),"Following"]}):k==="pending"?n.jsxs(n.Fragment,{children:[n.jsx(An,{className:"w-4 h-4 inline mr-2"}),"Requested"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ia,{className:"w-4 h-4 inline mr-2"}),"Follow"]})}),n.jsxs("button",{onClick:ke,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-900 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:[n.jsx(ao,{className:"w-4 h-4 inline mr-2"}),"Message"]})]}),P&&n.jsx("button",{onClick:()=>i("edit-profile"),className:"w-full px-4 py-2 bg-gray-200 text-gray-900 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Edit Profile"})]}),n.jsxs("div",{className:"border-t border-gray-200 flex",children:[n.jsxs("button",{onClick:()=>O("posts"),className:`flex-1 flex items-center justify-center space-x-2 py-3 border-b-2 transition-colors ${E==="posts"?"border-gray-900 text-gray-900":"border-transparent text-gray-400"}`,children:[n.jsx(L0,{className:"w-5 h-5"}),n.jsx("span",{className:"text-sm uppercase font-medium",children:"Posts"})]}),n.jsxs("button",{onClick:()=>O("reels"),className:`flex-1 flex items-center justify-center space-x-2 py-3 border-b-2 transition-colors ${E==="reels"?"border-gray-900 text-gray-900":"border-transparent text-gray-400"}`,children:[n.jsx(zm,{className:"w-5 h-5"}),n.jsx("span",{className:"text-sm uppercase font-medium",children:"Reels"})]})]}),n.jsx("div",{className:"grid grid-cols-3 gap-1",children:!P&&k!=="following"?n.jsxs("div",{className:"col-span-3 flex flex-col items-center justify-center h-64 text-gray-500 px-8",children:[n.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-[#25D366]/20 to-[#128C7E]/20 flex items-center justify-center mb-4",children:n.jsx("svg",{className:"w-10 h-10 text-[#128C7E]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),n.jsx("p",{className:"font-medium text-gray-900 mb-1",children:"This Account is Private"}),n.jsx("p",{className:"text-sm text-center text-gray-600",children:k==="pending"?"Your follow request is pending. Once accepted, you'll be able to see their posts and reels.":"Follow this account to see their posts and reels."})]}):v?Array.from({length:9}).map((U,Y)=>n.jsx("div",{className:"aspect-square bg-gray-200 animate-pulse"},Y)):te.length===0?n.jsxs("div",{className:"col-span-3 flex flex-col items-center justify-center h-64 text-gray-500",children:[n.jsxs("p",{children:["No ",E," yet"]}),P&&n.jsxs("p",{className:"text-sm mt-1",children:["Share your first ",E==="posts"?"photo":"reel"]})]}):te.map(U=>n.jsx("button",{onClick:()=>i("post-detail",{postId:U.id}),className:"aspect-square bg-black relative overflow-hidden",children:U.type==="reel"?n.jsxs(n.Fragment,{children:[n.jsx("video",{src:U.media_url,className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("svg",{className:"w-8 h-8 text-white drop-shadow-lg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M8 5v14l11-7z"})})})]}):n.jsx("img",{src:U.media_url,alt:"Post",className:"w-full h-full object-cover"})},U.id))})]}),n.jsx(u1,{open:x,onOpenChange:I,children:n.jsxs(f1,{side:"bottom",className:"h-[80vh] p-0",children:[n.jsx(m1,{className:"sticky top-0 z-10 bg-white border-b border-gray-200 px-4 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(h1,{className:"text-lg",children:W==="followers"?"Followers":"Following"}),n.jsx("button",{onClick:()=>I(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:n.jsx(An,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto pb-20",children:j?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-[#25D366]/20 border-t-[#25D366]"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"Loading..."})]})}):T.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center p-8",children:[n.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-[#25D366]/20 to-[#128C7E]/20 flex items-center justify-center mb-4",children:n.jsx(Ia,{size:40,className:"text-[#25D366]"})}),n.jsxs("h2",{className:"text-xl mb-2 text-gray-800",children:["No ",W==="followers"?"followers":"following"," yet"]}),n.jsx("p",{className:"text-gray-500 max-w-xs",children:W==="followers"?"When people follow this account, they'll appear here":"Start following people to see them here"})]}):n.jsx("div",{className:"divide-y divide-gray-100",children:T.map(U=>n.jsxs("div",{className:"px-4 py-4 flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{I(!1),i("profile",{userId:U.id})},className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx(st,{name:U.full_name,imageUrl:U.avatar_url,size:"lg"}),n.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[n.jsx("p",{className:"font-medium text-gray-900 truncate",children:U.full_name}),n.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["@",U.username]})]})]}),U.id!==o.id&&n.jsx("button",{onClick:()=>me(U.id),className:`px-6 py-2 rounded-full font-medium transition-all flex items-center gap-2 text-sm ${B[U.id]==="following"?"bg-gray-200 text-gray-700 hover:bg-gray-300":B[U.id]==="pending"?"bg-gray-300 text-gray-600 hover:bg-gray-400":"bg-gradient-to-r from-[#25D366] to-[#128C7E] text-white hover:shadow-lg"}`,children:B[U.id]==="following"?n.jsxs(n.Fragment,{children:[n.jsx(If,{size:16}),"Following"]}):B[U.id]==="pending"?n.jsxs(n.Fragment,{children:[n.jsx(An,{size:16}),"Requested"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ia,{size:16}),"Follow"]})})]},U.id))})})]})})]}):n.jsx("div",{className:"flex items-center justify-center h-screen bg-white",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#25D366]"})})}function p1({onBack:r,onOpenComments:o,onViewProfile:l,currentUserId:i}){const[u,f]=m.useState([]),[g,p]=m.useState(0),[w,v]=m.useState(!0),[N,k]=m.useState(!0),[A,E]=m.useState({}),[O,x]=m.useState(null),[I,W]=m.useState(!1),K=m.useRef(null),T=m.useRef({});m.useEffect(()=>{G()},[]),m.useEffect(()=>{const V=u[g];if(V){const me=T.current[V.id];me&&(me.play().catch(()=>{E(fe=>({...fe,[V.id]:!1}))}),E(fe=>({...fe,[V.id]:!0})))}u.forEach((me,fe)=>{if(fe!==g){const ye=T.current[me.id];ye&&(ye.pause(),E(ke=>({...ke,[me.id]:!1})))}})},[g,u]);const G=async()=>{try{v(!0);const V=await Ze.getReels();V.success&&V.data?.reels?f(V.data.reels):(console.error("Failed to load reels:",V.error||"Unknown error"),f([]),$.error(V.error||"Failed to load reels"))}catch(V){console.error("Failed to load reels:",V),f([]),$.error("Failed to load reels")}finally{v(!1)}},j=async(V,me)=>{try{me?await Ze.unlikePost(V):await Ze.likePost(V),f(fe=>fe.map(ye=>ye.id===V?{...ye,is_liked:!me,likes_count:me?ye.likes_count-1:ye.likes_count+1}:ye))}catch(fe){console.error("Failed to like post:",fe)}},S=async(V,me)=>{try{me?(await Ze.unsavePost(V),$.success("Removed from saved")):(await Ze.savePost(V),$.success("Saved to collection")),f(fe=>fe.map(ye=>ye.id===V?{...ye,is_saved:!me}:ye))}catch(fe){console.error("Failed to save post:",fe)}},B=async V=>{try{W(!0),await Ze.deletePost(V),f(me=>{const fe=me.filter(ye=>ye.id!==V);return g>=fe.length&&fe.length>0&&p(fe.length-1),fe}),x(null),$.success("Reel deleted successfully")}catch(me){console.error("Failed to delete reel:",me),$.error("Failed to delete reel")}finally{W(!1)}},oe=V=>{V.deltaY>0&&g<u.length-1?p(me=>me+1):V.deltaY<0&&g>0&&p(me=>me-1)},P=V=>{const me=T.current[V];me&&(A[V]?(me.pause(),E(fe=>({...fe,[V]:!1}))):(me.play(),E(fe=>({...fe,[V]:!0}))))},H=()=>{k(V=>!V),Object.values(T.current).forEach(V=>{V.muted=!N})};if(w)return n.jsx("div",{className:"h-screen bg-gradient-to-b from-[#128C7E] to-[#075E54] flex items-center justify-center",children:n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-white/20 border-t-white"}),n.jsx("p",{className:"text-white text-sm",children:"Loading reels..."})]})});if(u.length===0)return n.jsxs("div",{className:"h-screen bg-gradient-to-b from-[#128C7E] to-[#075E54] flex flex-col items-center justify-center text-white p-8 text-center relative",children:[n.jsx("button",{onClick:r,className:"absolute top-4 left-4 z-50 text-white p-2.5 rounded-full bg-white/20 backdrop-blur-md hover:bg-white/30 active:scale-95 transition-all shadow-lg",children:n.jsx(An,{size:20,strokeWidth:2.5})}),n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm p-8 rounded-3xl",children:[n.jsx("p",{className:"text-xl mb-4",children:"No reels yet"}),n.jsx("p",{className:"text-white/70",children:"Start creating reels to see them here"})]})]});const se=u[g],ae=i===se?.user_id;return n.jsxs("div",{ref:K,className:"h-screen bg-black overflow-hidden relative snap-y snap-mandatory",onWheel:oe,children:[n.jsx("button",{onClick:r,className:"absolute top-4 left-4 z-50 text-white p-2.5 rounded-full bg-gradient-to-br from-[#25D366]/90 to-[#128C7E]/90 backdrop-blur-md hover:scale-105 active:scale-95 transition-all shadow-lg",children:n.jsx(An,{size:20,strokeWidth:2.5})}),n.jsx("button",{onClick:H,className:"absolute top-4 right-4 z-50 text-white p-3 rounded-full bg-black/40 backdrop-blur-md hover:bg-black/60 transition-all",children:N?n.jsx(uv,{size:20}):n.jsx(iv,{size:20})}),n.jsx("div",{className:"h-full relative",children:u.map((V,me)=>n.jsxs("div",{className:`absolute inset-0 transition-transform duration-500 ${me===g?"translate-y-0":me<g?"-translate-y-full":"translate-y-full"}`,style:{display:Math.abs(me-g)>1?"none":"block"},children:[n.jsxs("div",{className:"relative w-full h-full flex items-center justify-center bg-black",children:[n.jsx("video",{ref:fe=>{fe&&(T.current[V.id]=fe)},src:V.media_url,className:"w-full h-full object-contain",loop:!0,muted:N,playsInline:!0,onClick:()=>P(V.id)}),!A[V.id]&&n.jsx("button",{onClick:()=>P(V.id),className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"p-5 rounded-full bg-gradient-to-br from-[#25D366] to-[#128C7E] shadow-2xl",children:n.jsx(rc,{size:48,className:"text-white",fill:"white"})})})]}),n.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[n.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2/5 bg-gradient-to-t from-black via-black/70 to-transparent"}),n.jsxs("div",{className:"absolute bottom-24 left-4 right-24 pointer-events-auto",children:[n.jsxs("button",{onClick:()=>l(V.user.id),className:"flex items-center gap-3 mb-4 group",children:[n.jsx("div",{className:"ring-2 ring-white/40 rounded-full p-0.5",children:n.jsx(st,{user:{id:V.user.id,full_name:V.user.full_name,avatar_url:V.user.avatar_url},size:"md"})}),n.jsx("span",{className:"text-white font-medium drop-shadow-lg",children:V.user.full_name}),!ae&&n.jsx("button",{className:"px-4 py-1.5 rounded-full bg-gradient-to-r from-[#25D366] to-[#128C7E] text-white text-sm font-medium hover:scale-105 active:scale-95 transition-transform shadow-lg",children:"Follow"})]}),V.caption&&n.jsx("p",{className:"text-white text-sm line-clamp-3 drop-shadow-lg leading-relaxed",children:V.caption})]}),n.jsxs("div",{className:"absolute bottom-24 right-4 flex flex-col items-center gap-5 pointer-events-auto",children:[n.jsxs("button",{onClick:()=>j(V.id,V.is_liked),className:"flex flex-col items-center gap-1.5 group",children:[n.jsx("div",{className:`p-3 rounded-full transition-all ${V.is_liked?"bg-gradient-to-br from-red-500 to-pink-500 scale-110":"bg-black/40 backdrop-blur-md hover:bg-black/60"}`,children:n.jsx(oo,{size:26,className:V.is_liked?"text-white fill-white":"text-white",strokeWidth:2})}),n.jsx("span",{className:"text-white text-xs font-medium drop-shadow-lg",children:V.likes_count})]}),n.jsxs("button",{onClick:()=>o(V.id),className:"flex flex-col items-center gap-1.5",children:[n.jsx("div",{className:"p-3 rounded-full bg-black/40 backdrop-blur-md hover:bg-black/60 transition-all",children:n.jsx(ao,{size:26,className:"text-white",strokeWidth:2})}),n.jsx("span",{className:"text-white text-xs font-medium drop-shadow-lg",children:V.comments_count})]}),n.jsx("button",{className:"flex flex-col items-center gap-1.5",children:n.jsx("div",{className:"p-3 rounded-full bg-black/40 backdrop-blur-md hover:bg-black/60 transition-all",children:n.jsx(Ac,{size:26,className:"text-white",strokeWidth:2})})}),n.jsx("button",{onClick:()=>S(V.id,V.is_saved),className:"flex flex-col items-center gap-1.5",children:n.jsx("div",{className:`p-3 rounded-full transition-all ${V.is_saved?"bg-gradient-to-br from-[#25D366] to-[#128C7E]":"bg-black/40 backdrop-blur-md hover:bg-black/60"}`,children:n.jsx(Lm,{size:26,className:V.is_saved?"text-white fill-white":"text-white",strokeWidth:2})})}),ae&&n.jsx("button",{onClick:()=>x(V.id),className:"flex flex-col items-center gap-1.5 mt-2",children:n.jsx("div",{className:"p-3 rounded-full bg-red-500/90 backdrop-blur-md hover:bg-red-600 transition-all",children:n.jsx($m,{size:24,className:"text-white",strokeWidth:2})})})]})]})]},V.id))}),n.jsx("div",{className:"absolute top-20 right-4 flex flex-col gap-2 z-40",children:u.map((V,me)=>n.jsx("div",{className:`w-1 rounded-full transition-all ${me===g?"bg-gradient-to-b from-[#25D366] to-[#128C7E] h-10":"bg-white/30 h-6"}`},me))}),O&&n.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-3xl p-6 max-w-sm mx-4 shadow-2xl border border-white/10",children:[n.jsx("h3",{className:"text-white text-xl font-medium mb-3",children:"Delete Reel?"}),n.jsx("p",{className:"text-white/70 text-sm mb-6",children:"This reel will be permanently deleted. This action cannot be undone."}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>x(null),disabled:I,className:"flex-1 px-4 py-3 rounded-full bg-white/10 text-white hover:bg-white/20 transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:()=>B(O),disabled:I,className:"flex-1 px-4 py-3 rounded-full bg-gradient-to-r from-red-500 to-red-600 text-white hover:from-red-600 hover:to-red-700 transition-all disabled:opacity-50 font-medium",children:I?"Deleting...":"Delete"})]})]})})]})}function g1({onBack:r,onViewProfile:o,onViewPost:l,onUserUpdate:i}){const[u,f]=m.useState([]),[g,p]=m.useState(!0),[w,v]=m.useState(null);m.useEffect(()=>{N()},[]);const N=async()=>{try{p(!0);const T=await Ze.getNotifications();T.success&&T.data?.notifications?f(T.data.notifications):f([])}catch(T){console.error("Failed to load notifications:",T),$.error("Failed to load notifications"),f([])}finally{p(!1)}},k=async T=>{try{(await Ze.markNotificationAsRead(T)).success&&f(j=>j.map(S=>S.id===T?{...S,read:!0}:S))}catch{console.log("Notification may have been deleted:",T)}},A=async()=>{try{await Ze.markAllNotificationsAsRead(),f(T=>T.map(G=>({...G,read:!0}))),$.success("All notifications marked as read")}catch(T){console.error("Failed to mark all as read:",T),$.error("Failed to mark all as read")}},E=async(T,G)=>{try{v(T);const j=await St.acceptFollowRequest(G);if(j.success){const S=j.data?.are_friends;S?$.success("Follow request accepted! You are now friends "):$.success("Follow request accepted "),j.data?.following_profile&&i&&(i({followers_count:j.data.following_profile.followers_count,following_count:j.data.following_profile.following_count}),console.log(" Updated current user counts:"),console.log(`   Following: ${j.data.following_profile.following_count}`),console.log(`   Followers: ${j.data.following_profile.followers_count}`)),j.data?.follower_profile&&j.data?.following_profile&&(console.log(" Updated counts after accepting follow request:"),console.log(`   Follower (${G}): ${j.data.follower_profile.following_count} following, ${j.data.follower_profile.followers_count} followers`),console.log(`   You: ${j.data.following_profile.following_count} following, ${j.data.following_profile.followers_count} followers`),console.log(`   Are friends: ${S}`)),f(B=>B.filter(oe=>oe.id!==T))}else j.error?.includes("already processed")||j.data?.already_processed?(f(S=>S.filter(B=>B.id!==T)),$.info("This request was already processed")):$.error("Failed to accept follow request")}catch(j){console.error("Failed to accept follow request:",j),$.error("Failed to accept follow request")}finally{v(null)}},O=async(T,G)=>{try{v(T);const j=await St.rejectFollowRequest(G);j.success?($.success("Follow request rejected"),f(S=>S.filter(B=>B.id!==T))):j.error?.includes("already processed")?(f(S=>S.filter(B=>B.id!==T)),$.info("This request was already processed")):$.error("Failed to reject follow request")}catch(j){console.error("Failed to reject follow request:",j),$.error("Failed to reject follow request")}finally{v(null)}},x=T=>{k(T.id),T.type==="like"||T.type==="comment"?T.post_id&&l(T.post_id):(T.type==="follow"||T.type==="follow_accepted")&&T.actor_id&&o(T.actor_id)},I=T=>{switch(T.type){case"like":return"liked your post";case"comment":return"commented on your post";case"follow":return"started following you";case"follow_request":return"requested to follow you";case"follow_accepted":return"accepted your follow request";default:return""}},W=T=>{switch(T){case"like":return n.jsx("div",{className:"p-2 rounded-full bg-gradient-to-br from-red-500 to-pink-500 shadow-lg",children:n.jsx(oo,{size:18,className:"text-white",fill:"currentColor"})});case"comment":return n.jsx("div",{className:"p-2 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 shadow-lg",children:n.jsx(ao,{size:18,className:"text-white"})});case"follow":case"follow_request":case"follow_accepted":return n.jsx("div",{className:"p-2 rounded-full bg-gradient-to-br from-[#25D366] to-[#128C7E] shadow-lg",children:n.jsx(Ia,{size:18,className:"text-white"})});default:return null}},K=u.filter(T=>!T.read).length;return n.jsxs("div",{className:"h-screen bg-gradient-to-b from-[#f5f5f5] to-white flex flex-col",children:[n.jsxs("div",{className:"bg-gradient-to-r from-[#25D366] to-[#128C7E] px-4 py-4 flex items-center justify-between shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:r,className:"p-2 -ml-2 hover:bg-white/20 rounded-full transition-colors",children:n.jsx(Im,{size:24,className:"text-white"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-white text-xl font-medium",children:"Activity"}),K>0&&n.jsxs("p",{className:"text-white/80 text-xs",children:[K," unread"]})]})]}),K>0&&n.jsx("button",{onClick:A,className:"text-sm text-white hover:bg-white/20 px-4 py-2 rounded-full transition-colors font-medium",children:"Mark all read"})]}),n.jsx("div",{className:"flex-1 overflow-y-auto pb-20",children:g?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-[#25D366]/20 border-t-[#25D366]"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"Loading activity..."})]})}):u.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[n.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-[#25D366]/20 to-[#128C7E]/20 flex items-center justify-center mb-4",children:n.jsx(K0,{size:40,className:"text-[#25D366]"})}),n.jsx("h2",{className:"text-xl mb-2 text-gray-800",children:"No activity yet"}),n.jsx("p",{className:"text-gray-500 max-w-xs",children:"When someone likes or comments on your posts, you'll see it here"})]}):n.jsx("div",{className:"space-y-1",children:u.map(T=>n.jsx("div",{className:`px-4 py-4 ${T.read?"bg-white":"bg-gradient-to-r from-[#25D366]/5 to-[#128C7E]/5"} hover:bg-gray-50 transition-colors`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[!T.read&&n.jsx("div",{className:"flex-shrink-0 pt-2",children:n.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 shadow-md animate-pulse"})}),n.jsxs("div",{className:"relative flex-shrink-0",children:[n.jsx("button",{onClick:()=>T.actor&&o(T.actor.id),children:n.jsx("div",{className:"ring-2 ring-white rounded-full",children:n.jsx(st,{user:T.actor||{id:"",full_name:"Unknown"},size:"lg"})})}),n.jsx("div",{className:"absolute -bottom-1 -right-1",children:W(T.type)})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("button",{onClick:()=>x(T),className:"flex-1 text-left",children:[n.jsxs("p",{className:"text-sm leading-relaxed",children:[n.jsx("span",{className:"font-semibold text-gray-900",children:T.actor?.full_name||"Someone"})," ",n.jsx("span",{className:"text-gray-600",children:I(T)})]}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:d0(new Date(T.created_at))})]}),T.post&&n.jsx("button",{onClick:()=>T.post_id&&l(T.post_id),className:"flex-shrink-0",children:n.jsx("img",{src:T.post.media_url,alt:"Post",className:"w-12 h-12 rounded-lg object-cover ring-2 ring-gray-200"})})]}),T.type==="follow_request"&&n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsxs("button",{onClick:()=>E(T.id,T.actor_id),disabled:w===T.id,className:"flex-1 py-2.5 px-4 bg-gradient-to-r from-[#25D366] to-[#128C7E] text-white rounded-full hover:shadow-lg transition-all disabled:opacity-50 flex items-center justify-center gap-2 font-medium",children:[n.jsx(M0,{size:18}),"Accept"]}),n.jsxs("button",{onClick:()=>O(T.id,T.actor_id),disabled:w===T.id,className:"flex-1 py-2.5 px-4 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-all disabled:opacity-50 flex items-center justify-center gap-2 font-medium",children:[n.jsx(An,{size:18}),"Reject"]})]})]})]})},T.id))})})]})}function x1({currentUser:r,onBack:o}){const[l,i]=m.useState(!1),[u,f]=m.useState(null),[g,p]=m.useState(null);m.useEffect(()=>{w()},[]);const w=async()=>{i(!0),p(null);try{const N=await jr.diagnostic();N.success&&N.data?(f(N.data.diagnostic),console.log(" Full Diagnostic Data:",N.data.diagnostic)):p(N.error||"Failed to run diagnostic")}catch(N){console.error("Diagnostic error:",N),p("Failed to run diagnostic")}finally{i(!1)}},v=async()=>{i(!0);try{const N=await jr.repairCounts();N.success?await w():p(N.error||"Failed to repair counts")}catch(N){console.error("Repair error:",N),p("Failed to repair counts")}finally{i(!1)}};return n.jsxs("div",{className:"h-screen bg-background flex flex-col",children:[n.jsxs("div",{className:"bg-surface border-b border-border px-4 py-3 flex items-center gap-3",children:[n.jsx("button",{onClick:o,className:"p-2 hover:bg-accent rounded-full -ml-2",children:n.jsx(ro,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{children:"Data Debug"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"See your real data"})]}),n.jsx("button",{onClick:w,disabled:l,className:"p-2 hover:bg-accent rounded-full",children:n.jsx(Ra,{className:`w-5 h-5 ${l?"animate-spin":""}`})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[g&&n.jsxs("div",{className:"m-4 p-4 bg-red-500/10 border border-red-500/20 rounded-xl flex items-start gap-3",children:[n.jsx(Kg,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-red-500",children:g})})]}),l&&!u&&n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(Ra,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary"}),n.jsx("p",{className:"text-muted-foreground",children:"Scanning database..."})]}),u&&n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"bg-surface rounded-xl p-4 border border-border",children:[n.jsx("h2",{className:"mb-4",children:"Your Profile Summary"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"User ID:"}),n.jsxs("span",{className:"text-sm font-mono",children:[u.user_id?.substring(0,8),"..."]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Username:"}),n.jsx("span",{children:u.username||"N/A"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Email:"}),n.jsx("span",{className:"text-sm",children:u.email||"N/A"})]})]})]}),n.jsxs("div",{className:"bg-surface rounded-xl p-4 border border-border",children:[n.jsx("h2",{className:"mb-4",children:"Counts Comparison"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{children:"Posts"}),u.stored_counts.posts_count===u.actual_data.posts.count?n.jsx(wa,{className:"w-5 h-5 text-green-500"}):n.jsx(sr,{className:"w-5 h-5 text-yellow-500"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"bg-background rounded p-2",children:[n.jsx("p",{className:"text-muted-foreground text-xs",children:"Stored Count"}),n.jsx("p",{className:"text-2xl",children:u.stored_counts.posts_count})]}),n.jsxs("div",{className:"bg-background rounded p-2",children:[n.jsx("p",{className:"text-muted-foreground text-xs",children:"Actual Count"}),n.jsx("p",{className:"text-2xl text-[#00A8E8]",children:u.actual_data.posts.count})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{children:"Followers"}),u.stored_counts.followers_count===u.actual_data.followers.count?n.jsx(wa,{className:"w-5 h-5 text-green-500"}):n.jsx(sr,{className:"w-5 h-5 text-yellow-500"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"bg-background rounded p-2",children:[n.jsx("p",{className:"text-muted-foreground text-xs",children:"Stored Count"}),n.jsx("p",{className:"text-2xl",children:u.stored_counts.followers_count})]}),n.jsxs("div",{className:"bg-background rounded p-2",children:[n.jsx("p",{className:"text-muted-foreground text-xs",children:"Actual Count"}),n.jsx("p",{className:"text-2xl text-[#00A8E8]",children:u.actual_data.followers.count})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{children:"Following"}),u.stored_counts.following_count===u.actual_data.following.count?n.jsx(wa,{className:"w-5 h-5 text-green-500"}):n.jsx(sr,{className:"w-5 h-5 text-yellow-500"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"bg-background rounded p-2",children:[n.jsx("p",{className:"text-muted-foreground text-xs",children:"Stored Count"}),n.jsx("p",{className:"text-2xl",children:u.stored_counts.following_count})]}),n.jsxs("div",{className:"bg-background rounded p-2",children:[n.jsx("p",{className:"text-muted-foreground text-xs",children:"Actual Count"}),n.jsx("p",{className:"text-2xl text-[#00A8E8]",children:u.actual_data.following.count})]})]})]})]})]}),u.actual_data.posts.count>0&&n.jsxs("div",{className:"bg-surface rounded-xl p-4 border border-border",children:[n.jsxs("h2",{className:"mb-4",children:["Your Posts (",u.actual_data.posts.count,")"]}),n.jsx("div",{className:"space-y-2",children:u.actual_data.posts.full_list?.map((N,k)=>n.jsxs("div",{className:"bg-background rounded p-3 text-sm",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"font-medium",children:N.type==="reel"?" Reel":" Post"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(N.created_at).toLocaleDateString()})]}),N.caption&&n.jsx("p",{className:"text-muted-foreground text-xs",children:N.caption}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1 font-mono",children:["ID: ",N.id]})]},k))})]}),u.actual_data.followers.count>0&&n.jsxs("div",{className:"bg-surface rounded-xl p-4 border border-border",children:[n.jsxs("h2",{className:"mb-4",children:["Your Followers (",u.actual_data.followers.count,")"]}),n.jsx("div",{className:"space-y-2",children:u.actual_data.followers.array?.map((N,k)=>n.jsx("div",{className:"bg-background rounded p-3 text-sm",children:n.jsx("p",{className:"font-mono text-xs",children:N})},k))})]}),u.actual_data.following.count>0&&n.jsxs("div",{className:"bg-surface rounded-xl p-4 border border-border",children:[n.jsxs("h2",{className:"mb-4",children:["Following (",u.actual_data.following.count,")"]}),n.jsx("div",{className:"space-y-2",children:u.actual_data.following.array?.map((N,k)=>n.jsx("div",{className:"bg-background rounded p-3 text-sm",children:n.jsx("p",{className:"font-mono text-xs",children:N})},k))})]}),n.jsxs("div",{className:"bg-surface rounded-xl p-4 border border-border",children:[n.jsx("h2",{className:"mb-4",children:"Recommendations"}),n.jsx("div",{className:"space-y-2",children:u.recommendations?.map((N,k)=>n.jsxs("div",{className:"flex items-start gap-2",children:[N.includes("")?n.jsx(wa,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}):n.jsx(sr,{className:"w-4 h-4 text-yellow-500 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm",children:N})]},k))})]}),u.recommendations?.some(N=>N.includes("mismatch"))&&n.jsx(Me,{onClick:v,disabled:l,className:"w-full bg-[#00A8E8] hover:bg-[#0096D1] text-white",children:l?n.jsxs(n.Fragment,{children:[n.jsx(Ra,{className:"w-4 h-4 mr-2 animate-spin"}),"Fixing..."]}):"Fix Counts Now"}),n.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-4",children:n.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-500",children:" Press F12 to open developer console and see detailed server logs"})})]})]})]})}function Qs({currentView:r,onNavigate:o,hasNotifications:l}){const i=[{id:"home",icon:ao,label:"Chats"},{id:"feed",icon:$0,label:"Feed"},{id:"create-post",icon:Q0,label:"Create"},{id:"reels",icon:zm,label:"Reels"},{id:"notifications",icon:oo,label:"Activity",showBadge:!0},{id:"settings",icon:sv,label:"Profile"}];return n.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 safe-area-inset-bottom z-50",children:n.jsx("div",{className:"flex items-center justify-around px-2 py-2",children:i.map(u=>{const f=u.icon,g=r===u.id;return n.jsxs("button",{onClick:()=>o(u.id),className:"flex flex-col items-center justify-center space-y-1 p-2 min-w-[60px] transition-colors relative",children:[n.jsx(f,{className:`w-6 h-6 ${g?"text-[#25D366]":"text-gray-600"}`,fill:g?"currentColor":"none"}),n.jsx("span",{className:`text-xs ${g?"text-[#25D366] font-medium":"text-gray-600"}`,children:u.label}),u.showBadge&&l&&n.jsx("span",{className:"absolute top-1 right-2 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]},u.id)})})})}function v1({caller:r,callType:o,onAccept:l,onReject:i}){return n.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-surface rounded-3xl p-8 max-w-md w-full shadow-2xl border border-border animate-in zoom-in-95 duration-300",children:[n.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[n.jsxs("div",{className:"relative mb-6 animate-pulse",style:{animationDuration:"2s"},children:[n.jsx(st,{src:r.avatar_url,alt:r.full_name,fallbackText:r.full_name,size:"2xl",className:"shadow-xl"}),n.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary animate-ping",style:{animationDuration:"2s"}})]}),n.jsx("h2",{className:"text-2xl mb-2",children:r.full_name}),n.jsx("div",{className:"flex items-center gap-2 text-muted-foreground",children:o==="video"?n.jsxs(n.Fragment,{children:[n.jsx(ls,{className:"w-4 h-4"}),n.jsx("span",{children:"Incoming video call..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(pn,{className:"w-4 h-4"}),n.jsx("span",{children:"Incoming call..."})]})}),n.jsx("div",{className:"flex gap-2 mt-6",children:[0,1,2].map(u=>n.jsx("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse",style:{animationDuration:"1.5s",animationDelay:`${u*200}ms`}},u))})]}),n.jsxs("div",{className:"flex items-center justify-center gap-6",children:[n.jsx(Me,{variant:"destructive",size:"icon",onClick:i,className:"h-16 w-16 rounded-full shadow-lg bg-red-500 hover:bg-red-600 hover:scale-110 active:scale-95 transition-transform","aria-label":"Reject call",children:n.jsx(ec,{className:"w-7 h-7"})}),n.jsx(Me,{size:"icon",onClick:l,className:"h-20 w-20 rounded-full shadow-xl bg-gradient-to-br from-success to-accent hover:from-success/90 hover:to-accent/90 hover:scale-110 active:scale-95 transition-transform animate-pulse",style:{animationDuration:"1s"},"aria-label":"Accept call",children:o==="video"?n.jsx(ls,{className:"w-8 h-8"}):n.jsx(pn,{className:"w-8 h-8"})})]})]})})}function y1({open:r,callType:o,onGrantPermissions:l,onCancel:i}){return n.jsx(bc,{open:r,children:n.jsxs(Sc,{children:[n.jsxs(kc,{children:[n.jsxs(_c,{className:"flex items-center gap-2",children:[o==="video"?n.jsx(ls,{className:"w-5 h-5 text-primary"}):n.jsx(kr,{className:"w-5 h-5 text-primary"}),"Permission Required"]}),n.jsxs(Ec,{className:"space-y-3",children:[n.jsxs("p",{children:["To make ",o==="video"?"video":"voice"," calls, AuroraLink needs access to your:"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(kr,{className:"w-4 h-4"}),n.jsx("span",{children:"Microphone"})]}),o==="video"&&n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(nm,{className:"w-4 h-4"}),n.jsx("span",{children:"Camera"})]})]}),n.jsx("p",{className:"text-sm",children:'Your browser will ask you to grant these permissions. Please click "Allow" when prompted.'})]})]}),n.jsxs(Cc,{children:[n.jsx(Rm,{onClick:i,children:"Cancel"}),n.jsx(Pc,{onClick:l,children:"Grant Permissions"})]})]})})}const w1=({className:r=""})=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),n.jsx("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),j1=({className:r=""})=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:[n.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),n.jsx("path",{d:"M21 3v5h-5"}),n.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),n.jsx("path",{d:"M8 16H3v5"})]}),N1=({className:r=""})=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:n.jsx("path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"})});function b1({show:r,onClearSession:o}){return r?n.jsxs("div",{className:"fixed inset-0 z-[9999] bg-background flex items-center justify-center p-4 md:p-6 animate-in fade-in duration-300",children:[n.jsx("div",{className:"absolute inset-0 bg-black/5 backdrop-blur-sm"}),n.jsxs("div",{className:"relative max-w-md w-full space-y-5 animate-in slide-in-from-bottom-4 zoom-in-95 duration-500",children:[n.jsx("div",{className:"flex justify-center animate-in zoom-in duration-700 delay-150",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 bg-destructive/20 rounded-full blur-xl animate-pulse"}),n.jsx("div",{className:"relative bg-destructive/10 p-4 rounded-full",children:n.jsx(N1,{className:"h-12 w-12 text-destructive"})})]})}),n.jsxs(im,{variant:"destructive",className:"border-2 shadow-lg animate-in fade-in duration-500 delay-300",children:[n.jsx(w1,{className:"h-5 w-5"}),n.jsx(ox,{className:"text-base",children:"Authentication Error"}),n.jsxs(cm,{className:"mt-2 text-sm leading-relaxed",children:["Your session is invalid or from a different AuroraLink instance. This happens when:",n.jsxs("ul",{className:"mt-3 space-y-1.5 text-xs list-none pl-0",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-destructive mt-0.5",children:""}),n.jsx("span",{children:"You switched between different projects"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-destructive mt-0.5",children:""}),n.jsx("span",{children:"Your session expired or became corrupted"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-destructive mt-0.5",children:""}),n.jsx("span",{children:"Browser data conflicts detected"})]})]})]})]}),n.jsxs("div",{className:"space-y-3 animate-in fade-in duration-500 delay-500",children:[n.jsxs(Me,{onClick:o,className:"w-full shadow-md hover:shadow-lg transition-all duration-200",size:"lg",variant:"default",children:[n.jsx(j1,{className:"mr-2 h-5 w-5"}),"Clear Session & Reload"]}),n.jsxs("p",{className:"text-xs text-muted-foreground text-center leading-relaxed px-2",children:["This will clear all local authentication data and reload the app.",n.jsx("br",{}),n.jsx("span",{className:"text-[11px]",children:"You'll need to log in again after this action."})]})]})]})]}):null}function yh(){console.log(" EMERGENCY SESSION CLEANER "),console.log("================================");try{console.log(`
 Current localStorage keys:`);for(let r=0;r<localStorage.length;r++){const o=localStorage.key(r);console.log(`  - ${o}`)}console.log(`
 Clearing localStorage...`),localStorage.clear(),console.log("   localStorage cleared"),console.log(`
 Clearing sessionStorage...`),sessionStorage.clear(),console.log("   sessionStorage cleared"),console.log(`
 Clearing cookies...`),document.cookie.split(";").forEach(r=>{document.cookie=r.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),console.log("   Cookies cleared"),console.log(`
 Clearing IndexedDB...`),window.indexedDB&&window.indexedDB.databases().then(r=>{r.forEach(o=>{o.name&&(window.indexedDB.deleteDatabase(o.name),console.log(`   Deleted database: ${o.name}`))})}),console.log(`
================================`),console.log(" EMERGENCY CLEAN COMPLETE"),console.log("================================"),console.log(`
 Reloading page in 2 seconds...
`),setTimeout(()=>{window.location.reload()},2e3)}catch(r){console.error(" Error during emergency clean:",r),console.log(`
  Manual steps required:`),console.log("1. Open DevTools (F12)"),console.log("2. Go to Application tab"),console.log("3. Clear all storage manually"),console.log("4. Reload the page")}}typeof window<"u"&&(window.emergencyClearSession=yh,console.log(" Emergency session cleaner loaded!"),console.log(" Run: window.emergencyClearSession() if you have auth issues"));function S1(r){return!(!r||typeof r!="string"||!r.startsWith("eyJ")||r.split(".").length!==3)}function wh(r){try{const o=r.split(".");if(o.length!==3)return null;const l=o[1],i=atob(l.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(i)}catch(o){return console.error("[decodeJWTPayload] Failed:",o),null}}function k1(r){const o=wh(r);if(!o)return!1;const l=`https://${ht}.supabase.co/auth/v1`;return o.iss!==l?(console.warn("[validateTokenProject] Token issuer mismatch!"),console.warn("[validateTokenProject] Expected:",l),console.warn("[validateTokenProject] Got:",o.iss),!1):!0}function C1(r){const o=wh(r);if(!o||!o.exp)return!0;const l=Math.floor(Date.now()/1e3);return o.exp<l}async function jh(){const r=`sb-${ht}-auth-token`,o=localStorage.getItem(r);if(!o)return{isValid:!1,reason:"No session found in localStorage",action:"keep"};let l;try{l=JSON.parse(o)}catch{return{isValid:!1,reason:"Session data is corrupted (invalid JSON)",action:"clear"}}return l.access_token?S1(l.access_token)?k1(l.access_token)?C1(l.access_token)?{isValid:!1,reason:"Token is expired",action:"refresh"}:{isValid:!0,action:"keep"}:{isValid:!1,reason:"Token is from a different Supabase project",action:"clear"}:{isValid:!1,reason:"Token is not a valid JWT format",action:"clear"}:{isValid:!1,reason:"Session missing access_token",action:"clear"}}function Pn(){console.log("[Session Recovery] Clearing all auth data from localStorage..."),yc(),Object.keys(localStorage).forEach(o=>{o!=="aurora_auth_error_count"&&(o.startsWith("sb-")||o.includes("auth")||o.includes("supabase"))&&(console.log("[Session Recovery] Removing:",o),localStorage.removeItem(o))}),console.log("[Session Recovery]  Auth session cleared")}async function Nh(){console.log("[Session Recovery] ========== STARTING SESSION RECOVERY ==========");const r=await jh();if(console.log("[Session Recovery] Validation result:",r),r.action==="clear")return console.log("[Session Recovery] Session is invalid and cannot be recovered"),console.log("[Session Recovery] Reason:",r.reason),Pn(),!1;if(r.action==="keep"&&r.isValid)return console.log("[Session Recovery] Session appears valid"),!0;if(r.action==="refresh"){console.log("[Session Recovery] Attempting to refresh expired session...");try{const o=lt(),{data:{session:l},error:i}=await o.auth.refreshSession();return i?(console.error("[Session Recovery] Refresh failed:",i.message),(i.message.includes("Invalid Refresh Token")||i.message.includes("Auth session missing")||i.message.includes("invalid_grant")||i.message.includes("refresh_token_not_found"))&&(console.log("[Session Recovery] Terminal error detected - clearing session"),Pn()),!1):l?(console.log("[Session Recovery]  Session refreshed successfully!"),Da(),!0):(console.log("[Session Recovery] Refresh succeeded but returned no session"),Pn(),!1)}catch(o){return console.error("[Session Recovery] Unexpected error during refresh:",o),Pn(),!1}}return!1}async function Qa(){console.log("[Session Diagnosis] Starting diagnosis...");const r=await jh();return r.isValid?(console.log("[Session Diagnosis]  No issues found"),{fixed:!1,hadError:!1}):r.reason==="No session found in localStorage"?(console.log("[Session Diagnosis]   No session found (user is logged out) - this is normal"),{fixed:!1,hadError:!1}):(console.log("[Session Diagnosis]  Issue detected:",r.reason),{fixed:await Nh(),hadError:!0,errorType:r.reason,action:r.action})}function _1(){console.log("[EMERGENCY] Performing emergency session clear..."),localStorage.clear(),document.cookie.split(";").forEach(r=>{document.cookie=r.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),console.log("[EMERGENCY]  All local data cleared"),console.log("[EMERGENCY] Please refresh the page")}async function E1(){console.log("[Session Recovery] Initializing...");const r=await Qa();return r.hadError&&!r.fixed?(console.log("[Session Recovery] Session could not be recovered"),console.log("[Session Recovery] User must log in again")):r.fixed?console.log("[Session Recovery]  Session recovered successfully"):console.log("[Session Recovery]  Session is healthy"),r}async function P1(r){try{console.log("[SessionValidator] Testing token with server...");const o=await fetch(`https://${ht}.supabase.co/auth/v1/user`,{method:"GET",headers:{apikey:is,Authorization:`Bearer ${r}`}});if(!o.ok){const i=await o.json().catch(()=>({}));return console.error("[SessionValidator]  Server rejected token:",o.status,i),!1}const l=await o.json();return!l||!l.id?(console.error("[SessionValidator]  No user data returned"),!1):(console.log("[SessionValidator]  Token is valid, user:",l.id),!0)}catch(o){return console.error("[SessionValidator]  Validation error:",o),!1}}async function A1(){console.log("[SessionValidator] Starting session validation...");const r=`sb-${ht}-auth-token`,o=localStorage.getItem(r);if(!o)return console.log("[SessionValidator] No session found"),!1;try{const l=JSON.parse(o);if(!l.access_token)return console.error("[SessionValidator] Session has no access_token"),localStorage.removeItem(r),!1;if(!await P1(l.access_token)){console.error("[SessionValidator]  Session is invalid, clearing..."),localStorage.removeItem(r);const u=[];for(let f=0;f<localStorage.length;f++){const g=localStorage.key(f);g&&(g.startsWith("sb-")||g.includes("auth"))&&u.push(g)}return u.forEach(f=>localStorage.removeItem(f)),!1}return console.log("[SessionValidator]  Session is valid"),!0}catch(l){return console.error("[SessionValidator] Error parsing session:",l),localStorage.removeItem(r),!1}}let Qf=!1;function ac(r){if(!r)return!1;const o=typeof r=="string"?r:r.message||String(r);return o.includes("Auth session missing")||o.includes("Invalid Refresh Token")||o.includes("Unauthorized")||o.includes("invalid_grant")||o.includes("refresh_token_not_found")||o.includes("JWT expired")||o.includes("Invalid token")||o.includes("Token from wrong project")}async function lc(r,o=!0){if(Qf){console.log("[AuthErrorHandler] Already handling auth error, skipping");return}Qf=!0;try{console.error("[AuthErrorHandler] ========== HANDLING AUTH ERROR =========="),console.error("[AuthErrorHandler] Error:",r),yc();try{await lt().auth.signOut()}catch(l){console.log("[AuthErrorHandler] Sign out error (ignoring):",l)}localStorage.clear(),sessionStorage.clear(),console.log("[AuthErrorHandler]  All session data cleared"),o&&$.error("Session Expired",{description:"Your session has expired. Please log in again.",duration:3e3}),console.log("[AuthErrorHandler] Reloading page in 1 second..."),setTimeout(()=>{window.location.href=window.location.origin},1e3)}catch(l){console.error("[AuthErrorHandler] Error during cleanup:",l),localStorage.clear(),sessionStorage.clear(),setTimeout(()=>{window.location.href=window.location.origin},1e3)}finally{}}let Xf=!1;function T1(){if(Xf){console.log("[AuthErrorHandler] Fetch interceptor already installed");return}Xf=!0;const r=window.fetch;window.fetch=async(...o)=>{try{const l=await r(...o);if(l.status===401){const i=o[0]instanceof Request?o[0].url:String(o[0]);if(!i.includes("/auth/signup")&&!i.includes("/health")){console.error("[AuthErrorHandler] 401 Unauthorized detected");const u=l.clone();try{const f=await u.text();ac(f)&&lc(f)}catch{}}}return l}catch(l){throw l}},console.log("[AuthErrorHandler]  Fetch interceptor installed")}async function R1(){try{const r=lt(),{data:{session:o},error:l}=await r.auth.getSession();if(l&&(console.error("[AuthErrorHandler] Session check error:",l),ac(l)))return await lc(l,!1),!1;if(!o)return!1;const{error:i}=await r.auth.refreshSession();return i?(console.error("[AuthErrorHandler] Session refresh failed:",i),ac(i)&&await lc(i,!1),!1):!0}catch(r){return console.error("[AuthErrorHandler] Error checking session:",r),!1}}async function M1(){console.log(`
`+"=".repeat(60)),console.log(" ONE-CLICK AUTH ERROR FIX"),console.log("=".repeat(60)+`
`),console.log("Step 1/4: Diagnosing session issues...");const r=await Qa();if(!r.hadError){console.log(" No auth errors found! Your session is healthy.");return}if(console.log(" Auth error detected:",r.errorType),r.fixed){console.log(" Session was recovered automatically!"),console.log("You can continue using the app.");return}if(console.log(`
Step 2/4: Attempting session recovery...`),await Nh()){console.log(" Session recovered successfully!"),console.log("Please refresh the page to continue.");return}console.log(" Session recovery failed."),console.log(`
Step 3/4: Clearing invalid auth data...`);try{await lt().auth.signOut(),console.log(" Signed out successfully")}catch{console.log("  Sign out failed (this is expected for invalid sessions)")}Pn(),console.log(" Auth data cleared"),console.log(`
Step 4/4: Preparing for fresh login...`),console.log(" All auth errors have been cleared!"),console.log(`
`+"=".repeat(60)),console.log(" FIX COMPLETE!"),console.log("=".repeat(60)),console.log(`
Next steps:`),console.log("1. Refresh this page (Cmd+R or Ctrl+R)"),console.log("2. You will see the login screen"),console.log("3. Log in with your credentials"),console.log("4. Everything should work normally now!"),console.log(`
`)}async function D1(){const r=await Qa();return r.hadError&&!r.fixed}async function F1(){console.log(`Generating auth status report...
`);const r=await Qa();let o="=".repeat(60)+`
`;return o+=` AUTH STATUS REPORT
`,o+="=".repeat(60)+`

`,r.hadError?r.fixed?(o+=` STATUS: Recovered
`,o+=`An issue was detected but has been fixed automatically.
`,o+=`Your session is now working properly.
`):(o+=` STATUS: Error
`,o+=`Error Type: ${r.errorType}
`,o+=`Action Needed: ${r.action}

`,o+=`Your session has an error that requires manual intervention.
`,o+=`Run fixAuthErrorsNow() to resolve this issue.
`):(o+=` STATUS: Healthy
`,o+=`No authentication errors detected.
`,o+=`Your session is valid and working properly.
`),o+=`
`+"=".repeat(60),o}function I1(){console.log(` QUICK FIX: Clearing auth data and reloading...
`),Pn(),console.log(" Auth data cleared!"),console.log(` Reloading page in 2 seconds...
`),setTimeout(()=>{window.location.reload()},2e3)}function L1(){console.log(`  NUCLEAR FIX: Clearing ALL local data...
`),console.log("  WARNING: This will clear EVERYTHING in localStorage!"),console.log(`This should only be used as a last resort.
`),_1(),console.log(` Complete!
`),console.log("Please refresh the page (Cmd+R or Ctrl+R)")}typeof window<"u"&&(window.fixAuthErrorsNow=M1,window.hasAuthErrors=D1,window.getAuthStatusReport=F1,window.quickFix=I1,window.nuclearFix=L1,console.log(`
`+"=".repeat(60)),console.log(" AUTH ERROR FIX UTILITIES LOADED"),console.log("=".repeat(60)),console.log(`
Available commands in console:`),console.log("   fixAuthErrorsNow()     - Complete fix (recommended)"),console.log("   quickFix()             - Fast clear & reload"),console.log("   getAuthStatusReport()  - Check current status"),console.log("   hasAuthErrors()        - Check if errors exist"),console.log("   nuclearFix()           - Clear EVERYTHING (last resort)"),console.log(`
`+"=".repeat(60)+`
`));function O1(){const r=[],o=[{name:"localStorage",obj:typeof window<"u"&&typeof localStorage<"u"},{name:"sessionStorage",obj:typeof sessionStorage<"u"},{name:"fetch",obj:typeof fetch<"u"},{name:"indexedDB",obj:typeof indexedDB<"u"},{name:"WebRTC",obj:typeof RTCPeerConnection<"u"}];for(const{name:l,obj:i}of o)r.push({category:"Environment",status:i?"pass":"fail",message:`${l} ${i?"available":"NOT available"}`});return r}function z1(){const r=[];try{const o="aurora_test_"+Date.now();localStorage.setItem(o,"test");const l=localStorage.getItem(o);localStorage.removeItem(o),l==="test"?r.push({category:"Storage",status:"pass",message:"localStorage read/write working"}):r.push({category:"Storage",status:"fail",message:"localStorage read/write FAILED"})}catch(o){r.push({category:"Storage",status:"fail",message:"localStorage access FAILED",details:o instanceof Error?o.message:String(o)})}try{let o=0;for(let f=0;f<localStorage.length;f++){const g=localStorage.key(f);if(g){const p=localStorage.getItem(g);o+=g.length+(p?.length||0)}}const l=(o/1024).toFixed(2),u=(o/1024/5120*100).toFixed(1);r.push({category:"Storage",status:parseFloat(u)>80?"warning":"pass",message:`Storage usage: ${l} KB (${u}%)`,details:{totalSize:o,sizeKB:l,usagePercent:u}})}catch{r.push({category:"Storage",status:"warning",message:"Could not calculate storage usage"})}return r}function $1(){const r=[],o=`sb-${ht}-auth-token`,l=localStorage.getItem(o);if(!l)return r.push({category:"Session",status:"pass",message:"No session stored (user not logged in)"}),r;try{const i=JSON.parse(l);if(!i.access_token||!i.refresh_token)return r.push({category:"Session",status:"fail",message:"Session missing required fields",details:{hasAccessToken:!!i.access_token,hasRefreshToken:!!i.refresh_token}}),r;if(!i.access_token.startsWith("eyJ"))return r.push({category:"Session",status:"fail",message:"Invalid token format (not a JWT)"}),r;try{const u=i.access_token.split(".");if(u.length!==3)return r.push({category:"Session",status:"fail",message:"Malformed JWT token"}),r;const f=JSON.parse(atob(u[1].replace(/-/g,"+").replace(/_/g,"/"))),g=`https://${ht}.supabase.co/auth/v1`;if(f.iss!==g)return r.push({category:"Session",status:"fail",message:"Token from wrong Supabase project",details:{expected:g,actual:f.iss}}),r;if(f.exp){const p=Math.floor(Date.now()/1e3),w=f.exp-p,v=(w/3600).toFixed(1);w<0?r.push({category:"Session",status:"fail",message:"Token expired",details:{expiredHoursAgo:Math.abs(parseFloat(v))}}):w<3600?r.push({category:"Session",status:"warning",message:`Token expires soon (${Math.floor(w/60)} minutes)`}):r.push({category:"Session",status:"pass",message:`Token valid (${v} hours remaining)`})}else r.push({category:"Session",status:"warning",message:"Token has no expiration"});f.sub?r.push({category:"Session",status:"pass",message:"User ID present in token",details:{userId:f.sub}}):r.push({category:"Session",status:"fail",message:"No user ID in token"})}catch(u){r.push({category:"Session",status:"fail",message:"Failed to decode token",details:u instanceof Error?u.message:String(u)})}}catch(i){r.push({category:"Session",status:"fail",message:"Failed to parse session data",details:i instanceof Error?i.message:String(i)})}return r}async function U1(){const r=[];try{const o=new AbortController,l=setTimeout(()=>o.abort(),5e3),i=await fetch(`https://${ht}.supabase.co/functions/v1/make-server-29f6739b/health`,{signal:o.signal,headers:{Authorization:`Bearer ${is}`}});if(clearTimeout(l),i.ok){const u=await i.json();r.push({category:"Network",status:"pass",message:"Server health check passed",details:u})}else r.push({category:"Network",status:"fail",message:`Server returned ${i.status}`})}catch(o){o instanceof Error&&o.name==="AbortError"?r.push({category:"Network",status:"fail",message:"Server health check timeout (5s)"}):r.push({category:"Network",status:"fail",message:"Server unreachable",details:o instanceof Error?o.message:String(o)})}try{const o=await fetch(`https://${ht}.supabase.co/rest/v1/`,{headers:{apikey:is}});r.push({category:"Network",status:o.ok?"pass":"warning",message:`Supabase REST API ${o.ok?"accessible":"returned "+o.status}`})}catch(o){r.push({category:"Network",status:"fail",message:"Supabase REST API unreachable",details:o instanceof Error?o.message:String(o)})}return r}function B1(){const r=[],o=localStorage.getItem("aurora_nuclear_clear");o?r.push({category:"App State",status:"pass",message:`Nuclear clear performed: ${o}`}):r.push({category:"App State",status:"warning",message:"Nuclear clear not yet performed"});const l=localStorage.getItem("aurora_auth_error_count");if(l){const u=parseInt(l,10);r.push({category:"App State",status:u>5?"warning":"pass",message:`Auth error count: ${u}`})}else r.push({category:"App State",status:"pass",message:"No auth errors recorded"});let i=0;for(let u=0;u<localStorage.length;u++){const f=localStorage.key(u);f&&f.startsWith("cache:")&&i++}return r.push({category:"App State",status:"pass",message:`Cache entries: ${i}`}),r}async function V1(){console.log(""),console.log(""),console.log("  AURORALINK STATUS CHECK"),console.log(""),console.log("");const r=[];r.push(...O1()),r.push(...z1()),r.push(...$1()),r.push(...B1()),console.log(" Running network checks (this may take a moment)...");const o=await U1();r.push(...o);const l={};for(const p of r)l[p.category]||(l[p.category]=[]),l[p.category].push(p);for(const[p,w]of Object.entries(l)){console.log(""),console.log(` ${p} `);for(const v of w){const N=v.status==="pass"?"":v.status==="warning"?"":"";console.log(`${N} ${v.message}`),v.details&&console.log("   Details:",v.details)}}const i=r.filter(p=>p.status==="pass").length,u=r.filter(p=>p.status==="warning").length,f=r.filter(p=>p.status==="fail").length,g=r.length;console.log(""),console.log(" Summary "),console.log(` Passed: ${i}/${g}`),u>0&&console.log(`  Warnings: ${u}/${g}`),f>0&&console.log(` Failed: ${f}/${g}`),console.log(""),f>0?(console.log(" Overall Status: ISSUES DETECTED"),console.log(""),console.log("Recommended Actions:"),console.log("1. Fix failed checks above"),console.log("2. Try: window.emergencyClearSession()"),console.log("3. Reload the page")):u>0?console.log(" Overall Status: WORKING WITH WARNINGS"):console.log(" Overall Status: ALL SYSTEMS OPERATIONAL"),console.log(""),console.log(""),console.log("")}typeof window<"u"&&(window.checkAuroraStatus=V1,console.log(" Type window.checkAuroraStatus() to run diagnostics"));function W1(r){try{const o=r.split(".");if(o.length!==3)return null;const l=o[1],i=atob(l.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(i)}catch(o){return console.error("[decodeJWT] Failed to decode:",o),null}}function H1(){console.log("[AuroraLink] v9.0.0 - Instagram Features Build"),console.log("[AuroraLink] CSS Animations Only - No Motion Libraries"),console.log("[AuroraLink]  All auth session errors fixed");const[r,o]=m.useState(!0),[l,i]=m.useState("onboarding"),[u,f]=m.useState(null),[g,p]=m.useState(null),[w,v]=m.useState(!0),[N,k]=m.useState(!1),A=()=>{try{const R=localStorage.getItem("aurora_auth_error_count");return R?parseInt(R,10):0}catch{return 0}},[E,O]=m.useState(A()),x=m.useRef(E);m.useEffect(()=>(T1(),console.log("[App]  Auth error handler installed"),window.clearAuroraSession=async()=>{console.log("[Manual Clear] Clearing session..."),await lt().auth.signOut(),localStorage.clear(),console.log("[Manual Clear]  Session cleared! Reloading page..."),window.location.reload()},window.emergencyClearSession=yh,window.checkTokenCache=()=>{const ne=hx();return console.log(" Token Cache Info:",ne),ne},window.checkSession=async()=>{const ne=await R1();return console.log(" Session valid:",ne),ne},console.log(" AuroraLink Session Clearing Commands:"),console.log("  - window.clearAuroraSession() - Basic session clear"),console.log("  - window.emergencyClearSession() - Emergency full clear"),console.log("  - window.checkTokenCache() - Check token cache status"),console.log("  - window.checkSession() - Validate current session"),(()=>{console.log("[Session Cleaner]  Scanning for wrong-project sessions...");const ne=ht;console.log("[Session Cleaner] Current project:",ne);for(let Ie=0;Ie<localStorage.length;Ie++){const Le=localStorage.key(Ie);if(Le&&Le.startsWith("sb-")&&Le.includes("-auth-token")){const Ce=Le.match(/^sb-([^-]+)-auth-token$/);if(Ce){const _e=Ce[1];_e!==ne&&(console.warn("[Session Cleaner]  Found session from WRONG project:",_e),console.warn("[Session Cleaner] Removing key:",Le),localStorage.removeItem(Le))}}}console.log("[Session Cleaner]  Scan complete")})(),()=>{delete window.clearAuroraSession}),[]);const[I,W]=m.useState([]),[K,T]=m.useState(0),[G,j]=m.useState(0),[S,B]=m.useState(null),[oe,P]=m.useState(""),[H,se]=m.useState(null),[ae,V]=m.useState(null),[me,fe]=m.useState(null),[ye,ke]=m.useState(!1),[te,U]=m.useState(!1),[Y,_]=m.useState(!1),[z,ve]=m.useState(null),[J,X]=m.useState("followers"),[ce,Fe]=m.useState(null),[De,Be]=m.useState(null),[Ye,Mt]=m.useState(null),[Mn,Yt]=m.useState(null),[rn,Dn]=m.useState(null),[gn,Fn]=m.useState(!1),[xn,vn]=m.useState(null),[sn,D]=m.useState(null),re=m.useRef(null);m.useRef(null);const de=m.useRef(null);m.useEffect(()=>{let R;const ne=async()=>{try{if(sessionStorage.getItem("invalid_token_cleared")){console.log("[Startup]  Invalid tokens were detected and cleared"),sessionStorage.removeItem("invalid_token_cleared"),$.error("Invalid Session Detected",{description:"Your previous session was invalid. Please log in again.",duration:6e3}),v(!1),i("auth");return}console.log("[Startup]  Validating existing session..."),console.log("[Startup] Current project ID:",ht);const Ce=`sb-${ht}-auth-token`,_e=localStorage.getItem(Ce);if(_e)try{const be=JSON.parse(_e);if(be?.access_token){const ot=W1(be.access_token),$t=`https://${ht}.supabase.co/auth/v1`;if(!ot||ot.iss!==$t){console.error("[Startup]  INVALID TOKEN DETECTED - CLEARING IMMEDIATELY"),console.error("[Startup] Token issuer:",ot?.iss),console.error("[Startup] Expected:",$t),localStorage.clear(),sessionStorage.clear(),$.error("Session Cleared",{description:"Invalid session detected. Please log in again.",duration:4e3}),v(!1),i("auth");return}if(ot.exp){const Ln=Math.floor(Date.now()/1e3);if(ot.exp<Ln){console.error("[Startup]  EXPIRED TOKEN DETECTED - CLEARING"),localStorage.clear(),sessionStorage.clear(),$.error("Session Expired",{description:"Your session has expired. Please log in again.",duration:4e3}),v(!1),i("auth");return}}}}catch{console.error("[Startup] Error parsing session - clearing"),localStorage.clear(),sessionStorage.clear(),v(!1),i("auth");return}if(sessionStorage.getItem("nuclear_clear_performed")){console.log("[Startup]  Nuclear clear completed - starting fresh"),console.log("[Startup] Skipping validation (no session exists yet)"),mx(),console.log("[Startup]  Forced token cache clear"),console.log("[Startup]   Keeping nuclear_clear_in_progress flag active until login"),console.log("[Startup] Flag will be cleared automatically after successful login"),setTimeout(()=>{$.success("Welcome to AuroraLink!",{description:"Please log in to continue",duration:3e3})},500),v(!1);return}if(console.log("[Startup] Step 1: Testing session with server..."),!await A1()){console.log("[Startup]  Session validation failed or no session exists"),v(!1);return}console.log("[Startup]  Session validated with server");const Ve=await E1();if(Ve.hadError&&!Ve.fixed){console.log("[Startup] Session has unrecoverable errors - showing error boundary"),Pn();const be=x.current+1;if(x.current=be,O(be),localStorage.setItem("aurora_auth_error_count",be.toString()),console.log("[Startup] Auth error count:",be),be>2){console.error("[Startup] Too many auth errors detected - skipping error screen, going directly to auth"),v(!1),i("auth");return}k(!0),v(!1);return}Ve.fixed?console.log("[Startup]  Session was recovered automatically"):console.log("[Startup]  No session errors detected");const qe=lt(),{data:{session:$e},error:Ge}=await qe.auth.getSession();if($e&&!Ge){console.log("[Startup] Supabase session found, attempting refresh...");const{error:be}=await qe.auth.refreshSession();be&&(be.message.includes("Invalid Refresh Token")||be.message.includes("Auth session missing")||be.message.includes("invalid_grant")||be.message.includes("refresh_token_not_found")||be.name==="AuthSessionMissingError")?(console.error("[Startup]  Session refresh failed - token is invalid"),console.error("[Startup] Error:",be.message),console.error("[Startup] Error name:",be.name),console.error("[Startup] Clearing invalid session..."),await qe.auth.signOut(),localStorage.clear(),$.error("Session Invalid",{description:"Previous session was invalid. Please log in again.",duration:5e3})):be||console.log("[Startup]  Session refresh successful")}}catch(Le){console.error("[Startup] Error validating session:",Le),localStorage.clear()}};return sessionStorage.getItem("show_migration_message")&&(sessionStorage.removeItem("show_migration_message"),setTimeout(()=>{$.info("App Updated",{description:"New authentication system. Please log in again.",duration:6e3})},1e3)),ne().then(()=>{R=setTimeout(()=>{o(!1),Ne()},2500)}),()=>{R&&clearTimeout(R)}},[]),m.useEffect(()=>{if(u&&l==="home"){let R=0;const ne=3,Ie=async()=>{try{const Ce=lt(),{data:{session:_e},error:Dt}=await Ce.auth.getSession();if(Dt||!_e){R++,R>=ne?(console.error("[Session Health] Session lost after multiple checks, logging out..."),$.error("Session expired",{description:"Please log in again to continue."}),await Ae()):console.warn(`[Session Health] Session check failed (${R}/${ne})`);return}if(!_e.access_token||!_e.access_token.startsWith("eyJ")){console.error("[Session Health] Invalid token format, logging out..."),await Ae();return}if(_e.expires_at){const Ve=_e.expires_at*1e3,qe=Date.now(),$e=Ve-qe;if($e<0){console.warn("[Session Health] Token expired, refreshing...");const{data:{session:Ge},error:be}=await Ce.auth.refreshSession();be||!Ge?(R++,R>=ne?(console.error("[Session Health] Refresh failed multiple times, logging out..."),$.error("Session expired",{description:"Please log in again to continue."}),await Ae()):console.warn(`[Session Health] Refresh failed (${R}/${ne})`)):(console.log("[Session Health]  Session refreshed successfully"),R=0)}else if($e<300*1e3){console.log("[Session Health] Token expiring soon, refreshing proactively...");const{data:{session:Ge},error:be}=await Ce.auth.refreshSession();!be&&Ge?(console.log("[Session Health]  Session proactively refreshed"),R=0):console.warn("[Session Health] Proactive refresh failed, will retry later")}}if(Date.now()%2===0){const{error:Ve}=await Ce.auth.getUser();if(Ve){if(Ve.message==="Failed to fetch"||Ve.message.includes("network")||Ve.message.includes("fetch")||Ve.name==="TypeError"){console.warn("[Session Health] Network error during validation:",Ve.message),R++,R>=ne?(console.error("[Session Health] Too many network failures, logging out"),$.error("Connection Error",{description:"Unable to verify session. Please check your connection and log in again."}),await Ae()):console.log(`[Session Health] Network error (${R}/${ne}) - will retry`);return}if(console.error("[Session Health] Token validation failed:",Ve.message),console.error("[Session Health] Error name:",Ve.name),Ve.name==="AuthSessionMissingError"||Ve.message.includes("Auth session missing")){console.error("[Session Health] CRITICAL: Auth session missing error detected"),console.error("[Session Health] This means the token is from a different project or corrupted"),Pn(),k(!0);return}else{console.warn("[Session Health] Attempting one-time session refresh...");const{error:$e}=await Ce.auth.refreshSession();if($e){if($e.message==="Failed to fetch"||$e.message.includes("network")||$e.message.includes("fetch")){console.warn("[Session Health] Network error during refresh, will retry later"),R++;return}console.error("[Session Health] Refresh failed, logging out"),$.error("Session Error",{description:"Could not refresh your session. Please log in again."}),await new Promise(be=>setTimeout(be,1e3)),await Ae()}else console.log("[Session Health]  Session refreshed successfully"),R=0}}else R=0}else R=0}catch(Ce){Ce instanceof TypeError||Ce instanceof Error&&(Ce.message.includes("fetch")||Ce.message.includes("network"))?(console.warn("[Session Health] Network error:",Ce),R++,R>=ne&&(console.error("[Session Health] Too many network failures, logging out"),$.error("Connection Error",{description:"Unable to verify session. Please check your connection and log in again."}),await Ae())):console.error("[Session Health] Error checking session:",Ce)}};Ie();const Le=setInterval(Ie,6e4);return()=>{clearInterval(Le)}}},[u,l]),m.useEffect(()=>{if(u&&l==="home"){(async()=>{try{const Ie=lt(),{data:{session:Le}}=await Ie.auth.getSession();if(Le?.access_token){const Ce=await ba.updateStatus(!0);Ce.success||console.error("[Presence] Failed to update status:",Ce.error)}else console.warn("[Presence] No valid session, skipping presence update")}catch(Ie){console.error("[Presence] Error updating presence:",Ie)}})();const ne=async()=>{try{const Ie=lt(),{data:{session:Le}}=await Ie.auth.getSession();Le?.access_token&&(document.hidden?await ba.updateStatus(!1):await ba.updateStatus(!0))}catch(Ie){console.error("[Presence] Error in visibility change:",Ie)}};return document.addEventListener("visibilitychange",ne),()=>{document.removeEventListener("visibilitychange",ne),(async()=>{try{const Le=lt(),{data:{session:Ce}}=await Le.auth.getSession();Ce?.access_token&&await ba.updateStatus(!1)}catch(Le){console.error("[Presence] Error updating offline status:",Le)}})()}}},[u,l]),m.useEffect(()=>{if(u){const R=async()=>{try{const Ie=await feedApi.getNotifications();if(Ie.success&&Ie.data?.notifications){const Le=Ie.data.notifications.filter(Ce=>!Ce.read).length;_(Le>0)}}catch(Ie){console.log("[Notifications] Failed to check:",Ie)}};R();const ne=setInterval(R,3e4);return()=>{clearInterval(ne)}}},[u]);const Ne=async()=>{v(!0);try{const R=lt();console.log("[Auth] ========== CHECKING AUTH =========="),console.log("[Auth] Project ID:",ht);let{data:{session:ne},error:Ie}=await R.auth.getSession();if(Ie){console.error("[Auth]  Session error:",Ie),await R.auth.signOut(),localStorage.clear(),v(!1);return}if(!ne){console.log("[Auth]   No session found - user needs to log in"),v(!1);return}if(!ne.access_token||!ne.user){console.error("[Auth]  Invalid session - missing token or user"),await R.auth.signOut(),localStorage.clear(),v(!1);return}if(!ne.access_token.startsWith("eyJ")){console.error("[Auth]  Invalid token format - not a JWT"),console.error("[Auth]  This session is corrupted or from a different project"),await R.auth.signOut(),localStorage.clear(),v(!1);return}try{const $e=ne.access_token.split(".");if($e.length===3){const Ge=JSON.parse(atob($e[1].replace(/-/g,"+").replace(/_/g,"/"))),be=`https://${ht}.supabase.co/auth/v1`;if(Ge.iss!==be){console.error("[Auth]  TOKEN PROJECT MISMATCH!"),console.error("[Auth] Token issuer:",Ge.iss),console.error("[Auth] Expected:",be),console.error("[Auth] This token is from a DIFFERENT Supabase project!"),await R.auth.signOut(),localStorage.clear(),$.error("Wrong Project",{description:"Session is from a different project. Please log in to this project.",duration:6e3}),v(!1);return}console.log("[Auth]  Token project ID verified")}}catch($e){console.error("[Auth] Error decoding token:",$e),await R.auth.signOut(),localStorage.clear(),v(!1);return}console.log("[Auth] Attempting to refresh session...");const{data:Le,error:Ce}=await R.auth.refreshSession();if(Ce){if(console.error("[Auth]  Session refresh failed:",Ce.message),console.error("[Auth] Error name:",Ce.name),Ce.message.includes("Invalid Refresh Token")||Ce.message.includes("Auth session missing")||Ce.message.includes("invalid_grant")||Ce.message.includes("refresh_token_not_found")||Ce.name==="AuthSessionMissingError"){console.error("[Auth]  CRITICAL: Session is completely invalid or from different project"),console.error("[Auth] Clearing all session data and forcing fresh login..."),$.error("Session Invalid",{description:"Your session is invalid. Please log in again.",duration:5e3}),await R.auth.signOut(),localStorage.clear(),v(!1),i("auth");return}console.warn("[Auth]   Refresh failed but will try to use existing session")}else Le.session&&(console.log("[Auth]  Session refreshed successfully"),ne=Le.session);if(console.log("[Auth]  Session found:",{user_id:ne.user?.id,email:ne.user?.email,has_access_token:!!ne.access_token,token_format_valid:ne.access_token?.startsWith("eyJ"),expires_at:ne.expires_at?new Date(ne.expires_at*1e3).toLocaleString():"N/A"}),ne.expires_at){const $e=ne.expires_at*1e3,Ge=Date.now(),be=Math.floor(($e-Ge)/1e3);if(console.log(`[Auth] Token expires in ${be} seconds`),be<300){console.warn("[Auth]   Session expiring soon, refreshing...");const{data:ot,error:$t}=await R.auth.refreshSession();if($t||!ot.session){console.error("[Auth]  Failed to refresh session:",$t),console.error("[Auth] User should log out and log back in"),$.error("Session Expired",{description:"Please log out and log back in to continue."}),v(!1);return}else{console.log("[Auth]  Session refreshed successfully");const{data:{session:Ln}}=await R.auth.getSession();Ln&&console.log("[Auth] Using refreshed session")}}}console.log("[Auth] Validating user token...");const{data:{user:_e},error:Dt}=await R.auth.getUser();if(Dt){console.error("[Auth]  Failed to validate user:",Dt),console.error("[Auth] This usually means the token is invalid or expired"),$.error("Authentication Error",{description:"Please log out and log back in."}),v(!1);return}if(!_e){console.error("[Auth]  No user found despite having session"),v(!1);return}console.log("[Auth]  User validated:",_e.email);const{data:{session:zt}}=await R.auth.getSession(),Ve=zt?.access_token;if(!Ve){console.error("[Auth]  No access token available after validation"),v(!1);return}if(!Ve.startsWith("eyJ")){console.error("[Auth]  Invalid token format - not a JWT!"),console.error("[Auth] Token preview:",Ve.substring(0,20)),v(!1);return}console.log("[Auth]  Access token validated (JWT format correct)"),console.log("[Auth] Token length:",Ve.length);try{console.log("[Auth]  Fetching user profile from backend...");const $e=await fetch(`https://${ht}.supabase.co/functions/v1/make-server-29f6739b/profile/${_e.id}`,{headers:{Authorization:`Bearer ${Ve}`}});if(console.log("[Auth] Backend response status:",$e.status),$e.ok){const Ge=await $e.json();if(Ge.user){console.log("[Auth]  Successfully loaded user profile from backend");try{console.log("[Auth]  Repairing profile counts...");const be=await fetch(`https://${ht}.supabase.co/functions/v1/make-server-29f6739b/follow/repair-counts`,{method:"POST",headers:{Authorization:`Bearer ${Ve}`,"Content-Type":"application/json"},body:JSON.stringify({user_id:Ge.user.id})});if(be.ok){const ot=await be.json();console.log("[Auth]  Counts repaired:",ot.new_counts),Ge.user.followers_count=ot.new_counts.followers,Ge.user.following_count=ot.new_counts.following,Ge.user.posts_count=ot.new_counts.posts}else console.warn("[Auth]   Count repair failed, continuing anyway")}catch(be){console.error("[Auth] Count repair error:",be)}f(Ge.user),i("home"),Da(),console.log("[Auth]  Background token refresh started"),v(!1);return}else console.warn("[Auth]   Response OK but no user data in response")}else{const Ge=await $e.text();if(console.error("[Auth]  Backend returned error, status:",$e.status),console.error("[Auth] Error response:",Ge),$e.status===401){console.warn("[Auth]   Backend authentication failed (401)"),console.warn("[Auth] This usually means the JWT token is invalid or from a different project"),console.log("[Auth] Attempting session refresh...");const{data:be,error:ot}=await R.auth.refreshSession();if(!ot&&be.session?.access_token){console.log("[Auth]  Session refreshed, retrying profile fetch...");const $t=await fetch(`https://${ht}.supabase.co/functions/v1/make-server-29f6739b/profile/${_e.id}`,{headers:{Authorization:`Bearer ${be.session.access_token}`}});if($t.ok){const Ln=await $t.json();if(Ln.user){console.log("[Auth]  Successfully loaded user profile after refresh"),f(Ln.user),i("home"),Da(),console.log("[Auth]  Background token refresh started"),v(!1);return}}else console.error("[Auth]  Retry also failed with status:",$t.status)}else console.error("[Auth]  Session refresh failed:",ot);console.error("[Auth]  All authentication attempts failed"),console.error("[Auth] Clearing corrupted session and showing error..."),await R.auth.signOut(),localStorage.clear(),$.error("Authentication Error",{description:"Your session could not be validated. Please log in again.",duration:5e3}),v(!1),i("auth");return}}}catch($e){console.error("[Auth]  Network error fetching profile:",$e),$.error("Connection Error",{description:"Could not connect to the server. Please check your internet connection.",duration:5e3})}console.log("[Auth]   Using fallback - creating user from auth metadata");const qe={id:_e.id,full_name:_e.user_metadata?.full_name||"User",username:_e.email?.split("@")[0]||"user",email:_e.email,phone_number:_e.user_metadata?.phone_number,is_online:!0};console.log("[Auth] Created fallback user:",qe),f(qe),i("home"),Da(),console.log("[Auth]  Background token refresh started (fallback flow)")}catch(R){console.error("[Auth]  Unexpected error in checkAuth:",R),R instanceof Error&&(console.error("[Auth] Error message:",R.message),console.error("[Auth] Error stack:",R.stack))}finally{console.log("[Auth] ========== AUTH CHECK COMPLETE =========="),v(!1)}},He=()=>{i("auth")},Oe=async()=>{console.log("[App] ========== AUTH SUCCESS HANDLER =========="),console.log("[App] Auth success callback triggered"),sessionStorage.removeItem("nuclear_clear_in_progress"),sessionStorage.removeItem("nuclear_clear_performed"),console.log("[App]  Cleared nuclear clear flags - API calls now allowed"),x.current=0,O(0),localStorage.removeItem("aurora_auth_error_count");const R=lt(),ne=Date.now(),Ie=1e4;let Le=null,Ce=0;for(;!Le&&Date.now()-ne<Ie;){Ce++,console.log(`[App]  Attempt ${Ce} to get and validate session...`);const{data:{session:_e},error:Dt}=await R.auth.getSession();if(Dt){console.error("[App] Session error:",Dt),await new Promise(qe=>setTimeout(qe,500));continue}if(!_e){console.warn("[App] No session found, waiting 500ms..."),await new Promise(qe=>setTimeout(qe,500));continue}if(!_e.access_token||!_e.user){console.warn("[App] Session incomplete (no token or user), waiting..."),await new Promise(qe=>setTimeout(qe,500));continue}if(!_e.access_token.startsWith("eyJ")){console.error("[App]  Invalid token format - not a JWT!"),console.error("[App] Token preview:",_e.access_token.substring(0,50)),await new Promise(qe=>setTimeout(qe,500));continue}if(_e.expires_at){const qe=_e.expires_at*1e3,$e=Date.now();if(qe<=$e){console.warn("[App] Token is expired, refreshing...");const{data:Ge,error:be}=await R.auth.refreshSession();if(!be&&Ge.session){console.log("[App]  Session refreshed"),await new Promise(ot=>setTimeout(ot,300));continue}else{console.error("[App] Failed to refresh session:",be),await new Promise(ot=>setTimeout(ot,500));continue}}}console.log("[App] Validating token with getUser()...");const{data:{user:zt},error:Ve}=await R.auth.getUser();if(Ve){console.error("[App] Token validation failed:",Ve.message),console.warn("[App] Attempting to refresh session...");const{data:qe,error:$e}=await R.auth.refreshSession();if(!$e&&qe.session){console.log("[App]  Session refreshed after validation failure"),await new Promise(Ge=>setTimeout(Ge,300));continue}else{console.error("[App] Failed to refresh after validation failure:",$e),await new Promise(Ge=>setTimeout(Ge,500));continue}}if(!zt){console.error("[App] No user returned from getUser()"),await new Promise(qe=>setTimeout(qe,500));continue}Le=_e,console.log(`[App]  Valid session obtained after ${Ce} attempts`),console.log("[App] Session details:",{user_id:zt.id,email:zt.email,token_length:_e.access_token.length,expires_at:new Date(_e.expires_at*1e3).toLocaleString()})}if(!Le){console.error("[App]  Failed to obtain valid session after timeout"),console.error("[App] User needs to try logging in again"),$.error("Session Error",{description:"Could not establish session. Please try logging in again."});return}console.log("[App] Proceeding to load user data..."),await Ne()},Ae=async()=>{await lt().auth.signOut(),localStorage.clear(),Ya(),yc(),f(null),i("auth"),p(null),Fe(null),Mt(null),console.log("[Logout] User logged out, storage cleared")},Te=R=>{p(R),i("conversation")},Ke=()=>{i("group-create")},it=()=>{i("settings")},on=()=>{p(null),i("home")},Xa=R=>{p(R),i("conversation")},lo=R=>{f(R)},io=(R,ne)=>{W(R),T(ne),i("story-view")},Za=()=>{i("story-create")},Ar=async()=>{i("home"),await new Promise(R=>setTimeout(R,300)),j(R=>R+1)},ds=()=>{i("home"),j(R=>R+1)},fs=(R,ne)=>{B(R),P(ne||""),se(g),i("profile-view")},ms=()=>{i(H?"conversation":"home")},hs=async R=>{(await kf.block(R)).success?($.success("User blocked"),u&&f({...u,blocked_users:[...u.blocked_users||[],R]})):$.error("Failed to block user")},In=async R=>{(await kf.unblock(R)).success?($.success("User unblocked"),u&&f({...u,blocked_users:(u.blocked_users||[]).filter(Ie=>Ie!==R)})):$.error("Failed to unblock user")},yn=async R=>{(await Cr.delete(R)).success?($.success("Chat deleted"),i("home"),p(null),se(null),j(Ie=>Ie+1)):$.error("Failed to delete chat")};m.useEffect(()=>{},[u,l,Ye,ce]);const ps=async(R,ne)=>{$.info("Coming Soon! ",{description:`${ne==="video"?"Video":"Voice"} calling feature will be available soon. Stay tuned!`})},co=async()=>{},uo=()=>{},fo=async()=>{Mt(null),$.info("Coming Soon! ",{description:"Voice and video calling will be available soon. Stay tuned!"})},mo=async()=>{Ye&&(console.log("[Call] Rejecting call:",Ye.id),await Cf.reject(Ye.id),Mt(null),$("Call declined"))},Tr=async()=>{console.log("[Call] Ending call"),ce&&await Cf.end(ce.id),de.current&&(clearInterval(de.current),de.current=null),re.current&&(re.current.cleanup(),re.current=null),Fe(null),Be(null),Yt(null),Dn(null),i("home"),$("Call ended")};return r?n.jsx(Xg,{onComplete:()=>o(!1)}):w?n.jsxs("div",{className:"h-screen w-full flex items-center justify-center bg-gradient-to-br from-background via-surface to-muted relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 opacity-20",children:[n.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-primary/30 rounded-full blur-3xl animate-pulse"}),n.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-accent/30 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),n.jsxs("div",{className:"relative flex flex-col items-center gap-6 z-10",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-primary to-accent shadow-2xl shadow-primary/30 flex items-center justify-center animate-pulse",children:n.jsx("svg",{className:"w-12 h-12 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),n.jsx("div",{className:"absolute inset-0 animate-spin",style:{animationDuration:"3s"},children:n.jsx("div",{className:"w-full h-full rounded-2xl border-4 border-transparent border-t-primary border-r-accent"})})]}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h2",{className:"text-xl font-semibold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"AuroraLink"}),n.jsx("p",{className:"text-muted-foreground text-sm",children:"Loading your messages..."})]}),n.jsx("div",{className:"flex gap-2",children:[0,1,2].map(R=>n.jsx("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse",style:{animationDelay:`${R*.2}s`}},R))})]})]}):n.jsxs("div",{className:"min-h-screen-safe bg-background text-foreground overflow-x-hidden w-full max-w-full touch-manipulation no-overscroll",children:[l==="onboarding"&&n.jsx(nx,{onComplete:He}),l==="auth"&&n.jsx(Ix,{onAuthSuccess:Oe}),l==="home"&&u&&n.jsxs(n.Fragment,{children:[n.jsx(Xx,{currentUser:u,onSelectConversation:Te,onNewChat:Ke,onSettings:it,onLogout:Ae,onViewStory:io,onCreateStory:Za},G),n.jsx(Qs,{currentView:"home",hasNotifications:Y,onNavigate:R=>{R==="home"?i("home"):R==="feed"?i("feed"):R==="create-post"?ke(!0):R==="reels"?i("reels"):R==="notifications"?i("notifications"):R==="explore"?i("explore"):R==="settings"&&(fe(u.id),i("my-profile"))}})]}),l==="conversation"&&u&&g&&n.jsx(m0,{conversationId:g,currentUser:u,onBack:on,onInitiateCall:ps,onViewProfile:fs,onDeleteChat:()=>yn(g)}),l==="group-create"&&u&&n.jsx(v0,{currentUser:u,onBack:on,onConversationCreated:Xa,onViewProfile:R=>{fe(R),i("enhanced-profile")}}),l==="settings"&&u&&n.jsx(y0,{currentUser:u,onBack:on,onUserUpdate:lo,onNavigate:R=>i(R)}),l==="data-debug"&&u&&n.jsx(x1,{currentUser:u,onBack:()=>i("settings")}),l==="story-view"&&u&&I.length>0&&n.jsx(j0,{userStoriesList:I,initialUserIndex:K,currentUser:u,onClose:Ar,onRefresh:Ar}),l==="story-create"&&u&&n.jsx(b0,{currentUser:u,onClose:on,onSuccess:ds}),l==="profile-view"&&u&&S&&n.jsx(S0,{user:S,currentUser:u,onBack:ms,onSendMessage:()=>{H&&i("conversation")},onInitiateCall:R=>ps(S,R),onBlock:()=>hs(S.id),onUnblock:()=>In(S.id),onDelete:H?()=>yn(H):void 0,onViewProfile:()=>{fe(S.id),i("enhanced-profile")},isBlocked:u.blocked_users?.includes(S.id),lastSeen:oe}),l==="feed"&&u&&n.jsxs(n.Fragment,{children:[n.jsx(fv,{currentUser:u,onNavigate:(R,ne)=>{R==="post-detail"&&ne?.postId?(V(ne.postId),i("post-detail")):R==="profile-view"&&ne?.userId&&(fe(ne.userId),i("enhanced-profile"))}}),n.jsx(Qs,{currentView:"feed",hasNotifications:Y,onNavigate:R=>{R==="home"?i("home"):R==="feed"?i("feed"):R==="create-post"?ke(!0):R==="reels"?i("reels"):R==="notifications"?i("notifications"):R==="explore"?i("explore"):R==="settings"&&(fe(u.id),i("my-profile"))}})]}),l==="explore"&&u&&n.jsxs(n.Fragment,{children:[n.jsx(xv,{currentUser:u,onNavigate:(R,ne)=>{R==="post-detail"&&ne?.postId?(V(ne.postId),i("post-detail")):R==="profile-view"&&ne?.userId&&(fe(ne.userId),i("enhanced-profile"))}}),n.jsx(Qs,{currentView:"explore",hasNotifications:Y,onNavigate:R=>{R==="home"?i("home"):R==="feed"?i("feed"):R==="create-post"?ke(!0):R==="reels"?i("reels"):R==="notifications"?i("notifications"):R==="explore"?i("explore"):R==="settings"&&(fe(u.id),i("my-profile"))}})]}),l==="reels"&&u&&n.jsx(n.Fragment,{children:n.jsx(p1,{onBack:()=>i("feed"),onOpenComments:R=>{V(R),i("post-detail")},onViewProfile:R=>{fe(R),i("enhanced-profile")},currentUserId:u.id})}),l==="notifications"&&u&&n.jsxs(n.Fragment,{children:[n.jsx(g1,{onBack:()=>i("feed"),onViewProfile:R=>{fe(R),i("enhanced-profile")},onViewPost:R=>{V(R),i("post-detail")},onUserUpdate:R=>{f(ne=>({...ne,...R}))}}),n.jsx(Qs,{currentView:"notifications",hasNotifications:Y,onNavigate:R=>{R==="home"?i("home"):R==="feed"?i("feed"):R==="create-post"?ke(!0):R==="reels"?i("reels"):R==="notifications"?i("notifications"):R==="explore"?i("explore"):R==="settings"&&(fe(u.id),i("my-profile"))}})]}),l==="post-detail"&&u&&ae&&n.jsx(pv,{postId:ae,currentUser:u,onClose:()=>{V(null),i("feed")},onNavigate:(R,ne)=>{R==="profile-view"&&ne?.userId&&(fe(ne.userId),i("enhanced-profile"))}}),l==="enhanced-profile"&&u&&me&&n.jsx(qf,{userId:me,currentUser:u,onBack:()=>{fe(null),i("feed")},onNavigate:(R,ne)=>{R==="post-detail"&&ne?.postId?(V(ne.postId),i("post-detail")):R==="new-chat"&&ne?.userId?i("group-create"):R==="edit-profile"?i("settings"):R==="profile"&&ne?.userId&&(fe(ne.userId),i("enhanced-profile"))},onUserUpdate:R=>{f(ne=>({...ne,...R}))}}),l==="my-profile"&&u&&n.jsxs(n.Fragment,{children:[n.jsx(qf,{userId:u.id,currentUser:u,onBack:()=>i("feed"),onNavigate:(R,ne)=>{R==="post-detail"&&ne?.postId?(V(ne.postId),i("post-detail")):R==="edit-profile"?i("settings"):R==="profile"&&ne?.userId&&(fe(ne.userId),i("enhanced-profile"))},onUserUpdate:R=>{f(ne=>({...ne,...R}))}}),n.jsx(Qs,{currentView:"settings",hasNotifications:Y,onNavigate:R=>{R==="home"?i("home"):R==="feed"?i("feed"):R==="create-post"?ke(!0):R==="reels"?i("reels"):R==="notifications"?i("notifications"):R==="explore"?i("explore"):R==="settings"&&(fe(u.id),i("my-profile"))}})]}),ye&&u&&n.jsx(hv,{currentUser:u,onClose:()=>ke(!1),onPostCreated:()=>{ke(!1),i("feed")}}),l==="call"&&u&&ce&&De&&re.current&&n.jsx(w0,{callType:ce.call_type,recipientUser:De,currentUser:u,isInitiator:ce.caller_id===u.id,onEndCall:Tr,onCallConnected:()=>console.log("[Call] Connected"),onCallFailed:R=>{console.error("[Call] Failed:",R),$.error("Call failed",{description:R}),Tr()},peerConnection:re.current.getPeerConnection(),localStream:Mn,remoteStream:rn}),Ye&&Ye.caller&&n.jsx(v1,{caller:Ye.caller,callType:Ye.call_type,onAccept:fo,onReject:mo}),gn&&xn&&n.jsx(y1,{open:gn,callType:xn,onGrantPermissions:co,onCancel:uo}),n.jsx(b1,{show:N,onClearSession:async()=>{console.log("[Auth Error] ========== USER REQUESTED SESSION CLEAR ==========");try{await lt().auth.signOut(),console.log("[Auth Error] Supabase sign out complete")}catch(R){console.error("[Auth Error] Error during sign out:",R)}Pn(),console.log("[Auth Error] Session cleared"),x.current=0,O(0),localStorage.removeItem("aurora_auth_error_count"),console.log("[Auth Error] Auth error counter reset"),k(!1),console.log("[Auth Error] Auth error state reset"),$.success("Session Cleared",{description:"Reloading application...",duration:1e3}),setTimeout(()=>{console.log("[Auth Error] Reloading page..."),window.location.reload()},1e3)}}),n.jsx(bg,{})]})}wg.createRoot(document.getElementById("root")).render(n.jsx(H1,{}));
