function ow(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function lp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function iw(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}),n}var pf={exports:{}},na={},mf={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uy;function VC(){if(uy)return ze;uy=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function y(A){return A===null||typeof A!="object"?null:(A=g&&A[g]||A["@@iterator"],typeof A=="function"?A:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,S={};function j(A,I,H){this.props=A,this.context=I,this.refs=S,this.updater=H||b}j.prototype.isReactComponent={},j.prototype.setState=function(A,I){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,I,"setState")},j.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function C(){}C.prototype=j.prototype;function T(A,I,H){this.props=A,this.context=I,this.refs=S,this.updater=H||b}var E=T.prototype=new C;E.constructor=T,_(E,j.prototype),E.isPureReactComponent=!0;var N=Array.isArray,P=Object.prototype.hasOwnProperty,M={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function $(A,I,H){var G,q={},ae=null,ne=null;if(I!=null)for(G in I.ref!==void 0&&(ne=I.ref),I.key!==void 0&&(ae=""+I.key),I)P.call(I,G)&&!L.hasOwnProperty(G)&&(q[G]=I[G]);var de=arguments.length-2;if(de===1)q.children=H;else if(1<de){for(var ve=Array(de),We=0;We<de;We++)ve[We]=arguments[We+2];q.children=ve}if(A&&A.defaultProps)for(G in de=A.defaultProps,de)q[G]===void 0&&(q[G]=de[G]);return{$$typeof:t,type:A,key:ae,ref:ne,props:q,_owner:M.current}}function z(A,I){return{$$typeof:t,type:A.type,key:I,ref:A.ref,props:A.props,_owner:A._owner}}function W(A){return typeof A=="object"&&A!==null&&A.$$typeof===t}function Z(A){var I={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(H){return I[H]})}var X=/\/+/g;function ee(A,I){return typeof A=="object"&&A!==null&&A.key!=null?Z(""+A.key):I.toString(36)}function fe(A,I,H,G,q){var ae=typeof A;(ae==="undefined"||ae==="boolean")&&(A=null);var ne=!1;if(A===null)ne=!0;else switch(ae){case"string":case"number":ne=!0;break;case"object":switch(A.$$typeof){case t:case e:ne=!0}}if(ne)return ne=A,q=q(ne),A=G===""?"."+ee(ne,0):G,N(q)?(H="",A!=null&&(H=A.replace(X,"$&/")+"/"),fe(q,I,H,"",function(We){return We})):q!=null&&(W(q)&&(q=z(q,H+(!q.key||ne&&ne.key===q.key?"":(""+q.key).replace(X,"$&/")+"/")+A)),I.push(q)),1;if(ne=0,G=G===""?".":G+":",N(A))for(var de=0;de<A.length;de++){ae=A[de];var ve=G+ee(ae,de);ne+=fe(ae,I,H,ve,q)}else if(ve=y(A),typeof ve=="function")for(A=ve.call(A),de=0;!(ae=A.next()).done;)ae=ae.value,ve=G+ee(ae,de++),ne+=fe(ae,I,H,ve,q);else if(ae==="object")throw I=String(A),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return ne}function oe(A,I,H){if(A==null)return A;var G=[],q=0;return fe(A,G,"","",function(ae){return I.call(H,ae,q++)}),G}function Q(A){if(A._status===-1){var I=A._result;I=I(),I.then(function(H){(A._status===0||A._status===-1)&&(A._status=1,A._result=H)},function(H){(A._status===0||A._status===-1)&&(A._status=2,A._result=H)}),A._status===-1&&(A._status=0,A._result=I)}if(A._status===1)return A._result.default;throw A._result}var Y={current:null},O={transition:null},B={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:O,ReactCurrentOwner:M};function J(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:oe,forEach:function(A,I,H){oe(A,function(){I.apply(this,arguments)},H)},count:function(A){var I=0;return oe(A,function(){I++}),I},toArray:function(A){return oe(A,function(I){return I})||[]},only:function(A){if(!W(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},ze.Component=j,ze.Fragment=n,ze.Profiler=i,ze.PureComponent=T,ze.StrictMode=s,ze.Suspense=h,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,ze.act=J,ze.cloneElement=function(A,I,H){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var G=_({},A.props),q=A.key,ae=A.ref,ne=A._owner;if(I!=null){if(I.ref!==void 0&&(ae=I.ref,ne=M.current),I.key!==void 0&&(q=""+I.key),A.type&&A.type.defaultProps)var de=A.type.defaultProps;for(ve in I)P.call(I,ve)&&!L.hasOwnProperty(ve)&&(G[ve]=I[ve]===void 0&&de!==void 0?de[ve]:I[ve])}var ve=arguments.length-2;if(ve===1)G.children=H;else if(1<ve){de=Array(ve);for(var We=0;We<ve;We++)de[We]=arguments[We+2];G.children=de}return{$$typeof:t,type:A.type,key:q,ref:ae,props:G,_owner:ne}},ze.createContext=function(A){return A={$$typeof:l,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:a,_context:A},A.Consumer=A},ze.createElement=$,ze.createFactory=function(A){var I=$.bind(null,A);return I.type=A,I},ze.createRef=function(){return{current:null}},ze.forwardRef=function(A){return{$$typeof:d,render:A}},ze.isValidElement=W,ze.lazy=function(A){return{$$typeof:m,_payload:{_status:-1,_result:A},_init:Q}},ze.memo=function(A,I){return{$$typeof:p,type:A,compare:I===void 0?null:I}},ze.startTransition=function(A){var I=O.transition;O.transition={};try{A()}finally{O.transition=I}},ze.unstable_act=J,ze.useCallback=function(A,I){return Y.current.useCallback(A,I)},ze.useContext=function(A){return Y.current.useContext(A)},ze.useDebugValue=function(){},ze.useDeferredValue=function(A){return Y.current.useDeferredValue(A)},ze.useEffect=function(A,I){return Y.current.useEffect(A,I)},ze.useId=function(){return Y.current.useId()},ze.useImperativeHandle=function(A,I,H){return Y.current.useImperativeHandle(A,I,H)},ze.useInsertionEffect=function(A,I){return Y.current.useInsertionEffect(A,I)},ze.useLayoutEffect=function(A,I){return Y.current.useLayoutEffect(A,I)},ze.useMemo=function(A,I){return Y.current.useMemo(A,I)},ze.useReducer=function(A,I,H){return Y.current.useReducer(A,I,H)},ze.useRef=function(A){return Y.current.useRef(A)},ze.useState=function(A){return Y.current.useState(A)},ze.useSyncExternalStore=function(A,I,H){return Y.current.useSyncExternalStore(A,I,H)},ze.useTransition=function(){return Y.current.useTransition()},ze.version="18.3.1",ze}var dy;function cp(){return dy||(dy=1,mf.exports=VC()),mf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function BC(){if(fy)return na;fy=1;var t=cp(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(d,h,p){var m,g={},y=null,b=null;p!==void 0&&(y=""+p),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(b=h.ref);for(m in h)s.call(h,m)&&!a.hasOwnProperty(m)&&(g[m]=h[m]);if(d&&d.defaultProps)for(m in h=d.defaultProps,h)g[m]===void 0&&(g[m]=h[m]);return{$$typeof:e,type:d,key:y,ref:b,props:g,_owner:i.current}}return na.Fragment=n,na.jsx=l,na.jsxs=l,na}var hy;function UC(){return hy||(hy=1,pf.exports=BC()),pf.exports}var u=UC(),uc={},gf={exports:{}},fn={},vf={exports:{}},yf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function zC(){return py||(py=1,(function(t){function e(O,B){var J=O.length;O.push(B);e:for(;0<J;){var A=J-1>>>1,I=O[A];if(0<i(I,B))O[A]=B,O[J]=I,J=A;else break e}}function n(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var B=O[0],J=O.pop();if(J!==B){O[0]=J;e:for(var A=0,I=O.length,H=I>>>1;A<H;){var G=2*(A+1)-1,q=O[G],ae=G+1,ne=O[ae];if(0>i(q,J))ae<I&&0>i(ne,q)?(O[A]=ne,O[ae]=J,A=ae):(O[A]=q,O[G]=J,A=G);else if(ae<I&&0>i(ne,J))O[A]=ne,O[ae]=J,A=ae;else break e}}return B}function i(O,B){var J=O.sortIndex-B.sortIndex;return J!==0?J:O.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var h=[],p=[],m=1,g=null,y=3,b=!1,_=!1,S=!1,j=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(O){for(var B=n(p);B!==null;){if(B.callback===null)s(p);else if(B.startTime<=O)s(p),B.sortIndex=B.expirationTime,e(h,B);else break;B=n(p)}}function N(O){if(S=!1,E(O),!_)if(n(h)!==null)_=!0,Q(P);else{var B=n(p);B!==null&&Y(N,B.startTime-O)}}function P(O,B){_=!1,S&&(S=!1,C($),$=-1),b=!0;var J=y;try{for(E(B),g=n(h);g!==null&&(!(g.expirationTime>B)||O&&!Z());){var A=g.callback;if(typeof A=="function"){g.callback=null,y=g.priorityLevel;var I=A(g.expirationTime<=B);B=t.unstable_now(),typeof I=="function"?g.callback=I:g===n(h)&&s(h),E(B)}else s(h);g=n(h)}if(g!==null)var H=!0;else{var G=n(p);G!==null&&Y(N,G.startTime-B),H=!1}return H}finally{g=null,y=J,b=!1}}var M=!1,L=null,$=-1,z=5,W=-1;function Z(){return!(t.unstable_now()-W<z)}function X(){if(L!==null){var O=t.unstable_now();W=O;var B=!0;try{B=L(!0,O)}finally{B?ee():(M=!1,L=null)}}else M=!1}var ee;if(typeof T=="function")ee=function(){T(X)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,oe=fe.port2;fe.port1.onmessage=X,ee=function(){oe.postMessage(null)}}else ee=function(){j(X,0)};function Q(O){L=O,M||(M=!0,ee())}function Y(O,B){$=j(function(){O(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){_||b||(_=!0,Q(P))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(O){switch(y){case 1:case 2:case 3:var B=3;break;default:B=y}var J=y;y=B;try{return O()}finally{y=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var J=y;y=O;try{return B()}finally{y=J}},t.unstable_scheduleCallback=function(O,B,J){var A=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?A+J:A):J=A,O){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=J+I,O={id:m++,callback:B,priorityLevel:O,startTime:J,expirationTime:I,sortIndex:-1},J>A?(O.sortIndex=J,e(p,O),n(h)===null&&O===n(p)&&(S?(C($),$=-1):S=!0,Y(N,J-A))):(O.sortIndex=I,e(h,O),_||b||(_=!0,Q(P))),O},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(O){var B=y;return function(){var J=y;y=B;try{return O.apply(this,arguments)}finally{y=J}}}})(yf)),yf}var my;function WC(){return my||(my=1,vf.exports=zC()),vf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy;function HC(){if(gy)return fn;gy=1;var t=cp(),e=WC();function n(r){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+r,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function a(r,o){l(r,o),l(r+"Capture",o)}function l(r,o){for(i[r]=o,r=0;r<o.length;r++)s.add(o[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function y(r){return h.call(g,r)?!0:h.call(m,r)?!1:p.test(r)?g[r]=!0:(m[r]=!0,!1)}function b(r,o,c,f){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function _(r,o,c,f){if(o===null||typeof o>"u"||b(r,o,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function S(r,o,c,f,v,x,k){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=v,this.mustUseProperty=c,this.propertyName=r,this.type=o,this.sanitizeURL=x,this.removeEmptyString=k}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){j[r]=new S(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var o=r[0];j[o]=new S(o,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){j[r]=new S(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){j[r]=new S(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){j[r]=new S(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){j[r]=new S(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){j[r]=new S(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){j[r]=new S(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){j[r]=new S(r,5,!1,r.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function T(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var o=r.replace(C,T);j[o]=new S(o,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var o=r.replace(C,T);j[o]=new S(o,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var o=r.replace(C,T);j[o]=new S(o,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){j[r]=new S(r,1,!1,r.toLowerCase(),null,!1,!1)}),j.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){j[r]=new S(r,1,!1,r.toLowerCase(),null,!0,!0)});function E(r,o,c,f){var v=j.hasOwnProperty(o)?j[o]:null;(v!==null?v.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(_(o,c,v,f)&&(c=null),f||v===null?y(o)&&(c===null?r.removeAttribute(o):r.setAttribute(o,""+c)):v.mustUseProperty?r[v.propertyName]=c===null?v.type===3?!1:"":c:(o=v.attributeName,f=v.attributeNamespace,c===null?r.removeAttribute(o):(v=v.type,c=v===3||v===4&&c===!0?"":""+c,f?r.setAttributeNS(f,o,c):r.setAttribute(o,c))))}var N=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),M=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),Z=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),Y=Symbol.for("react.offscreen"),O=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=O&&r[O]||r["@@iterator"],typeof r=="function"?r:null)}var J=Object.assign,A;function I(r){if(A===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);A=o&&o[1]||""}return`
`+A+r}var H=!1;function G(r,o){if(!r||H)return"";H=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(K){var f=K}Reflect.construct(r,[],o)}else{try{o.call()}catch(K){f=K}r.call(o.prototype)}else{try{throw Error()}catch(K){f=K}r()}}catch(K){if(K&&f&&typeof K.stack=="string"){for(var v=K.stack.split(`
`),x=f.stack.split(`
`),k=v.length-1,R=x.length-1;1<=k&&0<=R&&v[k]!==x[R];)R--;for(;1<=k&&0<=R;k--,R--)if(v[k]!==x[R]){if(k!==1||R!==1)do if(k--,R--,0>R||v[k]!==x[R]){var D=`
`+v[k].replace(" at new "," at ");return r.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",r.displayName)),D}while(1<=k&&0<=R);break}}}finally{H=!1,Error.prepareStackTrace=c}return(r=r?r.displayName||r.name:"")?I(r):""}function q(r){switch(r.tag){case 5:return I(r.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return r=G(r.type,!1),r;case 11:return r=G(r.type.render,!1),r;case 1:return r=G(r.type,!0),r;default:return""}}function ae(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case L:return"Fragment";case M:return"Portal";case z:return"Profiler";case $:return"StrictMode";case ee:return"Suspense";case fe:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Z:return(r.displayName||"Context")+".Consumer";case W:return(r._context.displayName||"Context")+".Provider";case X:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case oe:return o=r.displayName||null,o!==null?o:ae(r.type)||"Memo";case Q:o=r._payload,r=r._init;try{return ae(r(o))}catch{}}return null}function ne(r){var o=r.type;switch(r.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=o.render,r=r.displayName||r.name||"",o.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(o);case 8:return o===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function de(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ve(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function We(r){var o=ve(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),f=""+r[o];if(!r.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,x=c.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return v.call(this)},set:function(k){f=""+k,x.call(this,k)}}),Object.defineProperty(r,o,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function ot(r){r._valueTracker||(r._valueTracker=We(r))}function pe(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var c=o.getValue(),f="";return r&&(f=ve(r)?r.checked?"true":"false":r.value),r=f,r!==c?(o.setValue(r),!0):!1}function He(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function le(r,o){var c=o.checked;return J({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??r._wrapperState.initialChecked})}function me(r,o){var c=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;c=de(o.value!=null?o.value:c),r._wrapperState={initialChecked:f,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ee(r,o){o=o.checked,o!=null&&E(r,"checked",o,!1)}function Be(r,o){Ee(r,o);var c=de(o.value),f=o.type;if(c!=null)f==="number"?(c===0&&r.value===""||r.value!=c)&&(r.value=""+c):r.value!==""+c&&(r.value=""+c);else if(f==="submit"||f==="reset"){r.removeAttribute("value");return}o.hasOwnProperty("value")?Le(r,o.type,c):o.hasOwnProperty("defaultValue")&&Le(r,o.type,de(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(r.defaultChecked=!!o.defaultChecked)}function Fe(r,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+r._wrapperState.initialValue,c||o===r.value||(r.value=o),r.defaultValue=o}c=r.name,c!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,c!==""&&(r.name=c)}function Le(r,o,c){(o!=="number"||He(r.ownerDocument)!==r)&&(c==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+c&&(r.defaultValue=""+c))}var tt=Array.isArray;function Ot(r,o,c,f){if(r=r.options,o){o={};for(var v=0;v<c.length;v++)o["$"+c[v]]=!0;for(c=0;c<r.length;c++)v=o.hasOwnProperty("$"+r[c].value),r[c].selected!==v&&(r[c].selected=v),v&&f&&(r[c].defaultSelected=!0)}else{for(c=""+de(c),o=null,v=0;v<r.length;v++){if(r[v].value===c){r[v].selected=!0,f&&(r[v].defaultSelected=!0);return}o!==null||r[v].disabled||(o=r[v])}o!==null&&(o.selected=!0)}}function nt(r,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return J({},o,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Bt(r,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(n(92));if(tt(c)){if(1<c.length)throw Error(n(93));c=c[0]}o=c}o==null&&(o=""),c=o}r._wrapperState={initialValue:de(c)}}function tr(r,o){var c=de(o.value),f=de(o.defaultValue);c!=null&&(c=""+c,c!==r.value&&(r.value=c),o.defaultValue==null&&r.defaultValue!==c&&(r.defaultValue=c)),f!=null&&(r.defaultValue=""+f)}function nr(r){var o=r.textContent;o===r._wrapperState.initialValue&&o!==""&&o!==null&&(r.value=o)}function xr(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _s(r,o){return r==null||r==="http://www.w3.org/1999/xhtml"?xr(o):r==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var rr,ye=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,f,v){MSApp.execUnsafeLocalFunction(function(){return r(o,c,f,v)})}:r})(function(r,o){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=o;else{for(rr=rr||document.createElement("div"),rr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=rr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;o.firstChild;)r.appendChild(o.firstChild)}});function $e(r,o){if(o){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=o;return}}r.textContent=o}var qe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ue=["Webkit","ms","Moz","O"];Object.keys(qe).forEach(function(r){Ue.forEach(function(o){o=o+r.charAt(0).toUpperCase()+r.substring(1),qe[o]=qe[r]})});function It(r,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||qe.hasOwnProperty(r)&&qe[r]?(""+o).trim():o+"px"}function ut(r,o){r=r.style;for(var c in o)if(o.hasOwnProperty(c)){var f=c.indexOf("--")===0,v=It(c,o[c],f);c==="float"&&(c="cssFloat"),f?r.setProperty(c,v):r[c]=v}}var Et=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ut(r,o){if(o){if(Et[r]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function gt(r,o){if(r.indexOf("-")===-1)return typeof o.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Je=null;function et(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Gt=null,Mt=null,Dt=null;function bi(r){if(r=Bi(r)){if(typeof Gt!="function")throw Error(n(280));var o=r.stateNode;o&&(o=jl(o),Gt(r.stateNode,r.type,o))}}function Me(r){Mt?Dt?Dt.push(r):Dt=[r]:Mt=r}function xt(){if(Mt){var r=Mt,o=Dt;if(Dt=Mt=null,bi(r),o)for(r=0;r<o.length;r++)bi(o[r])}}function Nt(r,o){return r(o)}function qt(){}var $r=!1;function _t(r,o,c){if($r)return r(o,c);$r=!0;try{return Nt(r,o,c)}finally{$r=!1,(Mt!==null||Dt!==null)&&(qt(),xt())}}function Lt(r,o){var c=r.stateNode;if(c===null)return null;var f=jl(c);if(f===null)return null;c=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(n(231,o,typeof c));return c}var Fr=!1;if(d)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Fr=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch{Fr=!1}function gn(r,o,c,f,v,x,k,R,D){var K=Array.prototype.slice.call(arguments,3);try{o.apply(c,K)}catch(se){this.onError(se)}}var Vr=!1,En=null,Si=!1,Ru=null,Gk={onError:function(r){Vr=!0,En=r}};function qk(r,o,c,f,v,x,k,R,D){Vr=!1,En=null,gn.apply(Gk,arguments)}function Yk(r,o,c,f,v,x,k,R,D){if(qk.apply(this,arguments),Vr){if(Vr){var K=En;Vr=!1,En=null}else throw Error(n(198));Si||(Si=!0,Ru=K)}}function ks(r){var o=r,c=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(c=o.return),r=o.return;while(r)}return o.tag===3?c:null}function Om(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function Im(r){if(ks(r)!==r)throw Error(n(188))}function Jk(r){var o=r.alternate;if(!o){if(o=ks(r),o===null)throw Error(n(188));return o!==r?null:r}for(var c=r,f=o;;){var v=c.return;if(v===null)break;var x=v.alternate;if(x===null){if(f=v.return,f!==null){c=f;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===c)return Im(v),r;if(x===f)return Im(v),o;x=x.sibling}throw Error(n(188))}if(c.return!==f.return)c=v,f=x;else{for(var k=!1,R=v.child;R;){if(R===c){k=!0,c=v,f=x;break}if(R===f){k=!0,f=v,c=x;break}R=R.sibling}if(!k){for(R=x.child;R;){if(R===c){k=!0,c=x,f=v;break}if(R===f){k=!0,f=x,c=v;break}R=R.sibling}if(!k)throw Error(n(189))}}if(c.alternate!==f)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?r:o}function Mm(r){return r=Jk(r),r!==null?Dm(r):null}function Dm(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var o=Dm(r);if(o!==null)return o;r=r.sibling}return null}var Lm=e.unstable_scheduleCallback,$m=e.unstable_cancelCallback,Xk=e.unstable_shouldYield,Qk=e.unstable_requestPaint,wt=e.unstable_now,Zk=e.unstable_getCurrentPriorityLevel,Ou=e.unstable_ImmediatePriority,Fm=e.unstable_UserBlockingPriority,ol=e.unstable_NormalPriority,ej=e.unstable_LowPriority,Vm=e.unstable_IdlePriority,il=null,sr=null;function tj(r){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(il,r,void 0,(r.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:sj,nj=Math.log,rj=Math.LN2;function sj(r){return r>>>=0,r===0?32:31-(nj(r)/rj|0)|0}var al=64,ll=4194304;function _i(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function cl(r,o){var c=r.pendingLanes;if(c===0)return 0;var f=0,v=r.suspendedLanes,x=r.pingedLanes,k=c&268435455;if(k!==0){var R=k&~v;R!==0?f=_i(R):(x&=k,x!==0&&(f=_i(x)))}else k=c&~v,k!==0?f=_i(k):x!==0&&(f=_i(x));if(f===0)return 0;if(o!==0&&o!==f&&(o&v)===0&&(v=f&-f,x=o&-o,v>=x||v===16&&(x&4194240)!==0))return o;if((f&4)!==0&&(f|=c&16),o=r.entangledLanes,o!==0)for(r=r.entanglements,o&=f;0<o;)c=31-Vn(o),v=1<<c,f|=r[c],o&=~v;return f}function oj(r,o){switch(r){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ij(r,o){for(var c=r.suspendedLanes,f=r.pingedLanes,v=r.expirationTimes,x=r.pendingLanes;0<x;){var k=31-Vn(x),R=1<<k,D=v[k];D===-1?((R&c)===0||(R&f)!==0)&&(v[k]=oj(R,o)):D<=o&&(r.expiredLanes|=R),x&=~R}}function Iu(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Bm(){var r=al;return al<<=1,(al&4194240)===0&&(al=64),r}function Mu(r){for(var o=[],c=0;31>c;c++)o.push(r);return o}function ki(r,o,c){r.pendingLanes|=o,o!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,o=31-Vn(o),r[o]=c}function aj(r,o){var c=r.pendingLanes&~o;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=o,r.mutableReadLanes&=o,r.entangledLanes&=o,o=r.entanglements;var f=r.eventTimes;for(r=r.expirationTimes;0<c;){var v=31-Vn(c),x=1<<v;o[v]=0,f[v]=-1,r[v]=-1,c&=~x}}function Du(r,o){var c=r.entangledLanes|=o;for(r=r.entanglements;c;){var f=31-Vn(c),v=1<<f;v&o|r[f]&o&&(r[f]|=o),c&=~v}}var Ze=0;function Um(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var zm,Lu,Wm,Hm,Km,$u=!1,ul=[],Br=null,Ur=null,zr=null,ji=new Map,Ci=new Map,Wr=[],lj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gm(r,o){switch(r){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":ji.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ci.delete(o.pointerId)}}function Ei(r,o,c,f,v,x){return r===null||r.nativeEvent!==x?(r={blockedOn:o,domEventName:c,eventSystemFlags:f,nativeEvent:x,targetContainers:[v]},o!==null&&(o=Bi(o),o!==null&&Lu(o)),r):(r.eventSystemFlags|=f,o=r.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),r)}function cj(r,o,c,f,v){switch(o){case"focusin":return Br=Ei(Br,r,o,c,f,v),!0;case"dragenter":return Ur=Ei(Ur,r,o,c,f,v),!0;case"mouseover":return zr=Ei(zr,r,o,c,f,v),!0;case"pointerover":var x=v.pointerId;return ji.set(x,Ei(ji.get(x)||null,r,o,c,f,v)),!0;case"gotpointercapture":return x=v.pointerId,Ci.set(x,Ei(Ci.get(x)||null,r,o,c,f,v)),!0}return!1}function qm(r){var o=js(r.target);if(o!==null){var c=ks(o);if(c!==null){if(o=c.tag,o===13){if(o=Om(c),o!==null){r.blockedOn=o,Km(r.priority,function(){Wm(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function dl(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var c=Vu(r.domEventName,r.eventSystemFlags,o[0],r.nativeEvent);if(c===null){c=r.nativeEvent;var f=new c.constructor(c.type,c);Je=f,c.target.dispatchEvent(f),Je=null}else return o=Bi(c),o!==null&&Lu(o),r.blockedOn=c,!1;o.shift()}return!0}function Ym(r,o,c){dl(r)&&c.delete(o)}function uj(){$u=!1,Br!==null&&dl(Br)&&(Br=null),Ur!==null&&dl(Ur)&&(Ur=null),zr!==null&&dl(zr)&&(zr=null),ji.forEach(Ym),Ci.forEach(Ym)}function Ni(r,o){r.blockedOn===o&&(r.blockedOn=null,$u||($u=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,uj)))}function Ti(r){function o(v){return Ni(v,r)}if(0<ul.length){Ni(ul[0],r);for(var c=1;c<ul.length;c++){var f=ul[c];f.blockedOn===r&&(f.blockedOn=null)}}for(Br!==null&&Ni(Br,r),Ur!==null&&Ni(Ur,r),zr!==null&&Ni(zr,r),ji.forEach(o),Ci.forEach(o),c=0;c<Wr.length;c++)f=Wr[c],f.blockedOn===r&&(f.blockedOn=null);for(;0<Wr.length&&(c=Wr[0],c.blockedOn===null);)qm(c),c.blockedOn===null&&Wr.shift()}var ao=N.ReactCurrentBatchConfig,fl=!0;function dj(r,o,c,f){var v=Ze,x=ao.transition;ao.transition=null;try{Ze=1,Fu(r,o,c,f)}finally{Ze=v,ao.transition=x}}function fj(r,o,c,f){var v=Ze,x=ao.transition;ao.transition=null;try{Ze=4,Fu(r,o,c,f)}finally{Ze=v,ao.transition=x}}function Fu(r,o,c,f){if(fl){var v=Vu(r,o,c,f);if(v===null)rd(r,o,f,hl,c),Gm(r,f);else if(cj(v,r,o,c,f))f.stopPropagation();else if(Gm(r,f),o&4&&-1<lj.indexOf(r)){for(;v!==null;){var x=Bi(v);if(x!==null&&zm(x),x=Vu(r,o,c,f),x===null&&rd(r,o,f,hl,c),x===v)break;v=x}v!==null&&f.stopPropagation()}else rd(r,o,f,null,c)}}var hl=null;function Vu(r,o,c,f){if(hl=null,r=et(f),r=js(r),r!==null)if(o=ks(r),o===null)r=null;else if(c=o.tag,c===13){if(r=Om(o),r!==null)return r;r=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null);return hl=r,null}function Jm(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zk()){case Ou:return 1;case Fm:return 4;case ol:case ej:return 16;case Vm:return 536870912;default:return 16}default:return 16}}var Hr=null,Bu=null,pl=null;function Xm(){if(pl)return pl;var r,o=Bu,c=o.length,f,v="value"in Hr?Hr.value:Hr.textContent,x=v.length;for(r=0;r<c&&o[r]===v[r];r++);var k=c-r;for(f=1;f<=k&&o[c-f]===v[x-f];f++);return pl=v.slice(r,1<f?1-f:void 0)}function ml(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function gl(){return!0}function Qm(){return!1}function vn(r){function o(c,f,v,x,k){this._reactName=c,this._targetInst=v,this.type=f,this.nativeEvent=x,this.target=k,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(c=r[R],this[R]=c?c(x):x[R]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?gl:Qm,this.isPropagationStopped=Qm,this}return J(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=gl)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=gl)},persist:function(){},isPersistent:gl}),o}var lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uu=vn(lo),Pi=J({},lo,{view:0,detail:0}),hj=vn(Pi),zu,Wu,Ai,vl=J({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ku,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ai&&(Ai&&r.type==="mousemove"?(zu=r.screenX-Ai.screenX,Wu=r.screenY-Ai.screenY):Wu=zu=0,Ai=r),zu)},movementY:function(r){return"movementY"in r?r.movementY:Wu}}),Zm=vn(vl),pj=J({},vl,{dataTransfer:0}),mj=vn(pj),gj=J({},Pi,{relatedTarget:0}),Hu=vn(gj),vj=J({},lo,{animationName:0,elapsedTime:0,pseudoElement:0}),yj=vn(vj),xj=J({},lo,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),wj=vn(xj),bj=J({},lo,{data:0}),eg=vn(bj),Sj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_j={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jj(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=kj[r])?!!o[r]:!1}function Ku(){return jj}var Cj=J({},Pi,{key:function(r){if(r.key){var o=Sj[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=ml(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?_j[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ku,charCode:function(r){return r.type==="keypress"?ml(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ml(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ej=vn(Cj),Nj=J({},vl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tg=vn(Nj),Tj=J({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ku}),Pj=vn(Tj),Aj=J({},lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rj=vn(Aj),Oj=J({},vl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ij=vn(Oj),Mj=[9,13,27,32],Gu=d&&"CompositionEvent"in window,Ri=null;d&&"documentMode"in document&&(Ri=document.documentMode);var Dj=d&&"TextEvent"in window&&!Ri,ng=d&&(!Gu||Ri&&8<Ri&&11>=Ri),rg=" ",sg=!1;function og(r,o){switch(r){case"keyup":return Mj.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ig(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var co=!1;function Lj(r,o){switch(r){case"compositionend":return ig(o);case"keypress":return o.which!==32?null:(sg=!0,rg);case"textInput":return r=o.data,r===rg&&sg?null:r;default:return null}}function $j(r,o){if(co)return r==="compositionend"||!Gu&&og(r,o)?(r=Xm(),pl=Bu=Hr=null,co=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ng&&o.locale!=="ko"?null:o.data;default:return null}}var Fj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ag(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Fj[r.type]:o==="textarea"}function lg(r,o,c,f){Me(f),o=Sl(o,"onChange"),0<o.length&&(c=new Uu("onChange","change",null,c,f),r.push({event:c,listeners:o}))}var Oi=null,Ii=null;function Vj(r){Cg(r,0)}function yl(r){var o=mo(r);if(pe(o))return r}function Bj(r,o){if(r==="change")return o}var cg=!1;if(d){var qu;if(d){var Yu="oninput"in document;if(!Yu){var ug=document.createElement("div");ug.setAttribute("oninput","return;"),Yu=typeof ug.oninput=="function"}qu=Yu}else qu=!1;cg=qu&&(!document.documentMode||9<document.documentMode)}function dg(){Oi&&(Oi.detachEvent("onpropertychange",fg),Ii=Oi=null)}function fg(r){if(r.propertyName==="value"&&yl(Ii)){var o=[];lg(o,Ii,r,et(r)),_t(Vj,o)}}function Uj(r,o,c){r==="focusin"?(dg(),Oi=o,Ii=c,Oi.attachEvent("onpropertychange",fg)):r==="focusout"&&dg()}function zj(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return yl(Ii)}function Wj(r,o){if(r==="click")return yl(o)}function Hj(r,o){if(r==="input"||r==="change")return yl(o)}function Kj(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Bn=typeof Object.is=="function"?Object.is:Kj;function Mi(r,o){if(Bn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var c=Object.keys(r),f=Object.keys(o);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var v=c[f];if(!h.call(o,v)||!Bn(r[v],o[v]))return!1}return!0}function hg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function pg(r,o){var c=hg(r);r=0;for(var f;c;){if(c.nodeType===3){if(f=r+c.textContent.length,r<=o&&f>=o)return{node:c,offset:o-r};r=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=hg(c)}}function mg(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?mg(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function gg(){for(var r=window,o=He();o instanceof r.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)r=o.contentWindow;else break;o=He(r.document)}return o}function Ju(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}function Gj(r){var o=gg(),c=r.focusedElem,f=r.selectionRange;if(o!==c&&c&&c.ownerDocument&&mg(c.ownerDocument.documentElement,c)){if(f!==null&&Ju(c)){if(o=f.start,r=f.end,r===void 0&&(r=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(r,c.value.length);else if(r=(o=c.ownerDocument||document)&&o.defaultView||window,r.getSelection){r=r.getSelection();var v=c.textContent.length,x=Math.min(f.start,v);f=f.end===void 0?x:Math.min(f.end,v),!r.extend&&x>f&&(v=f,f=x,x=v),v=pg(c,x);var k=pg(c,f);v&&k&&(r.rangeCount!==1||r.anchorNode!==v.node||r.anchorOffset!==v.offset||r.focusNode!==k.node||r.focusOffset!==k.offset)&&(o=o.createRange(),o.setStart(v.node,v.offset),r.removeAllRanges(),x>f?(r.addRange(o),r.extend(k.node,k.offset)):(o.setEnd(k.node,k.offset),r.addRange(o)))}}for(o=[],r=c;r=r.parentNode;)r.nodeType===1&&o.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)r=o[c],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var qj=d&&"documentMode"in document&&11>=document.documentMode,uo=null,Xu=null,Di=null,Qu=!1;function vg(r,o,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Qu||uo==null||uo!==He(f)||(f=uo,"selectionStart"in f&&Ju(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Di&&Mi(Di,f)||(Di=f,f=Sl(Xu,"onSelect"),0<f.length&&(o=new Uu("onSelect","select",null,o,c),r.push({event:o,listeners:f}),o.target=uo)))}function xl(r,o){var c={};return c[r.toLowerCase()]=o.toLowerCase(),c["Webkit"+r]="webkit"+o,c["Moz"+r]="moz"+o,c}var fo={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionend:xl("Transition","TransitionEnd")},Zu={},yg={};d&&(yg=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function wl(r){if(Zu[r])return Zu[r];if(!fo[r])return r;var o=fo[r],c;for(c in o)if(o.hasOwnProperty(c)&&c in yg)return Zu[r]=o[c];return r}var xg=wl("animationend"),wg=wl("animationiteration"),bg=wl("animationstart"),Sg=wl("transitionend"),_g=new Map,kg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(r,o){_g.set(r,o),a(o,[r])}for(var ed=0;ed<kg.length;ed++){var td=kg[ed],Yj=td.toLowerCase(),Jj=td[0].toUpperCase()+td.slice(1);Kr(Yj,"on"+Jj)}Kr(xg,"onAnimationEnd"),Kr(wg,"onAnimationIteration"),Kr(bg,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(Sg,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function jg(r,o,c){var f=r.type||"unknown-event";r.currentTarget=c,Yk(f,o,void 0,r),r.currentTarget=null}function Cg(r,o){o=(o&4)!==0;for(var c=0;c<r.length;c++){var f=r[c],v=f.event;f=f.listeners;e:{var x=void 0;if(o)for(var k=f.length-1;0<=k;k--){var R=f[k],D=R.instance,K=R.currentTarget;if(R=R.listener,D!==x&&v.isPropagationStopped())break e;jg(v,R,K),x=D}else for(k=0;k<f.length;k++){if(R=f[k],D=R.instance,K=R.currentTarget,R=R.listener,D!==x&&v.isPropagationStopped())break e;jg(v,R,K),x=D}}}if(Si)throw r=Ru,Si=!1,Ru=null,r}function it(r,o){var c=o[cd];c===void 0&&(c=o[cd]=new Set);var f=r+"__bubble";c.has(f)||(Eg(o,r,2,!1),c.add(f))}function nd(r,o,c){var f=0;o&&(f|=4),Eg(c,r,f,o)}var bl="_reactListening"+Math.random().toString(36).slice(2);function $i(r){if(!r[bl]){r[bl]=!0,s.forEach(function(c){c!=="selectionchange"&&(Xj.has(c)||nd(c,!1,r),nd(c,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[bl]||(o[bl]=!0,nd("selectionchange",!1,o))}}function Eg(r,o,c,f){switch(Jm(o)){case 1:var v=dj;break;case 4:v=fj;break;default:v=Fu}c=v.bind(null,o,c,r),v=void 0,!Fr||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),f?v!==void 0?r.addEventListener(o,c,{capture:!0,passive:v}):r.addEventListener(o,c,!0):v!==void 0?r.addEventListener(o,c,{passive:v}):r.addEventListener(o,c,!1)}function rd(r,o,c,f,v){var x=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var R=f.stateNode.containerInfo;if(R===v||R.nodeType===8&&R.parentNode===v)break;if(k===4)for(k=f.return;k!==null;){var D=k.tag;if((D===3||D===4)&&(D=k.stateNode.containerInfo,D===v||D.nodeType===8&&D.parentNode===v))return;k=k.return}for(;R!==null;){if(k=js(R),k===null)return;if(D=k.tag,D===5||D===6){f=x=k;continue e}R=R.parentNode}}f=f.return}_t(function(){var K=x,se=et(c),ie=[];e:{var re=_g.get(r);if(re!==void 0){var he=Uu,xe=r;switch(r){case"keypress":if(ml(c)===0)break e;case"keydown":case"keyup":he=Ej;break;case"focusin":xe="focus",he=Hu;break;case"focusout":xe="blur",he=Hu;break;case"beforeblur":case"afterblur":he=Hu;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Zm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=mj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Pj;break;case xg:case wg:case bg:he=yj;break;case Sg:he=Rj;break;case"scroll":he=hj;break;case"wheel":he=Ij;break;case"copy":case"cut":case"paste":he=wj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=tg}var Se=(o&4)!==0,bt=!Se&&r==="scroll",V=Se?re!==null?re+"Capture":null:re;Se=[];for(var F=K,U;F!==null;){U=F;var ce=U.stateNode;if(U.tag===5&&ce!==null&&(U=ce,V!==null&&(ce=Lt(F,V),ce!=null&&Se.push(Fi(F,ce,U)))),bt)break;F=F.return}0<Se.length&&(re=new he(re,xe,null,c,se),ie.push({event:re,listeners:Se}))}}if((o&7)===0){e:{if(re=r==="mouseover"||r==="pointerover",he=r==="mouseout"||r==="pointerout",re&&c!==Je&&(xe=c.relatedTarget||c.fromElement)&&(js(xe)||xe[wr]))break e;if((he||re)&&(re=se.window===se?se:(re=se.ownerDocument)?re.defaultView||re.parentWindow:window,he?(xe=c.relatedTarget||c.toElement,he=K,xe=xe?js(xe):null,xe!==null&&(bt=ks(xe),xe!==bt||xe.tag!==5&&xe.tag!==6)&&(xe=null)):(he=null,xe=K),he!==xe)){if(Se=Zm,ce="onMouseLeave",V="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(Se=tg,ce="onPointerLeave",V="onPointerEnter",F="pointer"),bt=he==null?re:mo(he),U=xe==null?re:mo(xe),re=new Se(ce,F+"leave",he,c,se),re.target=bt,re.relatedTarget=U,ce=null,js(se)===K&&(Se=new Se(V,F+"enter",xe,c,se),Se.target=U,Se.relatedTarget=bt,ce=Se),bt=ce,he&&xe)t:{for(Se=he,V=xe,F=0,U=Se;U;U=ho(U))F++;for(U=0,ce=V;ce;ce=ho(ce))U++;for(;0<F-U;)Se=ho(Se),F--;for(;0<U-F;)V=ho(V),U--;for(;F--;){if(Se===V||V!==null&&Se===V.alternate)break t;Se=ho(Se),V=ho(V)}Se=null}else Se=null;he!==null&&Ng(ie,re,he,Se,!1),xe!==null&&bt!==null&&Ng(ie,bt,xe,Se,!0)}}e:{if(re=K?mo(K):window,he=re.nodeName&&re.nodeName.toLowerCase(),he==="select"||he==="input"&&re.type==="file")var ke=Bj;else if(ag(re))if(cg)ke=Hj;else{ke=zj;var Ne=Uj}else(he=re.nodeName)&&he.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(ke=Wj);if(ke&&(ke=ke(r,K))){lg(ie,ke,c,se);break e}Ne&&Ne(r,re,K),r==="focusout"&&(Ne=re._wrapperState)&&Ne.controlled&&re.type==="number"&&Le(re,"number",re.value)}switch(Ne=K?mo(K):window,r){case"focusin":(ag(Ne)||Ne.contentEditable==="true")&&(uo=Ne,Xu=K,Di=null);break;case"focusout":Di=Xu=uo=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,vg(ie,c,se);break;case"selectionchange":if(qj)break;case"keydown":case"keyup":vg(ie,c,se)}var Te;if(Gu)e:{switch(r){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else co?og(r,c)&&(Oe="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Oe="onCompositionStart");Oe&&(ng&&c.locale!=="ko"&&(co||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&co&&(Te=Xm()):(Hr=se,Bu="value"in Hr?Hr.value:Hr.textContent,co=!0)),Ne=Sl(K,Oe),0<Ne.length&&(Oe=new eg(Oe,r,null,c,se),ie.push({event:Oe,listeners:Ne}),Te?Oe.data=Te:(Te=ig(c),Te!==null&&(Oe.data=Te)))),(Te=Dj?Lj(r,c):$j(r,c))&&(K=Sl(K,"onBeforeInput"),0<K.length&&(se=new eg("onBeforeInput","beforeinput",null,c,se),ie.push({event:se,listeners:K}),se.data=Te))}Cg(ie,o)})}function Fi(r,o,c){return{instance:r,listener:o,currentTarget:c}}function Sl(r,o){for(var c=o+"Capture",f=[];r!==null;){var v=r,x=v.stateNode;v.tag===5&&x!==null&&(v=x,x=Lt(r,c),x!=null&&f.unshift(Fi(r,x,v)),x=Lt(r,o),x!=null&&f.push(Fi(r,x,v))),r=r.return}return f}function ho(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Ng(r,o,c,f,v){for(var x=o._reactName,k=[];c!==null&&c!==f;){var R=c,D=R.alternate,K=R.stateNode;if(D!==null&&D===f)break;R.tag===5&&K!==null&&(R=K,v?(D=Lt(c,x),D!=null&&k.unshift(Fi(c,D,R))):v||(D=Lt(c,x),D!=null&&k.push(Fi(c,D,R)))),c=c.return}k.length!==0&&r.push({event:o,listeners:k})}var Qj=/\r\n?/g,Zj=/\u0000|\uFFFD/g;function Tg(r){return(typeof r=="string"?r:""+r).replace(Qj,`
`).replace(Zj,"")}function _l(r,o,c){if(o=Tg(o),Tg(r)!==o&&c)throw Error(n(425))}function kl(){}var sd=null,od=null;function id(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ad=typeof setTimeout=="function"?setTimeout:void 0,eC=typeof clearTimeout=="function"?clearTimeout:void 0,Pg=typeof Promise=="function"?Promise:void 0,tC=typeof queueMicrotask=="function"?queueMicrotask:typeof Pg<"u"?function(r){return Pg.resolve(null).then(r).catch(nC)}:ad;function nC(r){setTimeout(function(){throw r})}function ld(r,o){var c=o,f=0;do{var v=c.nextSibling;if(r.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(f===0){r.removeChild(v),Ti(o);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=v}while(c);Ti(o)}function Gr(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return r}function Ag(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return r;o--}else c==="/$"&&o++}r=r.previousSibling}return null}var po=Math.random().toString(36).slice(2),or="__reactFiber$"+po,Vi="__reactProps$"+po,wr="__reactContainer$"+po,cd="__reactEvents$"+po,rC="__reactListeners$"+po,sC="__reactHandles$"+po;function js(r){var o=r[or];if(o)return o;for(var c=r.parentNode;c;){if(o=c[wr]||c[or]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(r=Ag(r);r!==null;){if(c=r[or])return c;r=Ag(r)}return o}r=c,c=r.parentNode}return null}function Bi(r){return r=r[or]||r[wr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function mo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function jl(r){return r[Vi]||null}var ud=[],go=-1;function qr(r){return{current:r}}function at(r){0>go||(r.current=ud[go],ud[go]=null,go--)}function rt(r,o){go++,ud[go]=r.current,r.current=o}var Yr={},Yt=qr(Yr),an=qr(!1),Cs=Yr;function vo(r,o){var c=r.type.contextTypes;if(!c)return Yr;var f=r.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var v={},x;for(x in c)v[x]=o[x];return f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=v),v}function ln(r){return r=r.childContextTypes,r!=null}function Cl(){at(an),at(Yt)}function Rg(r,o,c){if(Yt.current!==Yr)throw Error(n(168));rt(Yt,o),rt(an,c)}function Og(r,o,c){var f=r.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var v in f)if(!(v in o))throw Error(n(108,ne(r)||"Unknown",v));return J({},c,f)}function El(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Yr,Cs=Yt.current,rt(Yt,r),rt(an,an.current),!0}function Ig(r,o,c){var f=r.stateNode;if(!f)throw Error(n(169));c?(r=Og(r,o,Cs),f.__reactInternalMemoizedMergedChildContext=r,at(an),at(Yt),rt(Yt,r)):at(an),rt(an,c)}var br=null,Nl=!1,dd=!1;function Mg(r){br===null?br=[r]:br.push(r)}function oC(r){Nl=!0,Mg(r)}function Jr(){if(!dd&&br!==null){dd=!0;var r=0,o=Ze;try{var c=br;for(Ze=1;r<c.length;r++){var f=c[r];do f=f(!0);while(f!==null)}br=null,Nl=!1}catch(v){throw br!==null&&(br=br.slice(r+1)),Lm(Ou,Jr),v}finally{Ze=o,dd=!1}}return null}var yo=[],xo=0,Tl=null,Pl=0,Nn=[],Tn=0,Es=null,Sr=1,_r="";function Ns(r,o){yo[xo++]=Pl,yo[xo++]=Tl,Tl=r,Pl=o}function Dg(r,o,c){Nn[Tn++]=Sr,Nn[Tn++]=_r,Nn[Tn++]=Es,Es=r;var f=Sr;r=_r;var v=32-Vn(f)-1;f&=~(1<<v),c+=1;var x=32-Vn(o)+v;if(30<x){var k=v-v%5;x=(f&(1<<k)-1).toString(32),f>>=k,v-=k,Sr=1<<32-Vn(o)+v|c<<v|f,_r=x+r}else Sr=1<<x|c<<v|f,_r=r}function fd(r){r.return!==null&&(Ns(r,1),Dg(r,1,0))}function hd(r){for(;r===Tl;)Tl=yo[--xo],yo[xo]=null,Pl=yo[--xo],yo[xo]=null;for(;r===Es;)Es=Nn[--Tn],Nn[Tn]=null,_r=Nn[--Tn],Nn[Tn]=null,Sr=Nn[--Tn],Nn[Tn]=null}var yn=null,xn=null,lt=!1,Un=null;function Lg(r,o){var c=On(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=r,o=r.deletions,o===null?(r.deletions=[c],r.flags|=16):o.push(c)}function $g(r,o){switch(r.tag){case 5:var c=r.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(r.stateNode=o,yn=r,xn=Gr(o.firstChild),!0):!1;case 6:return o=r.pendingProps===""||o.nodeType!==3?null:o,o!==null?(r.stateNode=o,yn=r,xn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=Es!==null?{id:Sr,overflow:_r}:null,r.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=On(18,null,null,0),c.stateNode=o,c.return=r,r.child=c,yn=r,xn=null,!0):!1;default:return!1}}function pd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function md(r){if(lt){var o=xn;if(o){var c=o;if(!$g(r,o)){if(pd(r))throw Error(n(418));o=Gr(c.nextSibling);var f=yn;o&&$g(r,o)?Lg(f,c):(r.flags=r.flags&-4097|2,lt=!1,yn=r)}}else{if(pd(r))throw Error(n(418));r.flags=r.flags&-4097|2,lt=!1,yn=r}}}function Fg(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;yn=r}function Al(r){if(r!==yn)return!1;if(!lt)return Fg(r),lt=!0,!1;var o;if((o=r.tag!==3)&&!(o=r.tag!==5)&&(o=r.type,o=o!=="head"&&o!=="body"&&!id(r.type,r.memoizedProps)),o&&(o=xn)){if(pd(r))throw Vg(),Error(n(418));for(;o;)Lg(r,o),o=Gr(o.nextSibling)}if(Fg(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"){if(o===0){xn=Gr(r.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}r=r.nextSibling}xn=null}}else xn=yn?Gr(r.stateNode.nextSibling):null;return!0}function Vg(){for(var r=xn;r;)r=Gr(r.nextSibling)}function wo(){xn=yn=null,lt=!1}function gd(r){Un===null?Un=[r]:Un.push(r)}var iC=N.ReactCurrentBatchConfig;function Ui(r,o,c){if(r=c.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var f=c.stateNode}if(!f)throw Error(n(147,r));var v=f,x=""+r;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===x?o.ref:(o=function(k){var R=v.refs;k===null?delete R[x]:R[x]=k},o._stringRef=x,o)}if(typeof r!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,r))}return r}function Rl(r,o){throw r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r))}function Bg(r){var o=r._init;return o(r._payload)}function Ug(r){function o(V,F){if(r){var U=V.deletions;U===null?(V.deletions=[F],V.flags|=16):U.push(F)}}function c(V,F){if(!r)return null;for(;F!==null;)o(V,F),F=F.sibling;return null}function f(V,F){for(V=new Map;F!==null;)F.key!==null?V.set(F.key,F):V.set(F.index,F),F=F.sibling;return V}function v(V,F){return V=ss(V,F),V.index=0,V.sibling=null,V}function x(V,F,U){return V.index=U,r?(U=V.alternate,U!==null?(U=U.index,U<F?(V.flags|=2,F):U):(V.flags|=2,F)):(V.flags|=1048576,F)}function k(V){return r&&V.alternate===null&&(V.flags|=2),V}function R(V,F,U,ce){return F===null||F.tag!==6?(F=lf(U,V.mode,ce),F.return=V,F):(F=v(F,U),F.return=V,F)}function D(V,F,U,ce){var ke=U.type;return ke===L?se(V,F,U.props.children,ce,U.key):F!==null&&(F.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===Q&&Bg(ke)===F.type)?(ce=v(F,U.props),ce.ref=Ui(V,F,U),ce.return=V,ce):(ce=nc(U.type,U.key,U.props,null,V.mode,ce),ce.ref=Ui(V,F,U),ce.return=V,ce)}function K(V,F,U,ce){return F===null||F.tag!==4||F.stateNode.containerInfo!==U.containerInfo||F.stateNode.implementation!==U.implementation?(F=cf(U,V.mode,ce),F.return=V,F):(F=v(F,U.children||[]),F.return=V,F)}function se(V,F,U,ce,ke){return F===null||F.tag!==7?(F=Ds(U,V.mode,ce,ke),F.return=V,F):(F=v(F,U),F.return=V,F)}function ie(V,F,U){if(typeof F=="string"&&F!==""||typeof F=="number")return F=lf(""+F,V.mode,U),F.return=V,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case P:return U=nc(F.type,F.key,F.props,null,V.mode,U),U.ref=Ui(V,null,F),U.return=V,U;case M:return F=cf(F,V.mode,U),F.return=V,F;case Q:var ce=F._init;return ie(V,ce(F._payload),U)}if(tt(F)||B(F))return F=Ds(F,V.mode,U,null),F.return=V,F;Rl(V,F)}return null}function re(V,F,U,ce){var ke=F!==null?F.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return ke!==null?null:R(V,F,""+U,ce);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case P:return U.key===ke?D(V,F,U,ce):null;case M:return U.key===ke?K(V,F,U,ce):null;case Q:return ke=U._init,re(V,F,ke(U._payload),ce)}if(tt(U)||B(U))return ke!==null?null:se(V,F,U,ce,null);Rl(V,U)}return null}function he(V,F,U,ce,ke){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return V=V.get(U)||null,R(F,V,""+ce,ke);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case P:return V=V.get(ce.key===null?U:ce.key)||null,D(F,V,ce,ke);case M:return V=V.get(ce.key===null?U:ce.key)||null,K(F,V,ce,ke);case Q:var Ne=ce._init;return he(V,F,U,Ne(ce._payload),ke)}if(tt(ce)||B(ce))return V=V.get(U)||null,se(F,V,ce,ke,null);Rl(F,ce)}return null}function xe(V,F,U,ce){for(var ke=null,Ne=null,Te=F,Oe=F=0,Vt=null;Te!==null&&Oe<U.length;Oe++){Te.index>Oe?(Vt=Te,Te=null):Vt=Te.sibling;var Xe=re(V,Te,U[Oe],ce);if(Xe===null){Te===null&&(Te=Vt);break}r&&Te&&Xe.alternate===null&&o(V,Te),F=x(Xe,F,Oe),Ne===null?ke=Xe:Ne.sibling=Xe,Ne=Xe,Te=Vt}if(Oe===U.length)return c(V,Te),lt&&Ns(V,Oe),ke;if(Te===null){for(;Oe<U.length;Oe++)Te=ie(V,U[Oe],ce),Te!==null&&(F=x(Te,F,Oe),Ne===null?ke=Te:Ne.sibling=Te,Ne=Te);return lt&&Ns(V,Oe),ke}for(Te=f(V,Te);Oe<U.length;Oe++)Vt=he(Te,V,Oe,U[Oe],ce),Vt!==null&&(r&&Vt.alternate!==null&&Te.delete(Vt.key===null?Oe:Vt.key),F=x(Vt,F,Oe),Ne===null?ke=Vt:Ne.sibling=Vt,Ne=Vt);return r&&Te.forEach(function(os){return o(V,os)}),lt&&Ns(V,Oe),ke}function Se(V,F,U,ce){var ke=B(U);if(typeof ke!="function")throw Error(n(150));if(U=ke.call(U),U==null)throw Error(n(151));for(var Ne=ke=null,Te=F,Oe=F=0,Vt=null,Xe=U.next();Te!==null&&!Xe.done;Oe++,Xe=U.next()){Te.index>Oe?(Vt=Te,Te=null):Vt=Te.sibling;var os=re(V,Te,Xe.value,ce);if(os===null){Te===null&&(Te=Vt);break}r&&Te&&os.alternate===null&&o(V,Te),F=x(os,F,Oe),Ne===null?ke=os:Ne.sibling=os,Ne=os,Te=Vt}if(Xe.done)return c(V,Te),lt&&Ns(V,Oe),ke;if(Te===null){for(;!Xe.done;Oe++,Xe=U.next())Xe=ie(V,Xe.value,ce),Xe!==null&&(F=x(Xe,F,Oe),Ne===null?ke=Xe:Ne.sibling=Xe,Ne=Xe);return lt&&Ns(V,Oe),ke}for(Te=f(V,Te);!Xe.done;Oe++,Xe=U.next())Xe=he(Te,V,Oe,Xe.value,ce),Xe!==null&&(r&&Xe.alternate!==null&&Te.delete(Xe.key===null?Oe:Xe.key),F=x(Xe,F,Oe),Ne===null?ke=Xe:Ne.sibling=Xe,Ne=Xe);return r&&Te.forEach(function(FC){return o(V,FC)}),lt&&Ns(V,Oe),ke}function bt(V,F,U,ce){if(typeof U=="object"&&U!==null&&U.type===L&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case P:e:{for(var ke=U.key,Ne=F;Ne!==null;){if(Ne.key===ke){if(ke=U.type,ke===L){if(Ne.tag===7){c(V,Ne.sibling),F=v(Ne,U.props.children),F.return=V,V=F;break e}}else if(Ne.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===Q&&Bg(ke)===Ne.type){c(V,Ne.sibling),F=v(Ne,U.props),F.ref=Ui(V,Ne,U),F.return=V,V=F;break e}c(V,Ne);break}else o(V,Ne);Ne=Ne.sibling}U.type===L?(F=Ds(U.props.children,V.mode,ce,U.key),F.return=V,V=F):(ce=nc(U.type,U.key,U.props,null,V.mode,ce),ce.ref=Ui(V,F,U),ce.return=V,V=ce)}return k(V);case M:e:{for(Ne=U.key;F!==null;){if(F.key===Ne)if(F.tag===4&&F.stateNode.containerInfo===U.containerInfo&&F.stateNode.implementation===U.implementation){c(V,F.sibling),F=v(F,U.children||[]),F.return=V,V=F;break e}else{c(V,F);break}else o(V,F);F=F.sibling}F=cf(U,V.mode,ce),F.return=V,V=F}return k(V);case Q:return Ne=U._init,bt(V,F,Ne(U._payload),ce)}if(tt(U))return xe(V,F,U,ce);if(B(U))return Se(V,F,U,ce);Rl(V,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,F!==null&&F.tag===6?(c(V,F.sibling),F=v(F,U),F.return=V,V=F):(c(V,F),F=lf(U,V.mode,ce),F.return=V,V=F),k(V)):c(V,F)}return bt}var bo=Ug(!0),zg=Ug(!1),Ol=qr(null),Il=null,So=null,vd=null;function yd(){vd=So=Il=null}function xd(r){var o=Ol.current;at(Ol),r._currentValue=o}function wd(r,o,c){for(;r!==null;){var f=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),r===c)break;r=r.return}}function _o(r,o){Il=r,vd=So=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&o)!==0&&(cn=!0),r.firstContext=null)}function Pn(r){var o=r._currentValue;if(vd!==r)if(r={context:r,memoizedValue:o,next:null},So===null){if(Il===null)throw Error(n(308));So=r,Il.dependencies={lanes:0,firstContext:r}}else So=So.next=r;return o}var Ts=null;function bd(r){Ts===null?Ts=[r]:Ts.push(r)}function Wg(r,o,c,f){var v=o.interleaved;return v===null?(c.next=c,bd(o)):(c.next=v.next,v.next=c),o.interleaved=c,kr(r,f)}function kr(r,o){r.lanes|=o;var c=r.alternate;for(c!==null&&(c.lanes|=o),c=r,r=r.return;r!==null;)r.childLanes|=o,c=r.alternate,c!==null&&(c.childLanes|=o),c=r,r=r.return;return c.tag===3?c.stateNode:null}var Xr=!1;function Sd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hg(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function jr(r,o){return{eventTime:r,lane:o,tag:0,payload:null,callback:null,next:null}}function Qr(r,o,c){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(Ye&2)!==0){var v=f.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),f.pending=o,kr(r,c)}return v=f.interleaved,v===null?(o.next=o,bd(f)):(o.next=v.next,v.next=o),f.interleaved=o,kr(r,c)}function Ml(r,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var f=o.lanes;f&=r.pendingLanes,c|=f,o.lanes=c,Du(r,c)}}function Kg(r,o){var c=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var v=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var k={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};x===null?v=x=k:x=x.next=k,c=c.next}while(c!==null);x===null?v=x=o:x=x.next=o}else v=x=o;c={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:f.shared,effects:f.effects},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=o:r.next=o,c.lastBaseUpdate=o}function Dl(r,o,c,f){var v=r.updateQueue;Xr=!1;var x=v.firstBaseUpdate,k=v.lastBaseUpdate,R=v.shared.pending;if(R!==null){v.shared.pending=null;var D=R,K=D.next;D.next=null,k===null?x=K:k.next=K,k=D;var se=r.alternate;se!==null&&(se=se.updateQueue,R=se.lastBaseUpdate,R!==k&&(R===null?se.firstBaseUpdate=K:R.next=K,se.lastBaseUpdate=D))}if(x!==null){var ie=v.baseState;k=0,se=K=D=null,R=x;do{var re=R.lane,he=R.eventTime;if((f&re)===re){se!==null&&(se=se.next={eventTime:he,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var xe=r,Se=R;switch(re=o,he=c,Se.tag){case 1:if(xe=Se.payload,typeof xe=="function"){ie=xe.call(he,ie,re);break e}ie=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Se.payload,re=typeof xe=="function"?xe.call(he,ie,re):xe,re==null)break e;ie=J({},ie,re);break e;case 2:Xr=!0}}R.callback!==null&&R.lane!==0&&(r.flags|=64,re=v.effects,re===null?v.effects=[R]:re.push(R))}else he={eventTime:he,lane:re,tag:R.tag,payload:R.payload,callback:R.callback,next:null},se===null?(K=se=he,D=ie):se=se.next=he,k|=re;if(R=R.next,R===null){if(R=v.shared.pending,R===null)break;re=R,R=re.next,re.next=null,v.lastBaseUpdate=re,v.shared.pending=null}}while(!0);if(se===null&&(D=ie),v.baseState=D,v.firstBaseUpdate=K,v.lastBaseUpdate=se,o=v.shared.interleaved,o!==null){v=o;do k|=v.lane,v=v.next;while(v!==o)}else x===null&&(v.shared.lanes=0);Rs|=k,r.lanes=k,r.memoizedState=ie}}function Gg(r,o,c){if(r=o.effects,o.effects=null,r!==null)for(o=0;o<r.length;o++){var f=r[o],v=f.callback;if(v!==null){if(f.callback=null,f=c,typeof v!="function")throw Error(n(191,v));v.call(f)}}}var zi={},ir=qr(zi),Wi=qr(zi),Hi=qr(zi);function Ps(r){if(r===zi)throw Error(n(174));return r}function _d(r,o){switch(rt(Hi,o),rt(Wi,r),rt(ir,zi),r=o.nodeType,r){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:_s(null,"");break;default:r=r===8?o.parentNode:o,o=r.namespaceURI||null,r=r.tagName,o=_s(o,r)}at(ir),rt(ir,o)}function ko(){at(ir),at(Wi),at(Hi)}function qg(r){Ps(Hi.current);var o=Ps(ir.current),c=_s(o,r.type);o!==c&&(rt(Wi,r),rt(ir,c))}function kd(r){Wi.current===r&&(at(ir),at(Wi))}var dt=qr(0);function Ll(r){for(var o=r;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var jd=[];function Cd(){for(var r=0;r<jd.length;r++)jd[r]._workInProgressVersionPrimary=null;jd.length=0}var $l=N.ReactCurrentDispatcher,Ed=N.ReactCurrentBatchConfig,As=0,ft=null,Tt=null,$t=null,Fl=!1,Ki=!1,Gi=0,aC=0;function Jt(){throw Error(n(321))}function Nd(r,o){if(o===null)return!1;for(var c=0;c<o.length&&c<r.length;c++)if(!Bn(r[c],o[c]))return!1;return!0}function Td(r,o,c,f,v,x){if(As=x,ft=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,$l.current=r===null||r.memoizedState===null?dC:fC,r=c(f,v),Ki){x=0;do{if(Ki=!1,Gi=0,25<=x)throw Error(n(301));x+=1,$t=Tt=null,o.updateQueue=null,$l.current=hC,r=c(f,v)}while(Ki)}if($l.current=Ul,o=Tt!==null&&Tt.next!==null,As=0,$t=Tt=ft=null,Fl=!1,o)throw Error(n(300));return r}function Pd(){var r=Gi!==0;return Gi=0,r}function ar(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?ft.memoizedState=$t=r:$t=$t.next=r,$t}function An(){if(Tt===null){var r=ft.alternate;r=r!==null?r.memoizedState:null}else r=Tt.next;var o=$t===null?ft.memoizedState:$t.next;if(o!==null)$t=o,Tt=r;else{if(r===null)throw Error(n(310));Tt=r,r={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},$t===null?ft.memoizedState=$t=r:$t=$t.next=r}return $t}function qi(r,o){return typeof o=="function"?o(r):o}function Ad(r){var o=An(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var f=Tt,v=f.baseQueue,x=c.pending;if(x!==null){if(v!==null){var k=v.next;v.next=x.next,x.next=k}f.baseQueue=v=x,c.pending=null}if(v!==null){x=v.next,f=f.baseState;var R=k=null,D=null,K=x;do{var se=K.lane;if((As&se)===se)D!==null&&(D=D.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),f=K.hasEagerState?K.eagerState:r(f,K.action);else{var ie={lane:se,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};D===null?(R=D=ie,k=f):D=D.next=ie,ft.lanes|=se,Rs|=se}K=K.next}while(K!==null&&K!==x);D===null?k=f:D.next=R,Bn(f,o.memoizedState)||(cn=!0),o.memoizedState=f,o.baseState=k,o.baseQueue=D,c.lastRenderedState=f}if(r=c.interleaved,r!==null){v=r;do x=v.lane,ft.lanes|=x,Rs|=x,v=v.next;while(v!==r)}else v===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function Rd(r){var o=An(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var f=c.dispatch,v=c.pending,x=o.memoizedState;if(v!==null){c.pending=null;var k=v=v.next;do x=r(x,k.action),k=k.next;while(k!==v);Bn(x,o.memoizedState)||(cn=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),c.lastRenderedState=x}return[x,f]}function Yg(){}function Jg(r,o){var c=ft,f=An(),v=o(),x=!Bn(f.memoizedState,v);if(x&&(f.memoizedState=v,cn=!0),f=f.queue,Od(Zg.bind(null,c,f,r),[r]),f.getSnapshot!==o||x||$t!==null&&$t.memoizedState.tag&1){if(c.flags|=2048,Yi(9,Qg.bind(null,c,f,v,o),void 0,null),Ft===null)throw Error(n(349));(As&30)!==0||Xg(c,o,v)}return v}function Xg(r,o,c){r.flags|=16384,r={getSnapshot:o,value:c},o=ft.updateQueue,o===null?(o={lastEffect:null,stores:null},ft.updateQueue=o,o.stores=[r]):(c=o.stores,c===null?o.stores=[r]:c.push(r))}function Qg(r,o,c,f){o.value=c,o.getSnapshot=f,ev(o)&&tv(r)}function Zg(r,o,c){return c(function(){ev(o)&&tv(r)})}function ev(r){var o=r.getSnapshot;r=r.value;try{var c=o();return!Bn(r,c)}catch{return!0}}function tv(r){var o=kr(r,1);o!==null&&Kn(o,r,1,-1)}function nv(r){var o=ar();return typeof r=="function"&&(r=r()),o.memoizedState=o.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:r},o.queue=r,r=r.dispatch=uC.bind(null,ft,r),[o.memoizedState,r]}function Yi(r,o,c,f){return r={tag:r,create:o,destroy:c,deps:f,next:null},o=ft.updateQueue,o===null?(o={lastEffect:null,stores:null},ft.updateQueue=o,o.lastEffect=r.next=r):(c=o.lastEffect,c===null?o.lastEffect=r.next=r:(f=c.next,c.next=r,r.next=f,o.lastEffect=r)),r}function rv(){return An().memoizedState}function Vl(r,o,c,f){var v=ar();ft.flags|=r,v.memoizedState=Yi(1|o,c,void 0,f===void 0?null:f)}function Bl(r,o,c,f){var v=An();f=f===void 0?null:f;var x=void 0;if(Tt!==null){var k=Tt.memoizedState;if(x=k.destroy,f!==null&&Nd(f,k.deps)){v.memoizedState=Yi(o,c,x,f);return}}ft.flags|=r,v.memoizedState=Yi(1|o,c,x,f)}function sv(r,o){return Vl(8390656,8,r,o)}function Od(r,o){return Bl(2048,8,r,o)}function ov(r,o){return Bl(4,2,r,o)}function iv(r,o){return Bl(4,4,r,o)}function av(r,o){if(typeof o=="function")return r=r(),o(r),function(){o(null)};if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function lv(r,o,c){return c=c!=null?c.concat([r]):null,Bl(4,4,av.bind(null,o,r),c)}function Id(){}function cv(r,o){var c=An();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&Nd(o,f[1])?f[0]:(c.memoizedState=[r,o],r)}function uv(r,o){var c=An();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&Nd(o,f[1])?f[0]:(r=r(),c.memoizedState=[r,o],r)}function dv(r,o,c){return(As&21)===0?(r.baseState&&(r.baseState=!1,cn=!0),r.memoizedState=c):(Bn(c,o)||(c=Bm(),ft.lanes|=c,Rs|=c,r.baseState=!0),o)}function lC(r,o){var c=Ze;Ze=c!==0&&4>c?c:4,r(!0);var f=Ed.transition;Ed.transition={};try{r(!1),o()}finally{Ze=c,Ed.transition=f}}function fv(){return An().memoizedState}function cC(r,o,c){var f=ns(r);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},hv(r))pv(o,c);else if(c=Wg(r,o,c,f),c!==null){var v=nn();Kn(c,r,f,v),mv(c,o,f)}}function uC(r,o,c){var f=ns(r),v={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(hv(r))pv(o,v);else{var x=r.alternate;if(r.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var k=o.lastRenderedState,R=x(k,c);if(v.hasEagerState=!0,v.eagerState=R,Bn(R,k)){var D=o.interleaved;D===null?(v.next=v,bd(o)):(v.next=D.next,D.next=v),o.interleaved=v;return}}catch{}finally{}c=Wg(r,o,v,f),c!==null&&(v=nn(),Kn(c,r,f,v),mv(c,o,f))}}function hv(r){var o=r.alternate;return r===ft||o!==null&&o===ft}function pv(r,o){Ki=Fl=!0;var c=r.pending;c===null?o.next=o:(o.next=c.next,c.next=o),r.pending=o}function mv(r,o,c){if((c&4194240)!==0){var f=o.lanes;f&=r.pendingLanes,c|=f,o.lanes=c,Du(r,c)}}var Ul={readContext:Pn,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},dC={readContext:Pn,useCallback:function(r,o){return ar().memoizedState=[r,o===void 0?null:o],r},useContext:Pn,useEffect:sv,useImperativeHandle:function(r,o,c){return c=c!=null?c.concat([r]):null,Vl(4194308,4,av.bind(null,o,r),c)},useLayoutEffect:function(r,o){return Vl(4194308,4,r,o)},useInsertionEffect:function(r,o){return Vl(4,2,r,o)},useMemo:function(r,o){var c=ar();return o=o===void 0?null:o,r=r(),c.memoizedState=[r,o],r},useReducer:function(r,o,c){var f=ar();return o=c!==void 0?c(o):o,f.memoizedState=f.baseState=o,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:o},f.queue=r,r=r.dispatch=cC.bind(null,ft,r),[f.memoizedState,r]},useRef:function(r){var o=ar();return r={current:r},o.memoizedState=r},useState:nv,useDebugValue:Id,useDeferredValue:function(r){return ar().memoizedState=r},useTransition:function(){var r=nv(!1),o=r[0];return r=lC.bind(null,r[1]),ar().memoizedState=r,[o,r]},useMutableSource:function(){},useSyncExternalStore:function(r,o,c){var f=ft,v=ar();if(lt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=o(),Ft===null)throw Error(n(349));(As&30)!==0||Xg(f,o,c)}v.memoizedState=c;var x={value:c,getSnapshot:o};return v.queue=x,sv(Zg.bind(null,f,x,r),[r]),f.flags|=2048,Yi(9,Qg.bind(null,f,x,c,o),void 0,null),c},useId:function(){var r=ar(),o=Ft.identifierPrefix;if(lt){var c=_r,f=Sr;c=(f&~(1<<32-Vn(f)-1)).toString(32)+c,o=":"+o+"R"+c,c=Gi++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=aC++,o=":"+o+"r"+c.toString(32)+":";return r.memoizedState=o},unstable_isNewReconciler:!1},fC={readContext:Pn,useCallback:cv,useContext:Pn,useEffect:Od,useImperativeHandle:lv,useInsertionEffect:ov,useLayoutEffect:iv,useMemo:uv,useReducer:Ad,useRef:rv,useState:function(){return Ad(qi)},useDebugValue:Id,useDeferredValue:function(r){var o=An();return dv(o,Tt.memoizedState,r)},useTransition:function(){var r=Ad(qi)[0],o=An().memoizedState;return[r,o]},useMutableSource:Yg,useSyncExternalStore:Jg,useId:fv,unstable_isNewReconciler:!1},hC={readContext:Pn,useCallback:cv,useContext:Pn,useEffect:Od,useImperativeHandle:lv,useInsertionEffect:ov,useLayoutEffect:iv,useMemo:uv,useReducer:Rd,useRef:rv,useState:function(){return Rd(qi)},useDebugValue:Id,useDeferredValue:function(r){var o=An();return Tt===null?o.memoizedState=r:dv(o,Tt.memoizedState,r)},useTransition:function(){var r=Rd(qi)[0],o=An().memoizedState;return[r,o]},useMutableSource:Yg,useSyncExternalStore:Jg,useId:fv,unstable_isNewReconciler:!1};function zn(r,o){if(r&&r.defaultProps){o=J({},o),r=r.defaultProps;for(var c in r)o[c]===void 0&&(o[c]=r[c]);return o}return o}function Md(r,o,c,f){o=r.memoizedState,c=c(f,o),c=c==null?o:J({},o,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var zl={isMounted:function(r){return(r=r._reactInternals)?ks(r)===r:!1},enqueueSetState:function(r,o,c){r=r._reactInternals;var f=nn(),v=ns(r),x=jr(f,v);x.payload=o,c!=null&&(x.callback=c),o=Qr(r,x,v),o!==null&&(Kn(o,r,v,f),Ml(o,r,v))},enqueueReplaceState:function(r,o,c){r=r._reactInternals;var f=nn(),v=ns(r),x=jr(f,v);x.tag=1,x.payload=o,c!=null&&(x.callback=c),o=Qr(r,x,v),o!==null&&(Kn(o,r,v,f),Ml(o,r,v))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var c=nn(),f=ns(r),v=jr(c,f);v.tag=2,o!=null&&(v.callback=o),o=Qr(r,v,f),o!==null&&(Kn(o,r,f,c),Ml(o,r,f))}};function gv(r,o,c,f,v,x,k){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,x,k):o.prototype&&o.prototype.isPureReactComponent?!Mi(c,f)||!Mi(v,x):!0}function vv(r,o,c){var f=!1,v=Yr,x=o.contextType;return typeof x=="object"&&x!==null?x=Pn(x):(v=ln(o)?Cs:Yt.current,f=o.contextTypes,x=(f=f!=null)?vo(r,v):Yr),o=new o(c,x),r.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=zl,r.stateNode=o,o._reactInternals=r,f&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=v,r.__reactInternalMemoizedMaskedChildContext=x),o}function yv(r,o,c,f){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,f),o.state!==r&&zl.enqueueReplaceState(o,o.state,null)}function Dd(r,o,c,f){var v=r.stateNode;v.props=c,v.state=r.memoizedState,v.refs={},Sd(r);var x=o.contextType;typeof x=="object"&&x!==null?v.context=Pn(x):(x=ln(o)?Cs:Yt.current,v.context=vo(r,x)),v.state=r.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(Md(r,o,x,c),v.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(o=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),o!==v.state&&zl.enqueueReplaceState(v,v.state,null),Dl(r,c,v,f),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308)}function jo(r,o){try{var c="",f=o;do c+=q(f),f=f.return;while(f);var v=c}catch(x){v=`
Error generating stack: `+x.message+`
`+x.stack}return{value:r,source:o,stack:v,digest:null}}function Ld(r,o,c){return{value:r,source:null,stack:c??null,digest:o??null}}function $d(r,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var pC=typeof WeakMap=="function"?WeakMap:Map;function xv(r,o,c){c=jr(-1,c),c.tag=3,c.payload={element:null};var f=o.value;return c.callback=function(){Jl||(Jl=!0,Zd=f),$d(r,o)},c}function wv(r,o,c){c=jr(-1,c),c.tag=3;var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var v=o.value;c.payload=function(){return f(v)},c.callback=function(){$d(r,o)}}var x=r.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(c.callback=function(){$d(r,o),typeof f!="function"&&(es===null?es=new Set([this]):es.add(this));var k=o.stack;this.componentDidCatch(o.value,{componentStack:k!==null?k:""})}),c}function bv(r,o,c){var f=r.pingCache;if(f===null){f=r.pingCache=new pC;var v=new Set;f.set(o,v)}else v=f.get(o),v===void 0&&(v=new Set,f.set(o,v));v.has(c)||(v.add(c),r=NC.bind(null,r,o,c),o.then(r,r))}function Sv(r){do{var o;if((o=r.tag===13)&&(o=r.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return r;r=r.return}while(r!==null);return null}function _v(r,o,c,f,v){return(r.mode&1)===0?(r===o?r.flags|=65536:(r.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=jr(-1,1),o.tag=2,Qr(c,o,1))),c.lanes|=1),r):(r.flags|=65536,r.lanes=v,r)}var mC=N.ReactCurrentOwner,cn=!1;function tn(r,o,c,f){o.child=r===null?zg(o,null,c,f):bo(o,r.child,c,f)}function kv(r,o,c,f,v){c=c.render;var x=o.ref;return _o(o,v),f=Td(r,o,c,f,x,v),c=Pd(),r!==null&&!cn?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~v,Cr(r,o,v)):(lt&&c&&fd(o),o.flags|=1,tn(r,o,f,v),o.child)}function jv(r,o,c,f,v){if(r===null){var x=c.type;return typeof x=="function"&&!af(x)&&x.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=x,Cv(r,o,x,f,v)):(r=nc(c.type,null,f,o,o.mode,v),r.ref=o.ref,r.return=o,o.child=r)}if(x=r.child,(r.lanes&v)===0){var k=x.memoizedProps;if(c=c.compare,c=c!==null?c:Mi,c(k,f)&&r.ref===o.ref)return Cr(r,o,v)}return o.flags|=1,r=ss(x,f),r.ref=o.ref,r.return=o,o.child=r}function Cv(r,o,c,f,v){if(r!==null){var x=r.memoizedProps;if(Mi(x,f)&&r.ref===o.ref)if(cn=!1,o.pendingProps=f=x,(r.lanes&v)!==0)(r.flags&131072)!==0&&(cn=!0);else return o.lanes=r.lanes,Cr(r,o,v)}return Fd(r,o,c,f,v)}function Ev(r,o,c){var f=o.pendingProps,v=f.children,x=r!==null?r.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Eo,wn),wn|=c;else{if((c&1073741824)===0)return r=x!==null?x.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:r,cachePool:null,transitions:null},o.updateQueue=null,rt(Eo,wn),wn|=r,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=x!==null?x.baseLanes:c,rt(Eo,wn),wn|=f}else x!==null?(f=x.baseLanes|c,o.memoizedState=null):f=c,rt(Eo,wn),wn|=f;return tn(r,o,v,c),o.child}function Nv(r,o){var c=o.ref;(r===null&&c!==null||r!==null&&r.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function Fd(r,o,c,f,v){var x=ln(c)?Cs:Yt.current;return x=vo(o,x),_o(o,v),c=Td(r,o,c,f,x,v),f=Pd(),r!==null&&!cn?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~v,Cr(r,o,v)):(lt&&f&&fd(o),o.flags|=1,tn(r,o,c,v),o.child)}function Tv(r,o,c,f,v){if(ln(c)){var x=!0;El(o)}else x=!1;if(_o(o,v),o.stateNode===null)Hl(r,o),vv(o,c,f),Dd(o,c,f,v),f=!0;else if(r===null){var k=o.stateNode,R=o.memoizedProps;k.props=R;var D=k.context,K=c.contextType;typeof K=="object"&&K!==null?K=Pn(K):(K=ln(c)?Cs:Yt.current,K=vo(o,K));var se=c.getDerivedStateFromProps,ie=typeof se=="function"||typeof k.getSnapshotBeforeUpdate=="function";ie||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(R!==f||D!==K)&&yv(o,k,f,K),Xr=!1;var re=o.memoizedState;k.state=re,Dl(o,f,k,v),D=o.memoizedState,R!==f||re!==D||an.current||Xr?(typeof se=="function"&&(Md(o,c,se,f),D=o.memoizedState),(R=Xr||gv(o,c,R,f,re,D,K))?(ie||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(o.flags|=4194308)):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=D),k.props=f,k.state=D,k.context=K,f=R):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{k=o.stateNode,Hg(r,o),R=o.memoizedProps,K=o.type===o.elementType?R:zn(o.type,R),k.props=K,ie=o.pendingProps,re=k.context,D=c.contextType,typeof D=="object"&&D!==null?D=Pn(D):(D=ln(c)?Cs:Yt.current,D=vo(o,D));var he=c.getDerivedStateFromProps;(se=typeof he=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(R!==ie||re!==D)&&yv(o,k,f,D),Xr=!1,re=o.memoizedState,k.state=re,Dl(o,f,k,v);var xe=o.memoizedState;R!==ie||re!==xe||an.current||Xr?(typeof he=="function"&&(Md(o,c,he,f),xe=o.memoizedState),(K=Xr||gv(o,c,K,f,re,xe,D)||!1)?(se||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(f,xe,D),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(f,xe,D)),typeof k.componentDidUpdate=="function"&&(o.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof k.componentDidUpdate!="function"||R===r.memoizedProps&&re===r.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&re===r.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=xe),k.props=f,k.state=xe,k.context=D,f=K):(typeof k.componentDidUpdate!="function"||R===r.memoizedProps&&re===r.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&re===r.memoizedState||(o.flags|=1024),f=!1)}return Vd(r,o,c,f,x,v)}function Vd(r,o,c,f,v,x){Nv(r,o);var k=(o.flags&128)!==0;if(!f&&!k)return v&&Ig(o,c,!1),Cr(r,o,x);f=o.stateNode,mC.current=o;var R=k&&typeof c.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,r!==null&&k?(o.child=bo(o,r.child,null,x),o.child=bo(o,null,R,x)):tn(r,o,R,x),o.memoizedState=f.state,v&&Ig(o,c,!0),o.child}function Pv(r){var o=r.stateNode;o.pendingContext?Rg(r,o.pendingContext,o.pendingContext!==o.context):o.context&&Rg(r,o.context,!1),_d(r,o.containerInfo)}function Av(r,o,c,f,v){return wo(),gd(v),o.flags|=256,tn(r,o,c,f),o.child}var Bd={dehydrated:null,treeContext:null,retryLane:0};function Ud(r){return{baseLanes:r,cachePool:null,transitions:null}}function Rv(r,o,c){var f=o.pendingProps,v=dt.current,x=!1,k=(o.flags&128)!==0,R;if((R=k)||(R=r!==null&&r.memoizedState===null?!1:(v&2)!==0),R?(x=!0,o.flags&=-129):(r===null||r.memoizedState!==null)&&(v|=1),rt(dt,v&1),r===null)return md(o),r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((o.mode&1)===0?o.lanes=1:r.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(k=f.children,r=f.fallback,x?(f=o.mode,x=o.child,k={mode:"hidden",children:k},(f&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=k):x=rc(k,f,0,null),r=Ds(r,f,c,null),x.return=o,r.return=o,x.sibling=r,o.child=x,o.child.memoizedState=Ud(c),o.memoizedState=Bd,r):zd(o,k));if(v=r.memoizedState,v!==null&&(R=v.dehydrated,R!==null))return gC(r,o,k,f,R,v,c);if(x){x=f.fallback,k=o.mode,v=r.child,R=v.sibling;var D={mode:"hidden",children:f.children};return(k&1)===0&&o.child!==v?(f=o.child,f.childLanes=0,f.pendingProps=D,o.deletions=null):(f=ss(v,D),f.subtreeFlags=v.subtreeFlags&14680064),R!==null?x=ss(R,x):(x=Ds(x,k,c,null),x.flags|=2),x.return=o,f.return=o,f.sibling=x,o.child=f,f=x,x=o.child,k=r.child.memoizedState,k=k===null?Ud(c):{baseLanes:k.baseLanes|c,cachePool:null,transitions:k.transitions},x.memoizedState=k,x.childLanes=r.childLanes&~c,o.memoizedState=Bd,f}return x=r.child,r=x.sibling,f=ss(x,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=c),f.return=o,f.sibling=null,r!==null&&(c=o.deletions,c===null?(o.deletions=[r],o.flags|=16):c.push(r)),o.child=f,o.memoizedState=null,f}function zd(r,o){return o=rc({mode:"visible",children:o},r.mode,0,null),o.return=r,r.child=o}function Wl(r,o,c,f){return f!==null&&gd(f),bo(o,r.child,null,c),r=zd(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function gC(r,o,c,f,v,x,k){if(c)return o.flags&256?(o.flags&=-257,f=Ld(Error(n(422))),Wl(r,o,k,f)):o.memoizedState!==null?(o.child=r.child,o.flags|=128,null):(x=f.fallback,v=o.mode,f=rc({mode:"visible",children:f.children},v,0,null),x=Ds(x,v,k,null),x.flags|=2,f.return=o,x.return=o,f.sibling=x,o.child=f,(o.mode&1)!==0&&bo(o,r.child,null,k),o.child.memoizedState=Ud(k),o.memoizedState=Bd,x);if((o.mode&1)===0)return Wl(r,o,k,null);if(v.data==="$!"){if(f=v.nextSibling&&v.nextSibling.dataset,f)var R=f.dgst;return f=R,x=Error(n(419)),f=Ld(x,f,void 0),Wl(r,o,k,f)}if(R=(k&r.childLanes)!==0,cn||R){if(f=Ft,f!==null){switch(k&-k){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(f.suspendedLanes|k))!==0?0:v,v!==0&&v!==x.retryLane&&(x.retryLane=v,kr(r,v),Kn(f,r,v,-1))}return of(),f=Ld(Error(n(421))),Wl(r,o,k,f)}return v.data==="$?"?(o.flags|=128,o.child=r.child,o=TC.bind(null,r),v._reactRetry=o,null):(r=x.treeContext,xn=Gr(v.nextSibling),yn=o,lt=!0,Un=null,r!==null&&(Nn[Tn++]=Sr,Nn[Tn++]=_r,Nn[Tn++]=Es,Sr=r.id,_r=r.overflow,Es=o),o=zd(o,f.children),o.flags|=4096,o)}function Ov(r,o,c){r.lanes|=o;var f=r.alternate;f!==null&&(f.lanes|=o),wd(r.return,o,c)}function Wd(r,o,c,f,v){var x=r.memoizedState;x===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:v}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=f,x.tail=c,x.tailMode=v)}function Iv(r,o,c){var f=o.pendingProps,v=f.revealOrder,x=f.tail;if(tn(r,o,f.children,c),f=dt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Ov(r,c,o);else if(r.tag===19)Ov(r,c,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}f&=1}if(rt(dt,f),(o.mode&1)===0)o.memoizedState=null;else switch(v){case"forwards":for(c=o.child,v=null;c!==null;)r=c.alternate,r!==null&&Ll(r)===null&&(v=c),c=c.sibling;c=v,c===null?(v=o.child,o.child=null):(v=c.sibling,c.sibling=null),Wd(o,!1,v,c,x);break;case"backwards":for(c=null,v=o.child,o.child=null;v!==null;){if(r=v.alternate,r!==null&&Ll(r)===null){o.child=v;break}r=v.sibling,v.sibling=c,c=v,v=r}Wd(o,!0,c,null,x);break;case"together":Wd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Hl(r,o){(o.mode&1)===0&&r!==null&&(r.alternate=null,o.alternate=null,o.flags|=2)}function Cr(r,o,c){if(r!==null&&(o.dependencies=r.dependencies),Rs|=o.lanes,(c&o.childLanes)===0)return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,c=ss(r,r.pendingProps),o.child=c,c.return=o;r.sibling!==null;)r=r.sibling,c=c.sibling=ss(r,r.pendingProps),c.return=o;c.sibling=null}return o.child}function vC(r,o,c){switch(o.tag){case 3:Pv(o),wo();break;case 5:qg(o);break;case 1:ln(o.type)&&El(o);break;case 4:_d(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,v=o.memoizedProps.value;rt(Ol,f._currentValue),f._currentValue=v;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(rt(dt,dt.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?Rv(r,o,c):(rt(dt,dt.current&1),r=Cr(r,o,c),r!==null?r.sibling:null);rt(dt,dt.current&1);break;case 19:if(f=(c&o.childLanes)!==0,(r.flags&128)!==0){if(f)return Iv(r,o,c);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),rt(dt,dt.current),f)break;return null;case 22:case 23:return o.lanes=0,Ev(r,o,c)}return Cr(r,o,c)}var Mv,Hd,Dv,Lv;Mv=function(r,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Hd=function(){},Dv=function(r,o,c,f){var v=r.memoizedProps;if(v!==f){r=o.stateNode,Ps(ir.current);var x=null;switch(c){case"input":v=le(r,v),f=le(r,f),x=[];break;case"select":v=J({},v,{value:void 0}),f=J({},f,{value:void 0}),x=[];break;case"textarea":v=nt(r,v),f=nt(r,f),x=[];break;default:typeof v.onClick!="function"&&typeof f.onClick=="function"&&(r.onclick=kl)}Ut(c,f);var k;c=null;for(K in v)if(!f.hasOwnProperty(K)&&v.hasOwnProperty(K)&&v[K]!=null)if(K==="style"){var R=v[K];for(k in R)R.hasOwnProperty(k)&&(c||(c={}),c[k]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(i.hasOwnProperty(K)?x||(x=[]):(x=x||[]).push(K,null));for(K in f){var D=f[K];if(R=v?.[K],f.hasOwnProperty(K)&&D!==R&&(D!=null||R!=null))if(K==="style")if(R){for(k in R)!R.hasOwnProperty(k)||D&&D.hasOwnProperty(k)||(c||(c={}),c[k]="");for(k in D)D.hasOwnProperty(k)&&R[k]!==D[k]&&(c||(c={}),c[k]=D[k])}else c||(x||(x=[]),x.push(K,c)),c=D;else K==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,R=R?R.__html:void 0,D!=null&&R!==D&&(x=x||[]).push(K,D)):K==="children"?typeof D!="string"&&typeof D!="number"||(x=x||[]).push(K,""+D):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(i.hasOwnProperty(K)?(D!=null&&K==="onScroll"&&it("scroll",r),x||R===D||(x=[])):(x=x||[]).push(K,D))}c&&(x=x||[]).push("style",c);var K=x;(o.updateQueue=K)&&(o.flags|=4)}},Lv=function(r,o,c,f){c!==f&&(o.flags|=4)};function Ji(r,o){if(!lt)switch(r.tailMode){case"hidden":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function Xt(r){var o=r.alternate!==null&&r.alternate.child===r.child,c=0,f=0;if(o)for(var v=r.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags&14680064,f|=v.flags&14680064,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=f,r.childLanes=c,o}function yC(r,o,c){var f=o.pendingProps;switch(hd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(o),null;case 1:return ln(o.type)&&Cl(),Xt(o),null;case 3:return f=o.stateNode,ko(),at(an),at(Yt),Cd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(Al(o)?o.flags|=4:r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Un!==null&&(nf(Un),Un=null))),Hd(r,o),Xt(o),null;case 5:kd(o);var v=Ps(Hi.current);if(c=o.type,r!==null&&o.stateNode!=null)Dv(r,o,c,f,v),r.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(n(166));return Xt(o),null}if(r=Ps(ir.current),Al(o)){f=o.stateNode,c=o.type;var x=o.memoizedProps;switch(f[or]=o,f[Vi]=x,r=(o.mode&1)!==0,c){case"dialog":it("cancel",f),it("close",f);break;case"iframe":case"object":case"embed":it("load",f);break;case"video":case"audio":for(v=0;v<Li.length;v++)it(Li[v],f);break;case"source":it("error",f);break;case"img":case"image":case"link":it("error",f),it("load",f);break;case"details":it("toggle",f);break;case"input":me(f,x),it("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!x.multiple},it("invalid",f);break;case"textarea":Bt(f,x),it("invalid",f)}Ut(c,x),v=null;for(var k in x)if(x.hasOwnProperty(k)){var R=x[k];k==="children"?typeof R=="string"?f.textContent!==R&&(x.suppressHydrationWarning!==!0&&_l(f.textContent,R,r),v=["children",R]):typeof R=="number"&&f.textContent!==""+R&&(x.suppressHydrationWarning!==!0&&_l(f.textContent,R,r),v=["children",""+R]):i.hasOwnProperty(k)&&R!=null&&k==="onScroll"&&it("scroll",f)}switch(c){case"input":ot(f),Fe(f,x,!0);break;case"textarea":ot(f),nr(f);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(f.onclick=kl)}f=v,o.updateQueue=f,f!==null&&(o.flags|=4)}else{k=v.nodeType===9?v:v.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=xr(c)),r==="http://www.w3.org/1999/xhtml"?c==="script"?(r=k.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof f.is=="string"?r=k.createElement(c,{is:f.is}):(r=k.createElement(c),c==="select"&&(k=r,f.multiple?k.multiple=!0:f.size&&(k.size=f.size))):r=k.createElementNS(r,c),r[or]=o,r[Vi]=f,Mv(r,o,!1,!1),o.stateNode=r;e:{switch(k=gt(c,f),c){case"dialog":it("cancel",r),it("close",r),v=f;break;case"iframe":case"object":case"embed":it("load",r),v=f;break;case"video":case"audio":for(v=0;v<Li.length;v++)it(Li[v],r);v=f;break;case"source":it("error",r),v=f;break;case"img":case"image":case"link":it("error",r),it("load",r),v=f;break;case"details":it("toggle",r),v=f;break;case"input":me(r,f),v=le(r,f),it("invalid",r);break;case"option":v=f;break;case"select":r._wrapperState={wasMultiple:!!f.multiple},v=J({},f,{value:void 0}),it("invalid",r);break;case"textarea":Bt(r,f),v=nt(r,f),it("invalid",r);break;default:v=f}Ut(c,v),R=v;for(x in R)if(R.hasOwnProperty(x)){var D=R[x];x==="style"?ut(r,D):x==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&ye(r,D)):x==="children"?typeof D=="string"?(c!=="textarea"||D!=="")&&$e(r,D):typeof D=="number"&&$e(r,""+D):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(i.hasOwnProperty(x)?D!=null&&x==="onScroll"&&it("scroll",r):D!=null&&E(r,x,D,k))}switch(c){case"input":ot(r),Fe(r,f,!1);break;case"textarea":ot(r),nr(r);break;case"option":f.value!=null&&r.setAttribute("value",""+de(f.value));break;case"select":r.multiple=!!f.multiple,x=f.value,x!=null?Ot(r,!!f.multiple,x,!1):f.defaultValue!=null&&Ot(r,!!f.multiple,f.defaultValue,!0);break;default:typeof v.onClick=="function"&&(r.onclick=kl)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Xt(o),null;case 6:if(r&&o.stateNode!=null)Lv(r,o,r.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(n(166));if(c=Ps(Hi.current),Ps(ir.current),Al(o)){if(f=o.stateNode,c=o.memoizedProps,f[or]=o,(x=f.nodeValue!==c)&&(r=yn,r!==null))switch(r.tag){case 3:_l(f.nodeValue,c,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&_l(f.nodeValue,c,(r.mode&1)!==0)}x&&(o.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[or]=o,o.stateNode=f}return Xt(o),null;case 13:if(at(dt),f=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(lt&&xn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Vg(),wo(),o.flags|=98560,x=!1;else if(x=Al(o),f!==null&&f.dehydrated!==null){if(r===null){if(!x)throw Error(n(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[or]=o}else wo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Xt(o),x=!1}else Un!==null&&(nf(Un),Un=null),x=!0;if(!x)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(f=f!==null,f!==(r!==null&&r.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(r===null||(dt.current&1)!==0?Pt===0&&(Pt=3):of())),o.updateQueue!==null&&(o.flags|=4),Xt(o),null);case 4:return ko(),Hd(r,o),r===null&&$i(o.stateNode.containerInfo),Xt(o),null;case 10:return xd(o.type._context),Xt(o),null;case 17:return ln(o.type)&&Cl(),Xt(o),null;case 19:if(at(dt),x=o.memoizedState,x===null)return Xt(o),null;if(f=(o.flags&128)!==0,k=x.rendering,k===null)if(f)Ji(x,!1);else{if(Pt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(k=Ll(r),k!==null){for(o.flags|=128,Ji(x,!1),f=k.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=c,c=o.child;c!==null;)x=c,r=f,x.flags&=14680066,k=x.alternate,k===null?(x.childLanes=0,x.lanes=r,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=k.childLanes,x.lanes=k.lanes,x.child=k.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=k.memoizedProps,x.memoizedState=k.memoizedState,x.updateQueue=k.updateQueue,x.type=k.type,r=k.dependencies,x.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),c=c.sibling;return rt(dt,dt.current&1|2),o.child}r=r.sibling}x.tail!==null&&wt()>No&&(o.flags|=128,f=!0,Ji(x,!1),o.lanes=4194304)}else{if(!f)if(r=Ll(k),r!==null){if(o.flags|=128,f=!0,c=r.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),Ji(x,!0),x.tail===null&&x.tailMode==="hidden"&&!k.alternate&&!lt)return Xt(o),null}else 2*wt()-x.renderingStartTime>No&&c!==1073741824&&(o.flags|=128,f=!0,Ji(x,!1),o.lanes=4194304);x.isBackwards?(k.sibling=o.child,o.child=k):(c=x.last,c!==null?c.sibling=k:o.child=k,x.last=k)}return x.tail!==null?(o=x.tail,x.rendering=o,x.tail=o.sibling,x.renderingStartTime=wt(),o.sibling=null,c=dt.current,rt(dt,f?c&1|2:c&1),o):(Xt(o),null);case 22:case 23:return sf(),f=o.memoizedState!==null,r!==null&&r.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(wn&1073741824)!==0&&(Xt(o),o.subtreeFlags&6&&(o.flags|=8192)):Xt(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function xC(r,o){switch(hd(o),o.tag){case 1:return ln(o.type)&&Cl(),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return ko(),at(an),at(Yt),Cd(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 5:return kd(o),null;case 13:if(at(dt),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));wo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return at(dt),null;case 4:return ko(),null;case 10:return xd(o.type._context),null;case 22:case 23:return sf(),null;case 24:return null;default:return null}}var Kl=!1,Qt=!1,wC=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Co(r,o){var c=r.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){vt(r,o,f)}else c.current=null}function Kd(r,o,c){try{c()}catch(f){vt(r,o,f)}}var $v=!1;function bC(r,o){if(sd=fl,r=gg(),Ju(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var v=f.anchorOffset,x=f.focusNode;f=f.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var k=0,R=-1,D=-1,K=0,se=0,ie=r,re=null;t:for(;;){for(var he;ie!==c||v!==0&&ie.nodeType!==3||(R=k+v),ie!==x||f!==0&&ie.nodeType!==3||(D=k+f),ie.nodeType===3&&(k+=ie.nodeValue.length),(he=ie.firstChild)!==null;)re=ie,ie=he;for(;;){if(ie===r)break t;if(re===c&&++K===v&&(R=k),re===x&&++se===f&&(D=k),(he=ie.nextSibling)!==null)break;ie=re,re=ie.parentNode}ie=he}c=R===-1||D===-1?null:{start:R,end:D}}else c=null}c=c||{start:0,end:0}}else c=null;for(od={focusedElem:r,selectionRange:c},fl=!1,ge=o;ge!==null;)if(o=ge,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,ge=r;else for(;ge!==null;){o=ge;try{var xe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(xe!==null){var Se=xe.memoizedProps,bt=xe.memoizedState,V=o.stateNode,F=V.getSnapshotBeforeUpdate(o.elementType===o.type?Se:zn(o.type,Se),bt);V.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var U=o.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ce){vt(o,o.return,ce)}if(r=o.sibling,r!==null){r.return=o.return,ge=r;break}ge=o.return}return xe=$v,$v=!1,xe}function Xi(r,o,c){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var v=f=f.next;do{if((v.tag&r)===r){var x=v.destroy;v.destroy=void 0,x!==void 0&&Kd(o,c,x)}v=v.next}while(v!==f)}}function Gl(r,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&r)===r){var f=c.create;c.destroy=f()}c=c.next}while(c!==o)}}function Gd(r){var o=r.ref;if(o!==null){var c=r.stateNode;switch(r.tag){case 5:r=c;break;default:r=c}typeof o=="function"?o(r):o.current=r}}function Fv(r){var o=r.alternate;o!==null&&(r.alternate=null,Fv(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&(delete o[or],delete o[Vi],delete o[cd],delete o[rC],delete o[sC])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Vv(r){return r.tag===5||r.tag===3||r.tag===4}function Bv(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Vv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function qd(r,o,c){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(r,o):c.insertBefore(r,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(r,c)):(o=c,o.appendChild(r)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=kl));else if(f!==4&&(r=r.child,r!==null))for(qd(r,o,c),r=r.sibling;r!==null;)qd(r,o,c),r=r.sibling}function Yd(r,o,c){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?c.insertBefore(r,o):c.appendChild(r);else if(f!==4&&(r=r.child,r!==null))for(Yd(r,o,c),r=r.sibling;r!==null;)Yd(r,o,c),r=r.sibling}var Wt=null,Wn=!1;function Zr(r,o,c){for(c=c.child;c!==null;)Uv(r,o,c),c=c.sibling}function Uv(r,o,c){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(il,c)}catch{}switch(c.tag){case 5:Qt||Co(c,o);case 6:var f=Wt,v=Wn;Wt=null,Zr(r,o,c),Wt=f,Wn=v,Wt!==null&&(Wn?(r=Wt,c=c.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)):Wt.removeChild(c.stateNode));break;case 18:Wt!==null&&(Wn?(r=Wt,c=c.stateNode,r.nodeType===8?ld(r.parentNode,c):r.nodeType===1&&ld(r,c),Ti(r)):ld(Wt,c.stateNode));break;case 4:f=Wt,v=Wn,Wt=c.stateNode.containerInfo,Wn=!0,Zr(r,o,c),Wt=f,Wn=v;break;case 0:case 11:case 14:case 15:if(!Qt&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){v=f=f.next;do{var x=v,k=x.destroy;x=x.tag,k!==void 0&&((x&2)!==0||(x&4)!==0)&&Kd(c,o,k),v=v.next}while(v!==f)}Zr(r,o,c);break;case 1:if(!Qt&&(Co(c,o),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(R){vt(c,o,R)}Zr(r,o,c);break;case 21:Zr(r,o,c);break;case 22:c.mode&1?(Qt=(f=Qt)||c.memoizedState!==null,Zr(r,o,c),Qt=f):Zr(r,o,c);break;default:Zr(r,o,c)}}function zv(r){var o=r.updateQueue;if(o!==null){r.updateQueue=null;var c=r.stateNode;c===null&&(c=r.stateNode=new wC),o.forEach(function(f){var v=PC.bind(null,r,f);c.has(f)||(c.add(f),f.then(v,v))})}}function Hn(r,o){var c=o.deletions;if(c!==null)for(var f=0;f<c.length;f++){var v=c[f];try{var x=r,k=o,R=k;e:for(;R!==null;){switch(R.tag){case 5:Wt=R.stateNode,Wn=!1;break e;case 3:Wt=R.stateNode.containerInfo,Wn=!0;break e;case 4:Wt=R.stateNode.containerInfo,Wn=!0;break e}R=R.return}if(Wt===null)throw Error(n(160));Uv(x,k,v),Wt=null,Wn=!1;var D=v.alternate;D!==null&&(D.return=null),v.return=null}catch(K){vt(v,o,K)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Wv(o,r),o=o.sibling}function Wv(r,o){var c=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Hn(o,r),lr(r),f&4){try{Xi(3,r,r.return),Gl(3,r)}catch(Se){vt(r,r.return,Se)}try{Xi(5,r,r.return)}catch(Se){vt(r,r.return,Se)}}break;case 1:Hn(o,r),lr(r),f&512&&c!==null&&Co(c,c.return);break;case 5:if(Hn(o,r),lr(r),f&512&&c!==null&&Co(c,c.return),r.flags&32){var v=r.stateNode;try{$e(v,"")}catch(Se){vt(r,r.return,Se)}}if(f&4&&(v=r.stateNode,v!=null)){var x=r.memoizedProps,k=c!==null?c.memoizedProps:x,R=r.type,D=r.updateQueue;if(r.updateQueue=null,D!==null)try{R==="input"&&x.type==="radio"&&x.name!=null&&Ee(v,x),gt(R,k);var K=gt(R,x);for(k=0;k<D.length;k+=2){var se=D[k],ie=D[k+1];se==="style"?ut(v,ie):se==="dangerouslySetInnerHTML"?ye(v,ie):se==="children"?$e(v,ie):E(v,se,ie,K)}switch(R){case"input":Be(v,x);break;case"textarea":tr(v,x);break;case"select":var re=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!x.multiple;var he=x.value;he!=null?Ot(v,!!x.multiple,he,!1):re!==!!x.multiple&&(x.defaultValue!=null?Ot(v,!!x.multiple,x.defaultValue,!0):Ot(v,!!x.multiple,x.multiple?[]:"",!1))}v[Vi]=x}catch(Se){vt(r,r.return,Se)}}break;case 6:if(Hn(o,r),lr(r),f&4){if(r.stateNode===null)throw Error(n(162));v=r.stateNode,x=r.memoizedProps;try{v.nodeValue=x}catch(Se){vt(r,r.return,Se)}}break;case 3:if(Hn(o,r),lr(r),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Ti(o.containerInfo)}catch(Se){vt(r,r.return,Se)}break;case 4:Hn(o,r),lr(r);break;case 13:Hn(o,r),lr(r),v=r.child,v.flags&8192&&(x=v.memoizedState!==null,v.stateNode.isHidden=x,!x||v.alternate!==null&&v.alternate.memoizedState!==null||(Qd=wt())),f&4&&zv(r);break;case 22:if(se=c!==null&&c.memoizedState!==null,r.mode&1?(Qt=(K=Qt)||se,Hn(o,r),Qt=K):Hn(o,r),lr(r),f&8192){if(K=r.memoizedState!==null,(r.stateNode.isHidden=K)&&!se&&(r.mode&1)!==0)for(ge=r,se=r.child;se!==null;){for(ie=ge=se;ge!==null;){switch(re=ge,he=re.child,re.tag){case 0:case 11:case 14:case 15:Xi(4,re,re.return);break;case 1:Co(re,re.return);var xe=re.stateNode;if(typeof xe.componentWillUnmount=="function"){f=re,c=re.return;try{o=f,xe.props=o.memoizedProps,xe.state=o.memoizedState,xe.componentWillUnmount()}catch(Se){vt(f,c,Se)}}break;case 5:Co(re,re.return);break;case 22:if(re.memoizedState!==null){Gv(ie);continue}}he!==null?(he.return=re,ge=he):Gv(ie)}se=se.sibling}e:for(se=null,ie=r;;){if(ie.tag===5){if(se===null){se=ie;try{v=ie.stateNode,K?(x=v.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(R=ie.stateNode,D=ie.memoizedProps.style,k=D!=null&&D.hasOwnProperty("display")?D.display:null,R.style.display=It("display",k))}catch(Se){vt(r,r.return,Se)}}}else if(ie.tag===6){if(se===null)try{ie.stateNode.nodeValue=K?"":ie.memoizedProps}catch(Se){vt(r,r.return,Se)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===r)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===r)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===r)break e;se===ie&&(se=null),ie=ie.return}se===ie&&(se=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:Hn(o,r),lr(r),f&4&&zv(r);break;case 21:break;default:Hn(o,r),lr(r)}}function lr(r){var o=r.flags;if(o&2){try{e:{for(var c=r.return;c!==null;){if(Vv(c)){var f=c;break e}c=c.return}throw Error(n(160))}switch(f.tag){case 5:var v=f.stateNode;f.flags&32&&($e(v,""),f.flags&=-33);var x=Bv(r);Yd(r,x,v);break;case 3:case 4:var k=f.stateNode.containerInfo,R=Bv(r);qd(r,R,k);break;default:throw Error(n(161))}}catch(D){vt(r,r.return,D)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function SC(r,o,c){ge=r,Hv(r)}function Hv(r,o,c){for(var f=(r.mode&1)!==0;ge!==null;){var v=ge,x=v.child;if(v.tag===22&&f){var k=v.memoizedState!==null||Kl;if(!k){var R=v.alternate,D=R!==null&&R.memoizedState!==null||Qt;R=Kl;var K=Qt;if(Kl=k,(Qt=D)&&!K)for(ge=v;ge!==null;)k=ge,D=k.child,k.tag===22&&k.memoizedState!==null?qv(v):D!==null?(D.return=k,ge=D):qv(v);for(;x!==null;)ge=x,Hv(x),x=x.sibling;ge=v,Kl=R,Qt=K}Kv(r)}else(v.subtreeFlags&8772)!==0&&x!==null?(x.return=v,ge=x):Kv(r)}}function Kv(r){for(;ge!==null;){var o=ge;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Qt||Gl(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Qt)if(c===null)f.componentDidMount();else{var v=o.elementType===o.type?c.memoizedProps:zn(o.type,c.memoizedProps);f.componentDidUpdate(v,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var x=o.updateQueue;x!==null&&Gg(o,x,f);break;case 3:var k=o.updateQueue;if(k!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}Gg(o,k,c)}break;case 5:var R=o.stateNode;if(c===null&&o.flags&4){c=R;var D=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&c.focus();break;case"img":D.src&&(c.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var K=o.alternate;if(K!==null){var se=K.memoizedState;if(se!==null){var ie=se.dehydrated;ie!==null&&Ti(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Qt||o.flags&512&&Gd(o)}catch(re){vt(o,o.return,re)}}if(o===r){ge=null;break}if(c=o.sibling,c!==null){c.return=o.return,ge=c;break}ge=o.return}}function Gv(r){for(;ge!==null;){var o=ge;if(o===r){ge=null;break}var c=o.sibling;if(c!==null){c.return=o.return,ge=c;break}ge=o.return}}function qv(r){for(;ge!==null;){var o=ge;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{Gl(4,o)}catch(D){vt(o,c,D)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var v=o.return;try{f.componentDidMount()}catch(D){vt(o,v,D)}}var x=o.return;try{Gd(o)}catch(D){vt(o,x,D)}break;case 5:var k=o.return;try{Gd(o)}catch(D){vt(o,k,D)}}}catch(D){vt(o,o.return,D)}if(o===r){ge=null;break}var R=o.sibling;if(R!==null){R.return=o.return,ge=R;break}ge=o.return}}var _C=Math.ceil,ql=N.ReactCurrentDispatcher,Jd=N.ReactCurrentOwner,Rn=N.ReactCurrentBatchConfig,Ye=0,Ft=null,kt=null,Ht=0,wn=0,Eo=qr(0),Pt=0,Qi=null,Rs=0,Yl=0,Xd=0,Zi=null,un=null,Qd=0,No=1/0,Er=null,Jl=!1,Zd=null,es=null,Xl=!1,ts=null,Ql=0,ea=0,ef=null,Zl=-1,ec=0;function nn(){return(Ye&6)!==0?wt():Zl!==-1?Zl:Zl=wt()}function ns(r){return(r.mode&1)===0?1:(Ye&2)!==0&&Ht!==0?Ht&-Ht:iC.transition!==null?(ec===0&&(ec=Bm()),ec):(r=Ze,r!==0||(r=window.event,r=r===void 0?16:Jm(r.type)),r)}function Kn(r,o,c,f){if(50<ea)throw ea=0,ef=null,Error(n(185));ki(r,c,f),((Ye&2)===0||r!==Ft)&&(r===Ft&&((Ye&2)===0&&(Yl|=c),Pt===4&&rs(r,Ht)),dn(r,f),c===1&&Ye===0&&(o.mode&1)===0&&(No=wt()+500,Nl&&Jr()))}function dn(r,o){var c=r.callbackNode;ij(r,o);var f=cl(r,r===Ft?Ht:0);if(f===0)c!==null&&$m(c),r.callbackNode=null,r.callbackPriority=0;else if(o=f&-f,r.callbackPriority!==o){if(c!=null&&$m(c),o===1)r.tag===0?oC(Jv.bind(null,r)):Mg(Jv.bind(null,r)),tC(function(){(Ye&6)===0&&Jr()}),c=null;else{switch(Um(f)){case 1:c=Ou;break;case 4:c=Fm;break;case 16:c=ol;break;case 536870912:c=Vm;break;default:c=ol}c=sy(c,Yv.bind(null,r))}r.callbackPriority=o,r.callbackNode=c}}function Yv(r,o){if(Zl=-1,ec=0,(Ye&6)!==0)throw Error(n(327));var c=r.callbackNode;if(To()&&r.callbackNode!==c)return null;var f=cl(r,r===Ft?Ht:0);if(f===0)return null;if((f&30)!==0||(f&r.expiredLanes)!==0||o)o=tc(r,f);else{o=f;var v=Ye;Ye|=2;var x=Qv();(Ft!==r||Ht!==o)&&(Er=null,No=wt()+500,Is(r,o));do try{CC();break}catch(R){Xv(r,R)}while(!0);yd(),ql.current=x,Ye=v,kt!==null?o=0:(Ft=null,Ht=0,o=Pt)}if(o!==0){if(o===2&&(v=Iu(r),v!==0&&(f=v,o=tf(r,v))),o===1)throw c=Qi,Is(r,0),rs(r,f),dn(r,wt()),c;if(o===6)rs(r,f);else{if(v=r.current.alternate,(f&30)===0&&!kC(v)&&(o=tc(r,f),o===2&&(x=Iu(r),x!==0&&(f=x,o=tf(r,x))),o===1))throw c=Qi,Is(r,0),rs(r,f),dn(r,wt()),c;switch(r.finishedWork=v,r.finishedLanes=f,o){case 0:case 1:throw Error(n(345));case 2:Ms(r,un,Er);break;case 3:if(rs(r,f),(f&130023424)===f&&(o=Qd+500-wt(),10<o)){if(cl(r,0)!==0)break;if(v=r.suspendedLanes,(v&f)!==f){nn(),r.pingedLanes|=r.suspendedLanes&v;break}r.timeoutHandle=ad(Ms.bind(null,r,un,Er),o);break}Ms(r,un,Er);break;case 4:if(rs(r,f),(f&4194240)===f)break;for(o=r.eventTimes,v=-1;0<f;){var k=31-Vn(f);x=1<<k,k=o[k],k>v&&(v=k),f&=~x}if(f=v,f=wt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*_C(f/1960))-f,10<f){r.timeoutHandle=ad(Ms.bind(null,r,un,Er),f);break}Ms(r,un,Er);break;case 5:Ms(r,un,Er);break;default:throw Error(n(329))}}}return dn(r,wt()),r.callbackNode===c?Yv.bind(null,r):null}function tf(r,o){var c=Zi;return r.current.memoizedState.isDehydrated&&(Is(r,o).flags|=256),r=tc(r,o),r!==2&&(o=un,un=c,o!==null&&nf(o)),r}function nf(r){un===null?un=r:un.push.apply(un,r)}function kC(r){for(var o=r;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var v=c[f],x=v.getSnapshot;v=v.value;try{if(!Bn(x(),v))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function rs(r,o){for(o&=~Xd,o&=~Yl,r.suspendedLanes|=o,r.pingedLanes&=~o,r=r.expirationTimes;0<o;){var c=31-Vn(o),f=1<<c;r[c]=-1,o&=~f}}function Jv(r){if((Ye&6)!==0)throw Error(n(327));To();var o=cl(r,0);if((o&1)===0)return dn(r,wt()),null;var c=tc(r,o);if(r.tag!==0&&c===2){var f=Iu(r);f!==0&&(o=f,c=tf(r,f))}if(c===1)throw c=Qi,Is(r,0),rs(r,o),dn(r,wt()),c;if(c===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=o,Ms(r,un,Er),dn(r,wt()),null}function rf(r,o){var c=Ye;Ye|=1;try{return r(o)}finally{Ye=c,Ye===0&&(No=wt()+500,Nl&&Jr())}}function Os(r){ts!==null&&ts.tag===0&&(Ye&6)===0&&To();var o=Ye;Ye|=1;var c=Rn.transition,f=Ze;try{if(Rn.transition=null,Ze=1,r)return r()}finally{Ze=f,Rn.transition=c,Ye=o,(Ye&6)===0&&Jr()}}function sf(){wn=Eo.current,at(Eo)}function Is(r,o){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;if(c!==-1&&(r.timeoutHandle=-1,eC(c)),kt!==null)for(c=kt.return;c!==null;){var f=c;switch(hd(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Cl();break;case 3:ko(),at(an),at(Yt),Cd();break;case 5:kd(f);break;case 4:ko();break;case 13:at(dt);break;case 19:at(dt);break;case 10:xd(f.type._context);break;case 22:case 23:sf()}c=c.return}if(Ft=r,kt=r=ss(r.current,null),Ht=wn=o,Pt=0,Qi=null,Xd=Yl=Rs=0,un=Zi=null,Ts!==null){for(o=0;o<Ts.length;o++)if(c=Ts[o],f=c.interleaved,f!==null){c.interleaved=null;var v=f.next,x=c.pending;if(x!==null){var k=x.next;x.next=v,f.next=k}c.pending=f}Ts=null}return r}function Xv(r,o){do{var c=kt;try{if(yd(),$l.current=Ul,Fl){for(var f=ft.memoizedState;f!==null;){var v=f.queue;v!==null&&(v.pending=null),f=f.next}Fl=!1}if(As=0,$t=Tt=ft=null,Ki=!1,Gi=0,Jd.current=null,c===null||c.return===null){Pt=1,Qi=o,kt=null;break}e:{var x=r,k=c.return,R=c,D=o;if(o=Ht,R.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var K=D,se=R,ie=se.tag;if((se.mode&1)===0&&(ie===0||ie===11||ie===15)){var re=se.alternate;re?(se.updateQueue=re.updateQueue,se.memoizedState=re.memoizedState,se.lanes=re.lanes):(se.updateQueue=null,se.memoizedState=null)}var he=Sv(k);if(he!==null){he.flags&=-257,_v(he,k,R,x,o),he.mode&1&&bv(x,K,o),o=he,D=K;var xe=o.updateQueue;if(xe===null){var Se=new Set;Se.add(D),o.updateQueue=Se}else xe.add(D);break e}else{if((o&1)===0){bv(x,K,o),of();break e}D=Error(n(426))}}else if(lt&&R.mode&1){var bt=Sv(k);if(bt!==null){(bt.flags&65536)===0&&(bt.flags|=256),_v(bt,k,R,x,o),gd(jo(D,R));break e}}x=D=jo(D,R),Pt!==4&&(Pt=2),Zi===null?Zi=[x]:Zi.push(x),x=k;do{switch(x.tag){case 3:x.flags|=65536,o&=-o,x.lanes|=o;var V=xv(x,D,o);Kg(x,V);break e;case 1:R=D;var F=x.type,U=x.stateNode;if((x.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(es===null||!es.has(U)))){x.flags|=65536,o&=-o,x.lanes|=o;var ce=wv(x,R,o);Kg(x,ce);break e}}x=x.return}while(x!==null)}ey(c)}catch(ke){o=ke,kt===c&&c!==null&&(kt=c=c.return);continue}break}while(!0)}function Qv(){var r=ql.current;return ql.current=Ul,r===null?Ul:r}function of(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Ft===null||(Rs&268435455)===0&&(Yl&268435455)===0||rs(Ft,Ht)}function tc(r,o){var c=Ye;Ye|=2;var f=Qv();(Ft!==r||Ht!==o)&&(Er=null,Is(r,o));do try{jC();break}catch(v){Xv(r,v)}while(!0);if(yd(),Ye=c,ql.current=f,kt!==null)throw Error(n(261));return Ft=null,Ht=0,Pt}function jC(){for(;kt!==null;)Zv(kt)}function CC(){for(;kt!==null&&!Xk();)Zv(kt)}function Zv(r){var o=ry(r.alternate,r,wn);r.memoizedProps=r.pendingProps,o===null?ey(r):kt=o,Jd.current=null}function ey(r){var o=r;do{var c=o.alternate;if(r=o.return,(o.flags&32768)===0){if(c=yC(c,o,wn),c!==null){kt=c;return}}else{if(c=xC(c,o),c!==null){c.flags&=32767,kt=c;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Pt=6,kt=null;return}}if(o=o.sibling,o!==null){kt=o;return}kt=o=r}while(o!==null);Pt===0&&(Pt=5)}function Ms(r,o,c){var f=Ze,v=Rn.transition;try{Rn.transition=null,Ze=1,EC(r,o,c,f)}finally{Rn.transition=v,Ze=f}return null}function EC(r,o,c,f){do To();while(ts!==null);if((Ye&6)!==0)throw Error(n(327));c=r.finishedWork;var v=r.finishedLanes;if(c===null)return null;if(r.finishedWork=null,r.finishedLanes=0,c===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var x=c.lanes|c.childLanes;if(aj(r,x),r===Ft&&(kt=Ft=null,Ht=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Xl||(Xl=!0,sy(ol,function(){return To(),null})),x=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||x){x=Rn.transition,Rn.transition=null;var k=Ze;Ze=1;var R=Ye;Ye|=4,Jd.current=null,bC(r,c),Wv(c,r),Gj(od),fl=!!sd,od=sd=null,r.current=c,SC(c),Qk(),Ye=R,Ze=k,Rn.transition=x}else r.current=c;if(Xl&&(Xl=!1,ts=r,Ql=v),x=r.pendingLanes,x===0&&(es=null),tj(c.stateNode),dn(r,wt()),o!==null)for(f=r.onRecoverableError,c=0;c<o.length;c++)v=o[c],f(v.value,{componentStack:v.stack,digest:v.digest});if(Jl)throw Jl=!1,r=Zd,Zd=null,r;return(Ql&1)!==0&&r.tag!==0&&To(),x=r.pendingLanes,(x&1)!==0?r===ef?ea++:(ea=0,ef=r):ea=0,Jr(),null}function To(){if(ts!==null){var r=Um(Ql),o=Rn.transition,c=Ze;try{if(Rn.transition=null,Ze=16>r?16:r,ts===null)var f=!1;else{if(r=ts,ts=null,Ql=0,(Ye&6)!==0)throw Error(n(331));var v=Ye;for(Ye|=4,ge=r.current;ge!==null;){var x=ge,k=x.child;if((ge.flags&16)!==0){var R=x.deletions;if(R!==null){for(var D=0;D<R.length;D++){var K=R[D];for(ge=K;ge!==null;){var se=ge;switch(se.tag){case 0:case 11:case 15:Xi(8,se,x)}var ie=se.child;if(ie!==null)ie.return=se,ge=ie;else for(;ge!==null;){se=ge;var re=se.sibling,he=se.return;if(Fv(se),se===K){ge=null;break}if(re!==null){re.return=he,ge=re;break}ge=he}}}var xe=x.alternate;if(xe!==null){var Se=xe.child;if(Se!==null){xe.child=null;do{var bt=Se.sibling;Se.sibling=null,Se=bt}while(Se!==null)}}ge=x}}if((x.subtreeFlags&2064)!==0&&k!==null)k.return=x,ge=k;else e:for(;ge!==null;){if(x=ge,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:Xi(9,x,x.return)}var V=x.sibling;if(V!==null){V.return=x.return,ge=V;break e}ge=x.return}}var F=r.current;for(ge=F;ge!==null;){k=ge;var U=k.child;if((k.subtreeFlags&2064)!==0&&U!==null)U.return=k,ge=U;else e:for(k=F;ge!==null;){if(R=ge,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Gl(9,R)}}catch(ke){vt(R,R.return,ke)}if(R===k){ge=null;break e}var ce=R.sibling;if(ce!==null){ce.return=R.return,ge=ce;break e}ge=R.return}}if(Ye=v,Jr(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(il,r)}catch{}f=!0}return f}finally{Ze=c,Rn.transition=o}}return!1}function ty(r,o,c){o=jo(c,o),o=xv(r,o,1),r=Qr(r,o,1),o=nn(),r!==null&&(ki(r,1,o),dn(r,o))}function vt(r,o,c){if(r.tag===3)ty(r,r,c);else for(;o!==null;){if(o.tag===3){ty(o,r,c);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(es===null||!es.has(f))){r=jo(c,r),r=wv(o,r,1),o=Qr(o,r,1),r=nn(),o!==null&&(ki(o,1,r),dn(o,r));break}}o=o.return}}function NC(r,o,c){var f=r.pingCache;f!==null&&f.delete(o),o=nn(),r.pingedLanes|=r.suspendedLanes&c,Ft===r&&(Ht&c)===c&&(Pt===4||Pt===3&&(Ht&130023424)===Ht&&500>wt()-Qd?Is(r,0):Xd|=c),dn(r,o)}function ny(r,o){o===0&&((r.mode&1)===0?o=1:(o=ll,ll<<=1,(ll&130023424)===0&&(ll=4194304)));var c=nn();r=kr(r,o),r!==null&&(ki(r,o,c),dn(r,c))}function TC(r){var o=r.memoizedState,c=0;o!==null&&(c=o.retryLane),ny(r,c)}function PC(r,o){var c=0;switch(r.tag){case 13:var f=r.stateNode,v=r.memoizedState;v!==null&&(c=v.retryLane);break;case 19:f=r.stateNode;break;default:throw Error(n(314))}f!==null&&f.delete(o),ny(r,c)}var ry;ry=function(r,o,c){if(r!==null)if(r.memoizedProps!==o.pendingProps||an.current)cn=!0;else{if((r.lanes&c)===0&&(o.flags&128)===0)return cn=!1,vC(r,o,c);cn=(r.flags&131072)!==0}else cn=!1,lt&&(o.flags&1048576)!==0&&Dg(o,Pl,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;Hl(r,o),r=o.pendingProps;var v=vo(o,Yt.current);_o(o,c),v=Td(null,o,f,r,v,c);var x=Pd();return o.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,ln(f)?(x=!0,El(o)):x=!1,o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Sd(o),v.updater=zl,o.stateNode=v,v._reactInternals=o,Dd(o,f,r,c),o=Vd(null,o,f,!0,x,c)):(o.tag=0,lt&&x&&fd(o),tn(null,o,v,c),o=o.child),o;case 16:f=o.elementType;e:{switch(Hl(r,o),r=o.pendingProps,v=f._init,f=v(f._payload),o.type=f,v=o.tag=RC(f),r=zn(f,r),v){case 0:o=Fd(null,o,f,r,c);break e;case 1:o=Tv(null,o,f,r,c);break e;case 11:o=kv(null,o,f,r,c);break e;case 14:o=jv(null,o,f,zn(f.type,r),c);break e}throw Error(n(306,f,""))}return o;case 0:return f=o.type,v=o.pendingProps,v=o.elementType===f?v:zn(f,v),Fd(r,o,f,v,c);case 1:return f=o.type,v=o.pendingProps,v=o.elementType===f?v:zn(f,v),Tv(r,o,f,v,c);case 3:e:{if(Pv(o),r===null)throw Error(n(387));f=o.pendingProps,x=o.memoizedState,v=x.element,Hg(r,o),Dl(o,f,null,c);var k=o.memoizedState;if(f=k.element,x.isDehydrated)if(x={element:f,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){v=jo(Error(n(423)),o),o=Av(r,o,f,c,v);break e}else if(f!==v){v=jo(Error(n(424)),o),o=Av(r,o,f,c,v);break e}else for(xn=Gr(o.stateNode.containerInfo.firstChild),yn=o,lt=!0,Un=null,c=zg(o,null,f,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(wo(),f===v){o=Cr(r,o,c);break e}tn(r,o,f,c)}o=o.child}return o;case 5:return qg(o),r===null&&md(o),f=o.type,v=o.pendingProps,x=r!==null?r.memoizedProps:null,k=v.children,id(f,v)?k=null:x!==null&&id(f,x)&&(o.flags|=32),Nv(r,o),tn(r,o,k,c),o.child;case 6:return r===null&&md(o),null;case 13:return Rv(r,o,c);case 4:return _d(o,o.stateNode.containerInfo),f=o.pendingProps,r===null?o.child=bo(o,null,f,c):tn(r,o,f,c),o.child;case 11:return f=o.type,v=o.pendingProps,v=o.elementType===f?v:zn(f,v),kv(r,o,f,v,c);case 7:return tn(r,o,o.pendingProps,c),o.child;case 8:return tn(r,o,o.pendingProps.children,c),o.child;case 12:return tn(r,o,o.pendingProps.children,c),o.child;case 10:e:{if(f=o.type._context,v=o.pendingProps,x=o.memoizedProps,k=v.value,rt(Ol,f._currentValue),f._currentValue=k,x!==null)if(Bn(x.value,k)){if(x.children===v.children&&!an.current){o=Cr(r,o,c);break e}}else for(x=o.child,x!==null&&(x.return=o);x!==null;){var R=x.dependencies;if(R!==null){k=x.child;for(var D=R.firstContext;D!==null;){if(D.context===f){if(x.tag===1){D=jr(-1,c&-c),D.tag=2;var K=x.updateQueue;if(K!==null){K=K.shared;var se=K.pending;se===null?D.next=D:(D.next=se.next,se.next=D),K.pending=D}}x.lanes|=c,D=x.alternate,D!==null&&(D.lanes|=c),wd(x.return,c,o),R.lanes|=c;break}D=D.next}}else if(x.tag===10)k=x.type===o.type?null:x.child;else if(x.tag===18){if(k=x.return,k===null)throw Error(n(341));k.lanes|=c,R=k.alternate,R!==null&&(R.lanes|=c),wd(k,c,o),k=x.sibling}else k=x.child;if(k!==null)k.return=x;else for(k=x;k!==null;){if(k===o){k=null;break}if(x=k.sibling,x!==null){x.return=k.return,k=x;break}k=k.return}x=k}tn(r,o,v.children,c),o=o.child}return o;case 9:return v=o.type,f=o.pendingProps.children,_o(o,c),v=Pn(v),f=f(v),o.flags|=1,tn(r,o,f,c),o.child;case 14:return f=o.type,v=zn(f,o.pendingProps),v=zn(f.type,v),jv(r,o,f,v,c);case 15:return Cv(r,o,o.type,o.pendingProps,c);case 17:return f=o.type,v=o.pendingProps,v=o.elementType===f?v:zn(f,v),Hl(r,o),o.tag=1,ln(f)?(r=!0,El(o)):r=!1,_o(o,c),vv(o,f,v),Dd(o,f,v,c),Vd(null,o,f,!0,r,c);case 19:return Iv(r,o,c);case 22:return Ev(r,o,c)}throw Error(n(156,o.tag))};function sy(r,o){return Lm(r,o)}function AC(r,o,c,f){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(r,o,c,f){return new AC(r,o,c,f)}function af(r){return r=r.prototype,!(!r||!r.isReactComponent)}function RC(r){if(typeof r=="function")return af(r)?1:0;if(r!=null){if(r=r.$$typeof,r===X)return 11;if(r===oe)return 14}return 2}function ss(r,o){var c=r.alternate;return c===null?(c=On(r.tag,o,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=o,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&14680064,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,o=r.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c}function nc(r,o,c,f,v,x){var k=2;if(f=r,typeof r=="function")af(r)&&(k=1);else if(typeof r=="string")k=5;else e:switch(r){case L:return Ds(c.children,v,x,o);case $:k=8,v|=8;break;case z:return r=On(12,c,o,v|2),r.elementType=z,r.lanes=x,r;case ee:return r=On(13,c,o,v),r.elementType=ee,r.lanes=x,r;case fe:return r=On(19,c,o,v),r.elementType=fe,r.lanes=x,r;case Y:return rc(c,v,x,o);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case W:k=10;break e;case Z:k=9;break e;case X:k=11;break e;case oe:k=14;break e;case Q:k=16,f=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return o=On(k,c,o,v),o.elementType=r,o.type=f,o.lanes=x,o}function Ds(r,o,c,f){return r=On(7,r,f,o),r.lanes=c,r}function rc(r,o,c,f){return r=On(22,r,f,o),r.elementType=Y,r.lanes=c,r.stateNode={isHidden:!1},r}function lf(r,o,c){return r=On(6,r,null,o),r.lanes=c,r}function cf(r,o,c){return o=On(4,r.children!==null?r.children:[],r.key,o),o.lanes=c,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}function OC(r,o,c,f,v){this.tag=o,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mu(0),this.expirationTimes=Mu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mu(0),this.identifierPrefix=f,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function uf(r,o,c,f,v,x,k,R,D){return r=new OC(r,o,c,R,D),o===1?(o=1,x===!0&&(o|=8)):o=0,x=On(3,null,null,o),r.current=x,x.stateNode=r,x.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sd(x),r}function IC(r,o,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:f==null?null:""+f,children:r,containerInfo:o,implementation:c}}function oy(r){if(!r)return Yr;r=r._reactInternals;e:{if(ks(r)!==r||r.tag!==1)throw Error(n(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(ln(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(r.tag===1){var c=r.type;if(ln(c))return Og(r,c,o)}return o}function iy(r,o,c,f,v,x,k,R,D){return r=uf(c,f,!0,r,v,x,k,R,D),r.context=oy(null),c=r.current,f=nn(),v=ns(c),x=jr(f,v),x.callback=o??null,Qr(c,x,v),r.current.lanes=v,ki(r,v,f),dn(r,f),r}function sc(r,o,c,f){var v=o.current,x=nn(),k=ns(v);return c=oy(c),o.context===null?o.context=c:o.pendingContext=c,o=jr(x,k),o.payload={element:r},f=f===void 0?null:f,f!==null&&(o.callback=f),r=Qr(v,o,k),r!==null&&(Kn(r,v,k,x),Ml(r,v,k)),k}function oc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ay(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<o?c:o}}function df(r,o){ay(r,o),(r=r.alternate)&&ay(r,o)}function MC(){return null}var ly=typeof reportError=="function"?reportError:function(r){console.error(r)};function ff(r){this._internalRoot=r}ic.prototype.render=ff.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));sc(r,o,null,null)},ic.prototype.unmount=ff.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;Os(function(){sc(null,r,null,null)}),o[wr]=null}};function ic(r){this._internalRoot=r}ic.prototype.unstable_scheduleHydration=function(r){if(r){var o=Hm();r={blockedOn:null,target:r,priority:o};for(var c=0;c<Wr.length&&o!==0&&o<Wr[c].priority;c++);Wr.splice(c,0,r),c===0&&qm(r)}};function hf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ac(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function cy(){}function DC(r,o,c,f,v){if(v){if(typeof f=="function"){var x=f;f=function(){var K=oc(k);x.call(K)}}var k=iy(o,f,r,0,null,!1,!1,"",cy);return r._reactRootContainer=k,r[wr]=k.current,$i(r.nodeType===8?r.parentNode:r),Os(),k}for(;v=r.lastChild;)r.removeChild(v);if(typeof f=="function"){var R=f;f=function(){var K=oc(D);R.call(K)}}var D=uf(r,0,!1,null,null,!1,!1,"",cy);return r._reactRootContainer=D,r[wr]=D.current,$i(r.nodeType===8?r.parentNode:r),Os(function(){sc(o,D,c,f)}),D}function lc(r,o,c,f,v){var x=c._reactRootContainer;if(x){var k=x;if(typeof v=="function"){var R=v;v=function(){var D=oc(k);R.call(D)}}sc(o,k,r,v)}else k=DC(c,o,r,v,f);return oc(k)}zm=function(r){switch(r.tag){case 3:var o=r.stateNode;if(o.current.memoizedState.isDehydrated){var c=_i(o.pendingLanes);c!==0&&(Du(o,c|1),dn(o,wt()),(Ye&6)===0&&(No=wt()+500,Jr()))}break;case 13:Os(function(){var f=kr(r,1);if(f!==null){var v=nn();Kn(f,r,1,v)}}),df(r,1)}},Lu=function(r){if(r.tag===13){var o=kr(r,134217728);if(o!==null){var c=nn();Kn(o,r,134217728,c)}df(r,134217728)}},Wm=function(r){if(r.tag===13){var o=ns(r),c=kr(r,o);if(c!==null){var f=nn();Kn(c,r,o,f)}df(r,o)}},Hm=function(){return Ze},Km=function(r,o){var c=Ze;try{return Ze=r,o()}finally{Ze=c}},Gt=function(r,o,c){switch(o){case"input":if(Be(r,c),o=c.name,c.type==="radio"&&o!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var f=c[o];if(f!==r&&f.form===r.form){var v=jl(f);if(!v)throw Error(n(90));pe(f),Be(f,v)}}}break;case"textarea":tr(r,c);break;case"select":o=c.value,o!=null&&Ot(r,!!c.multiple,o,!1)}},Nt=rf,qt=Os;var LC={usingClientEntryPoint:!1,Events:[Bi,mo,jl,Me,xt,rf]},ta={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$C={bundleType:ta.bundleType,version:ta.version,rendererPackageName:ta.rendererPackageName,rendererConfig:ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Mm(r),r===null?null:r.stateNode},findFiberByHostInstance:ta.findFiberByHostInstance||MC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cc.isDisabled&&cc.supportsFiber)try{il=cc.inject($C),sr=cc}catch{}}return fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LC,fn.createPortal=function(r,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hf(o))throw Error(n(200));return IC(r,o,null,c)},fn.createRoot=function(r,o){if(!hf(r))throw Error(n(299));var c=!1,f="",v=ly;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),o=uf(r,1,!1,null,null,c,!1,f,v),r[wr]=o.current,$i(r.nodeType===8?r.parentNode:r),new ff(o)},fn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=Mm(o),r=r===null?null:r.stateNode,r},fn.flushSync=function(r){return Os(r)},fn.hydrate=function(r,o,c){if(!ac(o))throw Error(n(200));return lc(null,r,o,!0,c)},fn.hydrateRoot=function(r,o,c){if(!hf(r))throw Error(n(405));var f=c!=null&&c.hydratedSources||null,v=!1,x="",k=ly;if(c!=null&&(c.unstable_strictMode===!0&&(v=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),o=iy(o,null,r,1,c??null,v,!1,x,k),r[wr]=o.current,$i(r),f)for(r=0;r<f.length;r++)c=f[r],v=c._getVersion,v=v(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,v]:o.mutableSourceEagerHydrationData.push(c,v);return new ic(o)},fn.render=function(r,o,c){if(!ac(o))throw Error(n(200));return lc(null,r,o,!1,c)},fn.unmountComponentAtNode=function(r){if(!ac(r))throw Error(n(40));return r._reactRootContainer?(Os(function(){lc(null,null,r,!1,function(){r._reactRootContainer=null,r[wr]=null})}),!0):!1},fn.unstable_batchedUpdates=rf,fn.unstable_renderSubtreeIntoContainer=function(r,o,c,f){if(!ac(c))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return lc(r,o,c,!1,f)},fn.version="18.3.1-next-f1338f8080-20240426",fn}var vy;function aw(){if(vy)return gf.exports;vy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),gf.exports=HC(),gf.exports}var yy;function KC(){if(yy)return uc;yy=1;var t=aw();return uc.createRoot=t.createRoot,uc.hydrateRoot=t.hydrateRoot,uc}var GC=KC(),w=cp();const ue=lp(w),lw=ow({__proto__:null,default:ue},[w]);var qC=(t,e,n,s,i,a,l,d)=>{let h=document.documentElement,p=["light","dark"];function m(b){(Array.isArray(t)?t:[t]).forEach(_=>{let S=_==="class",j=S&&a?i.map(C=>a[C]||C):i;S?(h.classList.remove(...j),h.classList.add(a&&a[b]?a[b]:b)):h.setAttribute(_,b)}),g(b)}function g(b){d&&p.includes(b)&&(h.style.colorScheme=b)}function y(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)m(s);else try{let b=localStorage.getItem(e)||n,_=l&&b==="system"?y():b;m(_)}catch{}},YC=w.createContext(void 0),JC={setTheme:t=>{},themes:[]},XC=()=>{var t;return(t=w.useContext(YC))!=null?t:JC};w.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:s,enableColorScheme:i,defaultTheme:a,value:l,themes:d,nonce:h,scriptProps:p})=>{let m=JSON.stringify([n,e,a,t,d,l,s,i]).slice(1,-1);return w.createElement("script",{...p,suppressHydrationWarning:!0,nonce:typeof window>"u"?h:"",dangerouslySetInnerHTML:{__html:`(${qC.toString()})(${m})`}})});var up=aw();const cw=lp(up);function QC(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const ZC=t=>{switch(t){case"success":return n2;case"info":return s2;case"warning":return r2;case"error":return o2;default:return null}},e2=Array(12).fill(0),t2=({visible:t,className:e})=>ue.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},ue.createElement("div",{className:"sonner-spinner"},e2.map((n,s)=>ue.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),n2=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ue.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),r2=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ue.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),s2=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ue.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),o2=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ue.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),i2=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ue.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ue.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),a2=()=>{const[t,e]=ue.useState(document.hidden);return ue.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let ch=1;class l2{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:s,...i}=e,a=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:ch++,l=this.toasts.find(h=>h.id===a),d=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),l?this.toasts=this.toasts.map(h=>h.id===a?(this.publish({...h,...e,id:a,title:s}),{...h,...e,id:a,dismissible:d,title:s}):h):this.addToast({title:s,...i,dismissible:d,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let a=s!==void 0,l;const d=i.then(async p=>{if(l=["resolve",p],ue.isValidElement(p))a=!1,this.create({id:s,type:"default",message:p});else if(u2(p)&&!p.ok){a=!1;const g=typeof n.error=="function"?await n.error(`HTTP error! status: ${p.status}`):n.error,y=typeof n.description=="function"?await n.description(`HTTP error! status: ${p.status}`):n.description,_=typeof g=="object"&&!ue.isValidElement(g)?g:{message:g};this.create({id:s,type:"error",description:y,..._})}else if(p instanceof Error){a=!1;const g=typeof n.error=="function"?await n.error(p):n.error,y=typeof n.description=="function"?await n.description(p):n.description,_=typeof g=="object"&&!ue.isValidElement(g)?g:{message:g};this.create({id:s,type:"error",description:y,..._})}else if(n.success!==void 0){a=!1;const g=typeof n.success=="function"?await n.success(p):n.success,y=typeof n.description=="function"?await n.description(p):n.description,_=typeof g=="object"&&!ue.isValidElement(g)?g:{message:g};this.create({id:s,type:"success",description:y,..._})}}).catch(async p=>{if(l=["reject",p],n.error!==void 0){a=!1;const m=typeof n.error=="function"?await n.error(p):n.error,g=typeof n.description=="function"?await n.description(p):n.description,b=typeof m=="object"&&!ue.isValidElement(m)?m:{message:m};this.create({id:s,type:"error",description:g,...b})}}).finally(()=>{a&&(this.dismiss(s),s=void 0),n.finally==null||n.finally.call(n)}),h=()=>new Promise((p,m)=>d.then(()=>l[0]==="reject"?m(l[1]):p(l[1])).catch(m));return typeof s!="string"&&typeof s!="number"?{unwrap:h}:Object.assign(s,{unwrap:h})},this.custom=(e,n)=>{const s=n?.id||ch++;return this.create({jsx:e(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const hn=new l2,c2=(t,e)=>{const n=e?.id||ch++;return hn.addToast({title:t,...e,id:n}),n},u2=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",d2=c2,f2=()=>hn.toasts,h2=()=>hn.getActiveToasts(),p2=Object.assign(d2,{success:hn.success,info:hn.info,warning:hn.warning,error:hn.error,custom:hn.custom,message:hn.message,promise:hn.promise,dismiss:hn.dismiss,loading:hn.loading},{getHistory:f2,getToasts:h2});QC("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function dc(t){return t.label!==void 0}const m2=3,g2="24px",v2="16px",xy=4e3,y2=356,x2=14,w2=45,b2=200;function cr(...t){return t.filter(Boolean).join(" ")}function S2(t){const[e,n]=t.split("-"),s=[];return e&&s.push(e),n&&s.push(n),s}const _2=t=>{var e,n,s,i,a,l,d,h,p;const{invert:m,toast:g,unstyled:y,interacting:b,setHeights:_,visibleToasts:S,heights:j,index:C,toasts:T,expanded:E,removeToast:N,defaultRichColors:P,closeButton:M,style:L,cancelButtonStyle:$,actionButtonStyle:z,className:W="",descriptionClassName:Z="",duration:X,position:ee,gap:fe,expandByDefault:oe,classNames:Q,icons:Y,closeButtonAriaLabel:O="Close toast"}=t,[B,J]=ue.useState(null),[A,I]=ue.useState(null),[H,G]=ue.useState(!1),[q,ae]=ue.useState(!1),[ne,de]=ue.useState(!1),[ve,We]=ue.useState(!1),[ot,pe]=ue.useState(!1),[He,le]=ue.useState(0),[me,Ee]=ue.useState(0),Be=ue.useRef(g.duration||X||xy),Fe=ue.useRef(null),Le=ue.useRef(null),tt=C===0,Ot=C+1<=S,nt=g.type,Bt=g.dismissible!==!1,tr=g.className||"",nr=g.descriptionClassName||"",xr=ue.useMemo(()=>j.findIndex(Me=>Me.toastId===g.id)||0,[j,g.id]),_s=ue.useMemo(()=>{var Me;return(Me=g.closeButton)!=null?Me:M},[g.closeButton,M]),rr=ue.useMemo(()=>g.duration||X||xy,[g.duration,X]),ye=ue.useRef(0),$e=ue.useRef(0),qe=ue.useRef(0),Ue=ue.useRef(null),[It,ut]=ee.split("-"),Et=ue.useMemo(()=>j.reduce((Me,xt,Nt)=>Nt>=xr?Me:Me+xt.height,0),[j,xr]),Ut=a2(),gt=g.invert||m,Je=nt==="loading";$e.current=ue.useMemo(()=>xr*fe+Et,[xr,Et]),ue.useEffect(()=>{Be.current=rr},[rr]),ue.useEffect(()=>{G(!0)},[]),ue.useEffect(()=>{const Me=Le.current;if(Me){const xt=Me.getBoundingClientRect().height;return Ee(xt),_(Nt=>[{toastId:g.id,height:xt,position:g.position},...Nt]),()=>_(Nt=>Nt.filter(qt=>qt.toastId!==g.id))}},[_,g.id]),ue.useLayoutEffect(()=>{if(!H)return;const Me=Le.current,xt=Me.style.height;Me.style.height="auto";const Nt=Me.getBoundingClientRect().height;Me.style.height=xt,Ee(Nt),_(qt=>qt.find(_t=>_t.toastId===g.id)?qt.map(_t=>_t.toastId===g.id?{..._t,height:Nt}:_t):[{toastId:g.id,height:Nt,position:g.position},...qt])},[H,g.title,g.description,_,g.id,g.jsx,g.action,g.cancel]);const et=ue.useCallback(()=>{ae(!0),le($e.current),_(Me=>Me.filter(xt=>xt.toastId!==g.id)),setTimeout(()=>{N(g)},b2)},[g,N,_,$e]);ue.useEffect(()=>{if(g.promise&&nt==="loading"||g.duration===1/0||g.type==="loading")return;let Me;return E||b||Ut?(()=>{if(qe.current<ye.current){const qt=new Date().getTime()-ye.current;Be.current=Be.current-qt}qe.current=new Date().getTime()})():(()=>{Be.current!==1/0&&(ye.current=new Date().getTime(),Me=setTimeout(()=>{g.onAutoClose==null||g.onAutoClose.call(g,g),et()},Be.current))})(),()=>clearTimeout(Me)},[E,b,g,nt,Ut,et]),ue.useEffect(()=>{g.delete&&(et(),g.onDismiss==null||g.onDismiss.call(g,g))},[et,g.delete]);function Gt(){var Me;if(Y?.loading){var xt;return ue.createElement("div",{className:cr(Q?.loader,g==null||(xt=g.classNames)==null?void 0:xt.loader,"sonner-loader"),"data-visible":nt==="loading"},Y.loading)}return ue.createElement(t2,{className:cr(Q?.loader,g==null||(Me=g.classNames)==null?void 0:Me.loader),visible:nt==="loading"})}const Mt=g.icon||Y?.[nt]||ZC(nt);var Dt,bi;return ue.createElement("li",{tabIndex:0,ref:Le,className:cr(W,tr,Q?.toast,g==null||(e=g.classNames)==null?void 0:e.toast,Q?.default,Q?.[nt],g==null||(n=g.classNames)==null?void 0:n[nt]),"data-sonner-toast":"","data-rich-colors":(Dt=g.richColors)!=null?Dt:P,"data-styled":!(g.jsx||g.unstyled||y),"data-mounted":H,"data-promise":!!g.promise,"data-swiped":ot,"data-removed":q,"data-visible":Ot,"data-y-position":It,"data-x-position":ut,"data-index":C,"data-front":tt,"data-swiping":ne,"data-dismissible":Bt,"data-type":nt,"data-invert":gt,"data-swipe-out":ve,"data-swipe-direction":A,"data-expanded":!!(E||oe&&H),"data-testid":g.testId,style:{"--index":C,"--toasts-before":C,"--z-index":T.length-C,"--offset":`${q?He:$e.current}px`,"--initial-height":oe?"auto":`${me}px`,...L,...g.style},onDragEnd:()=>{de(!1),J(null),Ue.current=null},onPointerDown:Me=>{Me.button!==2&&(Je||!Bt||(Fe.current=new Date,le($e.current),Me.target.setPointerCapture(Me.pointerId),Me.target.tagName!=="BUTTON"&&(de(!0),Ue.current={x:Me.clientX,y:Me.clientY})))},onPointerUp:()=>{var Me,xt,Nt;if(ve||!Bt)return;Ue.current=null;const qt=Number(((Me=Le.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),$r=Number(((xt=Le.current)==null?void 0:xt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),_t=new Date().getTime()-((Nt=Fe.current)==null?void 0:Nt.getTime()),Lt=B==="x"?qt:$r,Fr=Math.abs(Lt)/_t;if(Math.abs(Lt)>=w2||Fr>.11){le($e.current),g.onDismiss==null||g.onDismiss.call(g,g),I(B==="x"?qt>0?"right":"left":$r>0?"down":"up"),et(),We(!0);return}else{var zt,gn;(zt=Le.current)==null||zt.style.setProperty("--swipe-amount-x","0px"),(gn=Le.current)==null||gn.style.setProperty("--swipe-amount-y","0px")}pe(!1),de(!1),J(null)},onPointerMove:Me=>{var xt,Nt,qt;if(!Ue.current||!Bt||((xt=window.getSelection())==null?void 0:xt.toString().length)>0)return;const _t=Me.clientY-Ue.current.y,Lt=Me.clientX-Ue.current.x;var Fr;const zt=(Fr=t.swipeDirections)!=null?Fr:S2(ee);!B&&(Math.abs(Lt)>1||Math.abs(_t)>1)&&J(Math.abs(Lt)>Math.abs(_t)?"x":"y");let gn={x:0,y:0};const Vr=En=>1/(1.5+Math.abs(En)/20);if(B==="y"){if(zt.includes("top")||zt.includes("bottom"))if(zt.includes("top")&&_t<0||zt.includes("bottom")&&_t>0)gn.y=_t;else{const En=_t*Vr(_t);gn.y=Math.abs(En)<Math.abs(_t)?En:_t}}else if(B==="x"&&(zt.includes("left")||zt.includes("right")))if(zt.includes("left")&&Lt<0||zt.includes("right")&&Lt>0)gn.x=Lt;else{const En=Lt*Vr(Lt);gn.x=Math.abs(En)<Math.abs(Lt)?En:Lt}(Math.abs(gn.x)>0||Math.abs(gn.y)>0)&&pe(!0),(Nt=Le.current)==null||Nt.style.setProperty("--swipe-amount-x",`${gn.x}px`),(qt=Le.current)==null||qt.style.setProperty("--swipe-amount-y",`${gn.y}px`)}},_s&&!g.jsx&&nt!=="loading"?ue.createElement("button",{"aria-label":O,"data-disabled":Je,"data-close-button":!0,onClick:Je||!Bt?()=>{}:()=>{et(),g.onDismiss==null||g.onDismiss.call(g,g)},className:cr(Q?.closeButton,g==null||(s=g.classNames)==null?void 0:s.closeButton)},(bi=Y?.close)!=null?bi:i2):null,(nt||g.icon||g.promise)&&g.icon!==null&&(Y?.[nt]!==null||g.icon)?ue.createElement("div",{"data-icon":"",className:cr(Q?.icon,g==null||(i=g.classNames)==null?void 0:i.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Gt():null,g.type!=="loading"?Mt:null):null,ue.createElement("div",{"data-content":"",className:cr(Q?.content,g==null||(a=g.classNames)==null?void 0:a.content)},ue.createElement("div",{"data-title":"",className:cr(Q?.title,g==null||(l=g.classNames)==null?void 0:l.title)},g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title),g.description?ue.createElement("div",{"data-description":"",className:cr(Z,nr,Q?.description,g==null||(d=g.classNames)==null?void 0:d.description)},typeof g.description=="function"?g.description():g.description):null),ue.isValidElement(g.cancel)?g.cancel:g.cancel&&dc(g.cancel)?ue.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||$,onClick:Me=>{dc(g.cancel)&&Bt&&(g.cancel.onClick==null||g.cancel.onClick.call(g.cancel,Me),et())},className:cr(Q?.cancelButton,g==null||(h=g.classNames)==null?void 0:h.cancelButton)},g.cancel.label):null,ue.isValidElement(g.action)?g.action:g.action&&dc(g.action)?ue.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||z,onClick:Me=>{dc(g.action)&&(g.action.onClick==null||g.action.onClick.call(g.action,Me),!Me.defaultPrevented&&et())},className:cr(Q?.actionButton,g==null||(p=g.classNames)==null?void 0:p.actionButton)},g.action.label):null)};function wy(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function k2(t,e){const n={};return[t,e].forEach((s,i)=>{const a=i===1,l=a?"--mobile-offset":"--offset",d=a?v2:g2;function h(p){["top","right","bottom","left"].forEach(m=>{n[`${l}-${m}`]=typeof p=="number"?`${p}px`:p})}typeof s=="number"||typeof s=="string"?h(s):typeof s=="object"?["top","right","bottom","left"].forEach(p=>{s[p]===void 0?n[`${l}-${p}`]=d:n[`${l}-${p}`]=typeof s[p]=="number"?`${s[p]}px`:s[p]}):h(d)}),n}const j2=ue.forwardRef(function(e,n){const{id:s,invert:i,position:a="bottom-right",hotkey:l=["altKey","KeyT"],expand:d,closeButton:h,className:p,offset:m,mobileOffset:g,theme:y="light",richColors:b,duration:_,style:S,visibleToasts:j=m2,toastOptions:C,dir:T=wy(),gap:E=x2,icons:N,containerAriaLabel:P="Notifications"}=e,[M,L]=ue.useState([]),$=ue.useMemo(()=>s?M.filter(H=>H.toasterId===s):M.filter(H=>!H.toasterId),[M,s]),z=ue.useMemo(()=>Array.from(new Set([a].concat($.filter(H=>H.position).map(H=>H.position)))),[$,a]),[W,Z]=ue.useState([]),[X,ee]=ue.useState(!1),[fe,oe]=ue.useState(!1),[Q,Y]=ue.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=ue.useRef(null),B=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),J=ue.useRef(null),A=ue.useRef(!1),I=ue.useCallback(H=>{L(G=>{var q;return(q=G.find(ae=>ae.id===H.id))!=null&&q.delete||hn.dismiss(H.id),G.filter(({id:ae})=>ae!==H.id)})},[]);return ue.useEffect(()=>hn.subscribe(H=>{if(H.dismiss){requestAnimationFrame(()=>{L(G=>G.map(q=>q.id===H.id?{...q,delete:!0}:q))});return}setTimeout(()=>{cw.flushSync(()=>{L(G=>{const q=G.findIndex(ae=>ae.id===H.id);return q!==-1?[...G.slice(0,q),{...G[q],...H},...G.slice(q+1)]:[H,...G]})})})}),[M]),ue.useEffect(()=>{if(y!=="system"){Y(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window>"u")return;const H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:G})=>{Y(G?"dark":"light")})}catch{H.addListener(({matches:q})=>{try{Y(q?"dark":"light")}catch(ae){console.error(ae)}})}},[y]),ue.useEffect(()=>{M.length<=1&&ee(!1)},[M]),ue.useEffect(()=>{const H=G=>{var q;if(l.every(de=>G[de]||G.code===de)){var ne;ee(!0),(ne=O.current)==null||ne.focus()}G.code==="Escape"&&(document.activeElement===O.current||(q=O.current)!=null&&q.contains(document.activeElement))&&ee(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[l]),ue.useEffect(()=>{if(O.current)return()=>{J.current&&(J.current.focus({preventScroll:!0}),J.current=null,A.current=!1)}},[O.current]),ue.createElement("section",{ref:n,"aria-label":`${P} ${B}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},z.map((H,G)=>{var q;const[ae,ne]=H.split("-");return $.length?ue.createElement("ol",{key:H,dir:T==="auto"?wy():T,tabIndex:-1,ref:O,className:p,"data-sonner-toaster":!0,"data-sonner-theme":Q,"data-y-position":ae,"data-x-position":ne,style:{"--front-toast-height":`${((q=W[0])==null?void 0:q.height)||0}px`,"--width":`${y2}px`,"--gap":`${E}px`,...S,...k2(m,g)},onBlur:de=>{A.current&&!de.currentTarget.contains(de.relatedTarget)&&(A.current=!1,J.current&&(J.current.focus({preventScroll:!0}),J.current=null))},onFocus:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||A.current||(A.current=!0,J.current=de.relatedTarget)},onMouseEnter:()=>ee(!0),onMouseMove:()=>ee(!0),onMouseLeave:()=>{fe||ee(!1)},onDragEnd:()=>ee(!1),onPointerDown:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||oe(!0)},onPointerUp:()=>oe(!1)},$.filter(de=>!de.position&&G===0||de.position===H).map((de,ve)=>{var We,ot;return ue.createElement(_2,{key:de.id,icons:N,index:ve,toast:de,defaultRichColors:b,duration:(We=C?.duration)!=null?We:_,className:C?.className,descriptionClassName:C?.descriptionClassName,invert:i,visibleToasts:j,closeButton:(ot=C?.closeButton)!=null?ot:h,interacting:fe,position:H,style:C?.style,unstyled:C?.unstyled,classNames:C?.classNames,cancelButtonStyle:C?.cancelButtonStyle,actionButtonStyle:C?.actionButtonStyle,closeButtonAriaLabel:C?.closeButtonAriaLabel,removeToast:I,toasts:$.filter(pe=>pe.position==de.position),heights:W.filter(pe=>pe.position==de.position),setHeights:Z,expandByDefault:d,gap:E,expanded:X,swipeDirections:e.swipeDirections})})):null}))}),C2=({...t})=>{const{theme:e="system"}=XC();return u.jsx(j2,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})},dp=w.createContext({});function fp(t){const e=w.useRef(null);return e.current===null&&(e.current=t()),e.current}const hp=typeof window<"u",uw=hp?w.useLayoutEffect:w.useEffect,ou=w.createContext(null);function pp(t,e){t.indexOf(e)===-1&&t.push(e)}function mp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Pr=(t,e,n)=>n>e?e:n<t?t:n;let gp=()=>{};const Ar={},dw=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function fw(t){return typeof t=="object"&&t!==null}const hw=t=>/^0[^.\s]+$/u.test(t);function vp(t){let e;return()=>(e===void 0&&(e=t()),e)}const $n=t=>t,E2=(t,e)=>n=>e(t(n)),Ha=(...t)=>t.reduce(E2),Pa=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class yp{constructor(){this.subscriptions=[]}add(e){return pp(this.subscriptions,e),()=>mp(this.subscriptions,e)}notify(e,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,s);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const dr=t=>t*1e3,Ln=t=>t/1e3;function pw(t,e){return e?t*(1e3/e):0}const mw=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,N2=1e-7,T2=12;function P2(t,e,n,s,i){let a,l,d=0;do l=e+(n-e)/2,a=mw(l,s,i)-t,a>0?n=l:e=l;while(Math.abs(a)>N2&&++d<T2);return l}function Ka(t,e,n,s){if(t===e&&n===s)return $n;const i=a=>P2(a,0,1,t,n);return a=>a===0||a===1?a:mw(i(a),e,s)}const gw=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,vw=t=>e=>1-t(1-e),yw=Ka(.33,1.53,.69,.99),xp=vw(yw),xw=gw(xp),ww=t=>(t*=2)<1?.5*xp(t):.5*(2-Math.pow(2,-10*(t-1))),wp=t=>1-Math.sin(Math.acos(t)),bw=vw(wp),Sw=gw(wp),A2=Ka(.42,0,1,1),R2=Ka(0,0,.58,1),_w=Ka(.42,0,.58,1),O2=t=>Array.isArray(t)&&typeof t[0]!="number",kw=t=>Array.isArray(t)&&typeof t[0]=="number",I2={linear:$n,easeIn:A2,easeInOut:_w,easeOut:R2,circIn:wp,circInOut:Sw,circOut:bw,backIn:xp,backInOut:xw,backOut:yw,anticipate:ww},M2=t=>typeof t=="string",by=t=>{if(kw(t)){gp(t.length===4);const[e,n,s,i]=t;return Ka(e,n,s,i)}else if(M2(t))return I2[t];return t},fc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function D2(t,e){let n=new Set,s=new Set,i=!1,a=!1;const l=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function h(m){l.has(m)&&(p.schedule(m),t()),m(d)}const p={schedule:(m,g=!1,y=!1)=>{const _=y&&i?n:s;return g&&l.add(m),_.has(m)||_.add(m),m},cancel:m=>{s.delete(m),l.delete(m)},process:m=>{if(d=m,i){a=!0;return}i=!0,[n,s]=[s,n],n.forEach(h),n.clear(),i=!1,a&&(a=!1,p.process(m))}};return p}const L2=40;function jw(t,e){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,l=fc.reduce((E,N)=>(E[N]=D2(a),E),{}),{setup:d,read:h,resolveKeyframes:p,preUpdate:m,update:g,preRender:y,render:b,postRender:_}=l,S=()=>{const E=Ar.useManualTiming?i.timestamp:performance.now();n=!1,Ar.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(E-i.timestamp,L2),1)),i.timestamp=E,i.isProcessing=!0,d.process(i),h.process(i),p.process(i),m.process(i),g.process(i),y.process(i),b.process(i),_.process(i),i.isProcessing=!1,n&&e&&(s=!1,t(S))},j=()=>{n=!0,s=!0,i.isProcessing||t(S)};return{schedule:fc.reduce((E,N)=>{const P=l[N];return E[N]=(M,L=!1,$=!1)=>(n||j(),P.schedule(M,L,$)),E},{}),cancel:E=>{for(let N=0;N<fc.length;N++)l[fc[N]].cancel(E)},state:i,steps:l}}const{schedule:ct,cancel:fs,state:Kt,steps:xf}=jw(typeof requestAnimationFrame<"u"?requestAnimationFrame:$n,!0);let Ic;function $2(){Ic=void 0}const mn={now:()=>(Ic===void 0&&mn.set(Kt.isProcessing||Ar.useManualTiming?Kt.timestamp:performance.now()),Ic),set:t=>{Ic=t,queueMicrotask($2)}},Cw=t=>e=>typeof e=="string"&&e.startsWith(t),bp=Cw("--"),F2=Cw("var(--"),Sp=t=>F2(t)?V2.test(t.split("/*")[0].trim()):!1,V2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,di={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Aa={...di,transform:t=>Pr(0,1,t)},hc={...di,default:1},fa=t=>Math.round(t*1e5)/1e5,_p=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function B2(t){return t==null}const U2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,kp=(t,e)=>n=>!!(typeof n=="string"&&U2.test(n)&&n.startsWith(t)||e&&!B2(n)&&Object.prototype.hasOwnProperty.call(n,e)),Ew=(t,e,n)=>s=>{if(typeof s!="string")return s;const[i,a,l,d]=s.match(_p);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},z2=t=>Pr(0,255,t),wf={...di,transform:t=>Math.round(z2(t))},Hs={test:kp("rgb","red"),parse:Ew("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+wf.transform(t)+", "+wf.transform(e)+", "+wf.transform(n)+", "+fa(Aa.transform(s))+")"};function W2(t){let e="",n="",s="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const uh={test:kp("#"),parse:W2,transform:Hs.transform},Ga=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ls=Ga("deg"),fr=Ga("%"),Re=Ga("px"),H2=Ga("vh"),K2=Ga("vw"),Sy={...fr,parse:t=>fr.parse(t)/100,transform:t=>fr.transform(t*100)},Wo={test:kp("hsl","hue"),parse:Ew("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+fr.transform(fa(e))+", "+fr.transform(fa(n))+", "+fa(Aa.transform(s))+")"},Ct={test:t=>Hs.test(t)||uh.test(t)||Wo.test(t),parse:t=>Hs.test(t)?Hs.parse(t):Wo.test(t)?Wo.parse(t):uh.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Hs.transform(t):Wo.transform(t),getAnimatableNone:t=>{const e=Ct.parse(t);return e.alpha=0,Ct.transform(e)}},G2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function q2(t){return isNaN(t)&&typeof t=="string"&&(t.match(_p)?.length||0)+(t.match(G2)?.length||0)>0}const Nw="number",Tw="color",Y2="var",J2="var(",_y="${}",X2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ra(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},i=[];let a=0;const d=e.replace(X2,h=>(Ct.test(h)?(s.color.push(a),i.push(Tw),n.push(Ct.parse(h))):h.startsWith(J2)?(s.var.push(a),i.push(Y2),n.push(h)):(s.number.push(a),i.push(Nw),n.push(parseFloat(h))),++a,_y)).split(_y);return{values:n,split:d,indexes:s,types:i}}function Pw(t){return Ra(t).values}function Aw(t){const{split:e,types:n}=Ra(t),s=e.length;return i=>{let a="";for(let l=0;l<s;l++)if(a+=e[l],i[l]!==void 0){const d=n[l];d===Nw?a+=fa(i[l]):d===Tw?a+=Ct.transform(i[l]):a+=i[l]}return a}}const Q2=t=>typeof t=="number"?0:Ct.test(t)?Ct.getAnimatableNone(t):t;function Z2(t){const e=Pw(t);return Aw(t)(e.map(Q2))}const hs={test:q2,parse:Pw,createTransformer:Aw,getAnimatableNone:Z2};function bf(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function eE({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let i=0,a=0,l=0;if(!e)i=a=l=n;else{const d=n<.5?n*(1+e):n+e-n*e,h=2*n-d;i=bf(h,d,t+1/3),a=bf(h,d,t),l=bf(h,d,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:s}}function Bc(t,e){return n=>n>0?e:t}const pt=(t,e,n)=>t+(e-t)*n,Sf=(t,e,n)=>{const s=t*t,i=n*(e*e-s)+s;return i<0?0:Math.sqrt(i)},tE=[uh,Hs,Wo],nE=t=>tE.find(e=>e.test(t));function ky(t){const e=nE(t);if(!e)return!1;let n=e.parse(t);return e===Wo&&(n=eE(n)),n}const jy=(t,e)=>{const n=ky(t),s=ky(e);if(!n||!s)return Bc(t,e);const i={...n};return a=>(i.red=Sf(n.red,s.red,a),i.green=Sf(n.green,s.green,a),i.blue=Sf(n.blue,s.blue,a),i.alpha=pt(n.alpha,s.alpha,a),Hs.transform(i))},dh=new Set(["none","hidden"]);function rE(t,e){return dh.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function sE(t,e){return n=>pt(t,e,n)}function jp(t){return typeof t=="number"?sE:typeof t=="string"?Sp(t)?Bc:Ct.test(t)?jy:aE:Array.isArray(t)?Rw:typeof t=="object"?Ct.test(t)?jy:oE:Bc}function Rw(t,e){const n=[...t],s=n.length,i=t.map((a,l)=>jp(a)(a,e[l]));return a=>{for(let l=0;l<s;l++)n[l]=i[l](a);return n}}function oE(t,e){const n={...t,...e},s={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(s[i]=jp(t[i])(t[i],e[i]));return i=>{for(const a in s)n[a]=s[a](i);return n}}function iE(t,e){const n=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],l=t.indexes[a][s[a]],d=t.values[l]??0;n[i]=d,s[a]++}return n}const aE=(t,e)=>{const n=hs.createTransformer(e),s=Ra(t),i=Ra(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?dh.has(t)&&!i.values.length||dh.has(e)&&!s.values.length?rE(t,e):Ha(Rw(iE(s,i),i.values),n):Bc(t,e)};function Ow(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?pt(t,e,n):jp(t)(t,e)}const lE=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ct.update(e,n),stop:()=>fs(e),now:()=>Kt.isProcessing?Kt.timestamp:mn.now()}},Iw=(t,e,n=10)=>{let s="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)s+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Uc=2e4;function Cp(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<Uc;)e+=n,s=t.next(e);return e>=Uc?1/0:e}function cE(t,e=100,n){const s=n({...t,keyframes:[0,e]}),i=Math.min(Cp(s),Uc);return{type:"keyframes",ease:a=>s.next(i*a).value/e,duration:Ln(i)}}const uE=5;function Mw(t,e,n){const s=Math.max(e-uE,0);return pw(n-t(s),e-s)}const yt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},_f=.001;function dE({duration:t=yt.duration,bounce:e=yt.bounce,velocity:n=yt.velocity,mass:s=yt.mass}){let i,a,l=1-e;l=Pr(yt.minDamping,yt.maxDamping,l),t=Pr(yt.minDuration,yt.maxDuration,Ln(t)),l<1?(i=p=>{const m=p*l,g=m*t,y=m-n,b=fh(p,l),_=Math.exp(-g);return _f-y/b*_},a=p=>{const g=p*l*t,y=g*n+n,b=Math.pow(l,2)*Math.pow(p,2)*t,_=Math.exp(-g),S=fh(Math.pow(p,2),l);return(-i(p)+_f>0?-1:1)*((y-b)*_)/S}):(i=p=>{const m=Math.exp(-p*t),g=(p-n)*t+1;return-_f+m*g},a=p=>{const m=Math.exp(-p*t),g=(n-p)*(t*t);return m*g});const d=5/t,h=hE(i,a,d);if(t=dr(t),isNaN(h))return{stiffness:yt.stiffness,damping:yt.damping,duration:t};{const p=Math.pow(h,2)*s;return{stiffness:p,damping:l*2*Math.sqrt(s*p),duration:t}}}const fE=12;function hE(t,e,n){let s=n;for(let i=1;i<fE;i++)s=s-t(s)/e(s);return s}function fh(t,e){return t*Math.sqrt(1-e*e)}const pE=["duration","bounce"],mE=["stiffness","damping","mass"];function Cy(t,e){return e.some(n=>t[n]!==void 0)}function gE(t){let e={velocity:yt.velocity,stiffness:yt.stiffness,damping:yt.damping,mass:yt.mass,isResolvedFromDuration:!1,...t};if(!Cy(t,mE)&&Cy(t,pE))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,a=2*Pr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:yt.mass,stiffness:i,damping:a}}else{const n=dE(t);e={...e,...n,mass:yt.mass},e.isResolvedFromDuration=!0}return e}function zc(t=yt.visualDuration,e=yt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:i}=n;const a=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],d={done:!1,value:a},{stiffness:h,damping:p,mass:m,duration:g,velocity:y,isResolvedFromDuration:b}=gE({...n,velocity:-Ln(n.velocity||0)}),_=y||0,S=p/(2*Math.sqrt(h*m)),j=l-a,C=Ln(Math.sqrt(h/m)),T=Math.abs(j)<5;s||(s=T?yt.restSpeed.granular:yt.restSpeed.default),i||(i=T?yt.restDelta.granular:yt.restDelta.default);let E;if(S<1){const P=fh(C,S);E=M=>{const L=Math.exp(-S*C*M);return l-L*((_+S*C*j)/P*Math.sin(P*M)+j*Math.cos(P*M))}}else if(S===1)E=P=>l-Math.exp(-C*P)*(j+(_+C*j)*P);else{const P=C*Math.sqrt(S*S-1);E=M=>{const L=Math.exp(-S*C*M),$=Math.min(P*M,300);return l-L*((_+S*C*j)*Math.sinh($)+P*j*Math.cosh($))/P}}const N={calculatedDuration:b&&g||null,next:P=>{const M=E(P);if(b)d.done=P>=g;else{let L=P===0?_:0;S<1&&(L=P===0?dr(_):Mw(E,P,M));const $=Math.abs(L)<=s,z=Math.abs(l-M)<=i;d.done=$&&z}return d.value=d.done?l:M,d},toString:()=>{const P=Math.min(Cp(N),Uc),M=Iw(L=>N.next(P*L).value,P,30);return P+"ms "+M},toTransition:()=>{}};return N}zc.applyToOptions=t=>{const e=cE(t,100,zc);return t.ease=e.ease,t.duration=dr(e.duration),t.type="keyframes",t};function hh({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:d,max:h,restDelta:p=.5,restSpeed:m}){const g=t[0],y={done:!1,value:g},b=$=>d!==void 0&&$<d||h!==void 0&&$>h,_=$=>d===void 0?h:h===void 0||Math.abs(d-$)<Math.abs(h-$)?d:h;let S=n*e;const j=g+S,C=l===void 0?j:l(j);C!==j&&(S=C-g);const T=$=>-S*Math.exp(-$/s),E=$=>C+T($),N=$=>{const z=T($),W=E($);y.done=Math.abs(z)<=p,y.value=y.done?C:W};let P,M;const L=$=>{b(y.value)&&(P=$,M=zc({keyframes:[y.value,_(y.value)],velocity:Mw(E,$,y.value),damping:i,stiffness:a,restDelta:p,restSpeed:m}))};return L(0),{calculatedDuration:null,next:$=>{let z=!1;return!M&&P===void 0&&(z=!0,N($),L($)),P!==void 0&&$>=P?M.next($-P):(!z&&N($),y)}}}function vE(t,e,n){const s=[],i=n||Ar.mix||Ow,a=t.length-1;for(let l=0;l<a;l++){let d=i(t[l],t[l+1]);if(e){const h=Array.isArray(e)?e[l]||$n:e;d=Ha(h,d)}s.push(d)}return s}function yE(t,e,{clamp:n=!0,ease:s,mixer:i}={}){const a=t.length;if(gp(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=vE(e,s,i),h=d.length,p=m=>{if(l&&m<t[0])return e[0];let g=0;if(h>1)for(;g<t.length-2&&!(m<t[g+1]);g++);const y=Pa(t[g],t[g+1],m);return d[g](y)};return n?m=>p(Pr(t[0],t[a-1],m)):p}function xE(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const i=Pa(0,e,s);t.push(pt(n,1,i))}}function wE(t){const e=[0];return xE(e,t.length-1),e}function bE(t,e){return t.map(n=>n*e)}function SE(t,e){return t.map(()=>e||_w).splice(0,t.length-1)}function ha({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const i=O2(s)?s.map(by):by(s),a={done:!1,value:e[0]},l=bE(n&&n.length===e.length?n:wE(e),t),d=yE(l,e,{ease:Array.isArray(i)?i:SE(e,i)});return{calculatedDuration:t,next:h=>(a.value=d(h),a.done=h>=t,a)}}const _E=t=>t!==null;function Ep(t,{repeat:e,repeatType:n="loop"},s,i=1){const a=t.filter(_E),d=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!d||s===void 0?a[d]:s}const kE={decay:hh,inertia:hh,tween:ha,keyframes:ha,spring:zc};function Dw(t){typeof t.type=="string"&&(t.type=kE[t.type])}class Np{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const jE=t=>t/100;class Tp extends Np{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==mn.now()&&this.tick(mn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Dw(e);const{type:n=ha,repeat:s=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=e;let{keyframes:d}=e;const h=n||ha;h!==ha&&typeof d[0]!="number"&&(this.mixKeyframes=Ha(jE,Ow(d[0],d[1])),d=[0,100]);const p=h({...e,keyframes:d});a==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...d].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=Cp(p));const{calculatedDuration:m}=p;this.calculatedDuration=m,this.resolvedDuration=m+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=p}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:i,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:d,calculatedDuration:h}=this;if(this.startTime===null)return s.next(0);const{delay:p=0,keyframes:m,repeat:g,repeatType:y,repeatDelay:b,type:_,onUpdate:S,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const C=this.currentTime-p*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let E=this.currentTime,N=s;if(g){const $=Math.min(this.currentTime,i)/d;let z=Math.floor($),W=$%1;!W&&$>=1&&(W=1),W===1&&z--,z=Math.min(z,g+1),!!(z%2)&&(y==="reverse"?(W=1-W,b&&(W-=b/d)):y==="mirror"&&(N=l)),E=Pr(0,1,W)*d}const P=T?{done:!1,value:m[0]}:N.next(E);a&&(P.value=a(P.value));let{done:M}=P;!T&&h!==null&&(M=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return L&&_!==hh&&(P.value=Ep(m,this.options,j,this.speed)),S&&S(P.value),L&&this.finish(),P}then(e,n){return this.finished.then(e,n)}get duration(){return Ln(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ln(e)}get time(){return Ln(this.currentTime)}set time(e){e=dr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(mn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ln(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=lE,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(mn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function CE(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ks=t=>t*180/Math.PI,ph=t=>{const e=Ks(Math.atan2(t[1],t[0]));return mh(e)},EE={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ph,rotateZ:ph,skewX:t=>Ks(Math.atan(t[1])),skewY:t=>Ks(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},mh=t=>(t=t%360,t<0&&(t+=360),t),Ey=ph,Ny=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Ty=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),NE={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ny,scaleY:Ty,scale:t=>(Ny(t)+Ty(t))/2,rotateX:t=>mh(Ks(Math.atan2(t[6],t[5]))),rotateY:t=>mh(Ks(Math.atan2(-t[2],t[0]))),rotateZ:Ey,rotate:Ey,skewX:t=>Ks(Math.atan(t[4])),skewY:t=>Ks(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function gh(t){return t.includes("scale")?1:0}function vh(t,e){if(!t||t==="none")return gh(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(n)s=NE,i=n;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=EE,i=d}if(!i)return gh(e);const a=s[e],l=i[1].split(",").map(PE);return typeof a=="function"?a(l):l[a]}const TE=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return vh(n,e)};function PE(t){return parseFloat(t.trim())}const fi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],hi=new Set(fi),Py=t=>t===di||t===Re,AE=new Set(["x","y","z"]),RE=fi.filter(t=>!AE.has(t));function OE(t){const e=[];return RE.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Ys={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>vh(e,"x"),y:(t,{transform:e})=>vh(e,"y")};Ys.translateX=Ys.x;Ys.translateY=Ys.y;const Js=new Set;let yh=!1,xh=!1,wh=!1;function Lw(){if(xh){const t=Array.from(Js).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const i=OE(s);i.length&&(n.set(s,i),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([a,l])=>{s.getValue(a)?.set(l)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}xh=!1,yh=!1,Js.forEach(t=>t.complete(wh)),Js.clear()}function $w(){Js.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(xh=!0)})}function IE(){wh=!0,$w(),Lw(),wh=!1}class Pp{constructor(e,n,s,i,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Js.add(this),yh||(yh=!0,ct.read($w),ct.resolveKeyframes(Lw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:i}=this;if(e[0]===null){const a=i?.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(s&&n){const d=s.readValue(n,l);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=l),i&&a===void 0&&i.set(e[0])}CE(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Js.delete(this)}cancel(){this.state==="scheduled"&&(Js.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const ME=t=>t.startsWith("--");function DE(t,e,n){ME(e)?t.style.setProperty(e,n):t.style[e]=n}const LE=vp(()=>window.ScrollTimeline!==void 0),$E={};function FE(t,e){const n=vp(t);return()=>$E[e]??n()}const Fw=FE(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),la=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,Ay={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:la([0,.65,.55,1]),circOut:la([.55,0,1,.45]),backIn:la([.31,.01,.66,-.59]),backOut:la([.33,1.53,.69,.99])};function Vw(t,e){if(t)return typeof t=="function"?Fw()?Iw(t,e):"ease-out":kw(t)?la(t):Array.isArray(t)?t.map(n=>Vw(n,e)||Ay.easeOut):Ay[t]}function VE(t,e,n,{delay:s=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:d="easeOut",times:h}={},p=void 0){const m={[e]:n};h&&(m.offset=h);const g=Vw(d,i);Array.isArray(g)&&(m.easing=g);const y={delay:s,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return p&&(y.pseudoElement=p),t.animate(m,y)}function Bw(t){return typeof t=="function"&&"applyToOptions"in t}function BE({type:t,...e}){return Bw(t)&&Fw()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class UE extends Np{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:i,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:d,onComplete:h}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,gp(typeof e.type!="string");const p=BE(e);this.animation=VE(n,s,i,p,a),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const m=Ep(i,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(m):DE(n,s,m),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Ln(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ln(e)}get time(){return Ln(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=dr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&LE()?(this.animation.timeline=e,$n):n(this)}}const Uw={anticipate:ww,backInOut:xw,circInOut:Sw};function zE(t){return t in Uw}function WE(t){typeof t.ease=="string"&&zE(t.ease)&&(t.ease=Uw[t.ease])}const Ry=10;class HE extends UE{constructor(e){WE(e),Dw(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:i,element:a,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const d=new Tp({...l,autoplay:!1}),h=dr(this.finishedTime??this.time);n.setWithVelocity(d.sample(h-Ry).value,d.sample(h).value,Ry),d.stop()}}const Oy=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(hs.test(t)||t==="0")&&!t.startsWith("url("));function KE(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function GE(t,e,n,s){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],l=Oy(i,e),d=Oy(a,e);return!l||!d?!1:KE(t)||(n==="spring"||Bw(n))&&s}function bh(t){t.duration=0,t.type="keyframes"}const qE=new Set(["opacity","clipPath","filter","transform"]),YE=vp(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function JE(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:i,damping:a,type:l}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:p}=e.owner.getProps();return YE()&&n&&qE.has(n)&&(n!=="transform"||!p)&&!h&&!s&&i!=="mirror"&&a!==0&&l!=="inertia"}const XE=40;class QE extends Np{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",keyframes:d,name:h,motionValue:p,element:m,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=mn.now();const y={autoplay:e,delay:n,type:s,repeat:i,repeatDelay:a,repeatType:l,name:h,motionValue:p,element:m,...g},b=m?.KeyframeResolver||Pp;this.keyframeResolver=new b(d,(_,S,j)=>this.onKeyframesResolved(_,S,y,!j),h,p,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,s,i){this.keyframeResolver=void 0;const{name:a,type:l,velocity:d,delay:h,isHandoff:p,onUpdate:m}=s;this.resolvedAt=mn.now(),GE(e,a,l,d)||((Ar.instantAnimations||!h)&&m?.(Ep(e,s,n)),e[0]=e[e.length-1],bh(s),s.repeat=0);const y={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>XE?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},b=!p&&JE(y)?new HE({...y,element:y.motionValue.owner.current}):new Tp(y);b.finished.then(()=>this.notifyFinished()).catch($n),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),IE()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const ZE=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function eN(t){const e=ZE.exec(t);if(!e)return[,];const[,n,s,i]=e;return[`--${n??s}`,i]}function zw(t,e,n=1){const[s,i]=eN(t);if(!s)return;const a=window.getComputedStyle(e).getPropertyValue(s);if(a){const l=a.trim();return dw(l)?parseFloat(l):l}return Sp(i)?zw(i,e,n+1):i}function Ap(t,e){return t?.[e]??t?.default??t}const Ww=new Set(["width","height","top","left","right","bottom",...fi]),tN={test:t=>t==="auto",parse:t=>t},Hw=t=>e=>e.test(t),Kw=[di,Re,fr,ls,K2,H2,tN],Iy=t=>Kw.find(Hw(t));function nN(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||hw(t):!0}const rN=new Set(["brightness","contrast","saturate","opacity"]);function sN(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(_p)||[];if(!s)return t;const i=n.replace(s,"");let a=rN.has(e)?1:0;return s!==n&&(a*=100),e+"("+a+i+")"}const oN=/\b([a-z-]*)\(.*?\)/gu,Sh={...hs,getAnimatableNone:t=>{const e=t.match(oN);return e?e.map(sN).join(" "):t}},My={...di,transform:Math.round},iN={rotate:ls,rotateX:ls,rotateY:ls,rotateZ:ls,scale:hc,scaleX:hc,scaleY:hc,scaleZ:hc,skew:ls,skewX:ls,skewY:ls,distance:Re,translateX:Re,translateY:Re,translateZ:Re,x:Re,y:Re,z:Re,perspective:Re,transformPerspective:Re,opacity:Aa,originX:Sy,originY:Sy,originZ:Re},Rp={borderWidth:Re,borderTopWidth:Re,borderRightWidth:Re,borderBottomWidth:Re,borderLeftWidth:Re,borderRadius:Re,radius:Re,borderTopLeftRadius:Re,borderTopRightRadius:Re,borderBottomRightRadius:Re,borderBottomLeftRadius:Re,width:Re,maxWidth:Re,height:Re,maxHeight:Re,top:Re,right:Re,bottom:Re,left:Re,padding:Re,paddingTop:Re,paddingRight:Re,paddingBottom:Re,paddingLeft:Re,margin:Re,marginTop:Re,marginRight:Re,marginBottom:Re,marginLeft:Re,backgroundPositionX:Re,backgroundPositionY:Re,...iN,zIndex:My,fillOpacity:Aa,strokeOpacity:Aa,numOctaves:My},aN={...Rp,color:Ct,backgroundColor:Ct,outlineColor:Ct,fill:Ct,stroke:Ct,borderColor:Ct,borderTopColor:Ct,borderRightColor:Ct,borderBottomColor:Ct,borderLeftColor:Ct,filter:Sh,WebkitFilter:Sh},Gw=t=>aN[t];function qw(t,e){let n=Gw(t);return n!==Sh&&(n=hs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const lN=new Set(["auto","none","0"]);function cN(t,e,n){let s=0,i;for(;s<t.length&&!i;){const a=t[s];typeof a=="string"&&!lN.has(a)&&Ra(a).values.length&&(i=t[s]),s++}if(i&&n)for(const a of e)t[a]=qw(n,i)}class uN extends Pp{constructor(e,n,s,i,a){super(e,n,s,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let p=e[h];if(typeof p=="string"&&(p=p.trim(),Sp(p))){const m=zw(p,n.current);m!==void 0&&(e[h]=m),h===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!Ww.has(s)||e.length!==2)return;const[i,a]=e,l=Iy(i),d=Iy(a);if(l!==d)if(Py(l)&&Py(d))for(let h=0;h<e.length;h++){const p=e[h];typeof p=="string"&&(e[h]=parseFloat(p))}else Ys[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||nN(e[i]))&&s.push(i);s.length&&cN(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ys[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=s.length-1,l=s[a];s[a]=Ys[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,h])=>{e.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function dN(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const i=n?.[t]??s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const Yw=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Jw(t){return fw(t)&&"offsetHeight"in t}const Dy=30,fN=t=>!isNaN(parseFloat(t));class hN{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const i=mn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=mn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=fN(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new yp);const s=this.events[e].add(n);return e==="change"?()=>{s(),ct.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=mn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Dy)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Dy);return pw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ri(t,e){return new hN(t,e)}const{schedule:Op}=jw(queueMicrotask,!1),qn={x:!1,y:!1};function Xw(){return qn.x||qn.y}function pN(t){return t==="x"||t==="y"?qn[t]?null:(qn[t]=!0,()=>{qn[t]=!1}):qn.x||qn.y?null:(qn.x=qn.y=!0,()=>{qn.x=qn.y=!1})}function Qw(t,e){const n=dN(t),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[n,i,()=>s.abort()]}function Ly(t){return!(t.pointerType==="touch"||Xw())}function mN(t,e,n={}){const[s,i,a]=Qw(t,n),l=d=>{if(!Ly(d))return;const{target:h}=d,p=e(h,d);if(typeof p!="function"||!h)return;const m=g=>{Ly(g)&&(p(g),h.removeEventListener("pointerleave",m))};h.addEventListener("pointerleave",m,i)};return s.forEach(d=>{d.addEventListener("pointerenter",l,i)}),a}const Zw=(t,e)=>e?t===e?!0:Zw(t,e.parentElement):!1,Ip=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,gN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function vN(t){return gN.has(t.tagName)||t.tabIndex!==-1}const Mc=new WeakSet;function $y(t){return e=>{e.key==="Enter"&&t(e)}}function kf(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const yN=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=$y(()=>{if(Mc.has(n))return;kf(n,"down");const i=$y(()=>{kf(n,"up")}),a=()=>kf(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function Fy(t){return Ip(t)&&!Xw()}function xN(t,e,n={}){const[s,i,a]=Qw(t,n),l=d=>{const h=d.currentTarget;if(!Fy(d))return;Mc.add(h);const p=e(h,d),m=(b,_)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",y),Mc.has(h)&&Mc.delete(h),Fy(b)&&typeof p=="function"&&p(b,{success:_})},g=b=>{m(b,h===window||h===document||n.useGlobalTarget||Zw(h,b.target))},y=b=>{m(b,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",y,i)};return s.forEach(d=>{(n.useGlobalTarget?window:d).addEventListener("pointerdown",l,i),Jw(d)&&(d.addEventListener("focus",p=>yN(p,i)),!vN(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),a}function eb(t){return fw(t)&&"ownerSVGElement"in t}function wN(t){return eb(t)&&t.tagName==="svg"}const en=t=>!!(t&&t.getVelocity),bN=[...Kw,Ct,hs],SN=t=>bN.find(Hw(t)),Mp=w.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Vy(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function _N(...t){return e=>{let n=!1;const s=t.map(i=>{const a=Vy(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():Vy(t[i],null)}}}}function kN(...t){return w.useCallback(_N(...t),t)}class jN extends w.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,i=Jw(s)&&s.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function CN({children:t,isPresent:e,anchorX:n,root:s}){const i=w.useId(),a=w.useRef(null),l=w.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=w.useContext(Mp),h=kN(a,t?.ref);return w.useInsertionEffect(()=>{const{width:p,height:m,top:g,left:y,right:b}=l.current;if(e||!a.current||!p||!m)return;const _=n==="left"?`left: ${y}`:`right: ${b}`;a.current.dataset.motionPopId=i;const S=document.createElement("style");d&&(S.nonce=d);const j=s??document.head;return j.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${m}px !important;
            ${_}px !important;
            top: ${g}px !important;
          }
        `),()=>{j.contains(S)&&j.removeChild(S)}},[e]),u.jsx(jN,{isPresent:e,childRef:a,sizeRef:l,children:w.cloneElement(t,{ref:h})})}const EN=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:a,mode:l,anchorX:d,root:h})=>{const p=fp(NN),m=w.useId();let g=!0,y=w.useMemo(()=>(g=!1,{id:m,initial:e,isPresent:n,custom:i,onExitComplete:b=>{p.set(b,!0);for(const _ of p.values())if(!_)return;s&&s()},register:b=>(p.set(b,!1),()=>p.delete(b))}),[n,p,s]);return a&&g&&(y={...y}),w.useMemo(()=>{p.forEach((b,_)=>p.set(_,!1))},[n]),w.useEffect(()=>{!n&&!p.size&&s&&s()},[n]),l==="popLayout"&&(t=u.jsx(CN,{isPresent:n,anchorX:d,root:h,children:t})),u.jsx(ou.Provider,{value:y,children:t})};function NN(){return new Map}function tb(t=!0){const e=w.useContext(ou);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=e,a=w.useId();w.useEffect(()=>{if(t)return i(a)},[t]);const l=w.useCallback(()=>t&&s&&s(a),[a,s,t]);return!n&&s?[!1,l]:[!0]}const pc=t=>t.key||"";function By(t){const e=[];return w.Children.forEach(t,n=>{w.isValidElement(n)&&e.push(n)}),e}const pa=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:a="sync",propagate:l=!1,anchorX:d="left",root:h})=>{const[p,m]=tb(l),g=w.useMemo(()=>By(t),[t]),y=l&&!p?[]:g.map(pc),b=w.useRef(!0),_=w.useRef(g),S=fp(()=>new Map),[j,C]=w.useState(g),[T,E]=w.useState(g);uw(()=>{b.current=!1,_.current=g;for(let M=0;M<T.length;M++){const L=pc(T[M]);y.includes(L)?S.delete(L):S.get(L)!==!0&&S.set(L,!1)}},[T,y.length,y.join("-")]);const N=[];if(g!==j){let M=[...g];for(let L=0;L<T.length;L++){const $=T[L],z=pc($);y.includes(z)||(M.splice(L,0,$),N.push($))}return a==="wait"&&N.length&&(M=N),E(By(M)),C(g),null}const{forceRender:P}=w.useContext(dp);return u.jsx(u.Fragment,{children:T.map(M=>{const L=pc(M),$=l&&!p?!1:g===T||y.includes(L),z=()=>{if(S.has(L))S.set(L,!0);else return;let W=!0;S.forEach(Z=>{Z||(W=!1)}),W&&(P?.(),E(_.current),l&&m?.(),s&&s())};return u.jsx(EN,{isPresent:$,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:h,onExitComplete:$?void 0:z,anchorX:d,children:M},L)})})},nb=w.createContext({strict:!1}),Uy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},si={};for(const t in Uy)si[t]={isEnabled:e=>Uy[t].some(n=>!!e[n])};function TN(t){for(const e in t)si[e]={...si[e],...t[e]}}const PN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||PN.has(t)}let rb=t=>!Wc(t);function AN(t){typeof t=="function"&&(rb=e=>e.startsWith("on")?!Wc(e):t(e))}try{AN(require("@emotion/is-prop-valid").default)}catch{}function RN(t,e,n){const s={};for(const i in t)i==="values"&&typeof t.values=="object"||(rb(i)||n===!0&&Wc(i)||!e&&!Wc(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}const iu=w.createContext({});function au(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Oa(t){return typeof t=="string"||Array.isArray(t)}const Dp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Lp=["initial",...Dp];function lu(t){return au(t.animate)||Lp.some(e=>Oa(t[e]))}function sb(t){return!!(lu(t)||t.variants)}function ON(t,e){if(lu(t)){const{initial:n,animate:s}=t;return{initial:n===!1||Oa(n)?n:void 0,animate:Oa(s)?s:void 0}}return t.inherit!==!1?e:{}}function IN(t){const{initial:e,animate:n}=ON(t,w.useContext(iu));return w.useMemo(()=>({initial:e,animate:n}),[zy(e),zy(n)])}function zy(t){return Array.isArray(t)?t.join(" "):t}const Ia={};function MN(t){for(const e in t)Ia[e]=t[e],bp(e)&&(Ia[e].isCSSVariable=!0)}function ob(t,{layout:e,layoutId:n}){return hi.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ia[t]||t==="opacity")}const DN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},LN=fi.length;function $N(t,e,n){let s="",i=!0;for(let a=0;a<LN;a++){const l=fi[a],d=t[l];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(l.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||n){const p=Yw(d,Rp[l]);if(!h){i=!1;const m=DN[l]||l;s+=`${m}(${p}) `}n&&(e[l]=p)}}return s=s.trim(),n?s=n(e,i?"":s):i&&(s="none"),s}function $p(t,e,n){const{style:s,vars:i,transformOrigin:a}=t;let l=!1,d=!1;for(const h in e){const p=e[h];if(hi.has(h)){l=!0;continue}else if(bp(h)){i[h]=p;continue}else{const m=Yw(p,Rp[h]);h.startsWith("origin")?(d=!0,a[h]=m):s[h]=m}}if(e.transform||(l||n?s.transform=$N(e,t.transform,n):s.transform&&(s.transform="none")),d){const{originX:h="50%",originY:p="50%",originZ:m=0}=a;s.transformOrigin=`${h} ${p} ${m}`}}const Fp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ib(t,e,n){for(const s in e)!en(e[s])&&!ob(s,n)&&(t[s]=e[s])}function FN({transformTemplate:t},e){return w.useMemo(()=>{const n=Fp();return $p(n,e,t),Object.assign({},n.vars,n.style)},[e])}function VN(t,e){const n=t.style||{},s={};return ib(s,n,t),Object.assign(s,FN(t,e)),s}function BN(t,e){const n={},s=VN(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const UN={offset:"stroke-dashoffset",array:"stroke-dasharray"},zN={offset:"strokeDashoffset",array:"strokeDasharray"};function WN(t,e,n=1,s=0,i=!0){t.pathLength=1;const a=i?UN:zN;t[a.offset]=Re.transform(-s);const l=Re.transform(e),d=Re.transform(n);t[a.array]=`${l} ${d}`}function ab(t,{attrX:e,attrY:n,attrScale:s,pathLength:i,pathSpacing:a=1,pathOffset:l=0,...d},h,p,m){if($p(t,d,p),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:y}=t;g.transform&&(y.transform=g.transform,delete g.transform),(y.transform||g.transformOrigin)&&(y.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),y.transform&&(y.transformBox=m?.transformBox??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),s!==void 0&&(g.scale=s),i!==void 0&&WN(g,i,a,l,!1)}const lb=()=>({...Fp(),attrs:{}}),cb=t=>typeof t=="string"&&t.toLowerCase()==="svg";function HN(t,e,n,s){const i=w.useMemo(()=>{const a=lb();return ab(a,e,cb(s),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};ib(a,t.style,t),i.style={...a,...i.style}}return i}const KN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Vp(t){return typeof t!="string"||t.includes("-")?!1:!!(KN.indexOf(t)>-1||/[A-Z]/u.test(t))}function GN(t,e,n,{latestValues:s},i,a=!1){const d=(Vp(t)?HN:BN)(e,s,i,t),h=RN(e,typeof t=="string",a),p=t!==w.Fragment?{...h,...d,ref:n}:{},{children:m}=e,g=w.useMemo(()=>en(m)?m.get():m,[m]);return w.createElement(t,{...p,children:g})}function Wy(t){const e=[{},{}];return t?.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function Bp(t,e,n,s){if(typeof e=="function"){const[i,a]=Wy(s);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=Wy(s);e=e(n!==void 0?n:t.custom,i,a)}return e}function Dc(t){return en(t)?t.get():t}function qN({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,i){return{latestValues:YN(n,s,i,t),renderState:e()}}function YN(t,e,n,s){const i={},a=s(t,{});for(const y in a)i[y]=Dc(a[y]);let{initial:l,animate:d}=t;const h=lu(t),p=sb(t);e&&p&&!h&&t.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let m=n?n.initial===!1:!1;m=m||l===!1;const g=m?d:l;if(g&&typeof g!="boolean"&&!au(g)){const y=Array.isArray(g)?g:[g];for(let b=0;b<y.length;b++){const _=Bp(t,y[b]);if(_){const{transitionEnd:S,transition:j,...C}=_;for(const T in C){let E=C[T];if(Array.isArray(E)){const N=m?E.length-1:0;E=E[N]}E!==null&&(i[T]=E)}for(const T in S)i[T]=S[T]}}}return i}const ub=t=>(e,n)=>{const s=w.useContext(iu),i=w.useContext(ou),a=()=>qN(t,e,s,i);return n?a():fp(a)};function Up(t,e,n){const{style:s}=t,i={};for(const a in s)(en(s[a])||e.style&&en(e.style[a])||ob(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=s[a]);return i}const JN=ub({scrapeMotionValuesFromProps:Up,createRenderState:Fp});function db(t,e,n){const s=Up(t,e,n);for(const i in t)if(en(t[i])||en(e[i])){const a=fi.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[a]=t[i]}return s}const XN=ub({scrapeMotionValuesFromProps:db,createRenderState:lb}),QN=Symbol.for("motionComponentSymbol");function Ho(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ZN(t,e,n){return w.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):Ho(n)&&(n.current=s))},[e])}const zp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),eT="framerAppearId",fb="data-"+zp(eT),hb=w.createContext({});function tT(t,e,n,s,i){const{visualElement:a}=w.useContext(iu),l=w.useContext(nb),d=w.useContext(ou),h=w.useContext(Mp).reducedMotion,p=w.useRef(null);s=s||l.renderer,!p.current&&s&&(p.current=s(t,{visualState:e,parent:a,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const m=p.current,g=w.useContext(hb);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&nT(p.current,n,i,g);const y=w.useRef(!1);w.useInsertionEffect(()=>{m&&y.current&&m.update(n,d)});const b=n[fb],_=w.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return uw(()=>{m&&(y.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),_.current&&m.animationState&&m.animationState.animateChanges())}),w.useEffect(()=>{m&&(!_.current&&m.animationState&&m.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),_.current=!1),m.enteringChildren=void 0)}),m}function nT(t,e,n,s){const{layoutId:i,layout:a,drag:l,dragConstraints:d,layoutScroll:h,layoutRoot:p,layoutCrossfade:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:pb(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||d&&Ho(d),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:s,crossfade:m,layoutScroll:h,layoutRoot:p})}function pb(t){if(t)return t.options.allowProjection!==!1?t.projection:pb(t.parent)}function jf(t,{forwardMotionProps:e=!1}={},n,s){n&&TN(n);const i=Vp(t)?XN:JN;function a(d,h){let p;const m={...w.useContext(Mp),...d,layoutId:rT(d)},{isStatic:g}=m,y=IN(d),b=i(d,g);if(!g&&hp){sT();const _=oT(m);p=_.MeasureLayout,y.visualElement=tT(t,b,m,s,_.ProjectionNode)}return u.jsxs(iu.Provider,{value:y,children:[p&&y.visualElement?u.jsx(p,{visualElement:y.visualElement,...m}):null,GN(t,d,ZN(b,y.visualElement,h),b,g,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=w.forwardRef(a);return l[QN]=t,l}function rT({layoutId:t}){const e=w.useContext(dp).id;return e&&t!==void 0?e+"-"+t:t}function sT(t,e){w.useContext(nb).strict}function oT(t){const{drag:e,layout:n}=si;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function iT(t,e){if(typeof Proxy>"u")return jf;const n=new Map,s=(a,l)=>jf(a,l,t,e),i=(a,l)=>s(a,l);return new Proxy(i,{get:(a,l)=>l==="create"?s:(n.has(l)||n.set(l,jf(l,void 0,t,e)),n.get(l))})}function mb({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function aT({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function lT(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Cf(t){return t===void 0||t===1}function _h({scale:t,scaleX:e,scaleY:n}){return!Cf(t)||!Cf(e)||!Cf(n)}function Bs(t){return _h(t)||gb(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function gb(t){return Hy(t.x)||Hy(t.y)}function Hy(t){return t&&t!=="0%"}function Hc(t,e,n){const s=t-n,i=e*s;return n+i}function Ky(t,e,n,s,i){return i!==void 0&&(t=Hc(t,i,s)),Hc(t,n,s)+e}function kh(t,e=0,n=1,s,i){t.min=Ky(t.min,e,n,s,i),t.max=Ky(t.max,e,n,s,i)}function vb(t,{x:e,y:n}){kh(t.x,e.translate,e.scale,e.originPoint),kh(t.y,n.translate,n.scale,n.originPoint)}const Gy=.999999999999,qy=1.0000000000001;function cT(t,e,n,s=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,l;for(let d=0;d<i;d++){a=n[d],l=a.projectionDelta;const{visualElement:h}=a.options;h&&h.props.style&&h.props.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Go(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,vb(t,l)),s&&Bs(a.latestValues)&&Go(t,a.latestValues))}e.x<qy&&e.x>Gy&&(e.x=1),e.y<qy&&e.y>Gy&&(e.y=1)}function Ko(t,e){t.min=t.min+e,t.max=t.max+e}function Yy(t,e,n,s,i=.5){const a=pt(t.min,t.max,i);kh(t,e,n,a,s)}function Go(t,e){Yy(t.x,e.x,e.scaleX,e.scale,e.originX),Yy(t.y,e.y,e.scaleY,e.scale,e.originY)}function yb(t,e){return mb(lT(t.getBoundingClientRect(),e))}function uT(t,e,n){const s=yb(t,n),{scroll:i}=e;return i&&(Ko(s.x,i.offset.x),Ko(s.y,i.offset.y)),s}const Jy=()=>({translate:0,scale:1,origin:0,originPoint:0}),qo=()=>({x:Jy(),y:Jy()}),Xy=()=>({min:0,max:0}),St=()=>({x:Xy(),y:Xy()}),jh={current:null},xb={current:!1};function dT(){if(xb.current=!0,!!hp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>jh.current=t.matches;t.addEventListener("change",e),e()}else jh.current=!1}const fT=new WeakMap;function hT(t,e,n){for(const s in e){const i=e[s],a=n[s];if(en(i))t.addValue(s,i);else if(en(a))t.addValue(s,ri(i,{owner:t}));else if(a!==i)if(t.hasValue(s)){const l=t.getValue(s);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(s);t.addValue(s,ri(l!==void 0?l:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const Qy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class pT{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Pp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=mn.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,ct.render(this.render,!1,!0))};const{latestValues:h,renderState:p}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.blockInitialAnimation=!!a,this.isControllingVariants=lu(n),this.isVariantNode=sb(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in g){const b=g[y];h[y]!==void 0&&en(b)&&b.set(h[y])}}mount(e){this.current=e,fT.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),xb.current||dT(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:jh.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),fs(this.notifyUpdate),fs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=hi.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&ct.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in si){const n=si[e];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):St()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Qy.length;s++){const i=Qy[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=e[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=hT(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=ri(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(dw(s)||hw(s))?s=parseFloat(s):!SN(s)&&hs.test(n)&&(s=qw(e,n)),this.setBaseTarget(e,en(s)?s.get():s)),en(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const a=Bp(this.props,n,this.presenceContext?.custom);a&&(s=a[e])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!en(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new yp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Op.render(this.render)}}class wb extends pT{constructor(){super(...arguments),this.KeyframeResolver=uN}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;en(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function bb(t,{style:e,vars:n},s,i){const a=t.style;let l;for(l in e)a[l]=e[l];i?.applyProjectionStyles(a,s);for(l in n)a.setProperty(l,n[l])}function mT(t){return window.getComputedStyle(t)}class gT extends wb{constructor(){super(...arguments),this.type="html",this.renderInstance=bb}readValueFromInstance(e,n){if(hi.has(n))return this.projection?.isProjecting?gh(n):TE(e,n);{const s=mT(e),i=(bp(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return yb(e,n)}build(e,n,s){$p(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return Up(e,n,s)}}const Sb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vT(t,e,n,s){bb(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(Sb.has(i)?i:zp(i),e.attrs[i])}class yT extends wb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=St}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(hi.has(n)){const s=Gw(n);return s&&s.default||0}return n=Sb.has(n)?n:zp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return db(e,n,s)}build(e,n,s){ab(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,i){vT(e,n,s,i)}mount(e){this.isSVGTag=cb(e.tagName),super.mount(e)}}const xT=(t,e)=>Vp(t)?new yT(e):new gT(e,{allowProjection:t!==w.Fragment});function Yo(t,e,n){const s=t.getProps();return Bp(s,e,n!==void 0?n:s.custom,t)}const Ch=t=>Array.isArray(t);function wT(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ri(n))}function bT(t){return Ch(t)?t[t.length-1]||0:t}function ST(t,e){const n=Yo(t,e);let{transitionEnd:s={},transition:i={},...a}=n||{};a={...a,...s};for(const l in a){const d=bT(a[l]);wT(t,l,d)}}function _T(t){return!!(en(t)&&t.add)}function Eh(t,e){const n=t.getValue("willChange");if(_T(n))return n.add(e);if(!n&&Ar.WillChange){const s=new Ar.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function _b(t){return t.props[fb]}const kT=t=>t!==null;function jT(t,{repeat:e,repeatType:n="loop"},s){const i=t.filter(kT),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const CT={type:"spring",stiffness:500,damping:25,restSpeed:10},ET=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),NT={type:"keyframes",duration:.8},TT={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PT=(t,{keyframes:e})=>e.length>2?NT:hi.has(t)?t.startsWith("scale")?ET(e[1]):CT:TT;function AT({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:d,from:h,elapsed:p,...m}){return!!Object.keys(m).length}const Wp=(t,e,n,s={},i,a)=>l=>{const d=Ap(s,t)||{},h=d.delay||s.delay||0;let{elapsed:p=0}=s;p=p-dr(h);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-p,onUpdate:y=>{e.set(y),d.onUpdate&&d.onUpdate(y)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:a?void 0:i};AT(d)||Object.assign(m,PT(t,m)),m.duration&&(m.duration=dr(m.duration)),m.repeatDelay&&(m.repeatDelay=dr(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(bh(m),m.delay===0&&(g=!0)),(Ar.instantAnimations||Ar.skipAnimations)&&(g=!0,bh(m),m.delay=0),m.allowFlatten=!d.type&&!d.ease,g&&!a&&e.get()!==void 0){const y=jT(m.keyframes,d);if(y!==void 0){ct.update(()=>{m.onUpdate(y),m.onComplete()});return}}return d.isSync?new Tp(m):new QE(m)};function RT({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function kb(t,e,{delay:n=0,transitionOverride:s,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:l,...d}=e;s&&(a=s);const h=[],p=i&&t.animationState&&t.animationState.getState()[i];for(const m in d){const g=t.getValue(m,t.latestValues[m]??null),y=d[m];if(y===void 0||p&&RT(p,m))continue;const b={delay:n,...Ap(a||{},m)},_=g.get();if(_!==void 0&&!g.isAnimating&&!Array.isArray(y)&&y===_&&!b.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const C=_b(t);if(C){const T=window.MotionHandoffAnimation(C,m,ct);T!==null&&(b.startTime=T,S=!0)}}Eh(t,m),g.start(Wp(m,g,y,t.shouldReduceMotion&&Ww.has(m)?{type:!1}:b,t,S));const j=g.animation;j&&h.push(j)}return l&&Promise.all(h).then(()=>{ct.update(()=>{l&&ST(t,l)})}),h}function jb(t,e,n,s=0,i=1){const a=Array.from(t).sort((p,m)=>p.sortNodePosition(m)).indexOf(e),l=t.size,d=(l-1)*s;return typeof n=="function"?n(a,l):i===1?a*s:d-a*s}function Nh(t,e,n={}){const s=Yo(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const a=s?()=>Promise.all(kb(t,s,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:m,staggerDirection:g}=i;return OT(t,e,h,p,m,g,n)}:()=>Promise.resolve(),{when:d}=i;if(d){const[h,p]=d==="beforeChildren"?[a,l]:[l,a];return h().then(()=>p())}else return Promise.all([a(),l(n.delay)])}function OT(t,e,n=0,s=0,i=0,a=1,l){const d=[];for(const h of t.variantChildren)h.notify("AnimationStart",e),d.push(Nh(h,e,{...l,delay:n+(typeof s=="function"?0:s)+jb(t.variantChildren,h,s,i,a)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(d)}function IT(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(a=>Nh(t,a,n));s=Promise.all(i)}else if(typeof e=="string")s=Nh(t,e,n);else{const i=typeof e=="function"?Yo(t,e,n.custom):e;s=Promise.all(kb(t,i,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function Cb(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const MT=Lp.length;function Eb(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Eb(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<MT;n++){const s=Lp[n],i=t.props[s];(Oa(i)||i===!1)&&(e[s]=i)}return e}const DT=[...Dp].reverse(),LT=Dp.length;function $T(t){return e=>Promise.all(e.map(({animation:n,options:s})=>IT(t,n,s)))}function FT(t){let e=$T(t),n=Zy(),s=!0;const i=h=>(p,m)=>{const g=Yo(t,m,h==="exit"?t.presenceContext?.custom:void 0);if(g){const{transition:y,transitionEnd:b,..._}=g;p={...p,..._,...b}}return p};function a(h){e=h(t)}function l(h){const{props:p}=t,m=Eb(t.parent)||{},g=[],y=new Set;let b={},_=1/0;for(let j=0;j<LT;j++){const C=DT[j],T=n[C],E=p[C]!==void 0?p[C]:m[C],N=Oa(E),P=C===h?T.isActive:null;P===!1&&(_=j);let M=E===m[C]&&E!==p[C]&&N;if(M&&s&&t.manuallyAnimateOnMount&&(M=!1),T.protectedKeys={...b},!T.isActive&&P===null||!E&&!T.prevProp||au(E)||typeof E=="boolean")continue;const L=VT(T.prevProp,E);let $=L||C===h&&T.isActive&&!M&&N||j>_&&N,z=!1;const W=Array.isArray(E)?E:[E];let Z=W.reduce(i(C),{});P===!1&&(Z={});const{prevResolvedValues:X={}}=T,ee={...X,...Z},fe=Y=>{$=!0,y.has(Y)&&(z=!0,y.delete(Y)),T.needsAnimating[Y]=!0;const O=t.getValue(Y);O&&(O.liveStyle=!1)};for(const Y in ee){const O=Z[Y],B=X[Y];if(b.hasOwnProperty(Y))continue;let J=!1;Ch(O)&&Ch(B)?J=!Cb(O,B):J=O!==B,J?O!=null?fe(Y):y.add(Y):O!==void 0&&y.has(Y)?fe(Y):T.protectedKeys[Y]=!0}T.prevProp=E,T.prevResolvedValues=Z,T.isActive&&(b={...b,...Z}),s&&t.blockInitialAnimation&&($=!1);const oe=M&&L;$&&(!oe||z)&&g.push(...W.map(Y=>{const O={type:C};if(typeof Y=="string"&&s&&!oe&&t.manuallyAnimateOnMount&&t.parent){const{parent:B}=t,J=Yo(B,Y);if(B.enteringChildren&&J){const{delayChildren:A}=J.transition||{};O.delay=jb(B.enteringChildren,t,A)}}return{animation:Y,options:O}}))}if(y.size){const j={};if(typeof p.initial!="boolean"){const C=Yo(t,Array.isArray(p.initial)?p.initial[0]:p.initial);C&&C.transition&&(j.transition=C.transition)}y.forEach(C=>{const T=t.getBaseTarget(C),E=t.getValue(C);E&&(E.liveStyle=!0),j[C]=T??null}),g.push({animation:j})}let S=!!g.length;return s&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(S=!1),s=!1,S?e(g):Promise.resolve()}function d(h,p){if(n[h].isActive===p)return Promise.resolve();t.variantChildren?.forEach(g=>g.animationState?.setActive(h,p)),n[h].isActive=p;const m=l(h);for(const g in n)n[g].protectedKeys={};return m}return{animateChanges:l,setActive:d,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Zy()}}}function VT(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Cb(e,t):!1}function Ls(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Zy(){return{animate:Ls(!0),whileInView:Ls(),whileHover:Ls(),whileTap:Ls(),whileDrag:Ls(),whileFocus:Ls(),exit:Ls()}}class xs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class BT extends xs{constructor(e){super(e),e.animationState||(e.animationState=FT(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();au(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let UT=0;class zT extends xs{constructor(){super(...arguments),this.id=UT++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const WT={animation:{Feature:BT},exit:{Feature:zT}};function Ma(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function qa(t){return{point:{x:t.pageX,y:t.pageY}}}const HT=t=>e=>Ip(e)&&t(e,qa(e));function ma(t,e,n,s){return Ma(t,e,HT(n),s)}const Nb=1e-4,KT=1-Nb,GT=1+Nb,Tb=.01,qT=0-Tb,YT=0+Tb;function rn(t){return t.max-t.min}function JT(t,e,n){return Math.abs(t-e)<=n}function e0(t,e,n,s=.5){t.origin=s,t.originPoint=pt(e.min,e.max,t.origin),t.scale=rn(n)/rn(e),t.translate=pt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=KT&&t.scale<=GT||isNaN(t.scale))&&(t.scale=1),(t.translate>=qT&&t.translate<=YT||isNaN(t.translate))&&(t.translate=0)}function ga(t,e,n,s){e0(t.x,e.x,n.x,s?s.originX:void 0),e0(t.y,e.y,n.y,s?s.originY:void 0)}function t0(t,e,n){t.min=n.min+e.min,t.max=t.min+rn(e)}function XT(t,e,n){t0(t.x,e.x,n.x),t0(t.y,e.y,n.y)}function n0(t,e,n){t.min=e.min-n.min,t.max=t.min+rn(e)}function va(t,e,n){n0(t.x,e.x,n.x),n0(t.y,e.y,n.y)}function Mn(t){return[t("x"),t("y")]}const Pb=({current:t})=>t?t.ownerDocument.defaultView:null,r0=(t,e)=>Math.abs(t-e);function QT(t,e){const n=r0(t.x,e.x),s=r0(t.y,e.y);return Math.sqrt(n**2+s**2)}class Ab{constructor(e,n,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Nf(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,_=QT(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!_)return;const{point:S}=y,{timestamp:j}=Kt;this.history.push({...S,timestamp:j});const{onStart:C,onMove:T}=this.handlers;b||(C&&C(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,y)},this.handlePointerMove=(y,b)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Ef(b,this.transformPagePoint),ct.update(this.updatePoint,!0)},this.handlePointerUp=(y,b)=>{this.end();const{onEnd:_,onSessionEnd:S,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Nf(y.type==="pointercancel"?this.lastMoveEventInfo:Ef(b,this.transformPagePoint),this.history);this.startEvent&&_&&_(y,C),S&&S(y,C)},!Ip(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=l,this.contextWindow=i||window;const d=qa(e),h=Ef(d,this.transformPagePoint),{point:p}=h,{timestamp:m}=Kt;this.history=[{...p,timestamp:m}];const{onSessionStart:g}=n;g&&g(e,Nf(h,this.history)),this.removeListeners=Ha(ma(this.contextWindow,"pointermove",this.handlePointerMove),ma(this.contextWindow,"pointerup",this.handlePointerUp),ma(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fs(this.updatePoint)}}function Ef(t,e){return e?{point:e(t.point)}:t}function s0(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Nf({point:t},e){return{point:t,delta:s0(t,Rb(e)),offset:s0(t,ZT(e)),velocity:eP(e,.1)}}function ZT(t){return t[0]}function Rb(t){return t[t.length-1]}function eP(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const i=Rb(t);for(;n>=0&&(s=t[n],!(i.timestamp-s.timestamp>dr(e)));)n--;if(!s)return{x:0,y:0};const a=Ln(i.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-s.x)/a,y:(i.y-s.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function tP(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?pt(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?pt(n,t,s.max):Math.min(t,n)),t}function o0(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function nP(t,{top:e,left:n,bottom:s,right:i}){return{x:o0(t.x,n,i),y:o0(t.y,e,s)}}function i0(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function rP(t,e){return{x:i0(t.x,e.x),y:i0(t.y,e.y)}}function sP(t,e){let n=.5;const s=rn(t),i=rn(e);return i>s?n=Pa(e.min,e.max-s,t.min):s>i&&(n=Pa(t.min,t.max-i,e.min)),Pr(0,1,n)}function oP(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Th=.35;function iP(t=Th){return t===!1?t=0:t===!0&&(t=Th),{x:a0(t,"left","right"),y:a0(t,"top","bottom")}}function a0(t,e,n){return{min:l0(t,e),max:l0(t,n)}}function l0(t,e){return typeof t=="number"?t:t[e]||0}const aP=new WeakMap;class lP{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=St(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(qa(g).point)},l=(g,y)=>{const{drag:b,dragPropagation:_,onDragStart:S}=this.getProps();if(b&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=pN(b),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Mn(C=>{let T=this.getAxisMotionValue(C).get()||0;if(fr.test(T)){const{projection:E}=this.visualElement;if(E&&E.layout){const N=E.layout.layoutBox[C];N&&(T=rn(N)*(parseFloat(T)/100))}}this.originPoint[C]=T}),S&&ct.postRender(()=>S(g,y)),Eh(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},d=(g,y)=>{this.latestPointerEvent=g,this.latestPanInfo=y;const{dragPropagation:b,dragDirectionLock:_,onDirectionLock:S,onDrag:j}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:C}=y;if(_&&this.currentDirection===null){this.currentDirection=cP(C),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",y.point,C),this.updateAxis("y",y.point,C),this.visualElement.render(),j&&j(g,y)},h=(g,y)=>{this.latestPointerEvent=g,this.latestPanInfo=y,this.stop(g,y),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>Mn(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new Ab(e,{onSessionStart:a,onStart:l,onMove:d,onSessionEnd:h,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:s,contextWindow:Pb(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!s)return;const{velocity:l}=i;this.startAnimation(l);const{onDragEnd:d}=this.getProps();d&&ct.postRender(()=>d(s,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:i}=this.getProps();if(!s||!mc(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(l=tP(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Ho(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=nP(s.layoutBox,e):this.constraints=!1,this.elastic=iP(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Mn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=oP(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ho(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=uT(s,i.root,this.visualElement.getTransformPagePoint());let l=rP(i.layout.layoutBox,a);if(n){const d=n(aT(l));this.hasMutatedConstraints=!!d,d&&(l=mb(d))}return l}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},p=Mn(m=>{if(!mc(m,n,this.currentDirection))return;let g=h&&h[m]||{};l&&(g={min:0,max:0});const y=i?200:1e6,b=i?40:1e7,_={type:"inertia",velocity:s?e[m]:0,bounceStiffness:y,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(m,_)});return Promise.all(p).then(d)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return Eh(this.visualElement,e),s.start(Wp(e,s,0,n,this.visualElement,!1))}stopAnimation(){Mn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Mn(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Mn(n=>{const{drag:s}=this.getProps();if(!mc(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:l,max:d}=i.layout.layoutBox[n];a.set(e[n]-pt(l,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Ho(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Mn(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const h=d.get();i[l]=sP({min:h,max:h},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Mn(l=>{if(!mc(l,e,null))return;const d=this.getAxisMotionValue(l),{min:h,max:p}=this.constraints[l];d.set(pt(h,p,i[l]))})}addListeners(){if(!this.visualElement.current)return;aP.set(this.visualElement,this);const e=this.visualElement.current,n=ma(e,"pointerdown",h=>{const{drag:p,dragListener:m=!0}=this.getProps();p&&m&&this.start(h)}),s=()=>{const{dragConstraints:h}=this.getProps();Ho(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ct.read(s);const l=Ma(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:p})=>{this.isDragging&&p&&(Mn(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=h[m].translate,g.set(g.get()+h[m].translate))}),this.visualElement.render())}));return()=>{l(),n(),a(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=Th,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:d}}}function mc(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function cP(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class uP extends xs{constructor(e){super(e),this.removeGroupControls=$n,this.removeListeners=$n,this.controls=new lP(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$n}unmount(){this.removeGroupControls(),this.removeListeners()}}const c0=t=>(e,n)=>{t&&ct.postRender(()=>t(e,n))};class dP extends xs{constructor(){super(...arguments),this.removePointerDownListener=$n}onPointerDown(e){this.session=new Ab(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Pb(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:c0(e),onStart:c0(n),onMove:s,onEnd:(a,l)=>{delete this.session,i&&ct.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=ma(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Lc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function u0(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ra={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Re.test(t))t=parseFloat(t);else return t;const n=u0(t,e.target.x),s=u0(t,e.target.y);return`${n}% ${s}%`}},fP={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,i=hs.parse(t);if(i.length>5)return s;const a=hs.createTransformer(t),l=typeof i[0]!="number"?1:0,d=n.x.scale*e.x,h=n.y.scale*e.y;i[0+l]/=d,i[1+l]/=h;const p=pt(d,h,.5);return typeof i[2+l]=="number"&&(i[2+l]/=p),typeof i[3+l]=="number"&&(i[3+l]/=p),a(i)}};let Tf=!1;class hP extends w.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:a}=e;MN(pP),a&&(n.group&&n.group.add(a),s&&s.register&&i&&s.register(a),Tf&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Lc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:i,isPresent:a}=this.props,{projection:l}=s;return l&&(l.isPresent=a,Tf=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||ct.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Op.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=e;Tf=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Ob(t){const[e,n]=tb(),s=w.useContext(dp);return u.jsx(hP,{...t,layoutGroup:s,switchLayoutGroup:w.useContext(hb),isPresent:e,safeToRemove:n})}const pP={borderRadius:{...ra,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ra,borderTopRightRadius:ra,borderBottomLeftRadius:ra,borderBottomRightRadius:ra,boxShadow:fP};function mP(t,e,n){const s=en(t)?t:ri(t);return s.start(Wp("",s,e,n)),s.animation}const gP=(t,e)=>t.depth-e.depth;class vP{constructor(){this.children=[],this.isDirty=!1}add(e){pp(this.children,e),this.isDirty=!0}remove(e){mp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(gP),this.isDirty=!1,this.children.forEach(e)}}function yP(t,e){const n=mn.now(),s=({timestamp:i})=>{const a=i-n;a>=e&&(fs(s),t(a-e))};return ct.setup(s,!0),()=>fs(s)}const Ib=["TopLeft","TopRight","BottomLeft","BottomRight"],xP=Ib.length,d0=t=>typeof t=="string"?parseFloat(t):t,f0=t=>typeof t=="number"||Re.test(t);function wP(t,e,n,s,i,a){i?(t.opacity=pt(0,n.opacity??1,bP(s)),t.opacityExit=pt(e.opacity??1,0,SP(s))):a&&(t.opacity=pt(e.opacity??1,n.opacity??1,s));for(let l=0;l<xP;l++){const d=`border${Ib[l]}Radius`;let h=h0(e,d),p=h0(n,d);if(h===void 0&&p===void 0)continue;h||(h=0),p||(p=0),h===0||p===0||f0(h)===f0(p)?(t[d]=Math.max(pt(d0(h),d0(p),s),0),(fr.test(p)||fr.test(h))&&(t[d]+="%")):t[d]=p}(e.rotate||n.rotate)&&(t.rotate=pt(e.rotate||0,n.rotate||0,s))}function h0(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const bP=Mb(0,.5,bw),SP=Mb(.5,.95,$n);function Mb(t,e,n){return s=>s<t?0:s>e?1:n(Pa(t,e,s))}function p0(t,e){t.min=e.min,t.max=e.max}function In(t,e){p0(t.x,e.x),p0(t.y,e.y)}function m0(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function g0(t,e,n,s,i){return t-=e,t=Hc(t,1/n,s),i!==void 0&&(t=Hc(t,1/i,s)),t}function _P(t,e=0,n=1,s=.5,i,a=t,l=t){if(fr.test(e)&&(e=parseFloat(e),e=pt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=pt(a.min,a.max,s);t===a&&(d-=e),t.min=g0(t.min,e,n,d,i),t.max=g0(t.max,e,n,d,i)}function v0(t,e,[n,s,i],a,l){_P(t,e[n],e[s],e[i],e.scale,a,l)}const kP=["x","scaleX","originX"],jP=["y","scaleY","originY"];function y0(t,e,n,s){v0(t.x,e,kP,n?n.x:void 0,s?s.x:void 0),v0(t.y,e,jP,n?n.y:void 0,s?s.y:void 0)}function x0(t){return t.translate===0&&t.scale===1}function Db(t){return x0(t.x)&&x0(t.y)}function w0(t,e){return t.min===e.min&&t.max===e.max}function CP(t,e){return w0(t.x,e.x)&&w0(t.y,e.y)}function b0(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Lb(t,e){return b0(t.x,e.x)&&b0(t.y,e.y)}function S0(t){return rn(t.x)/rn(t.y)}function _0(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class EP{constructor(){this.members=[]}add(e){pp(this.members,e),e.scheduleRender()}remove(e){if(mp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function NP(t,e,n){let s="";const i=t.x.translate/e.x,a=t.y.translate/e.y,l=n?.z||0;if((i||a||l)&&(s=`translate3d(${i}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:m,rotateX:g,rotateY:y,skewX:b,skewY:_}=n;p&&(s=`perspective(${p}px) ${s}`),m&&(s+=`rotate(${m}deg) `),g&&(s+=`rotateX(${g}deg) `),y&&(s+=`rotateY(${y}deg) `),b&&(s+=`skewX(${b}deg) `),_&&(s+=`skewY(${_}deg) `)}const d=t.x.scale*e.x,h=t.y.scale*e.y;return(d!==1||h!==1)&&(s+=`scale(${d}, ${h})`),s||"none"}const Pf=["","X","Y","Z"],TP=1e3;let PP=0;function Af(t,e,n,s){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),s&&(s[t]=0))}function $b(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=_b(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ct,!(i||a))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&$b(s)}function Fb({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(l={},d=e?.()){this.id=PP++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(OP),this.nodes.forEach(LP),this.nodes.forEach($P),this.nodes.forEach(IP)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new vP)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new yp),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const h=this.eventHandlers.get(l);h&&h.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=eb(l)&&!wN(l),this.instance=l;const{layoutId:d,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||d)&&(this.isLayoutDirty=!0),t){let m,g=0;const y=()=>this.root.updateBlockedByResize=!1;ct.read(()=>{g=window.innerWidth}),t(l,()=>{const b=window.innerWidth;b!==g&&(g=b,this.root.updateBlockedByResize=!0,m&&m(),m=yP(y,250),Lc.hasAnimatedSinceResize&&(Lc.hasAnimatedSinceResize=!1,this.nodes.forEach(C0)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&p&&(d||h)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:g,hasRelativeLayoutChanged:y,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||p.getDefaultTransition()||zP,{onLayoutAnimationStart:S,onLayoutAnimationComplete:j}=p.getProps(),C=!this.targetLayout||!Lb(this.targetLayout,b),T=!g&&y;if(this.options.layoutRoot||this.resumeFrom||T||g&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...Ap(_,"layout"),onPlay:S,onComplete:j};(p.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(m,T)}else g||C0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),fs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(FP),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$b(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(k0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(j0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(DP),this.nodes.forEach(AP),this.nodes.forEach(RP)):this.nodes.forEach(j0),this.clearAllSnapshots();const d=mn.now();Kt.delta=Pr(0,1e3/60,d-Kt.timestamp),Kt.timestamp=d,Kt.isProcessing=!0,xf.update.process(Kt),xf.preRender.process(Kt),xf.render.process(Kt),Kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Op.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(MP),this.sharedNodes.forEach(VP)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ct.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ct.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!rn(this.snapshot.measuredBox.x)&&!rn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=St(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d&&this.instance){const h=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!Db(this.projectionDelta),h=this.getTransformTemplate(),p=h?h(this.latestValues,""):void 0,m=p!==this.prevTransformTemplateValue;l&&this.instance&&(d||Bs(this.latestValues)||m)&&(i(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return l&&(h=this.removeTransform(h)),WP(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return St();const d=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(HP))){const{scroll:p}=this.root;p&&(Ko(d.x,p.offset.x),Ko(d.y,p.offset.y))}return d}removeElementScroll(l){const d=St();if(In(d,l),this.scroll?.wasRoot)return d;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:m,options:g}=p;p!==this.root&&m&&g.layoutScroll&&(m.wasRoot&&In(d,l),Ko(d.x,m.offset.x),Ko(d.y,m.offset.y))}return d}applyTransform(l,d=!1){const h=St();In(h,l);for(let p=0;p<this.path.length;p++){const m=this.path[p];!d&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Go(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Bs(m.latestValues)&&Go(h,m.latestValues)}return Bs(this.latestValues)&&Go(h,this.latestValues),h}removeTransform(l){const d=St();In(d,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];if(!p.instance||!Bs(p.latestValues))continue;_h(p.latestValues)&&p.updateSnapshot();const m=St(),g=p.measurePageBox();In(m,g),y0(d,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,m)}return Bs(this.latestValues)&&y0(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:g}=this.options;if(!(!this.layout||!(m||g))){if(this.resolvedRelativeTargetAt=Kt.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),va(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),In(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=St(),this.targetWithTransforms=St()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),XT(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):In(this.target,this.layout.layoutBox),vb(this.target,this.targetDelta)):In(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),va(this.relativeTargetOrigin,this.target,y.target),In(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||_h(this.parent.latestValues)||gb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),d=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Kt.timestamp&&(h=!1),h)return;const{layout:p,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||m))return;In(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;cT(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=St());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(m0(this.prevProjectionDelta.x,this.projectionDelta.x),m0(this.prevProjectionDelta.y,this.projectionDelta.y)),ga(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==y||!_0(this.projectionDelta.x,this.prevProjectionDelta.x)||!_0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=qo(),this.projectionDelta=qo(),this.projectionDeltaWithTransform=qo()}setAnimationOrigin(l,d=!1){const h=this.snapshot,p=h?h.latestValues:{},m={...this.latestValues},g=qo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const y=St(),b=h?h.source:void 0,_=this.layout?this.layout.source:void 0,S=b!==_,j=this.getStack(),C=!j||j.members.length<=1,T=!!(S&&!C&&this.options.crossfade===!0&&!this.path.some(UP));this.animationProgress=0;let E;this.mixTargetDelta=N=>{const P=N/1e3;E0(g.x,l.x,P),E0(g.y,l.y,P),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(va(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),BP(this.relativeTarget,this.relativeTargetOrigin,y,P),E&&CP(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=St()),In(E,this.relativeTarget)),S&&(this.animationValues=m,wP(m,p,this.latestValues,P,T,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(fs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ct.update(()=>{Lc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ri(0)),this.currentAnimation=mP(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),l.onUpdate&&l.onUpdate(d)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(TP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:h,layout:p,latestValues:m}=l;if(!(!d||!h||!p)){if(this!==l&&this.layout&&p&&Vb(this.options.animationType,this.layout.layoutBox,p.layoutBox)){h=this.target||St();const g=rn(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+g;const y=rn(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+y}In(d,h),Go(d,m),ga(this.projectionDeltaWithTransform,this.layoutCorrected,d,m)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new EP),this.sharedNodes.get(l).add(d);const p=d.options.initialPromotionConfig;d.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:h}={}){const p=this.getStack();p&&p.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const p={};h.z&&Af("z",l,p,this.animationValues);for(let m=0;m<Pf.length;m++)Af(`rotate${Pf[m]}`,l,p,this.animationValues),Af(`skew${Pf[m]}`,l,p,this.animationValues);l.render();for(const m in p)l.setStaticValue(m,p[m]),this.animationValues&&(this.animationValues[m]=p[m]);l.scheduleRender()}applyProjectionStyles(l,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Dc(d?.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Dc(d?.pointerEvents)||""),this.hasProjected&&!Bs(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const m=p.animationValues||p.latestValues;this.applyTransformsToTarget();let g=NP(this.projectionDeltaWithTransform,this.treeScale,m);h&&(g=h(m,g)),l.transform=g;const{x:y,y:b}=this.projectionDelta;l.transformOrigin=`${y.origin*100}% ${b.origin*100}% 0`,p.animationValues?l.opacity=p===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:l.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const _ in Ia){if(m[_]===void 0)continue;const{correct:S,applyTo:j,isCSSVariable:C}=Ia[_],T=g==="none"?m[_]:S(m[_],p);if(j){const E=j.length;for(let N=0;N<E;N++)l[j[N]]=T}else C?this.options.visualElement.renderState.vars[_]=T:l[_]=T}this.options.layoutId&&(l.pointerEvents=p===this?Dc(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(k0),this.root.sharedNodes.clear()}}}function AP(t){t.updateLayout()}function RP(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?Mn(m=>{const g=a?e.measuredBox[m]:e.layoutBox[m],y=rn(g);g.min=n[m].min,g.max=g.min+y}):Vb(i,e.layoutBox,n)&&Mn(m=>{const g=a?e.measuredBox[m]:e.layoutBox[m],y=rn(n[m]);g.max=g.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+y)});const l=qo();ga(l,n,e.layoutBox);const d=qo();a?ga(d,t.applyTransform(s,!0),e.measuredBox):ga(d,n,e.layoutBox);const h=!Db(l);let p=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:g,layout:y}=m;if(g&&y){const b=St();va(b,e.layoutBox,g.layoutBox);const _=St();va(_,n,y.layoutBox),Lb(b,_)||(p=!0),m.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=b,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:d,layoutDelta:l,hasLayoutChanged:h,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function OP(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function IP(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function MP(t){t.clearSnapshot()}function k0(t){t.clearMeasurements()}function j0(t){t.isLayoutDirty=!1}function DP(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function C0(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function LP(t){t.resolveTargetDelta()}function $P(t){t.calcProjection()}function FP(t){t.resetSkewAndRotation()}function VP(t){t.removeLeadSnapshot()}function E0(t,e,n){t.translate=pt(e.translate,0,n),t.scale=pt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function N0(t,e,n,s){t.min=pt(e.min,n.min,s),t.max=pt(e.max,n.max,s)}function BP(t,e,n,s){N0(t.x,e.x,n.x,s),N0(t.y,e.y,n.y,s)}function UP(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const zP={duration:.45,ease:[.4,0,.1,1]},T0=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),P0=T0("applewebkit/")&&!T0("chrome/")?Math.round:$n;function A0(t){t.min=P0(t.min),t.max=P0(t.max)}function WP(t){A0(t.x),A0(t.y)}function Vb(t,e,n){return t==="position"||t==="preserve-aspect"&&!JT(S0(e),S0(n),.2)}function HP(t){return t!==t.root&&t.scroll?.wasRoot}const KP=Fb({attachResizeListener:(t,e)=>Ma(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Rf={current:void 0},Bb=Fb({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Rf.current){const t=new KP({});t.mount(window),t.setOptions({layoutScroll:!0}),Rf.current=t}return Rf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),GP={pan:{Feature:dP},drag:{Feature:uP,ProjectionNode:Bb,MeasureLayout:Ob}};function R0(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=s[i];a&&ct.postRender(()=>a(e,qa(e)))}class qP extends xs{mount(){const{current:e}=this.node;e&&(this.unmount=mN(e,(n,s)=>(R0(this.node,s,"Start"),i=>R0(this.node,i,"End"))))}unmount(){}}class YP extends xs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ha(Ma(this.node.current,"focus",()=>this.onFocus()),Ma(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function O0(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=s[i];a&&ct.postRender(()=>a(e,qa(e)))}class JP extends xs{mount(){const{current:e}=this.node;e&&(this.unmount=xN(e,(n,s)=>(O0(this.node,s,"Start"),(i,{success:a})=>O0(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ph=new WeakMap,Of=new WeakMap,XP=t=>{const e=Ph.get(t.target);e&&e(t)},QP=t=>{t.forEach(XP)};function ZP({root:t,...e}){const n=t||document;Of.has(n)||Of.set(n,{});const s=Of.get(n),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(QP,{root:t,...e})),s[i]}function eA(t,e,n){const s=ZP(e);return Ph.set(t,n),s.observe(t),()=>{Ph.delete(t),s.unobserve(t)}}const tA={some:0,all:1};class nA extends xs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:a}=e,l={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:tA[i]},d=h=>{const{isIntersecting:p}=h;if(this.isInView===p||(this.isInView=p,a&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),y=p?m:g;y&&y(h)};return eA(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(rA(e,n))&&this.startObserver()}unmount(){}}function rA({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const sA={inView:{Feature:nA},tap:{Feature:JP},focus:{Feature:YP},hover:{Feature:qP}},oA={layout:{ProjectionNode:Bb,MeasureLayout:Ob}},iA={...WT,...sA,...GP,...oA},te=iT(iA,xT);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lA=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),I0=t=>{const e=lA(t);return e.charAt(0).toUpperCase()+e.slice(1)},Ub=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),cA=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=w.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:l,...d},h)=>w.createElement("svg",{ref:h,...uA,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:Ub("lucide",i),...!a&&!cA(d)&&{"aria-hidden":"true"},...d},[...l.map(([p,m])=>w.createElement(p,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=(t,e)=>{const n=w.forwardRef(({className:s,...i},a)=>w.createElement(dA,{ref:a,iconNode:e,className:Ub(`lucide-${aA(I0(t))}`,`lucide-${t}`,s),...i}));return n.displayName=I0(t),n};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Jo=Ce("arrow-left",fA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Kc=Ce("arrow-right",hA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ah=Ce("ban",pA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],gA=Ce("bell",mA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],zb=Ce("camera",vA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Da=Ce("check-check",yA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Xs=Ce("check",xA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],bA=Ce("chevron-down",wA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],If=Ce("chevron-right",SA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],kA=Ce("chevron-up",_A);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Rh=Ce("circle-alert",jA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],EA=Ce("clock",CA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Hp=Ce("ellipsis-vertical",NA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Oh=Ce("eye",TA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],AA=Ce("heart",PA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Wb=Ce("image",RA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Hb=Ce("info",OA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Kb=Ce("loader-circle",IA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],DA=Ce("lock",MA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$A=Ce("log-out",LA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Gb=Ce("mail",FA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],BA=Ce("maximize-2",VA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ya=Ce("message-circle",UA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],M0=Ce("mic-off",zA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Qs=Ce("mic",WA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],KA=Ce("minimize-2",HA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],qA=Ce("moon",GA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],JA=Ce("palette",YA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],D0=Ce("paperclip",XA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],qb=Ce("pause",QA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],Ih=Ce("phone-off",ZA);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],mr=Ce("phone",eR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Yb=Ce("play",tR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Xo=Ce("plus",nR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],sR=Ce("reply",rR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],cu=Ce("search",oR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],uu=Ce("send",iR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lR=Ce("settings",aR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],uR=Ce("shield",cR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Jb=Ce("smile",dR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],hR=Ce("sparkles",fR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],mR=Ce("sun",pR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],oi=Ce("trash-2",gR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],yR=Ce("type",vR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Xb=Ce("user-plus",xR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Qb=Ce("user-x",wR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Zb=Ce("user",bR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],L0=Ce("users",SR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],kR=Ce("video-off",_R);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],ii=Ce("video",jR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],ER=Ce("volume-2",CR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zs=Ce("x",NR);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],PR=Ce("zap",TR);function AR({onComplete:t,duration:e=2500}){const[n,s]=w.useState(0);return w.useEffect(()=>{const i=setInterval(()=>{s(l=>l>=100?(clearInterval(i),100):l+2)},e/50),a=setTimeout(()=>{t?.()},e);return()=>{clearInterval(i),clearTimeout(a)}},[t,e]),u.jsxs("div",{className:"h-screen w-full flex items-center justify-center relative overflow-hidden bg-gradient-to-br from-[#0057FF] via-[#0047DD] to-[#00D4A6] px-4 sm:px-6 pt-safe pb-safe",children:[u.jsx("div",{className:"absolute inset-0",children:u.jsx(te.div,{className:"absolute inset-0",animate:{background:["radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.1) 0%, transparent 50%)","radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.15) 0%, transparent 50%)","radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%)","radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.1) 0%, transparent 50%)"]},transition:{duration:4,repeat:1/0,ease:"linear"}})}),u.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(15)].map((i,a)=>u.jsx(te.div,{className:"absolute rounded-full bg-white/10 backdrop-blur-sm",style:{width:Math.random()*80+20,height:Math.random()*80+20,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-40,0],x:[0,30,0],scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:Math.random()*8+10,repeat:1/0,delay:Math.random()*2,ease:"easeInOut"}},a))}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center w-full max-w-md",children:[u.jsxs(te.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:15,duration:1},className:"relative mb-8 sm:mb-10",children:[u.jsx(te.div,{className:"absolute inset-0 -m-6",animate:{scale:[1,1.4,1],opacity:[.4,0,.4]},transition:{duration:2,repeat:1/0,ease:"easeOut"},children:u.jsx("div",{className:"w-44 h-44 rounded-full border-3 border-white/40"})}),u.jsx(te.div,{className:"absolute inset-0 -m-3",animate:{scale:[1,1.3,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0,ease:"easeOut",delay:.3},children:u.jsx("div",{className:"w-38 h-38 rounded-full border-2 border-white/30"})}),u.jsxs("div",{className:"relative w-24 h-24 xs:w-28 xs:h-28 sm:w-32 sm:h-32 rounded-full bg-white shadow-2xl flex items-center justify-center ring-4 xs:ring-6 sm:ring-8 ring-white/30",children:[u.jsx(te.div,{animate:{rotate:[0,360]},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute inset-0 rounded-full",style:{background:"conic-gradient(from 0deg, transparent, rgba(255,255,255,0.3), transparent)"}}),u.jsx(te.div,{className:"relative",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:u.jsx(Ya,{className:"w-12 h-12 xs:w-14 xs:h-14 sm:w-16 sm:h-16 text-primary",strokeWidth:2.5})})]}),u.jsx(te.div,{className:"absolute -top-2 -right-2 xs:-top-3 xs:-right-3 sm:-top-4 sm:-right-4",animate:{scale:[1,1.2,1],rotate:[0,180,360],opacity:[.6,1,.6]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:u.jsx(hR,{className:"w-6 h-6 xs:w-7 xs:h-7 sm:w-8 sm:h-8 text-white",fill:"white"})})]}),u.jsxs(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.8},className:"text-center mb-12 sm:mb-16",children:[u.jsx(te.h1,{className:"text-4xl xs:text-5xl sm:text-6xl md:text-7xl font-bold text-white mb-2 sm:mb-3 tracking-tight",animate:{textShadow:["0 0 20px rgba(255,255,255,0.5)","0 0 40px rgba(255,255,255,0.8)","0 0 20px rgba(255,255,255,0.5)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"AuroraLink"}),u.jsx(te.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"text-white/90 text-base xs:text-lg sm:text-xl font-medium tracking-wide px-4",children:"Connect. Communicate. Collaborate."})]}),u.jsxs(te.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"w-48 xs:w-56 sm:w-64 space-y-2.5 sm:space-y-3 px-4",children:[u.jsx("div",{className:"h-1.5 bg-white/20 rounded-full overflow-hidden backdrop-blur-sm",children:u.jsx(te.div,{className:"h-full bg-white rounded-full shadow-lg shadow-white/50",initial:{width:0},animate:{width:`${n}%`},transition:{duration:.3}})}),u.jsx(te.p,{className:"text-center text-white/70 text-sm",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:"Loading..."})]})]}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-black/10 to-transparent"})]})}function $0(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Rr(...t){return e=>{let n=!1;const s=t.map(i=>{const a=$0(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():$0(t[i],null)}}}}function mt(...t){return w.useCallback(Rr(...t),t)}function eo(t){const e=RR(t),n=w.forwardRef((s,i)=>{const{children:a,...l}=s,d=w.Children.toArray(a),h=d.find(IR);if(h){const p=h.props.children,m=d.map(g=>g===h?w.Children.count(p)>1?w.Children.only(null):w.isValidElement(p)?p.props.children:null:g);return u.jsx(e,{...l,ref:i,children:w.isValidElement(p)?w.cloneElement(p,void 0,m):null})}return u.jsx(e,{...l,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}var e1=eo("Slot");function RR(t){const e=w.forwardRef((n,s)=>{const{children:i,...a}=n;if(w.isValidElement(i)){const l=DR(i),d=MR(a,i.props);return i.type!==w.Fragment&&(d.ref=s?Rr(s,l):l),w.cloneElement(i,d)}return w.Children.count(i)>1?w.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var t1=Symbol("radix.slottable");function OR(t){const e=({children:n})=>u.jsx(u.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=t1,e}function IR(t){return w.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===t1}function MR(t,e){const n={...e};for(const s in e){const i=t[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?n[s]=(...d)=>{const h=a(...d);return i(...d),h}:i&&(n[s]=i):s==="style"?n[s]={...i,...a}:s==="className"&&(n[s]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function DR(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function n1(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=n1(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function r1(){for(var t,e,n=0,s="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=n1(t))&&(s&&(s+=" "),s+=e);return s}const F0=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,V0=r1,Kp=(t,e)=>n=>{var s;if(e?.variants==null)return V0(t,n?.class,n?.className);const{variants:i,defaultVariants:a}=e,l=Object.keys(i).map(p=>{const m=n?.[p],g=a?.[p];if(m===null)return null;const y=F0(m)||F0(g);return i[p][y]}),d=n&&Object.entries(n).reduce((p,m)=>{let[g,y]=m;return y===void 0||(p[g]=y),p},{}),h=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((p,m)=>{let{class:g,className:y,...b}=m;return Object.entries(b).every(_=>{let[S,j]=_;return Array.isArray(j)?j.includes({...a,...d}[S]):{...a,...d}[S]===j})?[...p,g,y]:p},[]);return V0(t,l,h,n?.class,n?.className)},Gp="-",LR=t=>{const e=FR(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:l=>{const d=l.split(Gp);return d[0]===""&&d.length!==1&&d.shift(),s1(d,e)||$R(l)},getConflictingClassGroupIds:(l,d)=>{const h=n[l]||[];return d&&s[l]?[...h,...s[l]]:h}}},s1=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],s=e.nextPart.get(n),i=s?s1(t.slice(1),s):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(Gp);return e.validators.find(({validator:l})=>l(a))?.classGroupId},B0=/^\[(.+)\]$/,$R=t=>{if(B0.test(t)){const e=B0.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},FR=t=>{const{theme:e,classGroups:n}=t,s={nextPart:new Map,validators:[]};for(const i in n)Mh(n[i],s,i,e);return s},Mh=(t,e,n,s)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:U0(e,i);a.classGroupId=n;return}if(typeof i=="function"){if(VR(i)){Mh(i(s),e,n,s);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,l])=>{Mh(l,U0(e,a),n,s)})})},U0=(t,e)=>{let n=t;return e.split(Gp).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},VR=t=>t.isThemeGetter,BR=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,s=new Map;const i=(a,l)=>{n.set(a,l),e++,e>t&&(e=0,s=n,n=new Map)};return{get(a){let l=n.get(a);if(l!==void 0)return l;if((l=s.get(a))!==void 0)return i(a,l),l},set(a,l){n.has(a)?n.set(a,l):i(a,l)}}},Dh="!",Lh=":",UR=Lh.length,zR=t=>{const{prefix:e,experimentalParseClassName:n}=t;let s=i=>{const a=[];let l=0,d=0,h=0,p;for(let _=0;_<i.length;_++){let S=i[_];if(l===0&&d===0){if(S===Lh){a.push(i.slice(h,_)),h=_+UR;continue}if(S==="/"){p=_;continue}}S==="["?l++:S==="]"?l--:S==="("?d++:S===")"&&d--}const m=a.length===0?i:i.substring(h),g=WR(m),y=g!==m,b=p&&p>h?p-h:void 0;return{modifiers:a,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:b}};if(e){const i=e+Lh,a=s;s=l=>l.startsWith(i)?a(l.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(n){const i=s;s=a=>n({className:a,parseClassName:i})}return s},WR=t=>t.endsWith(Dh)?t.substring(0,t.length-1):t.startsWith(Dh)?t.substring(1):t,HR=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const i=[];let a=[];return s.forEach(l=>{l[0]==="["||e[l]?(i.push(...a.sort(),l),a=[]):a.push(l)}),i.push(...a.sort()),i}},KR=t=>({cache:BR(t.cacheSize),parseClassName:zR(t),sortModifiers:HR(t),...LR(t)}),GR=/\s+/,qR=(t,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:i,sortModifiers:a}=e,l=[],d=t.trim().split(GR);let h="";for(let p=d.length-1;p>=0;p-=1){const m=d[p],{isExternal:g,modifiers:y,hasImportantModifier:b,baseClassName:_,maybePostfixModifierPosition:S}=n(m);if(g){h=m+(h.length>0?" "+h:h);continue}let j=!!S,C=s(j?_.substring(0,S):_);if(!C){if(!j){h=m+(h.length>0?" "+h:h);continue}if(C=s(_),!C){h=m+(h.length>0?" "+h:h);continue}j=!1}const T=a(y).join(":"),E=b?T+Dh:T,N=E+C;if(l.includes(N))continue;l.push(N);const P=i(C,j);for(let M=0;M<P.length;++M){const L=P[M];l.push(E+L)}h=m+(h.length>0?" "+h:h)}return h};function YR(){let t=0,e,n,s="";for(;t<arguments.length;)(e=arguments[t++])&&(n=o1(e))&&(s&&(s+=" "),s+=n);return s}const o1=t=>{if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=o1(t[s]))&&(n&&(n+=" "),n+=e);return n};function JR(t,...e){let n,s,i,a=l;function l(h){const p=e.reduce((m,g)=>g(m),t());return n=KR(p),s=n.cache.get,i=n.cache.set,a=d,d(h)}function d(h){const p=s(h);if(p)return p;const m=qR(h,n);return i(h,m),m}return function(){return a(YR.apply(null,arguments))}}const At=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},i1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,a1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,XR=/^\d+\/\d+$/,QR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ZR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,e5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,t5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,n5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Po=t=>XR.test(t),Ve=t=>!!t&&!Number.isNaN(Number(t)),is=t=>!!t&&Number.isInteger(Number(t)),Mf=t=>t.endsWith("%")&&Ve(t.slice(0,-1)),Nr=t=>QR.test(t),r5=()=>!0,s5=t=>ZR.test(t)&&!e5.test(t),l1=()=>!1,o5=t=>t5.test(t),i5=t=>n5.test(t),a5=t=>!we(t)&&!be(t),l5=t=>pi(t,d1,l1),we=t=>i1.test(t),$s=t=>pi(t,f1,s5),Df=t=>pi(t,h5,Ve),z0=t=>pi(t,c1,l1),c5=t=>pi(t,u1,i5),gc=t=>pi(t,h1,o5),be=t=>a1.test(t),sa=t=>mi(t,f1),u5=t=>mi(t,p5),W0=t=>mi(t,c1),d5=t=>mi(t,d1),f5=t=>mi(t,u1),vc=t=>mi(t,h1,!0),pi=(t,e,n)=>{const s=i1.exec(t);return s?s[1]?e(s[1]):n(s[2]):!1},mi=(t,e,n=!1)=>{const s=a1.exec(t);return s?s[1]?e(s[1]):n:!1},c1=t=>t==="position"||t==="percentage",u1=t=>t==="image"||t==="url",d1=t=>t==="length"||t==="size"||t==="bg-size",f1=t=>t==="length",h5=t=>t==="number",p5=t=>t==="family-name",h1=t=>t==="shadow",m5=()=>{const t=At("color"),e=At("font"),n=At("text"),s=At("font-weight"),i=At("tracking"),a=At("leading"),l=At("breakpoint"),d=At("container"),h=At("spacing"),p=At("radius"),m=At("shadow"),g=At("inset-shadow"),y=At("text-shadow"),b=At("drop-shadow"),_=At("blur"),S=At("perspective"),j=At("aspect"),C=At("ease"),T=At("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],P=()=>[...N(),be,we],M=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto","contain","none"],$=()=>[be,we,h],z=()=>[Po,"full","auto",...$()],W=()=>[is,"none","subgrid",be,we],Z=()=>["auto",{span:["full",is,be,we]},is,be,we],X=()=>[is,"auto",be,we],ee=()=>["auto","min","max","fr",be,we],fe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],oe=()=>["start","end","center","stretch","center-safe","end-safe"],Q=()=>["auto",...$()],Y=()=>[Po,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...$()],O=()=>[t,be,we],B=()=>[...N(),W0,z0,{position:[be,we]}],J=()=>["no-repeat",{repeat:["","x","y","space","round"]}],A=()=>["auto","cover","contain",d5,l5,{size:[be,we]}],I=()=>[Mf,sa,$s],H=()=>["","none","full",p,be,we],G=()=>["",Ve,sa,$s],q=()=>["solid","dashed","dotted","double"],ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ne=()=>[Ve,Mf,W0,z0],de=()=>["","none",_,be,we],ve=()=>["none",Ve,be,we],We=()=>["none",Ve,be,we],ot=()=>[Ve,be,we],pe=()=>[Po,"full",...$()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Nr],breakpoint:[Nr],color:[r5],container:[Nr],"drop-shadow":[Nr],ease:["in","out","in-out"],font:[a5],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Nr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Nr],shadow:[Nr],spacing:["px",Ve],text:[Nr],"text-shadow":[Nr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Po,we,be,j]}],container:["container"],columns:[{columns:[Ve,we,be,d]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:P()}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:z()}],"inset-x":[{"inset-x":z()}],"inset-y":[{"inset-y":z()}],start:[{start:z()}],end:[{end:z()}],top:[{top:z()}],right:[{right:z()}],bottom:[{bottom:z()}],left:[{left:z()}],visibility:["visible","invisible","collapse"],z:[{z:[is,"auto",be,we]}],basis:[{basis:[Po,"full","auto",d,...$()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ve,Po,"auto","initial","none",we]}],grow:[{grow:["",Ve,be,we]}],shrink:[{shrink:["",Ve,be,we]}],order:[{order:[is,"first","last","none",be,we]}],"grid-cols":[{"grid-cols":W()}],"col-start-end":[{col:Z()}],"col-start":[{"col-start":X()}],"col-end":[{"col-end":X()}],"grid-rows":[{"grid-rows":W()}],"row-start-end":[{row:Z()}],"row-start":[{"row-start":X()}],"row-end":[{"row-end":X()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ee()}],"auto-rows":[{"auto-rows":ee()}],gap:[{gap:$()}],"gap-x":[{"gap-x":$()}],"gap-y":[{"gap-y":$()}],"justify-content":[{justify:[...fe(),"normal"]}],"justify-items":[{"justify-items":[...oe(),"normal"]}],"justify-self":[{"justify-self":["auto",...oe()]}],"align-content":[{content:["normal",...fe()]}],"align-items":[{items:[...oe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...oe(),{baseline:["","last"]}]}],"place-content":[{"place-content":fe()}],"place-items":[{"place-items":[...oe(),"baseline"]}],"place-self":[{"place-self":["auto",...oe()]}],p:[{p:$()}],px:[{px:$()}],py:[{py:$()}],ps:[{ps:$()}],pe:[{pe:$()}],pt:[{pt:$()}],pr:[{pr:$()}],pb:[{pb:$()}],pl:[{pl:$()}],m:[{m:Q()}],mx:[{mx:Q()}],my:[{my:Q()}],ms:[{ms:Q()}],me:[{me:Q()}],mt:[{mt:Q()}],mr:[{mr:Q()}],mb:[{mb:Q()}],ml:[{ml:Q()}],"space-x":[{"space-x":$()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":$()}],"space-y-reverse":["space-y-reverse"],size:[{size:Y()}],w:[{w:[d,"screen",...Y()]}],"min-w":[{"min-w":[d,"screen","none",...Y()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[l]},...Y()]}],h:[{h:["screen","lh",...Y()]}],"min-h":[{"min-h":["screen","lh","none",...Y()]}],"max-h":[{"max-h":["screen","lh",...Y()]}],"font-size":[{text:["base",n,sa,$s]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,be,Df]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Mf,we]}],"font-family":[{font:[u5,we,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,be,we]}],"line-clamp":[{"line-clamp":[Ve,"none",be,Df]}],leading:[{leading:[a,...$()]}],"list-image":[{"list-image":["none",be,we]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",be,we]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:O()}],"text-color":[{text:O()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ve,"from-font","auto",be,$s]}],"text-decoration-color":[{decoration:O()}],"underline-offset":[{"underline-offset":[Ve,"auto",be,we]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be,we]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be,we]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:B()}],"bg-repeat":[{bg:J()}],"bg-size":[{bg:A()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},is,be,we],radial:["",be,we],conic:[is,be,we]},f5,c5]}],"bg-color":[{bg:O()}],"gradient-from-pos":[{from:I()}],"gradient-via-pos":[{via:I()}],"gradient-to-pos":[{to:I()}],"gradient-from":[{from:O()}],"gradient-via":[{via:O()}],"gradient-to":[{to:O()}],rounded:[{rounded:H()}],"rounded-s":[{"rounded-s":H()}],"rounded-e":[{"rounded-e":H()}],"rounded-t":[{"rounded-t":H()}],"rounded-r":[{"rounded-r":H()}],"rounded-b":[{"rounded-b":H()}],"rounded-l":[{"rounded-l":H()}],"rounded-ss":[{"rounded-ss":H()}],"rounded-se":[{"rounded-se":H()}],"rounded-ee":[{"rounded-ee":H()}],"rounded-es":[{"rounded-es":H()}],"rounded-tl":[{"rounded-tl":H()}],"rounded-tr":[{"rounded-tr":H()}],"rounded-br":[{"rounded-br":H()}],"rounded-bl":[{"rounded-bl":H()}],"border-w":[{border:G()}],"border-w-x":[{"border-x":G()}],"border-w-y":[{"border-y":G()}],"border-w-s":[{"border-s":G()}],"border-w-e":[{"border-e":G()}],"border-w-t":[{"border-t":G()}],"border-w-r":[{"border-r":G()}],"border-w-b":[{"border-b":G()}],"border-w-l":[{"border-l":G()}],"divide-x":[{"divide-x":G()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":G()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...q(),"hidden","none"]}],"divide-style":[{divide:[...q(),"hidden","none"]}],"border-color":[{border:O()}],"border-color-x":[{"border-x":O()}],"border-color-y":[{"border-y":O()}],"border-color-s":[{"border-s":O()}],"border-color-e":[{"border-e":O()}],"border-color-t":[{"border-t":O()}],"border-color-r":[{"border-r":O()}],"border-color-b":[{"border-b":O()}],"border-color-l":[{"border-l":O()}],"divide-color":[{divide:O()}],"outline-style":[{outline:[...q(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ve,be,we]}],"outline-w":[{outline:["",Ve,sa,$s]}],"outline-color":[{outline:O()}],shadow:[{shadow:["","none",m,vc,gc]}],"shadow-color":[{shadow:O()}],"inset-shadow":[{"inset-shadow":["none",g,vc,gc]}],"inset-shadow-color":[{"inset-shadow":O()}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:O()}],"ring-offset-w":[{"ring-offset":[Ve,$s]}],"ring-offset-color":[{"ring-offset":O()}],"inset-ring-w":[{"inset-ring":G()}],"inset-ring-color":[{"inset-ring":O()}],"text-shadow":[{"text-shadow":["none",y,vc,gc]}],"text-shadow-color":[{"text-shadow":O()}],opacity:[{opacity:[Ve,be,we]}],"mix-blend":[{"mix-blend":[...ae(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ae()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ve]}],"mask-image-linear-from-pos":[{"mask-linear-from":ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":ne()}],"mask-image-linear-from-color":[{"mask-linear-from":O()}],"mask-image-linear-to-color":[{"mask-linear-to":O()}],"mask-image-t-from-pos":[{"mask-t-from":ne()}],"mask-image-t-to-pos":[{"mask-t-to":ne()}],"mask-image-t-from-color":[{"mask-t-from":O()}],"mask-image-t-to-color":[{"mask-t-to":O()}],"mask-image-r-from-pos":[{"mask-r-from":ne()}],"mask-image-r-to-pos":[{"mask-r-to":ne()}],"mask-image-r-from-color":[{"mask-r-from":O()}],"mask-image-r-to-color":[{"mask-r-to":O()}],"mask-image-b-from-pos":[{"mask-b-from":ne()}],"mask-image-b-to-pos":[{"mask-b-to":ne()}],"mask-image-b-from-color":[{"mask-b-from":O()}],"mask-image-b-to-color":[{"mask-b-to":O()}],"mask-image-l-from-pos":[{"mask-l-from":ne()}],"mask-image-l-to-pos":[{"mask-l-to":ne()}],"mask-image-l-from-color":[{"mask-l-from":O()}],"mask-image-l-to-color":[{"mask-l-to":O()}],"mask-image-x-from-pos":[{"mask-x-from":ne()}],"mask-image-x-to-pos":[{"mask-x-to":ne()}],"mask-image-x-from-color":[{"mask-x-from":O()}],"mask-image-x-to-color":[{"mask-x-to":O()}],"mask-image-y-from-pos":[{"mask-y-from":ne()}],"mask-image-y-to-pos":[{"mask-y-to":ne()}],"mask-image-y-from-color":[{"mask-y-from":O()}],"mask-image-y-to-color":[{"mask-y-to":O()}],"mask-image-radial":[{"mask-radial":[be,we]}],"mask-image-radial-from-pos":[{"mask-radial-from":ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":ne()}],"mask-image-radial-from-color":[{"mask-radial-from":O()}],"mask-image-radial-to-color":[{"mask-radial-to":O()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[Ve]}],"mask-image-conic-from-pos":[{"mask-conic-from":ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":ne()}],"mask-image-conic-from-color":[{"mask-conic-from":O()}],"mask-image-conic-to-color":[{"mask-conic-to":O()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:B()}],"mask-repeat":[{mask:J()}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",be,we]}],filter:[{filter:["","none",be,we]}],blur:[{blur:de()}],brightness:[{brightness:[Ve,be,we]}],contrast:[{contrast:[Ve,be,we]}],"drop-shadow":[{"drop-shadow":["","none",b,vc,gc]}],"drop-shadow-color":[{"drop-shadow":O()}],grayscale:[{grayscale:["",Ve,be,we]}],"hue-rotate":[{"hue-rotate":[Ve,be,we]}],invert:[{invert:["",Ve,be,we]}],saturate:[{saturate:[Ve,be,we]}],sepia:[{sepia:["",Ve,be,we]}],"backdrop-filter":[{"backdrop-filter":["","none",be,we]}],"backdrop-blur":[{"backdrop-blur":de()}],"backdrop-brightness":[{"backdrop-brightness":[Ve,be,we]}],"backdrop-contrast":[{"backdrop-contrast":[Ve,be,we]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ve,be,we]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ve,be,we]}],"backdrop-invert":[{"backdrop-invert":["",Ve,be,we]}],"backdrop-opacity":[{"backdrop-opacity":[Ve,be,we]}],"backdrop-saturate":[{"backdrop-saturate":[Ve,be,we]}],"backdrop-sepia":[{"backdrop-sepia":["",Ve,be,we]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":$()}],"border-spacing-x":[{"border-spacing-x":$()}],"border-spacing-y":[{"border-spacing-y":$()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",be,we]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ve,"initial",be,we]}],ease:[{ease:["linear","initial",C,be,we]}],delay:[{delay:[Ve,be,we]}],animate:[{animate:["none",T,be,we]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,be,we]}],"perspective-origin":[{"perspective-origin":P()}],rotate:[{rotate:ve()}],"rotate-x":[{"rotate-x":ve()}],"rotate-y":[{"rotate-y":ve()}],"rotate-z":[{"rotate-z":ve()}],scale:[{scale:We()}],"scale-x":[{"scale-x":We()}],"scale-y":[{"scale-y":We()}],"scale-z":[{"scale-z":We()}],"scale-3d":["scale-3d"],skew:[{skew:ot()}],"skew-x":[{"skew-x":ot()}],"skew-y":[{"skew-y":ot()}],transform:[{transform:[be,we,"","none","gpu","cpu"]}],"transform-origin":[{origin:P()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:pe()}],"translate-x":[{"translate-x":pe()}],"translate-y":[{"translate-y":pe()}],"translate-z":[{"translate-z":pe()}],"translate-none":["translate-none"],accent:[{accent:O()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:O()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be,we]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be,we]}],fill:[{fill:["none",...O()]}],"stroke-w":[{stroke:[Ve,sa,$s,Df]}],stroke:[{stroke:["none",...O()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},g5=JR(m5);function Qe(...t){return g5(r1(t))}const qp=Kp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Ae=w.forwardRef(({className:t,variant:e,size:n,asChild:s=!1,...i},a)=>{const l=s?e1:"button";return u.jsx(l,{ref:a,"data-slot":"button",className:Qe(qp({variant:e,size:n,className:t})),...i})});Ae.displayName="Button";const oa=[{icon:Ya,title:"Welcome to AuroraLink",description:"Connect with friends and family through secure, encrypted messaging, voice and video calls. Your conversations, always within reach.",gradient:"from-primary via-primary/80 to-accent",features:["Instant Messaging","Voice & Video Calls","Media Sharing"]},{icon:uR,title:"Private & Secure",description:"Your messages are protected with end-to-end encryption. Only you and your recipients can read them. Your privacy is our priority.",gradient:"from-accent via-accent/80 to-primary",features:["End-to-End Encryption","Privacy First","Secure Storage"]},{icon:PR,title:"Fast & Reliable",description:"Send messages, share media, and make calls instantly with real-time delivery and notifications. Lightning-fast communication.",gradient:"from-primary via-accent/60 to-primary",features:["Real-Time Sync","Instant Delivery","Always Connected"]}];function v5(){const t=Array.from({length:20},(e,n)=>({id:n,size:Math.random()*60+20,x:Math.random()*100,y:Math.random()*100,duration:Math.random()*10+15,delay:Math.random()*5}));return u.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:t.map(e=>u.jsx(te.div,{className:"absolute rounded-full bg-gradient-to-br from-primary/10 to-accent/10 backdrop-blur-sm",style:{width:e.size,height:e.size,left:`${e.x}%`,top:`${e.y}%`},animate:{y:[0,-30,0],x:[0,20,0],scale:[1,1.1,1],opacity:[.3,.6,.3]},transition:{duration:e.duration,repeat:1/0,delay:e.delay,ease:"easeInOut"}},e.id))})}function y5({onComplete:t}){const[e,n]=w.useState(0),s=()=>{e<oa.length-1?n(e+1):t()},i=oa[e],a=i.icon;return u.jsxs("div",{className:"onboarding-container w-full overflow-hidden relative bg-gradient-to-br from-background via-surface to-background",children:[u.jsx(te.div,{className:"absolute inset-0 opacity-30",animate:{background:["radial-gradient(circle at 0% 0%, var(--primary) 0%, transparent 50%)","radial-gradient(circle at 100% 100%, var(--accent) 0%, transparent 50%)","radial-gradient(circle at 0% 100%, var(--primary) 0%, transparent 50%)","radial-gradient(circle at 100% 0%, var(--accent) 0%, transparent 50%)","radial-gradient(circle at 0% 0%, var(--primary) 0%, transparent 50%)"]},transition:{duration:20,repeat:1/0,ease:"linear"}}),u.jsx(v5,{}),u.jsxs("div",{className:"relative z-10 h-full w-full flex flex-col items-center justify-between px-4 py-4 xs:py-5 sm:py-6 md:py-8 lg:py-10",style:{paddingTop:"max(env(safe-area-inset-top), 1rem)",paddingBottom:"max(env(safe-area-inset-bottom), 1rem)"},children:[u.jsx(te.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center w-full",children:u.jsxs(te.div,{className:"inline-flex items-center gap-2 xs:gap-2.5 sm:gap-3 md:gap-4 mb-1.5 xs:mb-2",animate:{scale:[1,1.01,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-9 h-9 xs:w-10 xs:h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 rounded-xl sm:rounded-2xl bg-gradient-to-br from-primary to-accent flex items-center justify-center shadow-xl shadow-primary/30",children:u.jsx(Ya,{className:"w-5 h-5 xs:w-6 xs:h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 text-white",strokeWidth:2.5})}),u.jsx("div",{className:"absolute inset-0 rounded-xl sm:rounded-2xl bg-gradient-to-br from-primary to-accent opacity-20 blur-xl"})]}),u.jsx("h1",{className:"text-xl xs:text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-primary via-primary to-accent bg-clip-text text-transparent",children:"AuroraLink"})]})}),u.jsx(pa,{mode:"wait",children:u.jsxs(te.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.5,ease:[.25,.1,.25,1]},className:"w-full max-w-[90%] xs:max-w-sm sm:max-w-md md:max-w-lg lg:max-w-4xl flex flex-col items-center text-center flex-1 justify-center py-1 xs:py-2 sm:py-4",children:[u.jsx(te.div,{initial:{scale:.92,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.7,ease:[.25,.1,.25,1]},className:"relative mb-6 xs:mb-8 sm:mb-10 md:mb-12 w-full px-2 sm:px-0",children:u.jsxs("div",{className:"relative mx-auto w-full max-w-[280px] xs:max-w-[300px] sm:max-w-[340px] md:max-w-md px-4",children:[u.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${i.gradient} opacity-20 blur-[60px] sm:blur-[80px] md:blur-[100px] rounded-full`}),u.jsxs(te.div,{className:"relative w-full aspect-square",animate:{y:[0,-12,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:[u.jsx(te.div,{className:`relative w-full h-full mx-auto rounded-full bg-gradient-to-br ${i.gradient} p-1 shadow-2xl`,animate:{rotate:[0,360]},transition:{duration:20,repeat:1/0,ease:"linear"},children:u.jsx("div",{className:"w-full h-full rounded-full bg-surface/95 backdrop-blur-sm flex items-center justify-center",children:u.jsxs(te.div,{className:`w-[45%] h-[45%] rounded-full bg-gradient-to-br ${i.gradient} flex items-center justify-center shadow-2xl`,animate:{scale:[1,1.05,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:[u.jsx(a,{className:"w-[55%] h-[55%] text-white",strokeWidth:2.5}),u.jsx(te.div,{className:"absolute inset-0 rounded-full bg-white/30",animate:{opacity:[.2,.5,.2],scale:[.9,1.1,.9]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"}})]})})}),[0,1,2].map(l=>u.jsx(te.div,{className:`absolute top-1/2 left-1/2 w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-gradient-to-br ${i.gradient} shadow-lg -translate-x-1/2 -translate-y-1/2`,animate:{rotate:[l*120,l*120+360]},transition:{duration:8,repeat:1/0,ease:"linear",delay:l*.5},children:u.jsx("div",{className:"absolute top-0 left-0 w-3 h-3 sm:w-4 sm:h-4",style:{transform:"translateY(calc(-1 * min(80px, 28vw)))"}})},l))]}),u.jsx(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},className:"mt-6 xs:mt-8 sm:mt-10 md:mt-12 space-y-2.5 xs:space-y-3 sm:space-y-4 w-full",children:i.features.map((l,d)=>u.jsxs(te.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6+d*.1,duration:.5},className:"flex items-center gap-2.5 xs:gap-3 bg-surface/50 backdrop-blur-sm rounded-xl sm:rounded-2xl px-3.5 xs:px-4 sm:px-5 py-2.5 xs:py-3 sm:py-3.5 border border-border/50 shadow-sm hover:shadow-md transition-all duration-300 min-h-[52px] touch-manipulation",children:[u.jsx("div",{className:`flex-shrink-0 w-7 h-7 xs:w-8 xs:h-8 sm:w-9 sm:h-9 rounded-lg sm:rounded-xl bg-gradient-to-br ${i.gradient} flex items-center justify-center`,children:u.jsx(Xs,{className:"w-3.5 h-3.5 xs:w-4 xs:h-4 sm:w-5 sm:h-5 text-white",strokeWidth:3})}),u.jsx("span",{className:"text-[13px] xs:text-sm sm:text-base font-medium text-foreground leading-snug",children:l})]},l))})]})}),u.jsxs(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},className:"space-y-2 xs:space-y-3 sm:space-y-4 md:space-y-6 mb-4 xs:mb-5 sm:mb-6 md:mb-8 px-2 xs:px-4 sm:px-6 md:px-8 w-full",children:[u.jsx("h2",{className:"text-lg xs:text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-foreground leading-tight",children:i.title}),u.jsx("p",{className:"text-[13px] xs:text-sm sm:text-base md:text-lg text-muted-foreground max-w-md sm:max-w-lg md:max-w-2xl mx-auto leading-relaxed",children:i.description})]})]},e)}),u.jsxs("div",{className:"w-full max-w-[90%] xs:max-w-sm sm:max-w-md md:max-w-lg space-y-4 xs:space-y-5 sm:space-y-6 md:space-y-8 px-2 xs:px-4 sm:px-6",children:[u.jsx("div",{className:"flex justify-center gap-1.5 xs:gap-2 sm:gap-2.5 md:gap-3",children:oa.map((l,d)=>u.jsx(te.button,{onClick:()=>n(d),className:"relative focus:outline-none touch-manipulation min-w-[44px] min-h-[44px] flex items-center justify-center",whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":`Go to slide ${d+1}`,children:u.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${d===e?"w-7 xs:w-8 sm:w-10 bg-gradient-to-r from-primary to-accent shadow-lg shadow-primary/30":"w-2 bg-muted-foreground/40 hover:bg-muted-foreground/60"}`})},d))}),u.jsxs("div",{className:"flex gap-2.5 xs:gap-3 sm:gap-4",children:[e>0&&u.jsx(te.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex-1",children:u.jsx(Ae,{variant:"outline",onClick:()=>n(e-1),className:"w-full min-h-[48px] h-12 sm:h-13 md:h-14 text-[13px] xs:text-sm sm:text-base font-semibold border-2 hover:bg-muted touch-manipulation",children:"Back"})}),u.jsx(te.div,{className:e>0?"flex-1":"w-full",whileHover:{scale:1.02},whileTap:{scale:.98},children:u.jsx(Ae,{onClick:s,className:"w-full min-h-[48px] h-12 sm:h-13 md:h-14 text-[13px] xs:text-sm sm:text-base font-semibold bg-gradient-to-r from-primary to-accent hover:opacity-90 shadow-xl shadow-primary/30 transition-all duration-300 touch-manipulation",children:e<oa.length-1?u.jsxs(u.Fragment,{children:["Next",u.jsx(Kc,{className:"ml-1.5 sm:ml-2 w-4 h-4 sm:w-5 sm:h-5"})]}):u.jsxs(u.Fragment,{children:["Get Started",u.jsx(Kc,{className:"ml-1.5 sm:ml-2 w-4 h-4 sm:w-5 sm:h-5"})]})})})]}),e<oa.length-1&&u.jsx(te.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},onClick:t,className:"w-full text-[13px] xs:text-sm sm:text-base font-medium text-muted-foreground hover:text-foreground transition-colors py-2.5 xs:py-3 sm:py-3.5 touch-manipulation min-h-[48px]",children:"Skip"})]})]})]})}const hr=w.forwardRef(({className:t,type:e,...n},s)=>u.jsx("input",{ref:s,type:e,"data-slot":"input",className:Qe("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n}));hr.displayName="Input";var x5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ge=x5.reduce((t,e)=>{const n=eo(`Primitive.${e}`),s=w.forwardRef((i,a)=>{const{asChild:l,...d}=i,h=l?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(h,{...d,ref:a})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function p1(t,e){t&&up.flushSync(()=>t.dispatchEvent(e))}var w5="Label",m1=w.forwardRef((t,e)=>u.jsx(Ge.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));m1.displayName=w5;var b5=m1;function ca({className:t,...e}){return u.jsx(b5,{"data-slot":"label",className:Qe("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}const S5=Kp("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function $h({className:t,variant:e,...n}){return u.jsx("div",{"data-slot":"alert",role:"alert",className:Qe(S5({variant:e}),t),...n})}function Fh({className:t,...e}){return u.jsx("div",{"data-slot":"alert-description",className:Qe("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...e})}var Vh=function(t,e){return Vh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},Vh(t,e)};function g1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Vh(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Dn=function(){return Dn=Object.assign||function(e){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Dn.apply(this,arguments)};function ws(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function v1(t,e,n,s){var i=arguments.length,a=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,s);else for(var d=t.length-1;d>=0;d--)(l=t[d])&&(a=(i<3?l(a):i>3?l(e,n,a):l(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function y1(t,e){return function(n,s){e(n,s,t)}}function x1(t,e,n,s,i,a){function l(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var d=s.kind,h=d==="getter"?"get":d==="setter"?"set":"value",p=!e&&t?s.static?t:t.prototype:null,m=e||(p?Object.getOwnPropertyDescriptor(p,s.name):{}),g,y=!1,b=n.length-1;b>=0;b--){var _={};for(var S in s)_[S]=S==="access"?{}:s[S];for(var S in s.access)_.access[S]=s.access[S];_.addInitializer=function(C){if(y)throw new TypeError("Cannot add initializers after decoration has completed");a.push(l(C||null))};var j=(0,n[b])(d==="accessor"?{get:m.get,set:m.set}:m[h],_);if(d==="accessor"){if(j===void 0)continue;if(j===null||typeof j!="object")throw new TypeError("Object expected");(g=l(j.get))&&(m.get=g),(g=l(j.set))&&(m.set=g),(g=l(j.init))&&i.unshift(g)}else(g=l(j))&&(d==="field"?i.unshift(g):m[h]=g)}p&&Object.defineProperty(p,s.name,m),y=!0}function w1(t,e,n){for(var s=arguments.length>2,i=0;i<e.length;i++)n=s?e[i].call(t,n):e[i].call(t);return s?n:void 0}function b1(t){return typeof t=="symbol"?t:"".concat(t)}function S1(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function _1(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function _e(t,e,n,s){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function d(m){try{p(s.next(m))}catch(g){l(g)}}function h(m){try{p(s.throw(m))}catch(g){l(g)}}function p(m){m.done?a(m.value):i(m.value).then(d,h)}p((s=s.apply(t,e||[])).next())})}function k1(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,i,a,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=d(0),l.throw=d(1),l.return=d(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(p){return function(m){return h([p,m])}}function h(p){if(s)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(s=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(m){p=[6,m],i=0}finally{s=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var du=Object.create?(function(t,e,n,s){s===void 0&&(s=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,s,i)}):(function(t,e,n,s){s===void 0&&(s=n),t[s]=e[n]});function j1(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&du(e,t,n)}function Gc(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yp(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(d){l={error:d}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(l)throw l.error}}return a}function C1(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Yp(arguments[e]));return t}function E1(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var s=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],l=0,d=a.length;l<d;l++,i++)s[i]=a[l];return s}function Jp(t,e,n){if(n||arguments.length===2)for(var s=0,i=e.length,a;s<i;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))}function ai(t){return this instanceof ai?(this.v=t,this):new ai(t)}function N1(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(b){return function(_){return Promise.resolve(_).then(b,g)}}function d(b,_){s[b]&&(i[b]=function(S){return new Promise(function(j,C){a.push([b,S,j,C])>1||h(b,S)})},_&&(i[b]=_(i[b])))}function h(b,_){try{p(s[b](_))}catch(S){y(a[0][3],S)}}function p(b){b.value instanceof ai?Promise.resolve(b.value.v).then(m,g):y(a[0][2],b)}function m(b){h("next",b)}function g(b){h("throw",b)}function y(b,_){b(_),a.shift(),a.length&&h(a[0][0],a[0][1])}}function T1(t){var e,n;return e={},s("next"),s("throw",function(i){throw i}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(i,a){e[i]=t[i]?function(l){return(n=!n)?{value:ai(t[i](l)),done:!1}:a?a(l):l}:a}}function P1(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Gc=="function"?Gc(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(a){n[a]=t[a]&&function(l){return new Promise(function(d,h){l=t[a](l),i(d,h,l.done,l.value)})}}function i(a,l,d,h){Promise.resolve(h).then(function(p){a({value:p,done:d})},l)}}function A1(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var _5=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},Bh=function(t){return Bh=Object.getOwnPropertyNames||function(e){var n=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[n.length]=s);return n},Bh(t)};function R1(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=Bh(t),s=0;s<n.length;s++)n[s]!=="default"&&du(e,t,n[s]);return _5(e,t),e}function O1(t){return t&&t.__esModule?t:{default:t}}function I1(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}function M1(t,e,n,s,i){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function D1(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function L1(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],n&&(i=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");i&&(s=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:s,async:n})}else n&&t.stack.push({async:!0});return e}var k5=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var s=new Error(n);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function $1(t){function e(a){t.error=t.hasError?new k5(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var n,s=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&s===1)return s=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return s|=2,Promise.resolve(a).then(i,function(l){return e(l),i()})}else s|=1}catch(l){e(l)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function F1(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,s,i,a,l){return s?e?".jsx":".js":i&&(!a||!l)?n:i+a+"."+l.toLowerCase()+"js"}):t}const j5={__extends:g1,__assign:Dn,__rest:ws,__decorate:v1,__param:y1,__esDecorate:x1,__runInitializers:w1,__propKey:b1,__setFunctionName:S1,__metadata:_1,__awaiter:_e,__generator:k1,__createBinding:du,__exportStar:j1,__values:Gc,__read:Yp,__spread:C1,__spreadArrays:E1,__spreadArray:Jp,__await:ai,__asyncGenerator:N1,__asyncDelegator:T1,__asyncValues:P1,__makeTemplateObject:A1,__importStar:R1,__importDefault:O1,__classPrivateFieldGet:I1,__classPrivateFieldSet:M1,__classPrivateFieldIn:D1,__addDisposableResource:L1,__disposeResources:$1,__rewriteRelativeImportExtension:F1},C5=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:L1,get __assign(){return Dn},__asyncDelegator:T1,__asyncGenerator:N1,__asyncValues:P1,__await:ai,__awaiter:_e,__classPrivateFieldGet:I1,__classPrivateFieldIn:D1,__classPrivateFieldSet:M1,__createBinding:du,__decorate:v1,__disposeResources:$1,__esDecorate:x1,__exportStar:j1,__extends:g1,__generator:k1,__importDefault:O1,__importStar:R1,__makeTemplateObject:A1,__metadata:_1,__param:y1,__propKey:b1,__read:Yp,__rest:ws,__rewriteRelativeImportExtension:F1,__runInitializers:w1,__setFunctionName:S1,__spread:C1,__spreadArray:Jp,__spreadArrays:E1,__values:Gc,default:j5},Symbol.toStringTag,{value:"Module"})),E5="modulepreload",N5=function(t){return"/aurora-link/"+t},H0={},gi=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){let l=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");i=l(n.map(p=>{if(p=N5(p),p in H0)return;H0[p]=!0;const m=p.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const y=document.createElement("link");if(y.rel=m?"stylesheet":E5,m||(y.as="script"),y.crossOrigin="",y.href=p,h&&y.setAttribute("nonce",h),document.head.appendChild(y),m)return new Promise((b,_)=>{y.addEventListener("load",b),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return i.then(l=>{for(const d of l||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})},T5=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>gi(async()=>{const{default:s}=await Promise.resolve().then(()=>so);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)};class Xp extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class K0 extends Xp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class G0 extends Xp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class q0 extends Xp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Uh;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Uh||(Uh={}));class P5{constructor(e,{headers:n={},customFetch:s,region:i=Uh.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=T5(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return _e(this,arguments,void 0,function*(n,s={}){var i;try{const{headers:a,method:l,body:d,signal:h}=s;let p={},{region:m}=s;m||(m=this.region);const g=new URL(`${this.url}/${n}`);m&&m!=="any"&&(p["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let y;d&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",y=d):typeof d=="string"?(p["Content-Type"]="text/plain",y=d):typeof FormData<"u"&&d instanceof FormData?y=d:(p["Content-Type"]="application/json",y=JSON.stringify(d)):y=d;const b=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),a),body:y,signal:h}).catch(C=>{throw C.name==="AbortError"?C:new K0(C)}),_=b.headers.get("x-relay-error");if(_&&_==="true")throw new G0(b);if(!b.ok)throw new q0(b);let S=((i=b.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),j;return S==="application/json"?j=yield b.json():S==="application/octet-stream"||S==="application/pdf"?j=yield b.blob():S==="text/event-stream"?j=b:S==="multipart/form-data"?j=yield b.formData():j=yield b.text(),{data:j,error:null,response:b}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new K0(a)}:{data:null,error:a,response:a instanceof q0||a instanceof G0?a.context:void 0}}})}}var Zt={};const vi=iw(C5);var yc={},xc={},wc={},bc={},Sc={},A5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},li=A5();const R5=li.fetch,V1=li.fetch.bind(li),B1=li.Headers,O5=li.Request,I5=li.Response,so=Object.freeze(Object.defineProperty({__proto__:null,Headers:B1,Request:O5,Response:I5,default:V1,fetch:R5},Symbol.toStringTag,{value:"Module"})),M5=iw(so);var _c={},Y0;function U1(){if(Y0)return _c;Y0=1,Object.defineProperty(_c,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return _c.default=t,_c}var J0;function z1(){if(J0)return Sc;J0=1,Object.defineProperty(Sc,"__esModule",{value:!0});const t=vi,e=t.__importDefault(M5),n=t.__importDefault(U1());class s{constructor(a){var l,d;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(d=a.isMaybeSingle)!==null&&d!==void 0?d:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let h=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var m,g,y,b;let _=null,S=null,j=null,C=p.status,T=p.statusText;if(p.ok){if(this.method!=="HEAD"){const M=await p.text();M===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?S=M:S=JSON.parse(M))}const N=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),P=(y=p.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");N&&P&&P.length>1&&(j=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(_={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,j=null,C=406,T="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const N=await p.text();try{_=JSON.parse(N),Array.isArray(_)&&p.status===404&&(S=[],_=null,C=200,T="OK")}catch{p.status===404&&N===""?(C=204,T="No Content"):_={message:N}}if(_&&this.isMaybeSingle&&(!((b=_?.details)===null||b===void 0)&&b.includes("0 rows"))&&(_=null,C=200,T="OK"),_&&this.shouldThrowOnError)throw new n.default(_)}return{error:_,data:S,count:j,status:C,statusText:T}});return this.shouldThrowOnError||(h=h.catch(p=>{var m,g,y;return{error:{message:`${(m=p?.name)!==null&&m!==void 0?m:"FetchError"}: ${p?.message}`,details:`${(g=p?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(y=p?.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),h.then(a,l)}returns(){return this}overrideTypes(){return this}}return Sc.default=s,Sc}var X0;function W1(){if(X0)return bc;X0=1,Object.defineProperty(bc,"__esModule",{value:!0});const e=vi.__importDefault(z1());class n extends e.default{select(i){let a=!1;const l=(i??"*").split("").map(d=>/\s/.test(d)&&!a?"":(d==='"'&&(a=!a),d)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:l,foreignTable:d,referencedTable:h=d}={}){const p=h?`${h}.order`:"order",m=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${m?`${m},`:""}${i}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:l=a}={}){const d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${i}`),this}range(i,a,{foreignTable:l,referencedTable:d=l}={}){const h=typeof d>"u"?"offset":`${d}.offset`,p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${i}`),this.url.searchParams.set(p,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:l=!1,buffers:d=!1,wal:h=!1,format:p="text"}={}){var m;const g=[i?"analyze":null,a?"verbose":null,l?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),y=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${y}"; options=${g};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return bc.default=n,bc}var Q0;function Qp(){if(Q0)return wc;Q0=1,Object.defineProperty(wc,"__esModule",{value:!0});const e=vi.__importDefault(W1()),n=new RegExp("[,()]");class s extends e.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}in(a,l){const d=Array.from(new Set(l)).map(h=>typeof h=="string"&&n.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(a,`in.(${d})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:d,type:h}={}){let p="";h==="plain"?p="pl":h==="phrase"?p="ph":h==="websearch"&&(p="w");const m=d===void 0?"":`(${d})`;return this.url.searchParams.append(a,`${p}fts${m}.${l}`),this}match(a){return Object.entries(a).forEach(([l,d])=>{this.url.searchParams.append(l,`eq.${d}`)}),this}not(a,l,d){return this.url.searchParams.append(a,`not.${l}.${d}`),this}or(a,{foreignTable:l,referencedTable:d=l}={}){const h=d?`${d}.or`:"or";return this.url.searchParams.append(h,`(${a})`),this}filter(a,l,d){return this.url.searchParams.append(a,`${l}.${d}`),this}}return wc.default=s,wc}var Z0;function H1(){if(Z0)return xc;Z0=1,Object.defineProperty(xc,"__esModule",{value:!0});const e=vi.__importDefault(Qp());class n{constructor(i,{headers:a={},schema:l,fetch:d}){this.url=i,this.headers=new Headers(a),this.schema=l,this.fetch=d}select(i,a){const{head:l=!1,count:d}=a??{},h=l?"HEAD":"GET";let p=!1;const m=(i??"*").split("").map(g=>/\s/.test(g)&&!p?"":(g==='"'&&(p=!p),g)).join("");return this.url.searchParams.set("select",m),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:l=!0}={}){var d;const h="POST";if(a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(p.length>0){const m=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:l=!1,count:d,defaultToNull:h=!0}={}){var p;const m="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const g=i.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(g.length>0){const y=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(i,{count:a}={}){var l;const d="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:i}={}){var a;const l="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return xc.default=n,xc}var ex;function D5(){if(ex)return yc;ex=1,Object.defineProperty(yc,"__esModule",{value:!0});const t=vi,e=t.__importDefault(H1()),n=t.__importDefault(Qp());class s{constructor(a,{headers:l={},schema:d,fetch:h}={}){this.url=a,this.headers=new Headers(l),this.schemaName=d,this.fetch=h}from(a){const l=new URL(`${this.url}/${a}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new s(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:d=!1,get:h=!1,count:p}={}){var m;let g;const y=new URL(`${this.url}/rpc/${a}`);let b;d||h?(g=d?"HEAD":"GET",Object.entries(l).filter(([S,j])=>j!==void 0).map(([S,j])=>[S,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([S,j])=>{y.searchParams.append(S,j)})):(g="POST",b=l);const _=new Headers(this.headers);return p&&_.set("Prefer",`count=${p}`),new n.default({method:g,url:y,headers:_,schema:this.schemaName,body:b,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}}return yc.default=s,yc}var tx;function L5(){if(tx)return Zt;tx=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.PostgrestError=Zt.PostgrestBuilder=Zt.PostgrestTransformBuilder=Zt.PostgrestFilterBuilder=Zt.PostgrestQueryBuilder=Zt.PostgrestClient=void 0;const t=vi,e=t.__importDefault(D5());Zt.PostgrestClient=e.default;const n=t.__importDefault(H1());Zt.PostgrestQueryBuilder=n.default;const s=t.__importDefault(Qp());Zt.PostgrestFilterBuilder=s.default;const i=t.__importDefault(W1());Zt.PostgrestTransformBuilder=i.default;const a=t.__importDefault(z1());Zt.PostgrestBuilder=a.default;const l=t.__importDefault(U1());return Zt.PostgrestError=l.default,Zt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:l.default},Zt}var K1=L5();const G1=lp(K1),$5=ow({__proto__:null,default:G1},[K1]),{PostgrestClient:F5,PostgrestQueryBuilder:k$,PostgrestFilterBuilder:j$,PostgrestTransformBuilder:C$,PostgrestBuilder:E$,PostgrestError:N$}=G1||$5;class V5{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const B5="2.77.0",U5=`realtime-js/${B5}`,z5="1.0.0",zh=1e4,W5=1e3,H5=100;var ya;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ya||(ya={}));var Rt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Rt||(Rt={}));var Jn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Jn||(Jn={}));var Wh;(function(t){t.websocket="websocket"})(Wh||(Wh={}));var zs;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(zs||(zs={}));class K5{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const i=n.getUint8(1),a=n.getUint8(2);let l=this.HEADER_LENGTH+2;const d=s.decode(e.slice(l,l+i));l=l+i;const h=s.decode(e.slice(l,l+a));l=l+a;const p=JSON.parse(s.decode(e.slice(l,e.byteLength)));return{ref:null,topic:d,event:h,payload:p}}}class q1{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var st;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(st||(st={}));const nx=(t,e,n={})=>{var s;const i=(s=n.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=G5(l,t,e,i),a),{}):{}},G5=(t,e,n,s)=>{const i=e.find(d=>d.name===t),a=i?.type,l=n[t];return a&&!s.includes(a)?Y1(a,l):Hh(l)},Y1=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return X5(e,n)}switch(t){case st.bool:return q5(e);case st.float4:case st.float8:case st.int2:case st.int4:case st.int8:case st.numeric:case st.oid:return Y5(e);case st.json:case st.jsonb:return J5(e);case st.timestamp:return Q5(e);case st.abstime:case st.date:case st.daterange:case st.int4range:case st.int8range:case st.money:case st.reltime:case st.text:case st.time:case st.timestamptz:case st.timetz:case st.tsrange:case st.tstzrange:return Hh(e);default:return Hh(e)}},Hh=t=>t,q5=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Y5=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},J5=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},X5=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let a;const l=t.slice(1,n);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(d=>Y1(e,d))}return t},Q5=t=>typeof t=="string"?t.replace(" ","T"):t,J1=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Lf{constructor(e,n,s={},i=zh){this.channel=e,this.event=n,this.payload=s,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var rx;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(rx||(rx={}));class xa{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},i=>{const{onJoin:a,onLeave:l,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=xa.syncState(this.state,i,a,l),this.pendingDiffs.forEach(h=>{this.state=xa.syncDiff(this.state,h,a,l)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=xa.syncDiff(this.state,i,a,l),d())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,i){const a=this.cloneDeep(e),l=this.transformState(n),d={},h={};return this.map(a,(p,m)=>{l[p]||(h[p]=m)}),this.map(l,(p,m)=>{const g=a[p];if(g){const y=m.map(j=>j.presence_ref),b=g.map(j=>j.presence_ref),_=m.filter(j=>b.indexOf(j.presence_ref)<0),S=g.filter(j=>y.indexOf(j.presence_ref)<0);_.length>0&&(d[p]=_),S.length>0&&(h[p]=S)}else d[p]=m}),this.syncDiff(a,{joins:d,leaves:h},s,i)}static syncDiff(e,n,s,i){const{joins:a,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),i||(i=()=>{}),this.map(a,(d,h)=>{var p;const m=(p=e[d])!==null&&p!==void 0?p:[];if(e[d]=this.cloneDeep(h),m.length>0){const g=e[d].map(b=>b.presence_ref),y=m.filter(b=>g.indexOf(b.presence_ref)<0);e[d].unshift(...y)}s(d,m,h)}),this.map(l,(d,h)=>{let p=e[d];if(!p)return;const m=h.map(g=>g.presence_ref);p=p.filter(g=>m.indexOf(g.presence_ref)<0),e[d]=p,i(d,p,h),p.length===0&&delete e[d]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const i=e[s];return"metas"in i?n[s]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[s]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var sx;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(sx||(sx={}));var wa;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(wa||(wa={}));var Tr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Tr||(Tr={}));class Zp{constructor(e,n={config:{}},s){var i,a;if(this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=Rt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Lf(this,Jn.join,this.params,this.timeout),this.rejoinTimer=new q1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Rt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Rt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Rt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jn.reply,{},(l,d)=>{this._trigger(this._replyEventName(d),l)}),this.presence=new xa(this),this.broadcastEndpointURL=J1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var s,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Rt.closed){const{config:{broadcast:l,presence:d,private:h}}=this.params,p=(i=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(b=>b.filter))!==null&&i!==void 0?i:[],m=!!this.bindings[wa.PRESENCE]&&this.bindings[wa.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,g={},y={broadcast:l,presence:Object.assign(Object.assign({},d),{enabled:m}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(b=>e?.(Tr.CHANNEL_ERROR,b)),this._onClose(()=>e?.(Tr.CLOSED)),this.updateJoinPayload(Object.assign({config:y},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:b})=>{var _;if(this.socket.setAuth(),b===void 0){e?.(Tr.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,j=(_=S?.length)!==null&&_!==void 0?_:0,C=[];for(let T=0;T<j;T++){const E=S[T],{filter:{event:N,schema:P,table:M,filter:L}}=E,$=b&&b[T];if($&&$.event===N&&$.schema===P&&$.table===M&&$.filter===L)C.push(Object.assign(Object.assign({},E),{id:$.id}));else{this.unsubscribe(),this.state=Rt.errored,e?.(Tr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Tr.SUBSCRIBED);return}}).receive("error",b=>{this.state=Rt.errored,e?.(Tr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e?.(Tr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===Rt.joined&&e===wa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,s)}async httpSend(e,n,s={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=s.timeout)!==null&&i!==void 0?i:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const p=await d.json();h=p.error||p.message||h}catch{}return Promise.reject(new Error(h))}async send(e,n={}){var s,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((i=p.body)===null||i===void 0?void 0:i.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,d,h;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(l=this.params)===null||l===void 0?void 0:l.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),p.receive("ok",()=>a("ok")),p.receive("error",()=>a("error")),p.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Rt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(i=>{s=new Lf(this,Jn.leave,{},e),s.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Rt.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const i=new AbortController,a=setTimeout(()=>i.abort(),s),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),l}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Lf(this,e,n,s);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>H5){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var i,a;const l=e.toLocaleLowerCase(),{close:d,error:h,leave:p,join:m}=Jn;if(s&&[d,h,p,m].indexOf(l)>=0&&s!==this._joinRef())return;let y=this._onMessage(l,n,s);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var _,S,j;return((_=b.filter)===null||_===void 0?void 0:_.event)==="*"||((j=(S=b.filter)===null||S===void 0?void 0:S.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===l}).map(b=>b.callback(y,s)):(a=this.bindings[l])===null||a===void 0||a.filter(b=>{var _,S,j,C,T,E;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const N=b.id,P=(_=b.filter)===null||_===void 0?void 0:_.event;return N&&((S=n.ids)===null||S===void 0?void 0:S.includes(N))&&(P==="*"||P?.toLocaleLowerCase()===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const N=(T=(C=b?.filter)===null||C===void 0?void 0:C.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return N==="*"||N===((E=n?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof y=="object"&&"ids"in y){const _=y.data,{schema:S,table:j,commit_timestamp:C,type:T,errors:E}=_;y=Object.assign(Object.assign({},{schema:S,table:j,commit_timestamp:C,eventType:T,new:{},old:{},errors:E}),this._getPayloadRecords(_))}b.callback(y,s)})}_isClosed(){return this.state===Rt.closed}_isJoined(){return this.state===Rt.joined}_isJoining(){return this.state===Rt.joining}_isLeaving(){return this.state===Rt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const i=e.toLocaleLowerCase(),a={type:i,filter:n,callback:s};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&Zp.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Jn.close,{},e)}_onError(e){this._on(Jn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Rt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=nx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=nx(e.columns,e.old_record)),n}}const $f=()=>{},kc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Z5=[1e3,2e3,5e3,1e4],eO=1e4,tO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nO{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=zh,this.transport=null,this.heartbeatIntervalMs=kc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$f,this.ref=0,this.reconnectTimer=null,this.logger=$f,this.conn=null,this.sendBuffer=[],this.serializer=new K5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>gi(async()=>{const{default:d}=await Promise.resolve().then(()=>so);return{default:d}},void 0).then(({default:d})=>d(...l)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((s=n?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Wh.websocket}`,this.httpEndpoint=J1(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=V5.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:z5}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ya.connecting:return zs.Connecting;case ya.open:return zs.Open;case ya.closing:return zs.Closing;default:return zs.Closed}}isConnected(){return this.connectionState()===zs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===s);if(i)return i;{const a=new Zp(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:s,payload:i,ref:a}=e,l=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${n} ${s} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(W5,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},kc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:i,payload:a,ref:l}=n,d=l?`(${l})`:"",h=a.status||"";this.log("receive",`${h} ${s} ${i} ${d}`.trim(),a),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(i,a,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Jn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${s}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([tO],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:U5};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Jn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new q1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},kc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,i,a,l,d,h,p,m;if(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:zh,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:kc.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:$f,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e?.reconnectAfterMs)!==null&&h!==void 0?h:(g=>Z5[g-1]||eO),this.encode=(p=e?.encode)!==null&&p!==void 0?p:((g,y)=>y(JSON.stringify(g))),this.decode=(m=e?.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class em extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ht(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class rO extends em{constructor(e,n,s){super(e),this.name="StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Kh extends em{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const tm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>gi(async()=>{const{default:s}=await Promise.resolve().then(()=>so);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},sO=()=>_e(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield gi(()=>Promise.resolve().then(()=>so),void 0)).Response:Response}),Gh=t=>{if(Array.isArray(t))return t.map(n=>Gh(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Gh(s)}),e},oO=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ff=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),iO=(t,e,n)=>_e(void 0,void 0,void 0,function*(){const s=yield sO();t instanceof s&&!n?.noResolveJson?t.json().then(i=>{const a=t.status||500,l=i?.statusCode||a+"";e(new rO(Ff(i),a,l))}).catch(i=>{e(new Kh(Ff(i),i))}):e(new Kh(Ff(t),t))}),aO=(t,e,n,s)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||!s?i:(oO(s)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(s)):i.body=s,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function Ja(t,e,n,s,i,a){return _e(this,void 0,void 0,function*(){return new Promise((l,d)=>{t(n,aO(e,s,i,a)).then(h=>{if(!h.ok)throw h;return s?.noResolveJson?h:h.json()}).then(h=>l(h)).catch(h=>iO(h,d,s))})})}function La(t,e,n,s){return _e(this,void 0,void 0,function*(){return Ja(t,"GET",e,n,s)})}function Yn(t,e,n,s,i){return _e(this,void 0,void 0,function*(){return Ja(t,"POST",e,s,i,n)})}function qh(t,e,n,s,i){return _e(this,void 0,void 0,function*(){return Ja(t,"PUT",e,s,i,n)})}function lO(t,e,n,s){return _e(this,void 0,void 0,function*(){return Ja(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function nm(t,e,n,s,i){return _e(this,void 0,void 0,function*(){return Ja(t,"DELETE",e,s,i,n)})}class cO{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return _e(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ht(e))return{data:null,error:e};throw e}})}}var X1;class uO{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[X1]="BlobDownloadBuilder",this.promise=null}asStream(){return new cO(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return _e(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ht(e))return{data:null,error:e};throw e}})}}X1=Symbol.toStringTag;const dO={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ox={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class fO{constructor(e,n={},s,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=s,this.fetch=tm(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,s,i){return _e(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},ox),i);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),h&&a.append("metadata",this.encodeMetadata(h)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",l.cacheControl),h&&a.append("metadata",this.encodeMetadata(h))):(a=s,d["cache-control"]=`max-age=${l.cacheControl}`,d["content-type"]=l.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),i?.headers&&(d=Object.assign(Object.assign({},d),i.headers));const p=this._removeEmptyFolders(n),m=this._getFinalPath(p),g=yield(e=="PUT"?qh:Yn)(this.fetch,`${this.url}/object/${m}`,a,Object.assign({headers:d},l?.duplex?{duplex:l.duplex}:{}));return{data:{path:p,id:g.Id,fullPath:g.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ht(a))return{data:null,error:a};throw a}})}upload(e,n,s){return _e(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,i){return _e(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),d=new URL(this.url+`/object/upload/sign/${l}`);d.searchParams.set("token",n);try{let h;const p=Object.assign({upsert:ox.upsert},i),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",s)):typeof FormData<"u"&&s instanceof FormData?(h=s,h.append("cacheControl",p.cacheControl)):(h=s,m["cache-control"]=`max-age=${p.cacheControl}`,m["content-type"]=p.contentType);const g=yield qh(this.fetch,d.toString(),h,{headers:m});return{data:{path:a,fullPath:g.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(ht(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,n){return _e(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const i=Object.assign({},this.headers);n?.upsert&&(i["x-upsert"]="true");const a=yield Yn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:i}),l=new URL(this.url+a.url),d=l.searchParams.get("token");if(!d)throw new em("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:d},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ht(s))return{data:null,error:s};throw s}})}update(e,n,s){return _e(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return _e(this,void 0,void 0,function*(){try{return{data:yield Yn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ht(i))return{data:null,error:i};throw i}})}copy(e,n,s){return _e(this,void 0,void 0,function*(){try{return{data:{path:(yield Yn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ht(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,s){return _e(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Yn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const l=s?.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ht(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,s){return _e(this,void 0,void 0,function*(){try{const i=yield Yn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ht(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(n?.transform||{}),l=a?`?${a}`:"",d=this._getFinalPath(e),h=()=>La(this.fetch,`${this.url}/${i}/${d}${l}`,{headers:this.headers,noResolveJson:!0});return new uO(h,this.shouldThrowOnError)}info(e){return _e(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield La(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Gh(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ht(s))return{data:null,error:s};throw s}})}exists(e){return _e(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield lO(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ht(s)&&s instanceof Kh){const i=s.originalError;if([400,404].includes(i?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),i=[],a=n?.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const d=typeof n?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(n?.transform||{});h!==""&&i.push(h);let p=i.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${p}`)}}}remove(e){return _e(this,void 0,void 0,function*(){try{return{data:yield nm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}})}list(e,n,s){return _e(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},dO),n),{prefix:e||""});return{data:yield Yn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ht(i))return{data:null,error:i};throw i}})}listV2(e,n){return _e(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Yn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ht(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Q1="2.77.0",Z1={"X-Client-Info":`storage-js/${Q1}`};class hO{constructor(e,n={},s,i){this.shouldThrowOnError=!1;const a=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Z1),n),this.fetch=tm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return _e(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield La(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}})}getBucket(e){return _e(this,void 0,void 0,function*(){try{return{data:yield La(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}})}createBucket(e){return _e(this,arguments,void 0,function*(n,s={public:!1}){try{return{data:yield Yn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ht(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return _e(this,void 0,void 0,function*(){try{return{data:yield qh(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ht(s))return{data:null,error:s};throw s}})}emptyBucket(e){return _e(this,void 0,void 0,function*(){try{return{data:yield Yn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}})}deleteBucket(e){return _e(this,void 0,void 0,function*(){try{return{data:yield nm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class pO{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Z1),n),this.fetch=tm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return _e(this,void 0,void 0,function*(){try{return{data:yield Yn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}})}listBuckets(e){return _e(this,void 0,void 0,function*(){try{const n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);const s=n.toString(),i=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield La(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}})}deleteBucket(e){return _e(this,void 0,void 0,function*(){try{return{data:yield nm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ht(n))return{data:null,error:n};throw n}})}}const rm={"X-Client-Info":`storage-js/${Q1}`,"Content-Type":"application/json"};class eS extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function _n(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Vf extends eS{constructor(e,n,s){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mO extends eS{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var ix;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(ix||(ix={}));const sm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>gi(async()=>{const{default:s}=await Promise.resolve().then(()=>so);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},gO=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ax=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),vO=(t,e,n)=>_e(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const i=t.status||500,a=t;if(typeof a.json=="function")a.json().then(l=>{const d=l?.statusCode||l?.code||i+"";e(new Vf(ax(l),i,d))}).catch(()=>{const l=i+"",d=a.statusText||`HTTP ${i} error`;e(new Vf(d,i,l))});else{const l=i+"",d=a.statusText||`HTTP ${i} error`;e(new Vf(d,i,l))}}else e(new mO(ax(t),t))}),yO=(t,e,n,s)=>{const i={method:t,headers:e?.headers||{}};return s?(gO(s)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(s)):i.body=s,Object.assign(Object.assign({},i),n)):i};function xO(t,e,n,s,i,a){return _e(this,void 0,void 0,function*(){return new Promise((l,d)=>{t(n,yO(e,s,i,a)).then(h=>{if(!h.ok)throw h;if(s?.noResolveJson)return h;const p=h.headers.get("content-type");return!p||!p.includes("application/json")?{}:h.json()}).then(h=>l(h)).catch(h=>vO(h,d,s))})})}function kn(t,e,n,s,i){return _e(this,void 0,void 0,function*(){return xO(t,"POST",e,s,i,n)})}class wO{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},rm),n),this.fetch=sm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return _e(this,void 0,void 0,function*(){try{return{data:(yield kn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}getIndex(e,n){return _e(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(_n(s))return{data:null,error:s};throw s}})}listIndexes(e){return _e(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return _e(this,void 0,void 0,function*(){try{return{data:(yield kn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(_n(s))return{data:null,error:s};throw s}})}}class bO{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},rm),n),this.fetch=sm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return _e(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield kn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}getVectors(e){return _e(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}listVectors(e){return _e(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield kn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}queryVectors(e){return _e(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}deleteVectors(e){return _e(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield kn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}}class SO{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},rm),n),this.fetch=sm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return _e(this,void 0,void 0,function*(){try{return{data:(yield kn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}getBucket(e){return _e(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}listBuckets(){return _e(this,arguments,void 0,function*(e={}){try{return{data:yield kn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}deleteBucket(e){return _e(this,void 0,void 0,function*(){try{return{data:(yield kn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}}class _O extends SO{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new kO(this.url,this.headers,e,this.fetch)}}class kO extends wO{constructor(e,n,s,i){super(e,n,i),this.vectorBucketName=s}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return _e(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return _e(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return _e(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return _e(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new jO(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class jO extends bO{constructor(e,n,s,i,a){super(e,n,a),this.vectorBucketName=s,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return _e(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return _e(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return _e(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return _e(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return _e(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class CO extends hO{constructor(e,n={},s,i){super(e,n,s,i)}from(e){return new fO(this.url,this.headers,e,this.fetch)}get vectors(){return new _O(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new pO(this.url+"/iceberg",this.headers,this.fetch)}}const EO="2.77.0";let ua="";typeof Deno<"u"?ua="deno":typeof document<"u"?ua="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ua="react-native":ua="node";const NO={"X-Client-Info":`supabase-js-${ua}/${EO}`},TO={headers:NO},PO={schema:"public"},AO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},RO={},OO=t=>{let e;return t?e=t:typeof fetch>"u"?e=V1:e=fetch,(...n)=>e(...n)},IO=()=>typeof Headers>"u"?B1:Headers,MO=(t,e,n)=>{const s=OO(n),i=IO();return async(a,l)=>{var d;const h=(d=await e())!==null&&d!==void 0?d:t;let p=new i(l?.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),s(a,Object.assign(Object.assign({},l),{headers:p}))}};function DO(t){return t.endsWith("/")?t:t+"/"}function LO(t,e){var n,s;const{db:i,auth:a,realtime:l,global:d}=t,{db:h,auth:p,realtime:m,global:g}=e,y={db:Object.assign(Object.assign({},h),i),auth:Object.assign(Object.assign({},p),a),realtime:Object.assign(Object.assign({},m),l),storage:{},global:Object.assign(Object.assign(Object.assign({},g),d),{headers:Object.assign(Object.assign({},(n=g?.headers)!==null&&n!==void 0?n:{}),(s=d?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function $O(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(DO(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const tS="2.77.0",Vo=30*1e3,Yh=3,Bf=Yh*Vo,FO="http://localhost:9999",VO="supabase.auth.token",BO={"X-Client-Info":`gotrue-js/${tS}`},Jh="X-Supabase-Api-Version",nS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},UO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zO=600*1e3;class $a extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function Pe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class WO extends $a{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function HO(t){return Pe(t)&&t.name==="AuthApiError"}class Ws extends $a{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class bs extends $a{constructor(e,n,s,i){super(e,s,i),this.name=n,this.status=s}}class cs extends bs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function KO(t){return Pe(t)&&t.name==="AuthSessionMissingError"}class Ao extends bs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class jc extends bs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Cc extends bs{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function GO(t){return Pe(t)&&t.name==="AuthImplicitGrantRedirectError"}class lx extends bs{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xh extends bs{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Uf(t){return Pe(t)&&t.name==="AuthRetryableFetchError"}class cx extends bs{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class Qh extends bs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const qc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ux=` 	
\r=`.split(""),qO=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ux.length;e+=1)t[ux[e].charCodeAt(0)]=-2;for(let e=0;e<qc.length;e+=1)t[qc[e].charCodeAt(0)]=e;return t})();function dx(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(qc[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(qc[s]),e.queuedBits-=6}}function rS(t,e,n){const s=qO[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function fx(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{XO(l,s,n)};for(let l=0;l<t.length;l+=1)rS(t.charCodeAt(l),i,a);return e.join("")}function YO(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function JO(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const i=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}YO(s,e)}}function XO(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Qo(t){const e=[],n={queue:0,queuedBits:0},s=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)rS(t.charCodeAt(i),n,s);return new Uint8Array(e)}function QO(t){const e=[];return JO(t,n=>e.push(n)),new Uint8Array(e)}function Gs(t){const e=[],n={queue:0,queuedBits:0},s=i=>{e.push(i)};return t.forEach(i=>dx(i,n,s)),dx(null,n,s),e.join("")}function ZO(t){return Math.round(Date.now()/1e3)+t}function eI(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const bn=()=>typeof window<"u"&&typeof document<"u",Fs={tested:!1,writable:!1},sS=()=>{if(!bn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fs.tested)return Fs.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Fs.tested=!0,Fs.writable=!0}catch{Fs.tested=!0,Fs.writable=!1}return Fs.writable};function tI(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return n.searchParams.forEach((s,i)=>{e[i]=s}),e}const oS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>gi(async()=>{const{default:s}=await Promise.resolve().then(()=>so);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},nI=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Bo=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Vs=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},as=async(t,e)=>{await t.removeItem(e)};class fu{constructor(){this.promise=new fu.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}fu.promiseConstructor=Promise;function zf(t){const e=t.split(".");if(e.length!==3)throw new Qh("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!UO.test(e[s]))throw new Qh("JWT not in base64url format");return{header:JSON.parse(fx(e[0])),payload:JSON.parse(fx(e[1])),signature:Qo(e[2]),raw:{header:e[0],payload:e[1]}}}async function rI(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function sI(t,e){return new Promise((s,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){s(l);return}}catch(l){if(!e(a,l)){i(l);return}}})()})}function oI(t){return("0"+t.toString(16)).substr(-2)}function iI(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*s));return i}return crypto.getRandomValues(e),Array.from(e,oI).join("")}async function aI(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(s);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function lI(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await aI(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ro(t,e,n=!1){const s=iI();let i=s;n&&(i+="/PASSWORD_RECOVERY"),await Bo(t,`${e}-code-verifier`,i);const a=await lI(s);return[a,s===a?"plain":"s256"]}const cI=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uI(t){const e=t.headers.get(Jh);if(!e||!e.match(cI))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function dI(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function fI(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const hI=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Oo(t){if(!hI.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Wf(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hx(t){return JSON.parse(JSON.stringify(t))}const Us=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),pI=[502,503,504];async function px(t){var e;if(!nI(t))throw new Xh(Us(t),0);if(pI.includes(t.status))throw new Xh(Us(t),t.status);let n;try{n=await t.json()}catch(a){throw new Ws(Us(a),a)}let s;const i=uI(t);if(i&&i.getTime()>=nS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new cx(Us(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new cs}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new cx(Us(n),t.status,n.weak_password.reasons);throw new WO(Us(n),t.status||500,s)}const mI=(t,e,n,s)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),n))};async function De(t,e,n,s){var i;const a=Object.assign({},s?.headers);a[Jh]||(a[Jh]=nS["2024-01-01"].name),s?.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const l=(i=s?.query)!==null&&i!==void 0?i:{};s?.redirectTo&&(l.redirect_to=s.redirectTo);const d=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await gI(t,e,n+d,{headers:a,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(h):{data:Object.assign({},h),error:null}}async function gI(t,e,n,s,i,a){const l=mI(e,s,i,a);let d;try{d=await t(n,Object.assign({},l))}catch(h){throw console.error(h),new Xh(Us(h),0)}if(d.ok||await px(d),s?.noResolveJson)return d;try{return await d.json()}catch(h){await px(h)}}function Gn(t){var e;let n=null;xI(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=ZO(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function mx(t){const e=Gn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ds(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function vI(t){return{data:t,error:null}}function yI(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:i,verification_type:a}=t,l=ws(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:n,hashed_token:s,redirect_to:i,verification_type:a},h=Object.assign({},l);return{data:{properties:d,user:h},error:null}}function gx(t){return t}function xI(t){return t.access_token&&t.refresh_token&&t.expires_in}const Hf=["global","local","others"];class wI{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=oS(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Hf[0]){if(Hf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Hf.join(", ")}`);try{return await De(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await De(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ds})}catch(s){if(Pe(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=ws(e,["options"]),i=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(i.new_email=s?.newEmail,delete i.newEmail),await De(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:yI,redirectTo:n?.redirectTo})}catch(n){if(Pe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await De(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ds})}catch(n){if(Pe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,i,a,l,d,h;try{const p={nextPage:null,lastPage:0,total:0},m=await De(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:gx});if(m.error)throw m.error;const g=await m.json(),y=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(h=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(_=>{const S=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(_.split(";")[1].split("=")[1]);p[`${j}Page`]=S}),p.total=parseInt(y)),{data:Object.assign(Object.assign({},g),p),error:null}}catch(p){if(Pe(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Oo(e);try{return await De(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ds})}catch(n){if(Pe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Oo(e);try{return await De(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ds})}catch(s){if(Pe(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){Oo(e);try{return await De(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ds})}catch(s){if(Pe(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Oo(e.userId);try{const{data:n,error:s}=await De(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:s}}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Oo(e.userId),Oo(e.id);try{return{data:await De(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,s,i,a,l,d,h;try{const p={nextPage:null,lastPage:0,total:0},m=await De(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:gx});if(m.error)throw m.error;const g=await m.json(),y=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(h=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(_=>{const S=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(_.split(";")[1].split("=")[1]);p[`${j}Page`]=S}),p.total=parseInt(y)),{data:Object.assign(Object.assign({},g),p),error:null}}catch(p){if(Pe(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await De(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await De(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await De(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await De(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}}}function vx(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Io={debug:!!(globalThis&&sS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class iS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class bI extends iS{}async function SI(t,e,n){Io.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Io.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async i=>{if(i){Io.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Io.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Io.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new bI(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Io.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function _I(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function aS(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function kI(t){return parseInt(t,16)}function jI(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function CI(t){var e;const{chainId:n,domain:s,expirationTime:i,issuedAt:a=new Date,nonce:l,notBefore:d,requestId:h,resources:p,scheme:m,uri:g,version:y}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=aS(t.address),_=m?`${m}://${s}`:s,S=t.statement?`${t.statement}
`:"",j=`${_} wants you to sign in with your Ethereum account:
${b}

${S}`;let C=`URI: ${g}
Version: ${y}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(i&&(C+=`
Expiration Time: ${i.toISOString()}`),d&&(C+=`
Not Before: ${d.toISOString()}`),h&&(C+=`
Request ID: ${h}`),p){let T=`
Resources:`;for(const E of p){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);T+=`
- ${E}`}C+=T}return`${j}
${C}`}class jt extends Error{constructor({message:e,code:n,cause:s,name:i}){var a;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(a=i??(s instanceof Error?s.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Yc extends jt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function EI({error:t,options:e}){var n,s,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new jt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new jt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new jt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new jt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new jt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new jt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new jt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new jt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(lS(l)){if(a.rp.id!==l)return new jt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new jt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new jt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function NI({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new jt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new jt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(lS(s)){if(n.rpId!==s)return new jt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new jt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class TI{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const PI=new TI;function AI(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:s}=t,i=ws(t,["challenge","user","excludeCredentials"]),a=Qo(e).buffer,l=Object.assign(Object.assign({},n),{id:Qo(n.id).buffer}),d=Object.assign(Object.assign({},i),{challenge:a,user:l});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const p=s[h];d.excludeCredentials[h]=Object.assign(Object.assign({},p),{id:Qo(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function RI(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,s=ws(t,["challenge","allowCredentials"]),i=Qo(e).buffer,a=Object.assign(Object.assign({},s),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const d=n[l];a.allowCredentials[l]=Object.assign(Object.assign({},d),{id:Qo(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return a}function OI(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Gs(new Uint8Array(t.response.attestationObject)),clientDataJSON:Gs(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function II(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,s=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Gs(new Uint8Array(i.authenticatorData)),clientDataJSON:Gs(new Uint8Array(i.clientDataJSON)),signature:Gs(new Uint8Array(i.signature)),userHandle:i.userHandle?Gs(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function lS(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function yx(){var t,e;return!!(bn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function MI(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Yc("Browser returned unexpected credential type",e)}:{data:null,error:new Yc("Empty credential response",e)}}catch(e){return{data:null,error:EI({error:e,options:t})}}}async function DI(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Yc("Browser returned unexpected credential type",e)}:{data:null,error:new Yc("Empty credential response",e)}}catch(e){return{data:null,error:NI({error:e,options:t})}}}const LI={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},$I={userVerification:"preferred",hints:["security-key"]};function Jc(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),s={};for(const i of t)if(i)for(const a in i){const l=i[a];if(l!==void 0)if(Array.isArray(l))s[a]=l;else if(n(l))s[a]=l;else if(e(l)){const d=s[a];e(d)?s[a]=Jc(d,l):s[a]=Jc(l)}else s[a]=l}return s}function FI(t,e){return Jc(LI,t,e||{})}function VI(t,e){return Jc($I,t,e||{})}class BI{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:s,signal:i},a){try{const{data:l,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!l)return{data:null,error:d};const h=i??PI.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:p}=l.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(l.webauthn.type){case"create":{const p=FI(l.webauthn.credential_options.publicKey,a?.create),{data:m,error:g}=await MI({publicKey:p,signal:h});return m?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}case"request":{const p=VI(l.webauthn.credential_options.publicKey,a?.request),{data:m,error:g}=await DI(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:p,signal:h}));return m?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}}}catch(l){return Pe(l)?{data:null,error:l}:{data:null,error:new Ws("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:i}},a){if(!n)return{data:null,error:new $a("rpId is required for WebAuthn authentication")};try{if(!yx())return{data:null,error:new Ws("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:s},signal:i},{request:a});if(!l)return{data:null,error:d};const{webauthn:h}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:s,credential_response:h.credential_response}})}catch(l){return Pe(l)?{data:null,error:l}:{data:null,error:new Ws("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:i},a){if(!n)return{data:null,error:new $a("rpId is required for WebAuthn registration")};try{if(!yx())return{data:null,error:new Ws("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(m=>{var g;return(g=m.data)===null||g===void 0?void 0:g.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m?.id}):void 0),{data:null,error:d};const{data:h,error:p}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:i},{create:a});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:s,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:p}}catch(l){return Pe(l)?{data:null,error:l}:{data:null,error:new Ws("Unexpected error in register",l)}}}}_I();const UI={url:FO,storageKey:VO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:BO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function xx(t,e,n){return await n()}const Mo={};class Fa{get jwks(){var e,n;return(n=(e=Mo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Mo[this.storageKey]=Object.assign(Object.assign({},Mo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Mo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Mo[this.storageKey]=Object.assign(Object.assign({},Mo[this.storageKey]),{cachedAt:e})}constructor(e){var n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Fa.nextInstanceID,Fa.nextInstanceID+=1,this.instanceID>0&&bn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},UI),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new wI({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=oS(i.fetch),this.lock=i.lock||xx,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:bn()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=SI:this.lock=xx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new BI(this)},this.persistSession?(i.storage?this.storage=i.storage:sS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=vx(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=vx(this.memoryStorage)),bn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${tS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=tI(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),bn()&&this.detectSessionInUrl&&s!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),GO(a)){const h=(e=a.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:d}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",d),await this._saveSession(l),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Pe(n)?{error:n}:{error:new Ws("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,i;try{const a=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Gn}),{data:l,error:d}=a;if(d||!l)return{data:{user:null,session:null},error:d};const h=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(a){if(Pe(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,s,i;try{let a;if("email"in e){const{email:m,password:g,options:y}=e;let b=null,_=null;this.flowType==="pkce"&&([b,_]=await Ro(this.storage,this.storageKey)),a=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:m,password:g,data:(n=y?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:b,code_challenge_method:_},xform:Gn})}else if("phone"in e){const{phone:m,password:g,options:y}=e;a=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:g,data:(s=y?.data)!==null&&s!==void 0?s:{},channel:(i=y?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:Gn})}else throw new jc("You must provide either an email or phone number and a password");const{data:l,error:d}=a;if(d||!l)return{data:{user:null,session:null},error:d};const h=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(a){if(Pe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:l,options:d}=e;n=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:mx})}else if("phone"in e){const{phone:a,password:l,options:d}=e;n=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:mx})}else throw new jc("You must provide either an email or phone number and a password");const{data:s,error:i}=n;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Ao}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(n){if(Pe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,s,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,s,i,a,l,d,h,p,m,g,y;let b,_;if("message"in e)b=e.message,_=e.signature;else{const{chain:S,wallet:j,statement:C,options:T}=e;let E;if(bn())if(typeof j=="object")E=j;else{const z=window;if("ethereum"in z&&typeof z.ethereum=="object"&&"request"in z.ethereum&&typeof z.ethereum.request=="function")E=z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=j}const N=new URL((n=T?.url)!==null&&n!==void 0?n:window.location.href),P=await E.request({method:"eth_requestAccounts"}).then(z=>z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!P||P.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const M=aS(P[0]);let L=(s=T?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!L){const z=await E.request({method:"eth_chainId"});L=kI(z)}const $={domain:N.host,address:M,statement:C,uri:N.href,version:"1",chainId:L,nonce:(i=T?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(a=T?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(d=T?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=T?.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(p=T?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(m=T?.signInWithEthereum)===null||m===void 0?void 0:m.resources};b=CI($),_=await E.request({method:"personal_sign",params:[jI(b),M]})}try{const{data:S,error:j}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:_},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Gn});if(j)throw j;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new Ao}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:j})}catch(S){if(Pe(S))return{data:{user:null,session:null},error:S};throw S}}async signInWithSolana(e){var n,s,i,a,l,d,h,p,m,g,y,b;let _,S;if("message"in e)_=e.message,S=e.signature;else{const{chain:j,wallet:C,statement:T,options:E}=e;let N;if(bn())if(typeof C=="object")N=C;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))N=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=C}const P=new URL((n=E?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in N&&N.signIn){const M=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E?.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),T?{statement:T}:null));let L;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")L=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)L=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)_=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),S=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${P.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(i=(s=E?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=E?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((l=E?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((d=E?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((h=E?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((p=E?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((g=(m=E?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||g===void 0)&&g.length?["Resources",...E.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const M=await N.signMessage(new TextEncoder().encode(_),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=M}}try{const{data:j,error:C}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Gs(S)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Gn});if(C)throw C;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Ao}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:C})}catch(j){if(Pe(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(e){const n=await Vs(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(n??"").split("/");try{const{data:a,error:l}=await De(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Gn});if(await as(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Ao}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(Pe(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:s,token:i,access_token:a,nonce:l}=e,d=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Gn}),{data:h,error:p}=d;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Ao}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(n){if(Pe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,s,i,a,l;try{if("email"in e){const{email:d,options:h}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Ro(this.storage,this.storageKey));const{error:g}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=h?.data)!==null&&n!==void 0?n:{},create_user:(s=h?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:m},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:d,options:h}=e,{data:p,error:m}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(i=h?.data)!==null&&i!==void 0?i:{},create_user:(a=h?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(l=h?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:m}}throw new jc("You must provide either an email or phone number.")}catch(d){if(Pe(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var n,s;try{let i,a;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:d}=await De(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Gn});if(d)throw d;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,p=l.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(i){if(Pe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,s,i;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await Ro(this.storage,this.storageKey)),await De(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:vI})}catch(a){if(Pe(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new cs;const{error:i}=await De(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Pe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:i,options:a}=e,{error:l}=await De(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:s,type:i,options:a}=e,{data:l,error:d}=await De(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:d}}throw new jc("You must provide either an email or phone number and a type")}catch(n){if(Pe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Vs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Bf:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const l=await Vs(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=Wf()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(h,p,m)=>(!l&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,p,m))})}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ds}):await this._useSession(async n=>{var s,i,a;const{data:l,error:d}=n;if(d)throw d;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new cs}:await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:ds})})}catch(n){if(Pe(n))return KO(n)&&(await this._removeSession(),await as(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:i,error:a}=s;if(a)throw a;if(!i.session)throw new cs;const l=i.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await Ro(this.storage,this.storageKey));const{data:p,error:m}=await De(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:l.access_token,xform:ds});if(m)throw m;return l.user=p.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(s){if(Pe(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new cs;const n=Date.now()/1e3;let s=n,i=!0,a=null;const{payload:l}=zf(e.access_token);if(l.exp&&(s=l.exp,i=s<=n),i){const{data:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!d)return{data:{user:null,session:null},error:null};a=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;a={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(Pe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:l,error:d}=n;if(d)throw d;e=(s=l.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new cs;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Pe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!bn())throw new Cc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Cc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new lx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Cc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new lx("No code detected.");const{data:T,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:d,expires_at:h,token_type:p}=e;if(!a||!d||!l||!p)throw new Cc("No session defined in URL");const m=Math.round(Date.now()/1e3),g=parseInt(d);let y=m+g;h&&(y=parseInt(h));const b=y-m;b*1e3<=Vo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${g}s`);const _=y-g;m-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,y,m):m-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,y,m);const{data:S,error:j}=await this._getUser(a);if(j)throw j;const C={provider_token:s,provider_refresh_token:i,access_token:a,expires_in:g,expires_at:y,refresh_token:l,token_type:p,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:e.type},error:null}}catch(s){if(Pe(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Vs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:i,error:a}=n;if(a)return{error:a};const l=(s=i.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:d}=await this.admin.signOut(l,e);if(d&&!(HO(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await as(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=eI(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,i;try{const{data:{session:a},error:l}=n;if(l)throw l;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let s=null,i=null;this.flowType==="pkce"&&([s,i]=await Ro(this.storage,this.storageKey,!0));try{return await De(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Pe(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:s,error:i}=await this._useSession(async a=>{var l,d,h,p,m;const{data:g,error:y}=a;if(y)throw y;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await De(this.fetch,"GET",b,{headers:this.headers,jwt:(m=(p=g.session)===null||p===void 0?void 0:p.access_token)!==null&&m!==void 0?m:void 0})});if(i)throw i;return bn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(Pe(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var s;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:l,provider:d,token:h,access_token:p,nonce:m}=e,g=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=a?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:h,access_token:p,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Gn}),{data:y,error:b}=g;return b?{data:{user:null,session:null},error:b}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new Ao}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:b})}catch(i){if(Pe(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,i;const{data:a,error:l}=n;if(l)throw l;return await De(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await sI(async i=>(i>0&&await rI(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await De(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gn})),(i,a)=>{const l=200*Math.pow(2,i);return a&&Uf(a)&&Date.now()+l-s<Vo})}catch(s){if(this._debug(n,"error",s),Pe(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),bn()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const i=await Vs(this.storage,this.storageKey);if(i&&this.userStorage){let l=await Vs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await Bo(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l?.user)!==null&&e!==void 0?e:Wf()}else if(i&&!i.user&&!i.user){const l=await Vs(this.storage,this.storageKey+"-user");l&&l?.user?(i.user=l.user,await as(this.storage,this.storageKey+"-user"),await Bo(this.storage,this.storageKey,i)):i.user=Wf()}if(this._debug(s,"session from storage",i),!this._isValidSession(i)){this._debug(s,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Bf;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${Bf}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),Uf(l)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:d}=await this._getUser(i.access_token);!d&&l?.user?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(s,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(s,"error",i),console.error(i);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new cs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new fu;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new cs;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const d={data:a.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(i,"error",a),Pe(a)){const l={data:null,error:a};return Uf(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,s=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,n)}catch(h){a.push(h)}});if(await Promise.all(l),a.length>0){for(let d=0;d<a.length;d+=1)console.error(a[d]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await Bo(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=hx(i);await Bo(this.storage,this.storageKey,a)}else{const i=hx(n);await Bo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await as(this.storage,this.storageKey),await as(this.storage,this.storageKey+"-code-verifier"),await as(this.storage,this.storageKey+"-user"),this.userStorage&&await as(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&bn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Vo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((s.expires_at*1e3-e)/Vo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Vo}ms, refresh threshold is ${Yh} ticks`),i<=Yh&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof iS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const i=[`provider=${encodeURIComponent(n)}`];if(s?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,l]=await Ro(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(d.toString())}if(s?.queryParams){const a=new URLSearchParams(s.queryParams);i.push(a.toString())}return s?.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:i,error:a}=n;return a?{data:null,error:a}:await De(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,i;const{data:a,error:l}=n;if(l)return{data:null,error:l};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:p}=await De(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&h.type==="totp"&&(!((i=h?.totp)===null||i===void 0)&&i.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?OI(e.webauthn.credential_response):II(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:h}=await De(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:h})})}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=await De(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});if(l.error)return l;const{data:d}=l;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:AI(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:RI(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n?.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,s;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=zf(i.access_token);let d=null;l.aal&&(d=l.aal);let h=d;((s=(n=i.user.factors)===null||n===void 0?void 0:n.filter(g=>g.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(h="aal2");const m=l.amr||[];return{data:{currentLevel:d,nextLevel:h,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(d=>d.kid===e);if(s)return s;const i=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+zO>i)return s;const{data:a,error:l}=await De(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,s=a.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:b,error:_}=await this.getSession();if(_||!b.session)return{data:null,error:_};s=b.session.access_token}const{header:i,payload:a,signature:l,raw:{header:d,payload:h}}=zf(s);n?.allowExpired||dI(a.exp);const p=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:b}=await this.getUser(s);if(b)throw b;return{data:{claims:a,header:i,signature:l},error:null}}const m=fI(i.alg),g=await crypto.subtle.importKey("jwk",p,m,!0,["verify"]);if(!await crypto.subtle.verify(m,g,l,QO(`${d}.${h}`)))throw new Qh("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}}}Fa.nextInstanceID=0;const zI=Fa;class WI extends zI{constructor(e){super(e)}}class HI{constructor(e,n,s){var i,a,l;this.supabaseUrl=e,this.supabaseKey=n;const d=$O(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,p={db:PO,realtime:RO,auth:Object.assign(Object.assign({},AO),{storageKey:h}),global:TO},m=LO(s??{},p);this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=m.global.headers)!==null&&a!==void 0?a:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=m.auth)!==null&&l!==void 0?l:{},this.headers,m.global.fetch),this.fetch=MO(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new F5(new URL("rest/v1",d).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new CO(this.storageUrl.href,this.headers,this.fetch,s?.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new P5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:i,userStorage:a,storageKey:l,flowType:d,lock:h,debug:p},m,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new WI({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),m),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:i,userStorage:a,flowType:d,lock:h,debug:p,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new nO(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s?.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const KI=(t,e,n)=>new HI(t,e,n);function GI(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}GI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Va="aavljgcuaajnimeohelq",Xa="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFhdmxqZ2N1YWFqbmltZW9oZWxxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA5OTE1ODUsImV4cCI6MjA3NjU2NzU4NX0.4cfyCfXlVLYmlLwa5Y7aGj0-BuVF4RDTpNooURWZXAo";let ia=null,wx=!1;function pn(){if(ia)return ia;const t=`https://${Va}.supabase.co`;return console.log("[Supabase Client] Creating client with URL:",t),console.log("[Supabase Client] Using localStorage for session persistence"),ia=KI(t,Xa,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce",storage:{getItem:e=>localStorage.getItem(e),setItem:(e,n)=>{localStorage.setItem(e,n)},removeItem:e=>{localStorage.removeItem(e)}}},realtime:{params:{eventsPerSecond:10}}}),wx||(wx=!0,ia.auth.onAuthStateChange(async(e,n)=>{console.log("[Auth State Change]",e,n?"Session exists":"No session"),e==="SIGNED_OUT"?(console.log("[Auth] User signed out - clearing session"),localStorage.clear()):e==="TOKEN_REFRESHED"?(console.log("[Auth]  Token refreshed successfully"),n?.access_token&&console.log("[Auth] New token expires at:",new Date(n.expires_at*1e3).toLocaleString())):e==="SIGNED_IN"?(console.log("[Auth]  User signed in successfully"),n?.access_token&&console.log("[Auth] Session expires at:",new Date(n.expires_at*1e3).toLocaleString())):e==="USER_UPDATED"&&console.log("[Auth] User profile updated")})),ia}async function om(){const t=pn();try{const{data:{session:e},error:n}=await t.auth.getSession();if(n)return!n.message.toLowerCase().includes("session")&&!n.message.toLowerCase().includes("not logged in")&&console.error("[getAccessToken] Session error:",n),null;if(!e||!e.access_token||e.access_token===Xa)return null;if(e.expires_at){const s=e.expires_at*1e3,i=Date.now(),a=s-i,l=Math.floor(a/1e3);if(l<0){console.warn("[getAccessToken] Token expired, refreshing...");const{data:{session:d},error:h}=await t.auth.refreshSession();return h||!d?.access_token?(console.error("[getAccessToken] Failed to refresh expired token:",h),null):(console.log("[getAccessToken]  Token refreshed successfully"),d.access_token)}if(l<300){console.warn(`[getAccessToken] Token expires in ${Math.floor(l/60)} minutes, refreshing...`);const{data:{session:d},error:h}=await t.auth.refreshSession();return h||!d?.access_token?(console.warn("[getAccessToken] Failed to refresh, using existing token:",h),e.access_token):(console.log("[getAccessToken]  Token proactively refreshed"),d.access_token)}}return e.access_token}catch(e){return console.error("[getAccessToken] Unexpected error:",e),null}}const cS=`https://${Va}.supabase.co/functions/v1/make-server-29f6739b`;async function Ke(t,e={},n=0){try{console.log(`[API] ========== REQUEST START: ${t} ==========`);const i=["/auth/signup","/auth/login","/health"].some(m=>t.includes(m));if(console.log(`[API] Endpoint: ${t}`),console.log(`[API] Is public: ${i}`),console.log(`[API] Retry count: ${n}`),!i&&n===0&&await new Promise(m=>setTimeout(m,100)),!i){console.log("[API] Protected endpoint - checking session...");const m=pn(),{data:{session:g},error:y}=await m.auth.getSession();if(y&&console.error("[API]  Session error:",y),!g)return console.log("[API]   No active session for endpoint:",t),console.log("[API] Request will not proceed - authentication required"),{success:!1,error:"No active session. Please log in to continue."};console.log("[API]  Session found"),console.log("[API] Session user:",g.user?.id),console.log("[API] Session expires:",new Date(g.expires_at*1e3).toLocaleTimeString())}const a=await om();if(!a&&!i)return console.warn(`[API]   No access token available for: ${t}`),console.log("[API] getAccessToken() returned null - session may have expired"),{success:!1,error:"Authentication token not available. Please try again."};const l={"Content-Type":"application/json",Authorization:`Bearer ${a||Xa}`,...e.headers},d=`${cS}${t}`;console.log(`[API] ${e.method||"GET"} ${d}`,a?"(authenticated)":"(public)"),a?console.log("[API] Using access_token, preview:",a.substring(0,30)+"..."):console.log("[API] Using anon_key (public endpoint)");const h=await fetch(d,{...e,headers:l});if(console.log(`[API Response] ${t} - Status: ${h.status} ${h.statusText}`),h.status===401&&n<2&&!i){console.warn(`[API] Got 401, attempting to refresh session (retry ${n+1}/2)...`);const m=pn(),{data:{session:g}}=await m.auth.getSession();if(!g)return console.error("[API] No session to refresh - user must log in"),await m.auth.signOut(),localStorage.clear(),window.location.reload(),{success:!1,error:"Session expired. Please log in again."};const{data:{session:y},error:b}=await m.auth.refreshSession();if(!b&&y?.access_token)return console.log("[API]  Session refreshed successfully, retrying request..."),await new Promise(_=>setTimeout(_,200)),Ke(t,e,n+1);if(console.error("[API]  Failed to refresh session:",b?.message||"Unknown error"),n===1)return console.error("[API] Session cannot be recovered - forcing logout"),await m.auth.signOut(),localStorage.clear(),window.location.reload(),{success:!1,error:"Session expired. Please log out and log back in."}}if(!h.ok){const m=await h.text();return console.error(`[API Error] ${t} (${h.status}):`,m),h.status===401?{success:!1,error:"Authentication failed. Please log in again."}:{success:!1,error:m||`HTTP ${h.status}`}}return{success:!0,data:await h.json()}}catch(s){return console.error(`[Network Error] ${t}:`,s),console.error("[Error Details]",{name:s instanceof Error?s.name:"Unknown",message:s instanceof Error?s.message:String(s),stack:s instanceof Error?s.stack:"No stack"}),{success:!1,error:s instanceof Error?s.message:"Network error"}}}const qI={signup:(t,e,n,s)=>Ke("/auth/signup",{method:"POST",body:JSON.stringify({email:t,password:e,full_name:n,phone_number:s})}),login:async(t,e)=>({success:!0})},Do={send:(t,e,n="text",s,i)=>Ke("/messages/send",{method:"POST",body:JSON.stringify({conversation_id:t,body:e,type:n,reply_to:s,attachments:i})}),markAsRead:t=>Ke("/messages/mark-read",{method:"POST",body:JSON.stringify({message_ids:t})}),react:(t,e)=>Ke("/messages/react",{method:"POST",body:JSON.stringify({message_id:t,emoji:e})}),deleteForMe:t=>Ke("/messages/delete-for-me",{method:"POST",body:JSON.stringify({message_id:t})}),deleteForEveryone:t=>Ke("/messages/delete-for-everyone",{method:"POST",body:JSON.stringify({message_id:t})})},Zo={create:(t,e,n)=>Ke("/conversations/create",{method:"POST",body:JSON.stringify({type:t,member_ids:e,title:n})}),list:()=>Ke("/conversations"),get:t=>Ke(`/conversations/${t}`),delete:t=>Ke("/conversations/delete",{method:"POST",body:JSON.stringify({conversation_id:t})})},im={uploadFile:async(t,e)=>{const n=new FormData;n.append("file",t),n.append("type",e);const s=await om();try{const i=await fetch(`${cS}/upload`,{method:"POST",headers:{Authorization:`Bearer ${s||Xa}`},body:n});return i.ok?{success:!0,data:await i.json()}:{success:!1,error:await i.text()}}catch(i){return{success:!1,error:i instanceof Error?i.message:"Upload failed"}}}},bx={start:t=>Ke("/typing/start",{method:"POST",body:JSON.stringify({conversation_id:t})}),stop:t=>Ke("/typing/stop",{method:"POST",body:JSON.stringify({conversation_id:t})})},Ec={updateStatus:t=>Ke("/presence/update",{method:"POST",body:JSON.stringify({is_online:t})})},Kf={update:t=>Ke("/profile/update",{method:"POST",body:JSON.stringify(t)}),get:t=>Ke(`/profile/${t}`)},Sx={block:t=>Ke("/users/block",{method:"POST",body:JSON.stringify({user_id:t})}),unblock:t=>Ke("/users/unblock",{method:"POST",body:JSON.stringify({user_id:t})}),getBlockedUsers:()=>Ke("/users/blocked")},_x={initiate:(t,e)=>Ke("/calls/initiate",{method:"POST",body:JSON.stringify({recipient_id:t,call_type:e})}),signal:(t,e,n)=>Ke("/calls/signal",{method:"POST",body:JSON.stringify({call_id:t,signal_type:e,signal_data:n})}),accept:t=>Ke("/calls/accept",{method:"POST",body:JSON.stringify({call_id:t})}),reject:t=>Ke("/calls/reject",{method:"POST",body:JSON.stringify({call_id:t})}),end:t=>Ke("/calls/end",{method:"POST",body:JSON.stringify({call_id:t})}),getSignals:(t,e)=>Ke(`/calls/${t}/signals${e?`?after=${e}`:""}`),checkIncoming:()=>Ke("/calls/incoming")};function uS(t){const e=new Date;return t.filter(n=>n.expires_at?new Date(n.expires_at)>e:!0)}function YI(t){return t.map(e=>{if(!e.stories)return null;const n=uS(e.stories);return n.length===0?null:{...e,stories:n}}).filter(e=>e!==null)}const Xn={getAllStories:async()=>{const t=await Ke("/stories");return t.success&&t.data?.stories&&(t.data.stories=YI(t.data.stories)),t},getUserStories:t=>Ke(`/stories/user/${t}`),create:(t,e)=>Ke("/stories/create",{method:"POST",body:JSON.stringify({type:t,...e})}),view:t=>Ke("/stories/view",{method:"POST",body:JSON.stringify({story_id:t})}),getViews:t=>Ke(`/stories/${t}/views`),reply:(t,e)=>Ke("/stories/reply",{method:"POST",body:JSON.stringify({story_id:t,message:e})}),delete:t=>Ke("/stories/delete",{method:"POST",body:JSON.stringify({story_id:t})}),getMyStories:async()=>{const t=await Ke("/stories/my-stories");return t.success&&t.data?.stories&&(t.data.stories=uS(t.data.stories)),t},cleanup:()=>Ke("/stories/cleanup",{method:"POST"})};var kx=1,JI=.9,XI=.8,QI=.17,Gf=.1,qf=.999,ZI=.9999,e3=.99,t3=/[\\\/_+.#"@\[\(\{&]/,n3=/[\\\/_+.#"@\[\(\{&]/g,r3=/[\s-]/,dS=/[\s-]/g;function Zh(t,e,n,s,i,a,l){if(a===e.length)return i===t.length?kx:e3;var d=`${i},${a}`;if(l[d]!==void 0)return l[d];for(var h=s.charAt(a),p=n.indexOf(h,i),m=0,g,y,b,_;p>=0;)g=Zh(t,e,n,s,p+1,a+1,l),g>m&&(p===i?g*=kx:t3.test(t.charAt(p-1))?(g*=XI,b=t.slice(i,p-1).match(n3),b&&i>0&&(g*=Math.pow(qf,b.length))):r3.test(t.charAt(p-1))?(g*=JI,_=t.slice(i,p-1).match(dS),_&&i>0&&(g*=Math.pow(qf,_.length))):(g*=QI,i>0&&(g*=Math.pow(qf,p-i))),t.charAt(p)!==e.charAt(a)&&(g*=ZI)),(g<Gf&&n.charAt(p-1)===s.charAt(a+1)||s.charAt(a+1)===s.charAt(a)&&n.charAt(p-1)!==s.charAt(a))&&(y=Zh(t,e,n,s,p+1,a+2,l),y*Gf>g&&(g=y*Gf)),g>m&&(m=g),p=n.indexOf(h,p+1);return l[d]=m,m}function jx(t){return t.toLowerCase().replace(dS," ")}function s3(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,Zh(t,e,jx(t),jx(e),0,0,{})}function Ie(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}function o3(t,e){const n=w.createContext(e),s=a=>{const{children:l,...d}=a,h=w.useMemo(()=>d,Object.values(d));return u.jsx(n.Provider,{value:h,children:l})};s.displayName=t+"Provider";function i(a){const l=w.useContext(n);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[s,i]}function Dr(t,e=[]){let n=[];function s(a,l){const d=w.createContext(l),h=n.length;n=[...n,l];const p=g=>{const{scope:y,children:b,..._}=g,S=y?.[t]?.[h]||d,j=w.useMemo(()=>_,Object.values(_));return u.jsx(S.Provider,{value:j,children:b})};p.displayName=a+"Provider";function m(g,y){const b=y?.[t]?.[h]||d,_=w.useContext(b);if(_)return _;if(l!==void 0)return l;throw new Error(`\`${g}\` must be used within \`${a}\``)}return[p,m]}const i=()=>{const a=n.map(l=>w.createContext(l));return function(d){const h=d?.[t]||a;return w.useMemo(()=>({[`__scope${t}`]:{...d,[t]:h}}),[d,h])}};return i.scopeName=t,[s,i3(i,...e)]}function i3(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const l=s.reduce((d,{useScope:h,scopeName:p})=>{const g=h(a)[`__scope${p}`];return{...d,...g}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return n.scopeName=e.scopeName,n}var ps=globalThis?.document?w.useLayoutEffect:()=>{},a3=lw[" useId ".trim().toString()]||(()=>{}),l3=0;function jn(t){const[e,n]=w.useState(a3());return ps(()=>{n(s=>s??String(l3++))},[t]),t||(e?`radix-${e}`:"")}var c3=lw[" useInsertionEffect ".trim().toString()]||ps;function Qa({prop:t,defaultProp:e,onChange:n=()=>{},caller:s}){const[i,a,l]=u3({defaultProp:e,onChange:n}),d=t!==void 0,h=d?t:i;{const m=w.useRef(t!==void 0);w.useEffect(()=>{const g=m.current;g!==d&&console.warn(`${s} is changing from ${g?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=d},[d,s])}const p=w.useCallback(m=>{if(d){const g=d3(m)?m(t):m;g!==t&&l.current?.(g)}else a(m)},[d,t,a,l]);return[h,p]}function u3({defaultProp:t,onChange:e}){const[n,s]=w.useState(t),i=w.useRef(n),a=w.useRef(e);return c3(()=>{a.current=e},[e]),w.useEffect(()=>{i.current!==n&&(a.current?.(n),i.current=n)},[n,i]),[n,s,a]}function d3(t){return typeof t=="function"}function Or(t){const e=w.useRef(t);return w.useEffect(()=>{e.current=t}),w.useMemo(()=>(...n)=>e.current?.(...n),[])}function f3(t,e=globalThis?.document){const n=Or(t);w.useEffect(()=>{const s=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var h3="DismissableLayer",ep="dismissableLayer.update",p3="dismissableLayer.pointerDownOutside",m3="dismissableLayer.focusOutside",Cx,fS=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hu=w.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:l,onDismiss:d,...h}=t,p=w.useContext(fS),[m,g]=w.useState(null),y=m?.ownerDocument??globalThis?.document,[,b]=w.useState({}),_=mt(e,L=>g(L)),S=Array.from(p.layers),[j]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),C=S.indexOf(j),T=m?S.indexOf(m):-1,E=p.layersWithOutsidePointerEventsDisabled.size>0,N=T>=C,P=y3(L=>{const $=L.target,z=[...p.branches].some(W=>W.contains($));!N||z||(i?.(L),l?.(L),L.defaultPrevented||d?.())},y),M=x3(L=>{const $=L.target;[...p.branches].some(W=>W.contains($))||(a?.(L),l?.(L),L.defaultPrevented||d?.())},y);return f3(L=>{T===p.layers.size-1&&(s?.(L),!L.defaultPrevented&&d&&(L.preventDefault(),d()))},y),w.useEffect(()=>{if(m)return n&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(Cx=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(m)),p.layers.add(m),Ex(),()=>{n&&p.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=Cx)}},[m,y,n,p]),w.useEffect(()=>()=>{m&&(p.layers.delete(m),p.layersWithOutsidePointerEventsDisabled.delete(m),Ex())},[m,p]),w.useEffect(()=>{const L=()=>b({});return document.addEventListener(ep,L),()=>document.removeEventListener(ep,L)},[]),u.jsx(Ge.div,{...h,ref:_,style:{pointerEvents:E?N?"auto":"none":void 0,...t.style},onFocusCapture:Ie(t.onFocusCapture,M.onFocusCapture),onBlurCapture:Ie(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Ie(t.onPointerDownCapture,P.onPointerDownCapture)})});hu.displayName=h3;var g3="DismissableLayerBranch",v3=w.forwardRef((t,e)=>{const n=w.useContext(fS),s=w.useRef(null),i=mt(e,s);return w.useEffect(()=>{const a=s.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),u.jsx(Ge.div,{...t,ref:i})});v3.displayName=g3;function y3(t,e=globalThis?.document){const n=Or(t),s=w.useRef(!1),i=w.useRef(()=>{});return w.useEffect(()=>{const a=d=>{if(d.target&&!s.current){let h=function(){hS(p3,n,p,{discrete:!0})};const p={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=h,e.addEventListener("click",i.current,{once:!0})):h()}else e.removeEventListener("click",i.current);s.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function x3(t,e=globalThis?.document){const n=Or(t),s=w.useRef(!1);return w.useEffect(()=>{const i=a=>{a.target&&!s.current&&hS(m3,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Ex(){const t=new CustomEvent(ep);document.dispatchEvent(t)}function hS(t,e,n,{discrete:s}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),s?p1(i,a):i.dispatchEvent(a)}var Yf="focusScope.autoFocusOnMount",Jf="focusScope.autoFocusOnUnmount",Nx={bubbles:!1,cancelable:!0},w3="FocusScope",pu=w.forwardRef((t,e)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...l}=t,[d,h]=w.useState(null),p=Or(i),m=Or(a),g=w.useRef(null),y=mt(e,S=>h(S)),b=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(s){let S=function(E){if(b.paused||!d)return;const N=E.target;d.contains(N)?g.current=N:us(g.current,{select:!0})},j=function(E){if(b.paused||!d)return;const N=E.relatedTarget;N!==null&&(d.contains(N)||us(g.current,{select:!0}))},C=function(E){if(document.activeElement===document.body)for(const P of E)P.removedNodes.length>0&&us(d)};document.addEventListener("focusin",S),document.addEventListener("focusout",j);const T=new MutationObserver(C);return d&&T.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",j),T.disconnect()}}},[s,d,b.paused]),w.useEffect(()=>{if(d){Px.add(b);const S=document.activeElement;if(!d.contains(S)){const C=new CustomEvent(Yf,Nx);d.addEventListener(Yf,p),d.dispatchEvent(C),C.defaultPrevented||(b3(C3(pS(d)),{select:!0}),document.activeElement===S&&us(d))}return()=>{d.removeEventListener(Yf,p),setTimeout(()=>{const C=new CustomEvent(Jf,Nx);d.addEventListener(Jf,m),d.dispatchEvent(C),C.defaultPrevented||us(S??document.body,{select:!0}),d.removeEventListener(Jf,m),Px.remove(b)},0)}}},[d,p,m,b]);const _=w.useCallback(S=>{if(!n&&!s||b.paused)return;const j=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,C=document.activeElement;if(j&&C){const T=S.currentTarget,[E,N]=S3(T);E&&N?!S.shiftKey&&C===N?(S.preventDefault(),n&&us(E,{select:!0})):S.shiftKey&&C===E&&(S.preventDefault(),n&&us(N,{select:!0})):C===T&&S.preventDefault()}},[n,s,b.paused]);return u.jsx(Ge.div,{tabIndex:-1,...l,ref:y,onKeyDown:_})});pu.displayName=w3;function b3(t,{select:e=!1}={}){const n=document.activeElement;for(const s of t)if(us(s,{select:e}),document.activeElement!==n)return}function S3(t){const e=pS(t),n=Tx(e,t),s=Tx(e.reverse(),t);return[n,s]}function pS(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Tx(t,e){for(const n of t)if(!_3(n,{upTo:e}))return n}function _3(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function k3(t){return t instanceof HTMLInputElement&&"select"in t}function us(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&k3(t)&&e&&t.select()}}var Px=j3();function j3(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=Ax(t,e),t.unshift(e)},remove(e){t=Ax(t,e),t[0]?.resume()}}}function Ax(t,e){const n=[...t],s=n.indexOf(e);return s!==-1&&n.splice(s,1),n}function C3(t){return t.filter(e=>e.tagName!=="A")}var E3="Portal",mu=w.forwardRef((t,e)=>{const{container:n,...s}=t,[i,a]=w.useState(!1);ps(()=>a(!0),[]);const l=n||i&&globalThis?.document?.body;return l?cw.createPortal(u.jsx(Ge.div,{...s,ref:e}),l):null});mu.displayName=E3;function N3(t,e){return w.useReducer((n,s)=>e[n][s]??n,t)}var vr=t=>{const{present:e,children:n}=t,s=T3(e),i=typeof n=="function"?n({present:s.isPresent}):w.Children.only(n),a=mt(s.ref,P3(i));return typeof n=="function"||s.isPresent?w.cloneElement(i,{ref:a}):null};vr.displayName="Presence";function T3(t){const[e,n]=w.useState(),s=w.useRef(null),i=w.useRef(t),a=w.useRef("none"),l=t?"mounted":"unmounted",[d,h]=N3(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const p=Nc(s.current);a.current=d==="mounted"?p:"none"},[d]),ps(()=>{const p=s.current,m=i.current;if(m!==t){const y=a.current,b=Nc(p);t?h("MOUNT"):b==="none"||p?.display==="none"?h("UNMOUNT"):h(m&&y!==b?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,h]),ps(()=>{if(e){let p;const m=e.ownerDocument.defaultView??window,g=b=>{const S=Nc(s.current).includes(CSS.escape(b.animationName));if(b.target===e&&S&&(h("ANIMATION_END"),!i.current)){const j=e.style.animationFillMode;e.style.animationFillMode="forwards",p=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=j)})}},y=b=>{b.target===e&&(a.current=Nc(s.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{m.clearTimeout(p),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:w.useCallback(p=>{s.current=p?getComputedStyle(p):null,n(p)},[])}}function Nc(t){return t?.animationName||"none"}function P3(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Xf=0;function am(){w.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Rx()),document.body.insertAdjacentElement("beforeend",t[1]??Rx()),Xf++,()=>{Xf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Xf--}},[])}function Rx(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var $c="right-scroll-bar-position",Fc="width-before-scroll-bar",A3="with-scroll-bars-hidden",R3="--removed-body-scroll-bar-size";function Qf(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function O3(t,e){var n=w.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(s){var i=n.value;i!==s&&(n.value=s,n.callback(s,i))}}}})[0];return n.callback=e,n.facade}var I3=typeof window<"u"?w.useLayoutEffect:w.useEffect,Ox=new WeakMap;function M3(t,e){var n=O3(null,function(s){return t.forEach(function(i){return Qf(i,s)})});return I3(function(){var s=Ox.get(n);if(s){var i=new Set(s),a=new Set(t),l=n.current;i.forEach(function(d){a.has(d)||Qf(d,null)}),a.forEach(function(d){i.has(d)||Qf(d,l)})}Ox.set(n,t)},[t]),n}function D3(t){return t}function L3(t,e){e===void 0&&(e=D3);var n=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var l=e(a,s);return n.push(l),function(){n=n.filter(function(d){return d!==l})}},assignSyncMedium:function(a){for(s=!0;n.length;){var l=n;n=[],l.forEach(a)}n={push:function(d){return a(d)},filter:function(){return n}}},assignMedium:function(a){s=!0;var l=[];if(n.length){var d=n;n=[],d.forEach(a),l=n}var h=function(){var m=l;l=[],m.forEach(a)},p=function(){return Promise.resolve().then(h)};p(),n={push:function(m){l.push(m),p()},filter:function(m){return l=l.filter(m),n}}}};return i}function $3(t){t===void 0&&(t={});var e=L3(null);return e.options=Dn({async:!0,ssr:!1},t),e}var mS=function(t){var e=t.sideCar,n=ws(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return w.createElement(s,Dn({},n))};mS.isSideCarExport=!0;function F3(t,e){return t.useMedium(e),mS}var gS=$3(),Zf=function(){},gu=w.forwardRef(function(t,e){var n=w.useRef(null),s=w.useState({onScrollCapture:Zf,onWheelCapture:Zf,onTouchMoveCapture:Zf}),i=s[0],a=s[1],l=t.forwardProps,d=t.children,h=t.className,p=t.removeScrollBar,m=t.enabled,g=t.shards,y=t.sideCar,b=t.noRelative,_=t.noIsolation,S=t.inert,j=t.allowPinchZoom,C=t.as,T=C===void 0?"div":C,E=t.gapMode,N=ws(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=y,M=M3([n,e]),L=Dn(Dn({},N),i);return w.createElement(w.Fragment,null,m&&w.createElement(P,{sideCar:gS,removeScrollBar:p,shards:g,noRelative:b,noIsolation:_,inert:S,setCallbacks:a,allowPinchZoom:!!j,lockRef:n,gapMode:E}),l?w.cloneElement(w.Children.only(d),Dn(Dn({},L),{ref:M})):w.createElement(T,Dn({},L,{className:h,ref:M}),d))});gu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};gu.classNames={fullWidth:Fc,zeroRight:$c};var V3=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function B3(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=V3();return e&&t.setAttribute("nonce",e),t}function U3(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function z3(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var W3=function(){var t=0,e=null;return{add:function(n){t==0&&(e=B3())&&(U3(e,n),z3(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},H3=function(){var t=W3();return function(e,n){w.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},vS=function(){var t=H3(),e=function(n){var s=n.styles,i=n.dynamic;return t(s,i),null};return e},K3={left:0,top:0,right:0,gap:0},eh=function(t){return parseInt(t||"",10)||0},G3=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],s=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[eh(n),eh(s),eh(i)]},q3=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return K3;var e=G3(t),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-n+e[2]-e[0])}},Y3=vS(),ei="data-scroll-locked",J3=function(t,e,n,s){var i=t.left,a=t.top,l=t.right,d=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(A3,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(d,"px ").concat(s,`;
  }
  body[`).concat(ei,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(d,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat($c,` {
    right: `).concat(d,"px ").concat(s,`;
  }
  
  .`).concat(Fc,` {
    margin-right: `).concat(d,"px ").concat(s,`;
  }
  
  .`).concat($c," .").concat($c,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Fc," .").concat(Fc,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(ei,`] {
    `).concat(R3,": ").concat(d,`px;
  }
`)},Ix=function(){var t=parseInt(document.body.getAttribute(ei)||"0",10);return isFinite(t)?t:0},X3=function(){w.useEffect(function(){return document.body.setAttribute(ei,(Ix()+1).toString()),function(){var t=Ix()-1;t<=0?document.body.removeAttribute(ei):document.body.setAttribute(ei,t.toString())}},[])},Q3=function(t){var e=t.noRelative,n=t.noImportant,s=t.gapMode,i=s===void 0?"margin":s;X3();var a=w.useMemo(function(){return q3(i)},[i]);return w.createElement(Y3,{styles:J3(a,!e,i,n?"":"!important")})},tp=!1;if(typeof window<"u")try{var Tc=Object.defineProperty({},"passive",{get:function(){return tp=!0,!0}});window.addEventListener("test",Tc,Tc),window.removeEventListener("test",Tc,Tc)}catch{tp=!1}var Lo=tp?{passive:!1}:!1,Z3=function(t){return t.tagName==="TEXTAREA"},yS=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Z3(t)&&n[e]==="visible")},eM=function(t){return yS(t,"overflowY")},tM=function(t){return yS(t,"overflowX")},Mx=function(t,e){var n=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=xS(t,s);if(i){var a=wS(t,s),l=a[1],d=a[2];if(l>d)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},nM=function(t){var e=t.scrollTop,n=t.scrollHeight,s=t.clientHeight;return[e,n,s]},rM=function(t){var e=t.scrollLeft,n=t.scrollWidth,s=t.clientWidth;return[e,n,s]},xS=function(t,e){return t==="v"?eM(e):tM(e)},wS=function(t,e){return t==="v"?nM(e):rM(e)},sM=function(t,e){return t==="h"&&e==="rtl"?-1:1},oM=function(t,e,n,s,i){var a=sM(t,window.getComputedStyle(e).direction),l=a*s,d=n.target,h=e.contains(d),p=!1,m=l>0,g=0,y=0;do{if(!d)break;var b=wS(t,d),_=b[0],S=b[1],j=b[2],C=S-j-a*_;(_||C)&&xS(t,d)&&(g+=C,y+=_);var T=d.parentNode;d=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!h&&d!==document.body||h&&(e.contains(d)||e===d));return(m&&Math.abs(g)<1||!m&&Math.abs(y)<1)&&(p=!0),p},Pc=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Dx=function(t){return[t.deltaX,t.deltaY]},Lx=function(t){return t&&"current"in t?t.current:t},iM=function(t,e){return t[0]===e[0]&&t[1]===e[1]},aM=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},lM=0,$o=[];function cM(t){var e=w.useRef([]),n=w.useRef([0,0]),s=w.useRef(),i=w.useState(lM++)[0],a=w.useState(vS)[0],l=w.useRef(t);w.useEffect(function(){l.current=t},[t]),w.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var S=Jp([t.lockRef.current],(t.shards||[]).map(Lx),!0).filter(Boolean);return S.forEach(function(j){return j.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),S.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var d=w.useCallback(function(S,j){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!l.current.allowPinchZoom;var C=Pc(S),T=n.current,E="deltaX"in S?S.deltaX:T[0]-C[0],N="deltaY"in S?S.deltaY:T[1]-C[1],P,M=S.target,L=Math.abs(E)>Math.abs(N)?"h":"v";if("touches"in S&&L==="h"&&M.type==="range")return!1;var $=Mx(L,M);if(!$)return!0;if($?P=L:(P=L==="v"?"h":"v",$=Mx(L,M)),!$)return!1;if(!s.current&&"changedTouches"in S&&(E||N)&&(s.current=P),!P)return!0;var z=s.current||P;return oM(z,j,S,z==="h"?E:N)},[]),h=w.useCallback(function(S){var j=S;if(!(!$o.length||$o[$o.length-1]!==a)){var C="deltaY"in j?Dx(j):Pc(j),T=e.current.filter(function(P){return P.name===j.type&&(P.target===j.target||j.target===P.shadowParent)&&iM(P.delta,C)})[0];if(T&&T.should){j.cancelable&&j.preventDefault();return}if(!T){var E=(l.current.shards||[]).map(Lx).filter(Boolean).filter(function(P){return P.contains(j.target)}),N=E.length>0?d(j,E[0]):!l.current.noIsolation;N&&j.cancelable&&j.preventDefault()}}},[]),p=w.useCallback(function(S,j,C,T){var E={name:S,delta:j,target:C,should:T,shadowParent:uM(C)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(N){return N!==E})},1)},[]),m=w.useCallback(function(S){n.current=Pc(S),s.current=void 0},[]),g=w.useCallback(function(S){p(S.type,Dx(S),S.target,d(S,t.lockRef.current))},[]),y=w.useCallback(function(S){p(S.type,Pc(S),S.target,d(S,t.lockRef.current))},[]);w.useEffect(function(){return $o.push(a),t.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:y}),document.addEventListener("wheel",h,Lo),document.addEventListener("touchmove",h,Lo),document.addEventListener("touchstart",m,Lo),function(){$o=$o.filter(function(S){return S!==a}),document.removeEventListener("wheel",h,Lo),document.removeEventListener("touchmove",h,Lo),document.removeEventListener("touchstart",m,Lo)}},[]);var b=t.removeScrollBar,_=t.inert;return w.createElement(w.Fragment,null,_?w.createElement(a,{styles:aM(i)}):null,b?w.createElement(Q3,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function uM(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const dM=F3(gS,cM);var vu=w.forwardRef(function(t,e){return w.createElement(gu,Dn({},t,{ref:e,sideCar:dM}))});vu.classNames=gu.classNames;var fM=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Fo=new WeakMap,Ac=new WeakMap,Rc={},th=0,bS=function(t){return t&&(t.host||bS(t.parentNode))},hM=function(t,e){return e.map(function(n){if(t.contains(n))return n;var s=bS(n);return s&&t.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},pM=function(t,e,n,s){var i=hM(e,Array.isArray(t)?t:[t]);Rc[n]||(Rc[n]=new WeakMap);var a=Rc[n],l=[],d=new Set,h=new Set(i),p=function(g){!g||d.has(g)||(d.add(g),p(g.parentNode))};i.forEach(p);var m=function(g){!g||h.has(g)||Array.prototype.forEach.call(g.children,function(y){if(d.has(y))m(y);else try{var b=y.getAttribute(s),_=b!==null&&b!=="false",S=(Fo.get(y)||0)+1,j=(a.get(y)||0)+1;Fo.set(y,S),a.set(y,j),l.push(y),S===1&&_&&Ac.set(y,!0),j===1&&y.setAttribute(n,"true"),_||y.setAttribute(s,"true")}catch(C){console.error("aria-hidden: cannot operate on ",y,C)}})};return m(e),d.clear(),th++,function(){l.forEach(function(g){var y=Fo.get(g)-1,b=a.get(g)-1;Fo.set(g,y),a.set(g,b),y||(Ac.has(g)||g.removeAttribute(s),Ac.delete(g)),b||g.removeAttribute(n)}),th--,th||(Fo=new WeakMap,Fo=new WeakMap,Ac=new WeakMap,Rc={})}},lm=function(t,e,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),i=fM(t);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live], script"))),pM(s,i,n,"aria-hidden")):function(){return null}},yu="Dialog",[SS,_S]=Dr(yu),[mM,er]=SS(yu),kS=t=>{const{__scopeDialog:e,children:n,open:s,defaultOpen:i,onOpenChange:a,modal:l=!0}=t,d=w.useRef(null),h=w.useRef(null),[p,m]=Qa({prop:s,defaultProp:i??!1,onChange:a,caller:yu});return u.jsx(mM,{scope:e,triggerRef:d,contentRef:h,contentId:jn(),titleId:jn(),descriptionId:jn(),open:p,onOpenChange:m,onOpenToggle:w.useCallback(()=>m(g=>!g),[m]),modal:l,children:n})};kS.displayName=yu;var jS="DialogTrigger",CS=w.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,i=er(jS,n),a=mt(e,i.triggerRef);return u.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":dm(i.open),...s,ref:a,onClick:Ie(t.onClick,i.onOpenToggle)})});CS.displayName=jS;var cm="DialogPortal",[gM,ES]=SS(cm,{forceMount:void 0}),NS=t=>{const{__scopeDialog:e,forceMount:n,children:s,container:i}=t,a=er(cm,e);return u.jsx(gM,{scope:e,forceMount:n,children:w.Children.map(s,l=>u.jsx(vr,{present:n||a.open,children:u.jsx(mu,{asChild:!0,container:i,children:l})}))})};NS.displayName=cm;var Xc="DialogOverlay",TS=w.forwardRef((t,e)=>{const n=ES(Xc,t.__scopeDialog),{forceMount:s=n.forceMount,...i}=t,a=er(Xc,t.__scopeDialog);return a.modal?u.jsx(vr,{present:s||a.open,children:u.jsx(yM,{...i,ref:e})}):null});TS.displayName=Xc;var vM=eo("DialogOverlay.RemoveScroll"),yM=w.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,i=er(Xc,n);return u.jsx(vu,{as:vM,allowPinchZoom:!0,shards:[i.contentRef],children:u.jsx(Ge.div,{"data-state":dm(i.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),to="DialogContent",PS=w.forwardRef((t,e)=>{const n=ES(to,t.__scopeDialog),{forceMount:s=n.forceMount,...i}=t,a=er(to,t.__scopeDialog);return u.jsx(vr,{present:s||a.open,children:a.modal?u.jsx(xM,{...i,ref:e}):u.jsx(wM,{...i,ref:e})})});PS.displayName=to;var xM=w.forwardRef((t,e)=>{const n=er(to,t.__scopeDialog),s=w.useRef(null),i=mt(e,n.contentRef,s);return w.useEffect(()=>{const a=s.current;if(a)return lm(a)},[]),u.jsx(AS,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(t.onCloseAutoFocus,a=>{a.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Ie(t.onPointerDownOutside,a=>{const l=a.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0;(l.button===2||d)&&a.preventDefault()}),onFocusOutside:Ie(t.onFocusOutside,a=>a.preventDefault())})}),wM=w.forwardRef((t,e)=>{const n=er(to,t.__scopeDialog),s=w.useRef(!1),i=w.useRef(!1);return u.jsx(AS,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{t.onCloseAutoFocus?.(a),a.defaultPrevented||(s.current||n.triggerRef.current?.focus(),a.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:a=>{t.onInteractOutside?.(a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=a.target;n.triggerRef.current?.contains(l)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),AS=w.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,...l}=t,d=er(to,n),h=w.useRef(null),p=mt(e,h);return am(),u.jsxs(u.Fragment,{children:[u.jsx(pu,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:a,children:u.jsx(hu,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":dm(d.open),...l,ref:p,onDismiss:()=>d.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(SM,{titleId:d.titleId}),u.jsx(kM,{contentRef:h,descriptionId:d.descriptionId})]})]})}),um="DialogTitle",RS=w.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,i=er(um,n);return u.jsx(Ge.h2,{id:i.titleId,...s,ref:e})});RS.displayName=um;var OS="DialogDescription",IS=w.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,i=er(OS,n);return u.jsx(Ge.p,{id:i.descriptionId,...s,ref:e})});IS.displayName=OS;var MS="DialogClose",DS=w.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,i=er(MS,n);return u.jsx(Ge.button,{type:"button",...s,ref:e,onClick:Ie(t.onClick,()=>i.onOpenChange(!1))})});DS.displayName=MS;function dm(t){return t?"open":"closed"}var LS="DialogTitleWarning",[bM,$S]=o3(LS,{contentName:to,titleName:um,docsSlug:"dialog"}),SM=({titleId:t})=>{const e=$S(LS),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return w.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},_M="DialogDescriptionWarning",kM=({contentRef:t,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${$S(_M).contentName}}.`;return w.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(s))},[s,t,e]),null},fm=kS,jM=CS,hm=NS,xu=TS,wu=PS,FS=RS,VS=IS,pm=DS,aa='[cmdk-group=""]',nh='[cmdk-group-items=""]',CM='[cmdk-group-heading=""]',BS='[cmdk-item=""]',$x=`${BS}:not([aria-disabled="true"])`,np="cmdk-item-select",Uo="data-value",EM=(t,e,n)=>s3(t,e,n),US=w.createContext(void 0),Za=()=>w.useContext(US),zS=w.createContext(void 0),mm=()=>w.useContext(zS),WS=w.createContext(void 0),HS=w.forwardRef((t,e)=>{let n=zo(()=>{var I,H;return{search:"",value:(H=(I=t.value)!=null?I:t.defaultValue)!=null?H:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=zo(()=>new Set),i=zo(()=>new Map),a=zo(()=>new Map),l=zo(()=>new Set),d=KS(t),{label:h,children:p,value:m,onValueChange:g,filter:y,shouldFilter:b,loop:_,disablePointerSelection:S=!1,vimBindings:j=!0,...C}=t,T=jn(),E=jn(),N=jn(),P=w.useRef(null),M=$M();no(()=>{if(m!==void 0){let I=m.trim();n.current.value=I,L.emit()}},[m]),no(()=>{M(6,ee)},[]);let L=w.useMemo(()=>({subscribe:I=>(l.current.add(I),()=>l.current.delete(I)),snapshot:()=>n.current,setState:(I,H,G)=>{var q,ae,ne,de;if(!Object.is(n.current[I],H)){if(n.current[I]=H,I==="search")X(),W(),M(1,Z);else if(I==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ve=document.getElementById(N);ve?ve.focus():(q=document.getElementById(T))==null||q.focus()}if(M(7,()=>{var ve;n.current.selectedItemId=(ve=fe())==null?void 0:ve.id,L.emit()}),G||M(5,ee),((ae=d.current)==null?void 0:ae.value)!==void 0){let ve=H??"";(de=(ne=d.current).onValueChange)==null||de.call(ne,ve);return}}L.emit()}},emit:()=>{l.current.forEach(I=>I())}}),[]),$=w.useMemo(()=>({value:(I,H,G)=>{var q;H!==((q=a.current.get(I))==null?void 0:q.value)&&(a.current.set(I,{value:H,keywords:G}),n.current.filtered.items.set(I,z(H,G)),M(2,()=>{W(),L.emit()}))},item:(I,H)=>(s.current.add(I),H&&(i.current.has(H)?i.current.get(H).add(I):i.current.set(H,new Set([I]))),M(3,()=>{X(),W(),n.current.value||Z(),L.emit()}),()=>{a.current.delete(I),s.current.delete(I),n.current.filtered.items.delete(I);let G=fe();M(4,()=>{X(),G?.getAttribute("id")===I&&Z(),L.emit()})}),group:I=>(i.current.has(I)||i.current.set(I,new Set),()=>{a.current.delete(I),i.current.delete(I)}),filter:()=>d.current.shouldFilter,label:h||t["aria-label"],getDisablePointerSelection:()=>d.current.disablePointerSelection,listId:T,inputId:N,labelId:E,listInnerRef:P}),[]);function z(I,H){var G,q;let ae=(q=(G=d.current)==null?void 0:G.filter)!=null?q:EM;return I?ae(I,n.current.search,H):0}function W(){if(!n.current.search||d.current.shouldFilter===!1)return;let I=n.current.filtered.items,H=[];n.current.filtered.groups.forEach(q=>{let ae=i.current.get(q),ne=0;ae.forEach(de=>{let ve=I.get(de);ne=Math.max(ve,ne)}),H.push([q,ne])});let G=P.current;oe().sort((q,ae)=>{var ne,de;let ve=q.getAttribute("id"),We=ae.getAttribute("id");return((ne=I.get(We))!=null?ne:0)-((de=I.get(ve))!=null?de:0)}).forEach(q=>{let ae=q.closest(nh);ae?ae.appendChild(q.parentElement===ae?q:q.closest(`${nh} > *`)):G.appendChild(q.parentElement===G?q:q.closest(`${nh} > *`))}),H.sort((q,ae)=>ae[1]-q[1]).forEach(q=>{var ae;let ne=(ae=P.current)==null?void 0:ae.querySelector(`${aa}[${Uo}="${encodeURIComponent(q[0])}"]`);ne?.parentElement.appendChild(ne)})}function Z(){let I=oe().find(G=>G.getAttribute("aria-disabled")!=="true"),H=I?.getAttribute(Uo);L.setState("value",H||void 0)}function X(){var I,H,G,q;if(!n.current.search||d.current.shouldFilter===!1){n.current.filtered.count=s.current.size;return}n.current.filtered.groups=new Set;let ae=0;for(let ne of s.current){let de=(H=(I=a.current.get(ne))==null?void 0:I.value)!=null?H:"",ve=(q=(G=a.current.get(ne))==null?void 0:G.keywords)!=null?q:[],We=z(de,ve);n.current.filtered.items.set(ne,We),We>0&&ae++}for(let[ne,de]of i.current)for(let ve of de)if(n.current.filtered.items.get(ve)>0){n.current.filtered.groups.add(ne);break}n.current.filtered.count=ae}function ee(){var I,H,G;let q=fe();q&&(((I=q.parentElement)==null?void 0:I.firstChild)===q&&((G=(H=q.closest(aa))==null?void 0:H.querySelector(CM))==null||G.scrollIntoView({block:"nearest"})),q.scrollIntoView({block:"nearest"}))}function fe(){var I;return(I=P.current)==null?void 0:I.querySelector(`${BS}[aria-selected="true"]`)}function oe(){var I;return Array.from(((I=P.current)==null?void 0:I.querySelectorAll($x))||[])}function Q(I){let H=oe()[I];H&&L.setState("value",H.getAttribute(Uo))}function Y(I){var H;let G=fe(),q=oe(),ae=q.findIndex(de=>de===G),ne=q[ae+I];(H=d.current)!=null&&H.loop&&(ne=ae+I<0?q[q.length-1]:ae+I===q.length?q[0]:q[ae+I]),ne&&L.setState("value",ne.getAttribute(Uo))}function O(I){let H=fe(),G=H?.closest(aa),q;for(;G&&!q;)G=I>0?DM(G,aa):LM(G,aa),q=G?.querySelector($x);q?L.setState("value",q.getAttribute(Uo)):Y(I)}let B=()=>Q(oe().length-1),J=I=>{I.preventDefault(),I.metaKey?B():I.altKey?O(1):Y(1)},A=I=>{I.preventDefault(),I.metaKey?Q(0):I.altKey?O(-1):Y(-1)};return w.createElement(Ge.div,{ref:e,tabIndex:-1,...C,"cmdk-root":"",onKeyDown:I=>{var H;(H=C.onKeyDown)==null||H.call(C,I);let G=I.nativeEvent.isComposing||I.keyCode===229;if(!(I.defaultPrevented||G))switch(I.key){case"n":case"j":{j&&I.ctrlKey&&J(I);break}case"ArrowDown":{J(I);break}case"p":case"k":{j&&I.ctrlKey&&A(I);break}case"ArrowUp":{A(I);break}case"Home":{I.preventDefault(),Q(0);break}case"End":{I.preventDefault(),B();break}case"Enter":{I.preventDefault();let q=fe();if(q){let ae=new Event(np);q.dispatchEvent(ae)}}}}},w.createElement("label",{"cmdk-label":"",htmlFor:$.inputId,id:$.labelId,style:VM},h),bu(t,I=>w.createElement(zS.Provider,{value:L},w.createElement(US.Provider,{value:$},I))))}),NM=w.forwardRef((t,e)=>{var n,s;let i=jn(),a=w.useRef(null),l=w.useContext(WS),d=Za(),h=KS(t),p=(s=(n=h.current)==null?void 0:n.forceMount)!=null?s:l?.forceMount;no(()=>{if(!p)return d.item(i,l?.id)},[p]);let m=GS(i,a,[t.value,t.children,a],t.keywords),g=mm(),y=ms(M=>M.value&&M.value===m.current),b=ms(M=>p||d.filter()===!1?!0:M.search?M.filtered.items.get(i)>0:!0);w.useEffect(()=>{let M=a.current;if(!(!M||t.disabled))return M.addEventListener(np,_),()=>M.removeEventListener(np,_)},[b,t.onSelect,t.disabled]);function _(){var M,L;S(),(L=(M=h.current).onSelect)==null||L.call(M,m.current)}function S(){g.setState("value",m.current,!0)}if(!b)return null;let{disabled:j,value:C,onSelect:T,forceMount:E,keywords:N,...P}=t;return w.createElement(Ge.div,{ref:Rr(a,e),...P,id:i,"cmdk-item":"",role:"option","aria-disabled":!!j,"aria-selected":!!y,"data-disabled":!!j,"data-selected":!!y,onPointerMove:j||d.getDisablePointerSelection()?void 0:S,onClick:j?void 0:_},t.children)}),TM=w.forwardRef((t,e)=>{let{heading:n,children:s,forceMount:i,...a}=t,l=jn(),d=w.useRef(null),h=w.useRef(null),p=jn(),m=Za(),g=ms(b=>i||m.filter()===!1?!0:b.search?b.filtered.groups.has(l):!0);no(()=>m.group(l),[]),GS(l,d,[t.value,t.heading,h]);let y=w.useMemo(()=>({id:l,forceMount:i}),[i]);return w.createElement(Ge.div,{ref:Rr(d,e),...a,"cmdk-group":"",role:"presentation",hidden:g?void 0:!0},n&&w.createElement("div",{ref:h,"cmdk-group-heading":"","aria-hidden":!0,id:p},n),bu(t,b=>w.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?p:void 0},w.createElement(WS.Provider,{value:y},b))))}),PM=w.forwardRef((t,e)=>{let{alwaysRender:n,...s}=t,i=w.useRef(null),a=ms(l=>!l.search);return!n&&!a?null:w.createElement(Ge.div,{ref:Rr(i,e),...s,"cmdk-separator":"",role:"separator"})}),AM=w.forwardRef((t,e)=>{let{onValueChange:n,...s}=t,i=t.value!=null,a=mm(),l=ms(p=>p.search),d=ms(p=>p.selectedItemId),h=Za();return w.useEffect(()=>{t.value!=null&&a.setState("search",t.value)},[t.value]),w.createElement(Ge.input,{ref:e,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":h.listId,"aria-labelledby":h.labelId,"aria-activedescendant":d,id:h.inputId,type:"text",value:i?t.value:l,onChange:p=>{i||a.setState("search",p.target.value),n?.(p.target.value)}})}),RM=w.forwardRef((t,e)=>{let{children:n,label:s="Suggestions",...i}=t,a=w.useRef(null),l=w.useRef(null),d=ms(p=>p.selectedItemId),h=Za();return w.useEffect(()=>{if(l.current&&a.current){let p=l.current,m=a.current,g,y=new ResizeObserver(()=>{g=requestAnimationFrame(()=>{let b=p.offsetHeight;m.style.setProperty("--cmdk-list-height",b.toFixed(1)+"px")})});return y.observe(p),()=>{cancelAnimationFrame(g),y.unobserve(p)}}},[]),w.createElement(Ge.div,{ref:Rr(a,e),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":d,"aria-label":s,id:h.listId},bu(t,p=>w.createElement("div",{ref:Rr(l,h.listInnerRef),"cmdk-list-sizer":""},p)))}),OM=w.forwardRef((t,e)=>{let{open:n,onOpenChange:s,overlayClassName:i,contentClassName:a,container:l,...d}=t;return w.createElement(fm,{open:n,onOpenChange:s},w.createElement(hm,{container:l},w.createElement(xu,{"cmdk-overlay":"",className:i}),w.createElement(wu,{"aria-label":t.label,"cmdk-dialog":"",className:a},w.createElement(HS,{ref:e,...d}))))}),IM=w.forwardRef((t,e)=>ms(n=>n.filtered.count===0)?w.createElement(Ge.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),MM=w.forwardRef((t,e)=>{let{progress:n,children:s,label:i="Loading...",...a}=t;return w.createElement(Ge.div,{ref:e,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},bu(t,l=>w.createElement("div",{"aria-hidden":!0},l)))}),yi=Object.assign(HS,{List:RM,Item:NM,Input:AM,Group:TM,Separator:PM,Dialog:OM,Empty:IM,Loading:MM});function DM(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function LM(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function KS(t){let e=w.useRef(t);return no(()=>{e.current=t}),e}var no=typeof window>"u"?w.useEffect:w.useLayoutEffect;function zo(t){let e=w.useRef();return e.current===void 0&&(e.current=t()),e}function ms(t){let e=mm(),n=()=>t(e.snapshot());return w.useSyncExternalStore(e.subscribe,n,n)}function GS(t,e,n,s=[]){let i=w.useRef(),a=Za();return no(()=>{var l;let d=(()=>{var p;for(let m of n){if(typeof m=="string")return m.trim();if(typeof m=="object"&&"current"in m)return m.current?(p=m.current.textContent)==null?void 0:p.trim():i.current}})(),h=s.map(p=>p.trim());a.value(t,d,h),(l=e.current)==null||l.setAttribute(Uo,d),i.current=d}),i}var $M=()=>{let[t,e]=w.useState(),n=zo(()=>new Map);return no(()=>{n.current.forEach(s=>s()),n.current=new Map},[t]),(s,i)=>{n.current.set(s,i),e({})}};function FM(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function bu({asChild:t,children:e},n){return t&&w.isValidElement(e)?w.cloneElement(FM(e),{ref:e.ref},n(e.props.children)):n(e)}var VM={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function BM({...t}){return u.jsx(fm,{"data-slot":"dialog",...t})}function UM({...t}){return u.jsx(hm,{"data-slot":"dialog-portal",...t})}const qS=w.forwardRef(({className:t,...e},n)=>u.jsx(xu,{ref:n,"data-slot":"dialog-overlay",className:Qe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e}));qS.displayName=xu.displayName;const YS=w.forwardRef(({className:t,children:e,...n},s)=>u.jsxs(UM,{"data-slot":"dialog-portal",children:[u.jsx(qS,{}),u.jsxs(wu,{ref:s,"data-slot":"dialog-content",className:Qe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[e,u.jsxs(pm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[u.jsx(Zs,{}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));YS.displayName=wu.displayName;function zM({className:t,...e}){return u.jsx("div",{"data-slot":"dialog-header",className:Qe("flex flex-col gap-2 text-center sm:text-left",t),...e})}function WM({className:t,...e}){return u.jsx(FS,{"data-slot":"dialog-title",className:Qe("text-lg leading-none font-semibold",t),...e})}function HM({className:t,...e}){return u.jsx(VS,{"data-slot":"dialog-description",className:Qe("text-muted-foreground text-sm",t),...e})}function KM({className:t,...e}){return u.jsx(yi,{"data-slot":"command",className:Qe("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...e})}function GM({className:t,...e}){return u.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[u.jsx(cu,{className:"size-4 shrink-0 opacity-50"}),u.jsx(yi.Input,{"data-slot":"command-input",className:Qe("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...e})]})}function qM({className:t,...e}){return u.jsx(yi.List,{"data-slot":"command-list",className:Qe("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...e})}function YM({...t}){return u.jsx(yi.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function JM({className:t,...e}){return u.jsx(yi.Group,{"data-slot":"command-group",className:Qe("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...e})}function XM({className:t,...e}){return u.jsx(yi.Item,{"data-slot":"command-item",className:Qe("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}const QM=["top","right","bottom","left"],gs=Math.min,Sn=Math.max,Qc=Math.round,Oc=Math.floor,pr=t=>({x:t,y:t}),ZM={left:"right",right:"left",bottom:"top",top:"bottom"},e4={start:"end",end:"start"};function rp(t,e,n){return Sn(t,gs(e,n))}function Ir(t,e){return typeof t=="function"?t(e):t}function Mr(t){return t.split("-")[0]}function xi(t){return t.split("-")[1]}function gm(t){return t==="x"?"y":"x"}function vm(t){return t==="y"?"height":"width"}const t4=new Set(["top","bottom"]);function ur(t){return t4.has(Mr(t))?"y":"x"}function ym(t){return gm(ur(t))}function n4(t,e,n){n===void 0&&(n=!1);const s=xi(t),i=ym(t),a=vm(i);let l=i==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=Zc(l)),[l,Zc(l)]}function r4(t){const e=Zc(t);return[sp(t),e,sp(e)]}function sp(t){return t.replace(/start|end/g,e=>e4[e])}const Fx=["left","right"],Vx=["right","left"],s4=["top","bottom"],o4=["bottom","top"];function i4(t,e,n){switch(t){case"top":case"bottom":return n?e?Vx:Fx:e?Fx:Vx;case"left":case"right":return e?s4:o4;default:return[]}}function a4(t,e,n,s){const i=xi(t);let a=i4(Mr(t),n==="start",s);return i&&(a=a.map(l=>l+"-"+i),e&&(a=a.concat(a.map(sp)))),a}function Zc(t){return t.replace(/left|right|bottom|top/g,e=>ZM[e])}function l4(t){return{top:0,right:0,bottom:0,left:0,...t}}function JS(t){return typeof t!="number"?l4(t):{top:t,right:t,bottom:t,left:t}}function eu(t){const{x:e,y:n,width:s,height:i}=t;return{width:s,height:i,top:n,left:e,right:e+s,bottom:n+i,x:e,y:n}}function Bx(t,e,n){let{reference:s,floating:i}=t;const a=ur(e),l=ym(e),d=vm(l),h=Mr(e),p=a==="y",m=s.x+s.width/2-i.width/2,g=s.y+s.height/2-i.height/2,y=s[d]/2-i[d]/2;let b;switch(h){case"top":b={x:m,y:s.y-i.height};break;case"bottom":b={x:m,y:s.y+s.height};break;case"right":b={x:s.x+s.width,y:g};break;case"left":b={x:s.x-i.width,y:g};break;default:b={x:s.x,y:s.y}}switch(xi(e)){case"start":b[l]-=y*(n&&p?-1:1);break;case"end":b[l]+=y*(n&&p?-1:1);break}return b}const c4=async(t,e,n)=>{const{placement:s="bottom",strategy:i="absolute",middleware:a=[],platform:l}=n,d=a.filter(Boolean),h=await(l.isRTL==null?void 0:l.isRTL(e));let p=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:m,y:g}=Bx(p,s,h),y=s,b={},_=0;for(let S=0;S<d.length;S++){const{name:j,fn:C}=d[S],{x:T,y:E,data:N,reset:P}=await C({x:m,y:g,initialPlacement:s,placement:y,strategy:i,middlewareData:b,rects:p,platform:l,elements:{reference:t,floating:e}});m=T??m,g=E??g,b={...b,[j]:{...b[j],...N}},P&&_<=50&&(_++,typeof P=="object"&&(P.placement&&(y=P.placement),P.rects&&(p=P.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:i}):P.rects),{x:m,y:g}=Bx(p,y,h)),S=-1)}return{x:m,y:g,placement:y,strategy:i,middlewareData:b}};async function Ba(t,e){var n;e===void 0&&(e={});const{x:s,y:i,platform:a,rects:l,elements:d,strategy:h}=t,{boundary:p="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:y=!1,padding:b=0}=Ir(e,t),_=JS(b),j=d[y?g==="floating"?"reference":"floating":g],C=eu(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(j)))==null||n?j:j.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(d.floating)),boundary:p,rootBoundary:m,strategy:h})),T=g==="floating"?{x:s,y:i,width:l.floating.width,height:l.floating.height}:l.reference,E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d.floating)),N=await(a.isElement==null?void 0:a.isElement(E))?await(a.getScale==null?void 0:a.getScale(E))||{x:1,y:1}:{x:1,y:1},P=eu(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:T,offsetParent:E,strategy:h}):T);return{top:(C.top-P.top+_.top)/N.y,bottom:(P.bottom-C.bottom+_.bottom)/N.y,left:(C.left-P.left+_.left)/N.x,right:(P.right-C.right+_.right)/N.x}}const u4=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:i,rects:a,platform:l,elements:d,middlewareData:h}=e,{element:p,padding:m=0}=Ir(t,e)||{};if(p==null)return{};const g=JS(m),y={x:n,y:s},b=ym(i),_=vm(b),S=await l.getDimensions(p),j=b==="y",C=j?"top":"left",T=j?"bottom":"right",E=j?"clientHeight":"clientWidth",N=a.reference[_]+a.reference[b]-y[b]-a.floating[_],P=y[b]-a.reference[b],M=await(l.getOffsetParent==null?void 0:l.getOffsetParent(p));let L=M?M[E]:0;(!L||!await(l.isElement==null?void 0:l.isElement(M)))&&(L=d.floating[E]||a.floating[_]);const $=N/2-P/2,z=L/2-S[_]/2-1,W=gs(g[C],z),Z=gs(g[T],z),X=W,ee=L-S[_]-Z,fe=L/2-S[_]/2+$,oe=rp(X,fe,ee),Q=!h.arrow&&xi(i)!=null&&fe!==oe&&a.reference[_]/2-(fe<X?W:Z)-S[_]/2<0,Y=Q?fe<X?fe-X:fe-ee:0;return{[b]:y[b]+Y,data:{[b]:oe,centerOffset:fe-oe-Y,...Q&&{alignmentOffset:Y}},reset:Q}}}),d4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:i,middlewareData:a,rects:l,initialPlacement:d,platform:h,elements:p}=e,{mainAxis:m=!0,crossAxis:g=!0,fallbackPlacements:y,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:S=!0,...j}=Ir(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const C=Mr(i),T=ur(d),E=Mr(d)===d,N=await(h.isRTL==null?void 0:h.isRTL(p.floating)),P=y||(E||!S?[Zc(d)]:r4(d)),M=_!=="none";!y&&M&&P.push(...a4(d,S,_,N));const L=[d,...P],$=await Ba(e,j),z=[];let W=((s=a.flip)==null?void 0:s.overflows)||[];if(m&&z.push($[C]),g){const fe=n4(i,l,N);z.push($[fe[0]],$[fe[1]])}if(W=[...W,{placement:i,overflows:z}],!z.every(fe=>fe<=0)){var Z,X;const fe=(((Z=a.flip)==null?void 0:Z.index)||0)+1,oe=L[fe];if(oe&&(!(g==="alignment"?T!==ur(oe):!1)||W.every(O=>ur(O.placement)===T?O.overflows[0]>0:!0)))return{data:{index:fe,overflows:W},reset:{placement:oe}};let Q=(X=W.filter(Y=>Y.overflows[0]<=0).sort((Y,O)=>Y.overflows[1]-O.overflows[1])[0])==null?void 0:X.placement;if(!Q)switch(b){case"bestFit":{var ee;const Y=(ee=W.filter(O=>{if(M){const B=ur(O.placement);return B===T||B==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(B=>B>0).reduce((B,J)=>B+J,0)]).sort((O,B)=>O[1]-B[1])[0])==null?void 0:ee[0];Y&&(Q=Y);break}case"initialPlacement":Q=d;break}if(i!==Q)return{reset:{placement:Q}}}return{}}}};function Ux(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function zx(t){return QM.some(e=>t[e]>=0)}const f4=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:s="referenceHidden",...i}=Ir(t,e);switch(s){case"referenceHidden":{const a=await Ba(e,{...i,elementContext:"reference"}),l=Ux(a,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:zx(l)}}}case"escaped":{const a=await Ba(e,{...i,altBoundary:!0}),l=Ux(a,n.floating);return{data:{escapedOffsets:l,escaped:zx(l)}}}default:return{}}}}},XS=new Set(["left","top"]);async function h4(t,e){const{placement:n,platform:s,elements:i}=t,a=await(s.isRTL==null?void 0:s.isRTL(i.floating)),l=Mr(n),d=xi(n),h=ur(n)==="y",p=XS.has(l)?-1:1,m=a&&h?-1:1,g=Ir(e,t);let{mainAxis:y,crossAxis:b,alignmentAxis:_}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return d&&typeof _=="number"&&(b=d==="end"?_*-1:_),h?{x:b*m,y:y*p}:{x:y*p,y:b*m}}const p4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:i,y:a,placement:l,middlewareData:d}=e,h=await h4(e,t);return l===((n=d.offset)==null?void 0:n.placement)&&(s=d.arrow)!=null&&s.alignmentOffset?{}:{x:i+h.x,y:a+h.y,data:{...h,placement:l}}}}},m4=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:s,placement:i}=e,{mainAxis:a=!0,crossAxis:l=!1,limiter:d={fn:j=>{let{x:C,y:T}=j;return{x:C,y:T}}},...h}=Ir(t,e),p={x:n,y:s},m=await Ba(e,h),g=ur(Mr(i)),y=gm(g);let b=p[y],_=p[g];if(a){const j=y==="y"?"top":"left",C=y==="y"?"bottom":"right",T=b+m[j],E=b-m[C];b=rp(T,b,E)}if(l){const j=g==="y"?"top":"left",C=g==="y"?"bottom":"right",T=_+m[j],E=_-m[C];_=rp(T,_,E)}const S=d.fn({...e,[y]:b,[g]:_});return{...S,data:{x:S.x-n,y:S.y-s,enabled:{[y]:a,[g]:l}}}}}},g4=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:s,placement:i,rects:a,middlewareData:l}=e,{offset:d=0,mainAxis:h=!0,crossAxis:p=!0}=Ir(t,e),m={x:n,y:s},g=ur(i),y=gm(g);let b=m[y],_=m[g];const S=Ir(d,e),j=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(h){const E=y==="y"?"height":"width",N=a.reference[y]-a.floating[E]+j.mainAxis,P=a.reference[y]+a.reference[E]-j.mainAxis;b<N?b=N:b>P&&(b=P)}if(p){var C,T;const E=y==="y"?"width":"height",N=XS.has(Mr(i)),P=a.reference[g]-a.floating[E]+(N&&((C=l.offset)==null?void 0:C[g])||0)+(N?0:j.crossAxis),M=a.reference[g]+a.reference[E]+(N?0:((T=l.offset)==null?void 0:T[g])||0)-(N?j.crossAxis:0);_<P?_=P:_>M&&(_=M)}return{[y]:b,[g]:_}}}},v4=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,s;const{placement:i,rects:a,platform:l,elements:d}=e,{apply:h=()=>{},...p}=Ir(t,e),m=await Ba(e,p),g=Mr(i),y=xi(i),b=ur(i)==="y",{width:_,height:S}=a.floating;let j,C;g==="top"||g==="bottom"?(j=g,C=y===(await(l.isRTL==null?void 0:l.isRTL(d.floating))?"start":"end")?"left":"right"):(C=g,j=y==="end"?"top":"bottom");const T=S-m.top-m.bottom,E=_-m.left-m.right,N=gs(S-m[j],T),P=gs(_-m[C],E),M=!e.middlewareData.shift;let L=N,$=P;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&($=E),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(L=T),M&&!y){const W=Sn(m.left,0),Z=Sn(m.right,0),X=Sn(m.top,0),ee=Sn(m.bottom,0);b?$=_-2*(W!==0||Z!==0?W+Z:Sn(m.left,m.right)):L=S-2*(X!==0||ee!==0?X+ee:Sn(m.top,m.bottom))}await h({...e,availableWidth:$,availableHeight:L});const z=await l.getDimensions(d.floating);return _!==z.width||S!==z.height?{reset:{rects:!0}}:{}}}};function Su(){return typeof window<"u"}function wi(t){return QS(t)?(t.nodeName||"").toLowerCase():"#document"}function Cn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function yr(t){var e;return(e=(QS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function QS(t){return Su()?t instanceof Node||t instanceof Cn(t).Node:!1}function Qn(t){return Su()?t instanceof Element||t instanceof Cn(t).Element:!1}function gr(t){return Su()?t instanceof HTMLElement||t instanceof Cn(t).HTMLElement:!1}function Wx(t){return!Su()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Cn(t).ShadowRoot}const y4=new Set(["inline","contents"]);function el(t){const{overflow:e,overflowX:n,overflowY:s,display:i}=Zn(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!y4.has(i)}const x4=new Set(["table","td","th"]);function w4(t){return x4.has(wi(t))}const b4=[":popover-open",":modal"];function _u(t){return b4.some(e=>{try{return t.matches(e)}catch{return!1}})}const S4=["transform","translate","scale","rotate","perspective"],_4=["transform","translate","scale","rotate","perspective","filter"],k4=["paint","layout","strict","content"];function xm(t){const e=wm(),n=Qn(t)?Zn(t):t;return S4.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||_4.some(s=>(n.willChange||"").includes(s))||k4.some(s=>(n.contain||"").includes(s))}function j4(t){let e=vs(t);for(;gr(e)&&!ci(e);){if(xm(e))return e;if(_u(e))return null;e=vs(e)}return null}function wm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const C4=new Set(["html","body","#document"]);function ci(t){return C4.has(wi(t))}function Zn(t){return Cn(t).getComputedStyle(t)}function ku(t){return Qn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function vs(t){if(wi(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Wx(t)&&t.host||yr(t);return Wx(e)?e.host:e}function ZS(t){const e=vs(t);return ci(e)?t.ownerDocument?t.ownerDocument.body:t.body:gr(e)&&el(e)?e:ZS(e)}function Ua(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=ZS(t),a=i===((s=t.ownerDocument)==null?void 0:s.body),l=Cn(i);if(a){const d=op(l);return e.concat(l,l.visualViewport||[],el(i)?i:[],d&&n?Ua(d):[])}return e.concat(i,Ua(i,[],n))}function op(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function e_(t){const e=Zn(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const i=gr(t),a=i?t.offsetWidth:n,l=i?t.offsetHeight:s,d=Qc(n)!==a||Qc(s)!==l;return d&&(n=a,s=l),{width:n,height:s,$:d}}function bm(t){return Qn(t)?t:t.contextElement}function ti(t){const e=bm(t);if(!gr(e))return pr(1);const n=e.getBoundingClientRect(),{width:s,height:i,$:a}=e_(e);let l=(a?Qc(n.width):n.width)/s,d=(a?Qc(n.height):n.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!d||!Number.isFinite(d))&&(d=1),{x:l,y:d}}const E4=pr(0);function t_(t){const e=Cn(t);return!wm()||!e.visualViewport?E4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function N4(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Cn(t)?!1:e}function ro(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=bm(t);let l=pr(1);e&&(s?Qn(s)&&(l=ti(s)):l=ti(t));const d=N4(a,n,s)?t_(a):pr(0);let h=(i.left+d.x)/l.x,p=(i.top+d.y)/l.y,m=i.width/l.x,g=i.height/l.y;if(a){const y=Cn(a),b=s&&Qn(s)?Cn(s):s;let _=y,S=op(_);for(;S&&s&&b!==_;){const j=ti(S),C=S.getBoundingClientRect(),T=Zn(S),E=C.left+(S.clientLeft+parseFloat(T.paddingLeft))*j.x,N=C.top+(S.clientTop+parseFloat(T.paddingTop))*j.y;h*=j.x,p*=j.y,m*=j.x,g*=j.y,h+=E,p+=N,_=Cn(S),S=op(_)}}return eu({width:m,height:g,x:h,y:p})}function ju(t,e){const n=ku(t).scrollLeft;return e?e.left+n:ro(yr(t)).left+n}function n_(t,e){const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-ju(t,n),i=n.top+e.scrollTop;return{x:s,y:i}}function T4(t){let{elements:e,rect:n,offsetParent:s,strategy:i}=t;const a=i==="fixed",l=yr(s),d=e?_u(e.floating):!1;if(s===l||d&&a)return n;let h={scrollLeft:0,scrollTop:0},p=pr(1);const m=pr(0),g=gr(s);if((g||!g&&!a)&&((wi(s)!=="body"||el(l))&&(h=ku(s)),gr(s))){const b=ro(s);p=ti(s),m.x=b.x+s.clientLeft,m.y=b.y+s.clientTop}const y=l&&!g&&!a?n_(l,h):pr(0);return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-h.scrollLeft*p.x+m.x+y.x,y:n.y*p.y-h.scrollTop*p.y+m.y+y.y}}function P4(t){return Array.from(t.getClientRects())}function A4(t){const e=yr(t),n=ku(t),s=t.ownerDocument.body,i=Sn(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),a=Sn(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let l=-n.scrollLeft+ju(t);const d=-n.scrollTop;return Zn(s).direction==="rtl"&&(l+=Sn(e.clientWidth,s.clientWidth)-i),{width:i,height:a,x:l,y:d}}const Hx=25;function R4(t,e){const n=Cn(t),s=yr(t),i=n.visualViewport;let a=s.clientWidth,l=s.clientHeight,d=0,h=0;if(i){a=i.width,l=i.height;const m=wm();(!m||m&&e==="fixed")&&(d=i.offsetLeft,h=i.offsetTop)}const p=ju(s);if(p<=0){const m=s.ownerDocument,g=m.body,y=getComputedStyle(g),b=m.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,_=Math.abs(s.clientWidth-g.clientWidth-b);_<=Hx&&(a-=_)}else p<=Hx&&(a+=p);return{width:a,height:l,x:d,y:h}}const O4=new Set(["absolute","fixed"]);function I4(t,e){const n=ro(t,!0,e==="fixed"),s=n.top+t.clientTop,i=n.left+t.clientLeft,a=gr(t)?ti(t):pr(1),l=t.clientWidth*a.x,d=t.clientHeight*a.y,h=i*a.x,p=s*a.y;return{width:l,height:d,x:h,y:p}}function Kx(t,e,n){let s;if(e==="viewport")s=R4(t,n);else if(e==="document")s=A4(yr(t));else if(Qn(e))s=I4(e,n);else{const i=t_(t);s={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return eu(s)}function r_(t,e){const n=vs(t);return n===e||!Qn(n)||ci(n)?!1:Zn(n).position==="fixed"||r_(n,e)}function M4(t,e){const n=e.get(t);if(n)return n;let s=Ua(t,[],!1).filter(d=>Qn(d)&&wi(d)!=="body"),i=null;const a=Zn(t).position==="fixed";let l=a?vs(t):t;for(;Qn(l)&&!ci(l);){const d=Zn(l),h=xm(l);!h&&d.position==="fixed"&&(i=null),(a?!h&&!i:!h&&d.position==="static"&&!!i&&O4.has(i.position)||el(l)&&!h&&r_(t,l))?s=s.filter(m=>m!==l):i=d,l=vs(l)}return e.set(t,s),s}function D4(t){let{element:e,boundary:n,rootBoundary:s,strategy:i}=t;const l=[...n==="clippingAncestors"?_u(e)?[]:M4(e,this._c):[].concat(n),s],d=l[0],h=l.reduce((p,m)=>{const g=Kx(e,m,i);return p.top=Sn(g.top,p.top),p.right=gs(g.right,p.right),p.bottom=gs(g.bottom,p.bottom),p.left=Sn(g.left,p.left),p},Kx(e,d,i));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function L4(t){const{width:e,height:n}=e_(t);return{width:e,height:n}}function $4(t,e,n){const s=gr(e),i=yr(e),a=n==="fixed",l=ro(t,!0,a,e);let d={scrollLeft:0,scrollTop:0};const h=pr(0);function p(){h.x=ju(i)}if(s||!s&&!a)if((wi(e)!=="body"||el(i))&&(d=ku(e)),s){const b=ro(e,!0,a,e);h.x=b.x+e.clientLeft,h.y=b.y+e.clientTop}else i&&p();a&&!s&&i&&p();const m=i&&!s&&!a?n_(i,d):pr(0),g=l.left+d.scrollLeft-h.x-m.x,y=l.top+d.scrollTop-h.y-m.y;return{x:g,y,width:l.width,height:l.height}}function rh(t){return Zn(t).position==="static"}function Gx(t,e){if(!gr(t)||Zn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return yr(t)===n&&(n=n.ownerDocument.body),n}function s_(t,e){const n=Cn(t);if(_u(t))return n;if(!gr(t)){let i=vs(t);for(;i&&!ci(i);){if(Qn(i)&&!rh(i))return i;i=vs(i)}return n}let s=Gx(t,e);for(;s&&w4(s)&&rh(s);)s=Gx(s,e);return s&&ci(s)&&rh(s)&&!xm(s)?n:s||j4(t)||n}const F4=async function(t){const e=this.getOffsetParent||s_,n=this.getDimensions,s=await n(t.floating);return{reference:$4(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function V4(t){return Zn(t).direction==="rtl"}const B4={convertOffsetParentRelativeRectToViewportRelativeRect:T4,getDocumentElement:yr,getClippingRect:D4,getOffsetParent:s_,getElementRects:F4,getClientRects:P4,getDimensions:L4,getScale:ti,isElement:Qn,isRTL:V4};function o_(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function U4(t,e){let n=null,s;const i=yr(t);function a(){var d;clearTimeout(s),(d=n)==null||d.disconnect(),n=null}function l(d,h){d===void 0&&(d=!1),h===void 0&&(h=1),a();const p=t.getBoundingClientRect(),{left:m,top:g,width:y,height:b}=p;if(d||e(),!y||!b)return;const _=Oc(g),S=Oc(i.clientWidth-(m+y)),j=Oc(i.clientHeight-(g+b)),C=Oc(m),E={rootMargin:-_+"px "+-S+"px "+-j+"px "+-C+"px",threshold:Sn(0,gs(1,h))||1};let N=!0;function P(M){const L=M[0].intersectionRatio;if(L!==h){if(!N)return l();L?l(!1,L):s=setTimeout(()=>{l(!1,1e-7)},1e3)}L===1&&!o_(p,t.getBoundingClientRect())&&l(),N=!1}try{n=new IntersectionObserver(P,{...E,root:i.ownerDocument})}catch{n=new IntersectionObserver(P,E)}n.observe(t)}return l(!0),a}function z4(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:h=!1}=s,p=bm(t),m=i||a?[...p?Ua(p):[],...Ua(e)]:[];m.forEach(C=>{i&&C.addEventListener("scroll",n,{passive:!0}),a&&C.addEventListener("resize",n)});const g=p&&d?U4(p,n):null;let y=-1,b=null;l&&(b=new ResizeObserver(C=>{let[T]=C;T&&T.target===p&&b&&(b.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var E;(E=b)==null||E.observe(e)})),n()}),p&&!h&&b.observe(p),b.observe(e));let _,S=h?ro(t):null;h&&j();function j(){const C=ro(t);S&&!o_(S,C)&&n(),S=C,_=requestAnimationFrame(j)}return n(),()=>{var C;m.forEach(T=>{i&&T.removeEventListener("scroll",n),a&&T.removeEventListener("resize",n)}),g?.(),(C=b)==null||C.disconnect(),b=null,h&&cancelAnimationFrame(_)}}const W4=p4,H4=m4,K4=d4,G4=v4,q4=f4,qx=u4,Y4=g4,J4=(t,e,n)=>{const s=new Map,i={platform:B4,...n},a={...i.platform,_c:s};return c4(t,e,{...i,platform:a})};var X4=typeof document<"u",Q4=function(){},Vc=X4?w.useLayoutEffect:Q4;function tu(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,s,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!tu(t[s],e[s]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(e,i[s]))return!1;for(s=n;s--!==0;){const a=i[s];if(!(a==="_owner"&&t.$$typeof)&&!tu(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function i_(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Yx(t,e){const n=i_(t);return Math.round(e*n)/n}function sh(t){const e=w.useRef(t);return Vc(()=>{e.current=t}),e}function Z4(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:s=[],platform:i,elements:{reference:a,floating:l}={},transform:d=!0,whileElementsMounted:h,open:p}=t,[m,g]=w.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[y,b]=w.useState(s);tu(y,s)||b(s);const[_,S]=w.useState(null),[j,C]=w.useState(null),T=w.useCallback(O=>{O!==M.current&&(M.current=O,S(O))},[]),E=w.useCallback(O=>{O!==L.current&&(L.current=O,C(O))},[]),N=a||_,P=l||j,M=w.useRef(null),L=w.useRef(null),$=w.useRef(m),z=h!=null,W=sh(h),Z=sh(i),X=sh(p),ee=w.useCallback(()=>{if(!M.current||!L.current)return;const O={placement:e,strategy:n,middleware:y};Z.current&&(O.platform=Z.current),J4(M.current,L.current,O).then(B=>{const J={...B,isPositioned:X.current!==!1};fe.current&&!tu($.current,J)&&($.current=J,up.flushSync(()=>{g(J)}))})},[y,e,n,Z,X]);Vc(()=>{p===!1&&$.current.isPositioned&&($.current.isPositioned=!1,g(O=>({...O,isPositioned:!1})))},[p]);const fe=w.useRef(!1);Vc(()=>(fe.current=!0,()=>{fe.current=!1}),[]),Vc(()=>{if(N&&(M.current=N),P&&(L.current=P),N&&P){if(W.current)return W.current(N,P,ee);ee()}},[N,P,ee,W,z]);const oe=w.useMemo(()=>({reference:M,floating:L,setReference:T,setFloating:E}),[T,E]),Q=w.useMemo(()=>({reference:N,floating:P}),[N,P]),Y=w.useMemo(()=>{const O={position:n,left:0,top:0};if(!Q.floating)return O;const B=Yx(Q.floating,m.x),J=Yx(Q.floating,m.y);return d?{...O,transform:"translate("+B+"px, "+J+"px)",...i_(Q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:J}},[n,d,Q.floating,m.x,m.y]);return w.useMemo(()=>({...m,update:ee,refs:oe,elements:Q,floatingStyles:Y}),[m,ee,oe,Q,Y])}const eD=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:i}=typeof t=="function"?t(n):t;return s&&e(s)?s.current!=null?qx({element:s.current,padding:i}).fn(n):{}:s?qx({element:s,padding:i}).fn(n):{}}}},tD=(t,e)=>({...W4(t),options:[t,e]}),nD=(t,e)=>({...H4(t),options:[t,e]}),rD=(t,e)=>({...Y4(t),options:[t,e]}),sD=(t,e)=>({...K4(t),options:[t,e]}),oD=(t,e)=>({...G4(t),options:[t,e]}),iD=(t,e)=>({...q4(t),options:[t,e]}),aD=(t,e)=>({...eD(t),options:[t,e]});var lD="Arrow",a_=w.forwardRef((t,e)=>{const{children:n,width:s=10,height:i=5,...a}=t;return u.jsx(Ge.svg,{...a,ref:e,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});a_.displayName=lD;var cD=a_;function l_(t){const[e,n]=w.useState(void 0);return ps(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let l,d;if("borderBoxSize"in a){const h=a.borderBoxSize,p=Array.isArray(h)?h[0]:h;l=p.inlineSize,d=p.blockSize}else l=t.offsetWidth,d=t.offsetHeight;n({width:l,height:d})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}var Sm="Popper",[c_,Cu]=Dr(Sm),[uD,u_]=c_(Sm),d_=t=>{const{__scopePopper:e,children:n}=t,[s,i]=w.useState(null);return u.jsx(uD,{scope:e,anchor:s,onAnchorChange:i,children:n})};d_.displayName=Sm;var f_="PopperAnchor",h_=w.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:s,...i}=t,a=u_(f_,n),l=w.useRef(null),d=mt(e,l),h=w.useRef(null);return w.useEffect(()=>{const p=h.current;h.current=s?.current||l.current,p!==h.current&&a.onAnchorChange(h.current)}),s?null:u.jsx(Ge.div,{...i,ref:d})});h_.displayName=f_;var _m="PopperContent",[dD,fD]=c_(_m),p_=w.forwardRef((t,e)=>{const{__scopePopper:n,side:s="bottom",sideOffset:i=0,align:a="center",alignOffset:l=0,arrowPadding:d=0,avoidCollisions:h=!0,collisionBoundary:p=[],collisionPadding:m=0,sticky:g="partial",hideWhenDetached:y=!1,updatePositionStrategy:b="optimized",onPlaced:_,...S}=t,j=u_(_m,n),[C,T]=w.useState(null),E=mt(e,ne=>T(ne)),[N,P]=w.useState(null),M=l_(N),L=M?.width??0,$=M?.height??0,z=s+(a!=="center"?"-"+a:""),W=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},Z=Array.isArray(p)?p:[p],X=Z.length>0,ee={padding:W,boundary:Z.filter(pD),altBoundary:X},{refs:fe,floatingStyles:oe,placement:Q,isPositioned:Y,middlewareData:O}=Z4({strategy:"fixed",placement:z,whileElementsMounted:(...ne)=>z4(...ne,{animationFrame:b==="always"}),elements:{reference:j.anchor},middleware:[tD({mainAxis:i+$,alignmentAxis:l}),h&&nD({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?rD():void 0,...ee}),h&&sD({...ee}),oD({...ee,apply:({elements:ne,rects:de,availableWidth:ve,availableHeight:We})=>{const{width:ot,height:pe}=de.reference,He=ne.floating.style;He.setProperty("--radix-popper-available-width",`${ve}px`),He.setProperty("--radix-popper-available-height",`${We}px`),He.setProperty("--radix-popper-anchor-width",`${ot}px`),He.setProperty("--radix-popper-anchor-height",`${pe}px`)}}),N&&aD({element:N,padding:d}),mD({arrowWidth:L,arrowHeight:$}),y&&iD({strategy:"referenceHidden",...ee})]}),[B,J]=v_(Q),A=Or(_);ps(()=>{Y&&A?.()},[Y,A]);const I=O.arrow?.x,H=O.arrow?.y,G=O.arrow?.centerOffset!==0,[q,ae]=w.useState();return ps(()=>{C&&ae(window.getComputedStyle(C).zIndex)},[C]),u.jsx("div",{ref:fe.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:Y?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:q,"--radix-popper-transform-origin":[O.transformOrigin?.x,O.transformOrigin?.y].join(" "),...O.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:u.jsx(dD,{scope:n,placedSide:B,onArrowChange:P,arrowX:I,arrowY:H,shouldHideArrow:G,children:u.jsx(Ge.div,{"data-side":B,"data-align":J,...S,ref:E,style:{...S.style,animation:Y?void 0:"none"}})})})});p_.displayName=_m;var m_="PopperArrow",hD={top:"bottom",right:"left",bottom:"top",left:"right"},g_=w.forwardRef(function(e,n){const{__scopePopper:s,...i}=e,a=fD(m_,s),l=hD[a.placedSide];return u.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:u.jsx(cD,{...i,ref:n,style:{...i.style,display:"block"}})})});g_.displayName=m_;function pD(t){return t!==null}var mD=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:s,middlewareData:i}=e,l=i.arrow?.centerOffset!==0,d=l?0:t.arrowWidth,h=l?0:t.arrowHeight,[p,m]=v_(n),g={start:"0%",center:"50%",end:"100%"}[m],y=(i.arrow?.x??0)+d/2,b=(i.arrow?.y??0)+h/2;let _="",S="";return p==="bottom"?(_=l?g:`${y}px`,S=`${-h}px`):p==="top"?(_=l?g:`${y}px`,S=`${s.floating.height+h}px`):p==="right"?(_=`${-h}px`,S=l?g:`${b}px`):p==="left"&&(_=`${s.floating.width+h}px`,S=l?g:`${b}px`),{data:{x:_,y:S}}}});function v_(t){const[e,n="center"]=t.split("-");return[e,n]}var y_=d_,km=h_,x_=p_,w_=g_,Eu="Popover",[b_]=Dr(Eu,[Cu]),tl=Cu(),[gD,Ss]=b_(Eu),S_=t=>{const{__scopePopover:e,children:n,open:s,defaultOpen:i,onOpenChange:a,modal:l=!1}=t,d=tl(e),h=w.useRef(null),[p,m]=w.useState(!1),[g,y]=Qa({prop:s,defaultProp:i??!1,onChange:a,caller:Eu});return u.jsx(y_,{...d,children:u.jsx(gD,{scope:e,contentId:jn(),triggerRef:h,open:g,onOpenChange:y,onOpenToggle:w.useCallback(()=>y(b=>!b),[y]),hasCustomAnchor:p,onCustomAnchorAdd:w.useCallback(()=>m(!0),[]),onCustomAnchorRemove:w.useCallback(()=>m(!1),[]),modal:l,children:n})})};S_.displayName=Eu;var __="PopoverAnchor",vD=w.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,i=Ss(__,n),a=tl(n),{onCustomAnchorAdd:l,onCustomAnchorRemove:d}=i;return w.useEffect(()=>(l(),()=>d()),[l,d]),u.jsx(km,{...a,...s,ref:e})});vD.displayName=__;var k_="PopoverTrigger",j_=w.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,i=Ss(k_,n),a=tl(n),l=mt(e,i.triggerRef),d=u.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":P_(i.open),...s,ref:l,onClick:Ie(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?d:u.jsx(km,{asChild:!0,...a,children:d})});j_.displayName=k_;var jm="PopoverPortal",[yD,xD]=b_(jm,{forceMount:void 0}),C_=t=>{const{__scopePopover:e,forceMount:n,children:s,container:i}=t,a=Ss(jm,e);return u.jsx(yD,{scope:e,forceMount:n,children:u.jsx(vr,{present:n||a.open,children:u.jsx(mu,{asChild:!0,container:i,children:s})})})};C_.displayName=jm;var ui="PopoverContent",E_=w.forwardRef((t,e)=>{const n=xD(ui,t.__scopePopover),{forceMount:s=n.forceMount,...i}=t,a=Ss(ui,t.__scopePopover);return u.jsx(vr,{present:s||a.open,children:a.modal?u.jsx(bD,{...i,ref:e}):u.jsx(SD,{...i,ref:e})})});E_.displayName=ui;var wD=eo("PopoverContent.RemoveScroll"),bD=w.forwardRef((t,e)=>{const n=Ss(ui,t.__scopePopover),s=w.useRef(null),i=mt(e,s),a=w.useRef(!1);return w.useEffect(()=>{const l=s.current;if(l)return lm(l)},[]),u.jsx(vu,{as:wD,allowPinchZoom:!0,children:u.jsx(N_,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(t.onCloseAutoFocus,l=>{l.preventDefault(),a.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Ie(t.onPointerDownOutside,l=>{const d=l.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,p=d.button===2||h;a.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:Ie(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),SD=w.forwardRef((t,e)=>{const n=Ss(ui,t.__scopePopover),s=w.useRef(!1),i=w.useRef(!1);return u.jsx(N_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{t.onCloseAutoFocus?.(a),a.defaultPrevented||(s.current||n.triggerRef.current?.focus(),a.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:a=>{t.onInteractOutside?.(a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=a.target;n.triggerRef.current?.contains(l)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),N_=w.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:m,...g}=t,y=Ss(ui,n),b=tl(n);return am(),u.jsx(pu,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:a,children:u.jsx(hu,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:m,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:p,onDismiss:()=>y.onOpenChange(!1),children:u.jsx(x_,{"data-state":P_(y.open),role:"dialog",id:y.contentId,...b,...g,ref:e,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),T_="PopoverClose",_D=w.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,i=Ss(T_,n);return u.jsx(Ge.button,{type:"button",...s,ref:e,onClick:Ie(t.onClick,()=>i.onOpenChange(!1))})});_D.displayName=T_;var kD="PopoverArrow",jD=w.forwardRef((t,e)=>{const{__scopePopover:n,...s}=t,i=tl(n);return u.jsx(w_,{...i,...s,ref:e})});jD.displayName=kD;function P_(t){return t?"open":"closed"}var CD=S_,ED=j_,ND=C_,TD=E_;function A_({...t}){return u.jsx(CD,{"data-slot":"popover",...t})}function R_({...t}){return u.jsx(ED,{"data-slot":"popover-trigger",...t})}function O_({className:t,align:e="center",sideOffset:n=4,...s}){return u.jsx(ND,{children:u.jsx(TD,{"data-slot":"popover-content",align:e,sideOffset:n,className:Qe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...s})})}const qs=[{code:"US",name:"United States",dialCode:"+1",flag:"",placeholder:"(555) 123-4567"},{code:"GB",name:"United Kingdom",dialCode:"+44",flag:"",placeholder:"7400 123456"},{code:"AF",name:"Afghanistan",dialCode:"+93",flag:"",placeholder:"70 123 4567"},{code:"AL",name:"Albania",dialCode:"+355",flag:"",placeholder:"66 123 4567"},{code:"DZ",name:"Algeria",dialCode:"+213",flag:"",placeholder:"551 23 45 67"},{code:"AS",name:"American Samoa",dialCode:"+1684",flag:"",placeholder:"733 1234"},{code:"AD",name:"Andorra",dialCode:"+376",flag:"",placeholder:"312 345"},{code:"AO",name:"Angola",dialCode:"+244",flag:"",placeholder:"923 123 456"},{code:"AR",name:"Argentina",dialCode:"+54",flag:"",placeholder:"11 2345-6789"},{code:"AM",name:"Armenia",dialCode:"+374",flag:"",placeholder:"77 123456"},{code:"AU",name:"Australia",dialCode:"+61",flag:"",placeholder:"412 345 678"},{code:"AT",name:"Austria",dialCode:"+43",flag:"",placeholder:"664 1234567"},{code:"AZ",name:"Azerbaijan",dialCode:"+994",flag:"",placeholder:"40 123 45 67"},{code:"BH",name:"Bahrain",dialCode:"+973",flag:"",placeholder:"3600 1234"},{code:"BD",name:"Bangladesh",dialCode:"+880",flag:"",placeholder:"1812 345678"},{code:"BY",name:"Belarus",dialCode:"+375",flag:"",placeholder:"29 123 45 67"},{code:"BE",name:"Belgium",dialCode:"+32",flag:"",placeholder:"470 12 34 56"},{code:"BZ",name:"Belize",dialCode:"+501",flag:"",placeholder:"622 1234"},{code:"BJ",name:"Benin",dialCode:"+229",flag:"",placeholder:"90 01 12 34"},{code:"BT",name:"Bhutan",dialCode:"+975",flag:"",placeholder:"17 12 34 56"},{code:"BO",name:"Bolivia",dialCode:"+591",flag:"",placeholder:"71234567"},{code:"BA",name:"Bosnia and Herzegovina",dialCode:"+387",flag:"",placeholder:"61 123 456"},{code:"BW",name:"Botswana",dialCode:"+267",flag:"",placeholder:"71 123 456"},{code:"BR",name:"Brazil",dialCode:"+55",flag:"",placeholder:"11 91234-5678"},{code:"BN",name:"Brunei",dialCode:"+673",flag:"",placeholder:"712 3456"},{code:"BG",name:"Bulgaria",dialCode:"+359",flag:"",placeholder:"48 123 456"},{code:"BF",name:"Burkina Faso",dialCode:"+226",flag:"",placeholder:"70 12 34 56"},{code:"BI",name:"Burundi",dialCode:"+257",flag:"",placeholder:"79 56 12 34"},{code:"KH",name:"Cambodia",dialCode:"+855",flag:"",placeholder:"91 234 567"},{code:"CM",name:"Cameroon",dialCode:"+237",flag:"",placeholder:"6 71 23 45 67"},{code:"CA",name:"Canada",dialCode:"+1",flag:"",placeholder:"(555) 123-4567"},{code:"CV",name:"Cape Verde",dialCode:"+238",flag:"",placeholder:"991 12 34"},{code:"CF",name:"Central African Republic",dialCode:"+236",flag:"",placeholder:"70 01 23 45"},{code:"TD",name:"Chad",dialCode:"+235",flag:"",placeholder:"63 01 23 45"},{code:"CL",name:"Chile",dialCode:"+56",flag:"",placeholder:"9 1234 5678"},{code:"CN",name:"China",dialCode:"+86",flag:"",placeholder:"138 0013 8000"},{code:"CO",name:"Colombia",dialCode:"+57",flag:"",placeholder:"321 1234567"},{code:"KM",name:"Comoros",dialCode:"+269",flag:"",placeholder:"321 23 45"},{code:"CG",name:"Congo",dialCode:"+242",flag:"",placeholder:"06 123 4567"},{code:"CD",name:"Congo (DRC)",dialCode:"+243",flag:"",placeholder:"991 234 567"},{code:"CR",name:"Costa Rica",dialCode:"+506",flag:"",placeholder:"8312 3456"},{code:"HR",name:"Croatia",dialCode:"+385",flag:"",placeholder:"92 123 4567"},{code:"CU",name:"Cuba",dialCode:"+53",flag:"",placeholder:"5 1234567"},{code:"CY",name:"Cyprus",dialCode:"+357",flag:"",placeholder:"96 123456"},{code:"CZ",name:"Czech Republic",dialCode:"+420",flag:"",placeholder:"601 123 456"},{code:"DK",name:"Denmark",dialCode:"+45",flag:"",placeholder:"32 12 34 56"},{code:"DJ",name:"Djibouti",dialCode:"+253",flag:"",placeholder:"77 83 10 01"},{code:"DO",name:"Dominican Republic",dialCode:"+1809",flag:"",placeholder:"809 234 5678"},{code:"EC",name:"Ecuador",dialCode:"+593",flag:"",placeholder:"99 123 4567"},{code:"EG",name:"Egypt",dialCode:"+20",flag:"",placeholder:"100 123 4567"},{code:"SV",name:"El Salvador",dialCode:"+503",flag:"",placeholder:"7012 3456"},{code:"GQ",name:"Equatorial Guinea",dialCode:"+240",flag:"",placeholder:"222 123 456"},{code:"ER",name:"Eritrea",dialCode:"+291",flag:"",placeholder:"7 123 456"},{code:"EE",name:"Estonia",dialCode:"+372",flag:"",placeholder:"5123 4567"},{code:"ET",name:"Ethiopia",dialCode:"+251",flag:"",placeholder:"91 123 4567"},{code:"FJ",name:"Fiji",dialCode:"+679",flag:"",placeholder:"701 2345"},{code:"FI",name:"Finland",dialCode:"+358",flag:"",placeholder:"41 2345678"},{code:"FR",name:"France",dialCode:"+33",flag:"",placeholder:"6 12 34 56 78"},{code:"GA",name:"Gabon",dialCode:"+241",flag:"",placeholder:"06 03 12 34"},{code:"GM",name:"Gambia",dialCode:"+220",flag:"",placeholder:"301 2345"},{code:"GE",name:"Georgia",dialCode:"+995",flag:"",placeholder:"555 12 34 56"},{code:"DE",name:"Germany",dialCode:"+49",flag:"",placeholder:"1512 3456789"},{code:"GH",name:"Ghana",dialCode:"+233",flag:"",placeholder:"23 123 4567"},{code:"GR",name:"Greece",dialCode:"+30",flag:"",placeholder:"691 234 5678"},{code:"GT",name:"Guatemala",dialCode:"+502",flag:"",placeholder:"5123 4567"},{code:"GN",name:"Guinea",dialCode:"+224",flag:"",placeholder:"601 12 34 56"},{code:"GW",name:"Guinea-Bissau",dialCode:"+245",flag:"",placeholder:"955 012 345"},{code:"GY",name:"Guyana",dialCode:"+592",flag:"",placeholder:"609 1234"},{code:"HT",name:"Haiti",dialCode:"+509",flag:"",placeholder:"34 10 1234"},{code:"HN",name:"Honduras",dialCode:"+504",flag:"",placeholder:"9123 4567"},{code:"HK",name:"Hong Kong",dialCode:"+852",flag:"",placeholder:"5123 4567"},{code:"HU",name:"Hungary",dialCode:"+36",flag:"",placeholder:"20 123 4567"},{code:"IS",name:"Iceland",dialCode:"+354",flag:"",placeholder:"611 1234"},{code:"IN",name:"India",dialCode:"+91",flag:"",placeholder:"98765 43210"},{code:"ID",name:"Indonesia",dialCode:"+62",flag:"",placeholder:"812 3456 7890"},{code:"IR",name:"Iran",dialCode:"+98",flag:"",placeholder:"912 345 6789"},{code:"IQ",name:"Iraq",dialCode:"+964",flag:"",placeholder:"791 234 5678"},{code:"IE",name:"Ireland",dialCode:"+353",flag:"",placeholder:"85 012 3456"},{code:"IL",name:"Israel",dialCode:"+972",flag:"",placeholder:"50 123 4567"},{code:"IT",name:"Italy",dialCode:"+39",flag:"",placeholder:"312 345 6789"},{code:"CI",name:"Ivory Coast",dialCode:"+225",flag:"",placeholder:"01 23 45 67"},{code:"JM",name:"Jamaica",dialCode:"+1876",flag:"",placeholder:"876 210 1234"},{code:"JP",name:"Japan",dialCode:"+81",flag:"",placeholder:"90 1234 5678"},{code:"JO",name:"Jordan",dialCode:"+962",flag:"",placeholder:"7 9012 3456"},{code:"KZ",name:"Kazakhstan",dialCode:"+7",flag:"",placeholder:"771 000 9998"},{code:"KE",name:"Kenya",dialCode:"+254",flag:"",placeholder:"712 345678"},{code:"KW",name:"Kuwait",dialCode:"+965",flag:"",placeholder:"500 12345"},{code:"KG",name:"Kyrgyzstan",dialCode:"+996",flag:"",placeholder:"700 123 456"},{code:"LA",name:"Laos",dialCode:"+856",flag:"",placeholder:"20 23 123 456"},{code:"LV",name:"Latvia",dialCode:"+371",flag:"",placeholder:"21 234 567"},{code:"LB",name:"Lebanon",dialCode:"+961",flag:"",placeholder:"71 123 456"},{code:"LS",name:"Lesotho",dialCode:"+266",flag:"",placeholder:"5012 3456"},{code:"LR",name:"Liberia",dialCode:"+231",flag:"",placeholder:"77 012 3456"},{code:"LY",name:"Libya",dialCode:"+218",flag:"",placeholder:"91 2345678"},{code:"LI",name:"Liechtenstein",dialCode:"+423",flag:"",placeholder:"660 234 567"},{code:"LT",name:"Lithuania",dialCode:"+370",flag:"",placeholder:"612 34567"},{code:"LU",name:"Luxembourg",dialCode:"+352",flag:"",placeholder:"628 123 456"},{code:"MO",name:"Macau",dialCode:"+853",flag:"",placeholder:"6612 3456"},{code:"MK",name:"Macedonia",dialCode:"+389",flag:"",placeholder:"72 345 678"},{code:"MG",name:"Madagascar",dialCode:"+261",flag:"",placeholder:"32 12 345 67"},{code:"MW",name:"Malawi",dialCode:"+265",flag:"",placeholder:"991 23 45 67"},{code:"MY",name:"Malaysia",dialCode:"+60",flag:"",placeholder:"12 345 6789"},{code:"MV",name:"Maldives",dialCode:"+960",flag:"",placeholder:"771 2345"},{code:"ML",name:"Mali",dialCode:"+223",flag:"",placeholder:"65 01 23 45"},{code:"MT",name:"Malta",dialCode:"+356",flag:"",placeholder:"9696 1234"},{code:"MR",name:"Mauritania",dialCode:"+222",flag:"",placeholder:"22 12 34 56"},{code:"MU",name:"Mauritius",dialCode:"+230",flag:"",placeholder:"5251 2345"},{code:"MX",name:"Mexico",dialCode:"+52",flag:"",placeholder:"55 1234 5678"},{code:"MD",name:"Moldova",dialCode:"+373",flag:"",placeholder:"621 12 345"},{code:"MC",name:"Monaco",dialCode:"+377",flag:"",placeholder:"6 12 34 56 78"},{code:"MN",name:"Mongolia",dialCode:"+976",flag:"",placeholder:"8812 3456"},{code:"ME",name:"Montenegro",dialCode:"+382",flag:"",placeholder:"67 622 901"},{code:"MA",name:"Morocco",dialCode:"+212",flag:"",placeholder:"650 123456"},{code:"MZ",name:"Mozambique",dialCode:"+258",flag:"",placeholder:"82 123 4567"},{code:"MM",name:"Myanmar",dialCode:"+95",flag:"",placeholder:"9 212 3456"},{code:"NA",name:"Namibia",dialCode:"+264",flag:"",placeholder:"81 123 4567"},{code:"NP",name:"Nepal",dialCode:"+977",flag:"",placeholder:"984 1234567"},{code:"NL",name:"Netherlands",dialCode:"+31",flag:"",placeholder:"6 12345678"},{code:"NZ",name:"New Zealand",dialCode:"+64",flag:"",placeholder:"21 123 4567"},{code:"NI",name:"Nicaragua",dialCode:"+505",flag:"",placeholder:"8123 4567"},{code:"NE",name:"Niger",dialCode:"+227",flag:"",placeholder:"93 12 34 56"},{code:"NG",name:"Nigeria",dialCode:"+234",flag:"",placeholder:"802 123 4567"},{code:"NO",name:"Norway",dialCode:"+47",flag:"",placeholder:"412 34 567"},{code:"OM",name:"Oman",dialCode:"+968",flag:"",placeholder:"9212 3456"},{code:"PK",name:"Pakistan",dialCode:"+92",flag:"",placeholder:"301 2345678"},{code:"PS",name:"Palestine",dialCode:"+970",flag:"",placeholder:"599 123 456"},{code:"PA",name:"Panama",dialCode:"+507",flag:"",placeholder:"6123 4567"},{code:"PG",name:"Papua New Guinea",dialCode:"+675",flag:"",placeholder:"7012 3456"},{code:"PY",name:"Paraguay",dialCode:"+595",flag:"",placeholder:"961 456789"},{code:"PE",name:"Peru",dialCode:"+51",flag:"",placeholder:"912 345 678"},{code:"PH",name:"Philippines",dialCode:"+63",flag:"",placeholder:"917 123 4567"},{code:"PL",name:"Poland",dialCode:"+48",flag:"",placeholder:"512 345 678"},{code:"PT",name:"Portugal",dialCode:"+351",flag:"",placeholder:"912 345 678"},{code:"PR",name:"Puerto Rico",dialCode:"+1787",flag:"",placeholder:"787 234 5678"},{code:"QA",name:"Qatar",dialCode:"+974",flag:"",placeholder:"3312 3456"},{code:"RO",name:"Romania",dialCode:"+40",flag:"",placeholder:"712 034 567"},{code:"RU",name:"Russia",dialCode:"+7",flag:"",placeholder:"912 345-67-89"},{code:"RW",name:"Rwanda",dialCode:"+250",flag:"",placeholder:"720 123 456"},{code:"SA",name:"Saudi Arabia",dialCode:"+966",flag:"",placeholder:"50 123 4567"},{code:"SN",name:"Senegal",dialCode:"+221",flag:"",placeholder:"70 123 45 67"},{code:"RS",name:"Serbia",dialCode:"+381",flag:"",placeholder:"60 1234567"},{code:"SC",name:"Seychelles",dialCode:"+248",flag:"",placeholder:"2 510 123"},{code:"SL",name:"Sierra Leone",dialCode:"+232",flag:"",placeholder:"25 123456"},{code:"SG",name:"Singapore",dialCode:"+65",flag:"",placeholder:"8123 4567"},{code:"SK",name:"Slovakia",dialCode:"+421",flag:"",placeholder:"912 123 456"},{code:"SI",name:"Slovenia",dialCode:"+386",flag:"",placeholder:"31 234 567"},{code:"SO",name:"Somalia",dialCode:"+252",flag:"",placeholder:"7 1123456"},{code:"ZA",name:"South Africa",dialCode:"+27",flag:"",placeholder:"71 123 4567"},{code:"KR",name:"South Korea",dialCode:"+82",flag:"",placeholder:"10-1234-5678"},{code:"SS",name:"South Sudan",dialCode:"+211",flag:"",placeholder:"977 123 456"},{code:"ES",name:"Spain",dialCode:"+34",flag:"",placeholder:"612 34 56 78"},{code:"LK",name:"Sri Lanka",dialCode:"+94",flag:"",placeholder:"71 234 5678"},{code:"SD",name:"Sudan",dialCode:"+249",flag:"",placeholder:"91 123 1234"},{code:"SR",name:"Suriname",dialCode:"+597",flag:"",placeholder:"741 2345"},{code:"SZ",name:"Swaziland",dialCode:"+268",flag:"",placeholder:"7612 3456"},{code:"SE",name:"Sweden",dialCode:"+46",flag:"",placeholder:"70 123 45 67"},{code:"CH",name:"Switzerland",dialCode:"+41",flag:"",placeholder:"78 123 45 67"},{code:"SY",name:"Syria",dialCode:"+963",flag:"",placeholder:"944 567 890"},{code:"TW",name:"Taiwan",dialCode:"+886",flag:"",placeholder:"912 345 678"},{code:"TJ",name:"Tajikistan",dialCode:"+992",flag:"",placeholder:"917 12 3456"},{code:"TZ",name:"Tanzania",dialCode:"+255",flag:"",placeholder:"621 234 567"},{code:"TH",name:"Thailand",dialCode:"+66",flag:"",placeholder:"81 234 5678"},{code:"TG",name:"Togo",dialCode:"+228",flag:"",placeholder:"90 11 23 45"},{code:"TO",name:"Tonga",dialCode:"+676",flag:"",placeholder:"771 5123"},{code:"TT",name:"Trinidad and Tobago",dialCode:"+1868",flag:"",placeholder:"868 291 1234"},{code:"TN",name:"Tunisia",dialCode:"+216",flag:"",placeholder:"20 123 456"},{code:"TR",name:"Turkey",dialCode:"+90",flag:"",placeholder:"532 123 4567"},{code:"TM",name:"Turkmenistan",dialCode:"+993",flag:"",placeholder:"66 123456"},{code:"UG",name:"Uganda",dialCode:"+256",flag:"",placeholder:"712 345678"},{code:"UA",name:"Ukraine",dialCode:"+380",flag:"",placeholder:"50 123 4567"},{code:"AE",name:"UAE",dialCode:"+971",flag:"",placeholder:"50 123 4567"},{code:"UY",name:"Uruguay",dialCode:"+598",flag:"",placeholder:"94 231 234"},{code:"UZ",name:"Uzbekistan",dialCode:"+998",flag:"",placeholder:"91 234 56 78"},{code:"VU",name:"Vanuatu",dialCode:"+678",flag:"",placeholder:"591 2345"},{code:"VE",name:"Venezuela",dialCode:"+58",flag:"",placeholder:"412 1234567"},{code:"VN",name:"Vietnam",dialCode:"+84",flag:"",placeholder:"91 234 5678"},{code:"YE",name:"Yemen",dialCode:"+967",flag:"",placeholder:"712 345 678"},{code:"ZM",name:"Zambia",dialCode:"+260",flag:"",placeholder:"95 5123456"},{code:"ZW",name:"Zimbabwe",dialCode:"+263",flag:"",placeholder:"71 234 5678"}];function Jx(t){const e=t.replace(/\D/g,"");return e.length>=7&&e.length<=15}function PD(t,e){const n=e.replace(/\D/g,"");return`${t.startsWith("+")?t:`+${t}`}${n}`}function AD(t){if(!t.startsWith("+"))return null;for(const e of qs)if(t.startsWith(e.dialCode))return{dialCode:e.dialCode,phone:t.slice(e.dialCode.length)};return null}function I_(t,e){qs.find(s=>s.dialCode===t);const n=e.replace(/\D/g,"");return(t==="+1"||t==="+7")&&n.length===10?`(${n.slice(0,3)}) ${n.slice(3,6)}-${n.slice(6)}`:n.replace(/(\d{3,4})(?=\d)/g,"$1 ").trim()}function Xx(t){if(!t)return"";const e=AD(t);if(e){const n=I_(e.dialCode,e.phone);return`${e.dialCode} ${n}`}return t.replace(/(\d{1,4})(?=\d)/g,"$1 ").trim()}function M_({value:t,dialCode:e,onChange:n,onValidationChange:s,error:i,disabled:a,autoFocus:l}){const[d,h]=w.useState(!1),[p,m]=w.useState(qs.find(S=>S.dialCode===e)||qs[0]),g=w.useRef(null);w.useEffect(()=>{const S=qs.find(j=>j.dialCode===e);S&&m(S)},[e]),w.useEffect(()=>{t&&s&&s(Jx(t))},[t,s]);const y=S=>{m(S),n(t,S.dialCode),h(!1),setTimeout(()=>{g.current?.focus()},100)},b=S=>{const j=S.target.value.replace(/[^\d\s\-()]/g,"");n(j,p.dialCode)},_=t?Jx(t):null;return u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(A_,{open:d,onOpenChange:h,children:[u.jsx(R_,{asChild:!0,children:u.jsxs(Ae,{variant:"outline",role:"combobox","aria-expanded":d,"aria-label":"Select country code",disabled:a,className:"w-[140px] justify-between bg-input-background border-border hover:bg-[var(--hover-surface)] transition-colors",children:[u.jsxs("span",{className:"flex items-center gap-2 truncate",children:[u.jsx("span",{className:"text-lg",children:p.flag}),u.jsx("span",{children:p.dialCode})]}),u.jsx(bA,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),u.jsx(O_,{className:"w-[320px] p-0",align:"start",children:u.jsxs(KM,{children:[u.jsx(GM,{placeholder:"Search country...",className:"h-9"}),u.jsxs(qM,{children:[u.jsx(YM,{children:"No country found."}),u.jsx(JM,{children:qs.map(S=>u.jsxs(XM,{value:`${S.name} ${S.dialCode} ${S.code}`,onSelect:()=>y(S),className:"cursor-pointer",children:[u.jsx("span",{className:"mr-2 text-lg",children:S.flag}),u.jsx("span",{className:"flex-1",children:S.name}),u.jsx("span",{className:"text-muted-foreground ml-2",children:S.dialCode}),p.code===S.code&&u.jsx(Xs,{className:"ml-2 h-4 w-4 text-primary"})]},S.code))})]})]})})]}),u.jsxs("div",{className:"relative flex-1",children:[u.jsx(hr,{ref:g,type:"tel",value:t,onChange:b,placeholder:p.placeholder,disabled:a,autoFocus:l,"aria-invalid":i?"true":"false","aria-describedby":i?"phone-error":void 0,className:`
              bg-input-background border-border transition-all
              ${i?"border-error focus-visible:ring-error":""}
              ${_===!0?"border-success":""}
            `}),_===!0&&u.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:u.jsx(Xs,{className:"h-4 w-4 text-success"})})]})]}),i&&u.jsx("p",{id:"phone-error",className:"text-sm text-error",role:"alert",children:i}),!i&&t&&u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Format: ",p.dialCode," ",I_(p.dialCode,t)]})]})}function RD({onAuthSuccess:t}){const[e,n]=w.useState("login"),[s,i]=w.useState(""),[a,l]=w.useState(""),[d,h]=w.useState(""),[p,m]=w.useState(""),[g,y]=w.useState("+1"),[b,_]=w.useState(!1),[S,j]=w.useState(""),C=async T=>{T.preventDefault(),j(""),_(!0);try{const E=pn();if(e==="signup"){if(!p){j("Phone number is required"),_(!1);return}const N=`${g}${p}`,P=await qI.signup(s,a,d,N);if(!P.success){let W=P.error||"Signup failed";try{W=JSON.parse(W).error||W}catch{}W.includes("Phone number is already registered")&&(W="This phone number is already registered. Please use a different phone number or sign in."),j(W),_(!1);return}console.log("[Auth] Signing in after signup...");const{data:M,error:L}=await E.auth.signInWithPassword({email:s,password:a});if(L){console.error("[Auth] Sign in error after signup:",L),j(L.message),_(!1);return}if(!M.session){console.error("[Auth] No session returned after sign in"),j("Failed to establish session. Please try logging in."),_(!1);return}console.log("[Auth] Sign in successful, session established"),console.log("[Auth] Session user:",M.session.user.id),console.log("[Auth] Access token available:",!!M.session.access_token),console.log("[Auth] Explicitly setting session...");const{error:$}=await E.auth.setSession({access_token:M.session.access_token,refresh_token:M.session.refresh_token});if($){console.error("[Auth] Failed to set session:",$),j("Failed to save session. Please try again."),_(!1);return}console.log("[Auth] Waiting for session persistence..."),await new Promise(W=>setTimeout(W,1500)),console.log("[Auth] Verifying session in storage...");const{data:{session:z}}=await E.auth.getSession();if(!z){console.error("[Auth] CRITICAL: Session not persisted to storage!");const W=Object.keys(localStorage);console.error("[Auth] Available localStorage keys:",W),j("Session failed to save. Please ensure cookies/storage is enabled."),_(!1);return}console.log("[Auth]  Session verified in storage"),t()}else{console.log("[Auth] Attempting login...");const{data:N,error:P}=await E.auth.signInWithPassword({email:s,password:a});if(P){P.message.toLowerCase().includes("invalid login credentials")||console.error("[Auth] Login error:",P.message),j(P.message),_(!1);return}if(!N.session){console.error("[Auth] No session returned after login"),j("Failed to establish session. Please try again."),_(!1);return}console.log("[Auth] Login successful, session established"),console.log("[Auth] Session user:",N.session.user.id),console.log("[Auth] Access token available:",!!N.session.access_token),console.log("[Auth] Access token preview:",N.session.access_token?.substring(0,30)+"..."),console.log("[Auth] Explicitly setting session...");const{error:M}=await E.auth.setSession({access_token:N.session.access_token,refresh_token:N.session.refresh_token});if(M){console.error("[Auth] Failed to set session:",M),j("Failed to save session. Please try again."),_(!1);return}console.log("[Auth] Waiting for session persistence..."),await new Promise(z=>setTimeout(z,1500)),console.log("[Auth] Verifying session in storage...");const{data:{session:L},error:$}=await E.auth.getSession();if($&&console.error("[Auth] Error verifying session:",$),!L){console.error("[Auth] CRITICAL: Session not persisted to storage!"),console.error("[Auth] This means localStorage may be disabled or cleared");const z=Object.keys(localStorage);console.error("[Auth] Available localStorage keys:",z),console.error("[Auth] Total localStorage keys:",z.length),j("Session failed to save. Please ensure cookies/storage is enabled."),_(!1);return}console.log("[Auth]  Session verified in storage"),console.log("[Auth] Stored session user:",L.user.id),console.log("[Auth] Stored access token preview:",L.access_token?.substring(0,30)+"..."),t()}}catch(E){j(E instanceof Error?E.message:"An error occurred"),_(!1)}};return u.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center p-4 sm:p-6 md:p-8 pt-safe pb-safe pl-safe pr-safe relative overflow-hidden bg-gradient-to-br from-background via-surface to-background",children:[u.jsx(te.div,{className:"absolute inset-0 opacity-40",animate:{background:["radial-gradient(circle at 20% 30%, var(--primary) 0%, transparent 60%)","radial-gradient(circle at 80% 70%, var(--accent) 0%, transparent 60%)","radial-gradient(circle at 50% 50%, var(--primary) 0%, transparent 60%)","radial-gradient(circle at 20% 30%, var(--primary) 0%, transparent 60%)"]},transition:{duration:20,repeat:1/0,ease:"linear"}}),u.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(4)].map((T,E)=>u.jsx(te.div,{className:"absolute rounded-full bg-gradient-to-br from-primary/15 to-accent/15 backdrop-blur-2xl",style:{width:Math.random()*250+150,height:Math.random()*250+150,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{x:[0,Math.random()*60-30],y:[0,Math.random()*60-30],scale:[1,1.15,1],opacity:[.2,.4,.2]},transition:{duration:Math.random()*8+12,repeat:1/0,ease:"easeInOut"}},E))}),u.jsxs(te.div,{initial:{opacity:0,scale:.96,y:20},animate:{opacity:1,scale:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"relative w-full max-w-sm xs:max-w-md",children:[u.jsxs("div",{className:"bg-card/90 dark:bg-card/50 backdrop-blur-3xl rounded-2xl sm:rounded-3xl shadow-2xl border border-border/50 p-6 xs:p-8 sm:p-10 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-accent/5 opacity-50 pointer-events-none"}),u.jsxs("div",{className:"relative z-10",children:[u.jsxs(te.div,{className:"text-center mb-8 sm:mb-10",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},children:[u.jsx(te.div,{className:"inline-flex items-center justify-center gap-2.5 sm:gap-3 mb-5 sm:mb-6",whileHover:{scale:1.03},transition:{type:"spring",stiffness:400,damping:20},children:u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-12 h-12 xs:w-14 xs:h-14 sm:w-16 sm:h-16 rounded-xl sm:rounded-2xl bg-gradient-to-br from-primary to-accent shadow-xl shadow-primary/30 flex items-center justify-center",children:u.jsx(Ya,{className:"w-7 h-7 xs:w-8 xs:h-8 sm:w-9 sm:h-9 text-white",strokeWidth:2.5})}),u.jsx(te.div,{className:"absolute inset-0 rounded-xl sm:rounded-2xl bg-gradient-to-br from-primary to-accent opacity-30 blur-xl",animate:{opacity:[.2,.4,.2],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}})]})}),u.jsx("h1",{className:"mb-2.5 sm:mb-3 text-2xl xs:text-3xl sm:text-4xl font-bold bg-gradient-to-r from-primary via-primary to-accent bg-clip-text text-transparent",children:"AuroraLink"}),u.jsx(te.p,{className:"text-muted-foreground text-base",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:e==="login"?"Welcome back! Sign in to continue.":"Create your account to get started"},e)]}),S&&u.jsx(te.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:u.jsxs($h,{variant:"destructive",className:"mb-6",children:[u.jsx(Rh,{className:"h-4 w-4"}),u.jsx(Fh,{children:S})]})}),u.jsxs(te.form,{onSubmit:C,className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e==="signup"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(ca,{htmlFor:"fullName",className:"text-sm font-semibold",children:"Full Name"}),u.jsxs("div",{className:"relative",children:[u.jsx(Zb,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),u.jsx(hr,{id:"fullName",type:"text",value:d,onChange:T=>h(T.target.value),placeholder:"John Doe",className:"pl-11 h-12 text-base",required:!0,disabled:b})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(ca,{htmlFor:"phoneNumber",className:"text-sm font-semibold",children:"Phone Number"}),u.jsxs("div",{children:[u.jsx(M_,{value:p,dialCode:g,onChange:(T,E)=>{m(T),y(E)},disabled:b}),u.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Used to find and connect with others on AuroraLink"})]})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(ca,{htmlFor:"email",className:"text-sm font-semibold",children:"Email"}),u.jsxs("div",{className:"relative",children:[u.jsx(Gb,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),u.jsx(hr,{id:"email",type:"email",value:s,onChange:T=>i(T.target.value),placeholder:"you@example.com",className:"pl-11 h-12 text-base",required:!0,disabled:b})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(ca,{htmlFor:"password",className:"text-sm font-semibold",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx(DA,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),u.jsx(hr,{id:"password",type:"password",value:a,onChange:T=>l(T.target.value),placeholder:"",className:"pl-11 h-12 text-base",required:!0,disabled:b,minLength:6})]}),e==="signup"&&u.jsx("p",{className:"text-xs text-muted-foreground",children:"At least 6 characters"})]}),u.jsx(te.div,{whileHover:{scale:b?1:1.01},whileTap:{scale:b?1:.99},className:"mt-2",children:u.jsx(Ae,{type:"submit",className:"w-full h-14 text-base font-semibold bg-gradient-to-r from-primary to-accent hover:opacity-90 shadow-xl shadow-primary/30 transition-all duration-300",disabled:b,children:b?u.jsxs(u.Fragment,{children:[u.jsx(Kb,{className:"mr-2 h-5 w-5 animate-spin"}),e==="login"?"Signing in...":"Creating account..."]}):u.jsxs(u.Fragment,{children:[e==="login"?"Sign In":"Create Account",u.jsx(Kc,{className:"ml-2 h-5 w-5"})]})})})]}),u.jsx(te.div,{className:"mt-8 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:u.jsxs("button",{onClick:()=>{n(e==="login"?"signup":"login"),j("")},className:"text-sm text-primary hover:text-primary/80 transition-colors font-medium inline-flex items-center gap-1",disabled:b,children:[e==="login"?"Don't have an account? Sign up":"Already have an account? Sign in",u.jsx(Kc,{className:"w-4 h-4"})]})}),u.jsx(te.div,{className:"mt-10 pt-6 border-t border-border/30 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:u.jsxs("p",{className:"text-xs text-muted-foreground leading-relaxed",children:["By continuing, you agree to our"," ",u.jsx("span",{className:"text-primary hover:underline cursor-pointer font-medium",children:"Terms of Service"})," ","and"," ",u.jsx("span",{className:"text-primary hover:underline cursor-pointer font-medium",children:"Privacy Policy"})]})})]})]}),u.jsx("div",{className:"absolute -z-10 top-0 left-0 w-40 h-40 bg-gradient-to-br from-primary/15 to-transparent rounded-full blur-3xl"}),u.jsx("div",{className:"absolute -z-10 bottom-0 right-0 w-40 h-40 bg-gradient-to-tl from-accent/15 to-transparent rounded-full blur-3xl"})]})]})}const OD="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function ys(t){const[e,n]=w.useState(!1),[s,i]=w.useState(!0),a=()=>{n(!0),i(!1)},l=()=>{i(!1)},{src:d,alt:h,className:p,style:m,fallback:g,...y}=t;return e?g?u.jsx(u.Fragment,{children:g}):u.jsx("div",{className:p,style:{...m,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--muted)"},children:u.jsx("div",{className:"flex items-center justify-center w-full h-full",children:u.jsx("img",{src:OD,alt:"Error loading image",...y,"data-original-url":d,style:{maxWidth:"60%",maxHeight:"60%",opacity:.5}})})}):u.jsxs("div",{className:"relative w-full h-full",style:m,children:[s&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted animate-pulse",style:{borderRadius:"inherit"},children:u.jsx("div",{className:"w-8 h-8 border-3 border-primary/30 border-t-primary rounded-full animate-spin"})}),u.jsx("img",{src:d,alt:h,className:p,style:{...m,opacity:s?0:1,transition:"opacity 0.2s ease-in-out"},...y,onError:a,onLoad:l})]})}const ID={xs:"w-6 h-6",sm:"w-10 h-10",md:"w-12 h-12",lg:"w-14 h-14",xl:"w-20 h-20","2xl":"w-24 h-24"},Qx={xs:"text-[8px]",sm:"text-xs",md:"text-sm",lg:"text-base",xl:"text-xl","2xl":"text-2xl"},MD={xs:"w-1.5 h-1.5",sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3",xl:"w-4 h-4","2xl":"w-5 h-5"},oh=["from-blue-500 to-cyan-500","from-purple-500 to-pink-500","from-green-500 to-teal-500","from-orange-500 to-red-500","from-indigo-500 to-blue-500","from-pink-500 to-rose-500","from-teal-500 to-green-500","from-amber-500 to-orange-500","from-violet-500 to-purple-500","from-cyan-500 to-blue-500"];function DD(t){if(!t)return oh[0];const e=t.split("").reduce((n,s)=>n+s.charCodeAt(0),0)%oh.length;return oh[e]}function LD(t){if(!t)return"";const e=t.trim().split(/\s+/);return e.length===1?e[0].substring(0,2).toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function sn({user:t,src:e,alt:n="Avatar",fallbackText:s,size:i="md",status:a,className:l="",showBorder:d=!0,onClick:h}){const p={online:"bg-success",offline:"bg-muted-foreground",away:"bg-warning"},m=t?.avatar_url||e,g=t?.full_name||n,y=t?.full_name||s||n,b=t?t.is_online?"online":"offline":a,_=LD(y),S=DD(y);return u.jsxs("div",{className:`relative inline-block ${l}`,onClick:h,role:h?"button":void 0,tabIndex:h?0:void 0,children:[u.jsx("div",{className:`${ID[i]} rounded-full flex items-center justify-center overflow-hidden ${d?"ring-2 ring-border/20 shadow-md hover:shadow-lg":"shadow-sm"} transition-all duration-300 hover:ring-primary/40`,children:m?u.jsx("div",{className:"w-full h-full avatar-image-container",children:u.jsx(ys,{src:m,alt:g,className:"w-full h-full object-cover object-center",style:{display:"block",width:"100%",height:"100%",objectFit:"cover",objectPosition:"center center"},fallback:u.jsx("div",{className:`w-full h-full bg-gradient-to-br ${S} flex items-center justify-center`,children:u.jsx("span",{className:`${Qx[i]} font-semibold text-white select-none`,children:_})})})}):u.jsx("div",{className:`w-full h-full bg-gradient-to-br ${S} flex items-center justify-center`,children:u.jsx("span",{className:`${Qx[i]} font-semibold text-white select-none`,children:_})})}),b&&u.jsx("span",{className:`absolute bottom-0 right-0 ${MD[i]} ${p[b]} rounded-full border-3 border-background shadow-lg ${b==="online"?"animate-pulse":""}`,"aria-label":`Status: ${b}`,style:{borderWidth:"3px"}})]})}const $D=Kp("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function FD({className:t,variant:e,asChild:n=!1,...s}){const i=n?e1:"span";return u.jsx(i,{"data-slot":"badge",className:Qe($D({variant:e}),t),...s})}function VD({conversation:t,isActive:e=!1,onClick:n,currentUserId:s}){const i=g=>{if(!g)return"";const y=new Date(g),_=new Date().getTime()-y.getTime();return _<864e5?y.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):_<6048e5?y.toLocaleDateString("en-US",{weekday:"short"}):y.toLocaleDateString("en-US",{month:"short",day:"numeric"})},a=()=>t.type==="group"?t.title||"Group Chat":t.members?.find(y=>y.user_id!==s)?.user?.full_name||"Unknown",l=()=>t.type==="group"?t.avatar_url:t.members?.find(y=>y.user_id!==s)?.user?.avatar_url,d=()=>t.type==="group"?void 0:t.members?.find(y=>y.user_id!==s)?.user?.is_online?"online":"offline",h=()=>{if(!t.last_message||!(t.last_message.sender_id===s))return null;const y=t.last_message.statuses?.some(_=>_.status==="read"),b=t.last_message.statuses?.some(_=>_.status==="delivered");return y?"read":b?"delivered":"sent"},p=()=>{if(!t.last_message)return"Tap to start chatting";const g=t.last_message,y=g.sender_id===s,b="";if(g.type==="story_reply"){const _=g.story_reply?.story_type,S=_==="text"?"":_==="image"?"":"";return y?g.body||`${S} Replied to your status`:`${S} Replied to their status: ${g.body||""}`}return g.type==="voice"?`${b} Voice message`:g.type==="image"?`${b} Photo`:g.type==="file"?`${b} File`:`${b}${g.body||""}`},m=t.unread_count&&t.unread_count>0;return u.jsxs("button",{onClick:n,className:`w-full max-w-full flex items-center gap-4 px-4 py-4 transition-all duration-200 text-left border-b border-border/50 hover:bg-[var(--hover-surface)] overflow-hidden active:bg-[var(--hover-muted)] ${e?"bg-muted":""}`,"aria-label":`Conversation with ${a()}`,children:[u.jsx(sn,{src:l(),alt:a(),size:"lg",status:d(),className:"shrink-0",showBorder:!0}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-baseline justify-between mb-0.5 gap-2",children:[u.jsx("h3",{className:`truncate text-[16px] leading-tight ${m?"font-semibold":""}`,children:a()}),u.jsx("span",{className:`text-xs flex-shrink-0 ${m?"text-primary":"text-muted-foreground"}`,children:i(t.last_message?.created_at||t.updated_at)})]}),u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 flex-1",children:[t.last_message?.sender_id===s&&u.jsx("span",{className:"flex-shrink-0 flex items-center",children:h()==="read"?u.jsx(Da,{className:"w-4 h-4 text-[#53bdeb]"}):h()==="delivered"?u.jsx(Da,{className:"w-4 h-4 text-muted-foreground"}):u.jsx(Xs,{className:"w-4 h-4 text-muted-foreground"})}),u.jsx("p",{className:`text-[14px] truncate leading-tight ${m?"text-foreground font-medium":"text-muted-foreground"}`,children:p()})]}),m&&u.jsx(FD,{className:"bg-primary text-primary-foreground rounded-full h-5 min-w-[20px] px-1.5 flex items-center justify-center flex-shrink-0 text-[11px] shadow-sm",children:t.unread_count>99?"99+":t.unread_count})]})]})]})}function nu({icon:t,title:e,description:n,actionLabel:s,onAction:i}){return u.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[u.jsxs(te.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:20},className:"relative mb-6",children:[u.jsx(te.div,{className:"absolute inset-0 rounded-full bg-gradient-to-br from-primary/20 to-accent/20",animate:{scale:[1,1.2,1],opacity:[.5,.8,.5]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},style:{width:80,height:80,marginLeft:-8,marginTop:-8}}),u.jsx("div",{className:"relative w-16 h-16 rounded-full bg-gradient-to-br from-primary/10 to-accent/10 flex items-center justify-center shadow-soft",children:u.jsx(t,{className:"w-8 h-8 text-primary"})})]}),u.jsxs(te.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[u.jsx("h3",{className:"mb-2 text-xl",children:e}),n&&u.jsx("p",{className:"text-muted-foreground mb-6 max-w-sm leading-relaxed",children:n}),s&&i&&u.jsx(te.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:u.jsx(Ae,{onClick:i,className:"bg-gradient-to-r from-primary to-accent hover:opacity-90 shadow-lg shadow-primary/20",children:s})})]})]})}function BD(){return u.jsxs("div",{className:"flex items-center gap-3 p-3 animate-pulse",children:[u.jsx("div",{className:"w-12 h-12 bg-muted rounded-full"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),u.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]})}function UD({isSent:t=!1}){return u.jsxs("div",{className:`flex gap-2 mb-2 animate-pulse ${t?"flex-row-reverse":"flex-row"}`,children:[!t&&u.jsx("div",{className:"w-8 h-8 bg-muted rounded-full flex-shrink-0"}),u.jsx("div",{className:`max-w-[70%] ${t?"items-end":"items-start"} flex flex-col gap-2`,children:u.jsx("div",{className:"h-12 bg-muted rounded-2xl w-64"})})]})}function Zx({userStories:t,isMyStory:e,currentUser:n,onClick:s,onAddStory:i}){const a=t?.has_unviewed??!1,l=t?.user||n,d=t?.stories.length||0,h=t?.stories&&t.stories.length>0?t.stories[t.stories.length-1]:null;if(!l)return null;const p=()=>{e&&d>0,s()},m=g=>{g.stopPropagation(),i?i():s()};return u.jsxs("div",{className:"flex flex-col items-center gap-1 min-w-[68px] group",children:[u.jsxs(te.div,{className:"relative cursor-pointer",whileTap:{scale:.95},transition:{duration:.1},children:[a&&!e&&u.jsx("div",{className:"absolute inset-0 rounded-full p-[2px] pointer-events-none",children:u.jsx("div",{className:"w-full h-full rounded-full story-ring-gradient",style:{background:"linear-gradient(135deg, var(--story-ring-unviewed-start), var(--story-ring-unviewed-mid), var(--story-ring-unviewed-end))",backgroundSize:"200% 200%"},children:u.jsx("div",{className:"w-full h-full rounded-full bg-background scale-[0.93]"})})}),!a&&!e&&d>0&&u.jsx("div",{className:"absolute inset-0 rounded-full border-[2px] pointer-events-none",style:{borderColor:"var(--story-ring-viewed)"}}),e&&d>0&&u.jsx("div",{className:"absolute inset-0 rounded-full border-[2px] pointer-events-none",style:{borderColor:"var(--story-ring-my-story)"}}),u.jsx("button",{onClick:p,className:"absolute inset-0 rounded-full w-full h-full z-0 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","aria-label":e?"View my status":`View ${l.full_name}'s status`}),u.jsxs("div",{className:`relative rounded-full ${a&&!e||e&&d>0||!a&&!e&&d>0?"p-[3px]":"p-0"} bg-background pointer-events-none`,children:[u.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden bg-muted flex items-center justify-center",children:h&&d>0?u.jsxs(u.Fragment,{children:[h.type==="image"&&h.media_url&&u.jsx(ys,{src:h.media_url,alt:"Story",className:"w-full h-full object-cover object-center"}),h.type==="video"&&h.media_url&&u.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[u.jsx(ys,{src:h.media_url,alt:"Story",className:"w-full h-full object-cover object-center"}),u.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center",children:u.jsx("div",{className:"w-5 h-5 rounded-full bg-white/90 flex items-center justify-center",children:u.jsx("svg",{className:"w-2.5 h-2.5 text-black ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),h.type==="text"&&u.jsx("div",{className:"w-full h-full flex items-center justify-center p-2",style:{background:h.background_color||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:u.jsx("p",{className:"text-white text-[8px] font-medium text-center leading-tight line-clamp-4",children:h.text_content})})]}):u.jsx(sn,{user:l,size:"md",className:"w-full h-full",showBorder:!1})}),e&&u.jsx(te.button,{onClick:m,className:"absolute bottom-0 right-0 w-5 h-5 bg-primary rounded-full flex items-center justify-center border-[2.5px] border-background shadow-sm hover:bg-primary/90 transition-colors z-10 pointer-events-auto focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1",whileTap:{scale:.9},transition:{duration:.1},"aria-label":"Add status",children:u.jsx(Xo,{className:"w-[14px] h-[14px] text-white",strokeWidth:3})})]})]}),u.jsx("div",{className:"flex flex-col items-center gap-0 max-w-[68px]",children:u.jsx("span",{className:"text-[11px] text-center truncate transition-colors w-full leading-tight",style:{color:"var(--text-secondary)"},children:e?"My status":l.full_name})})]})}async function zD(){return"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.warn("Browser does not support notifications"),!1)}function WD(t,e,n,s){if(!(!("Notification"in window)||Notification.permission!=="granted"))try{const i=new Notification(`${t}`,{body:e,icon:n||"/favicon.ico",badge:"/favicon.ico",tag:"auroralink-message",renotify:!0,requireInteraction:!1,silent:!1});i.onclick=()=>{window.focus(),i.close(),s?.()},setTimeout(()=>{i.close()},5e3)}catch(i){console.error("Failed to show notification:",i)}}function D_(){try{const t=new(window.AudioContext||window.webkitAudioContext),e=t.createOscillator(),n=t.createGain();e.connect(n),n.connect(t.destination),e.frequency.value=800,e.type="sine",n.gain.setValueAtTime(0,t.currentTime),n.gain.linearRampToValueAtTime(.3,t.currentTime+.01),n.gain.exponentialRampToValueAtTime(.01,t.currentTime+.15),e.start(t.currentTime),e.stop(t.currentTime+.15)}catch(t){console.error("Failed to play notification sound:",t)}}function HD(t,e,n,s=!0,i){s&&!document.hidden&&D_(),document.hidden&&WD(t,e,n,i)}function ew(){return"Notification"in window?Notification.permission:"unsupported"}function KD({currentUser:t,onSelectConversation:e,onNewChat:n,onSettings:s,onLogout:i,theme:a,onToggleTheme:l,onViewStory:d,onCreateStory:h}){const[p,m]=w.useState([]),[g,y]=w.useState(!0),[b,_]=w.useState(""),[S,j]=w.useState("chats"),[C,T]=w.useState([]),[E,N]=w.useState(null),[P,M]=w.useState(!0);w.useEffect(()=>{L(!0),$();const W=setInterval(()=>{L(!1)},5e3),Z=setInterval(()=>{$()},3e4),X=setInterval(async()=>{console.log("[HomeScreen] Running periodic story cleanup..."),await Xn.cleanup(),await $()},300*1e3);return()=>{clearInterval(W),clearInterval(Z),clearInterval(X)}},[]);const L=async(W=!1)=>{if(W&&y(!0),W){const X=pn(),{data:{session:ee}}=await X.auth.getSession();if(!ee?.access_token){console.error("[HomeScreen] No valid session, cannot load conversations"),y(!1);return}}const Z=await Zo.list();if(Z.success&&Z.data?.conversations){const X=Z.data.conversations;if(!W&&p.length>0)for(const ee of X){const fe=p.find(oe=>oe.id===ee.id);if(fe&&ee.last_message){const oe=!fe.last_message||fe.last_message.id!==ee.last_message.id,Q=ee.last_message.sender_id!==t.id;if(oe&&Q){const Y=ee.members?.find(J=>J.user_id===ee.last_message?.sender_id)?.user,O=Y?.full_name||"Someone",B=ee.last_message.body||" Photo";HD(O,B,Y?.avatar_url,!0,()=>e(ee.id))}}}m(X)}else W&&console.error("[HomeScreen] Failed to load conversations:",Z.error);W&&y(!1)},$=async()=>{try{const W=await Xn.getAllStories();W.success&&W.data?.stories&&(console.log("[HomeScreen]  Loaded stories:",W.data.stories.map(X=>({user:X.user.full_name,count:X.stories.length,has_unviewed:X.has_unviewed}))),T(W.data.stories));const Z=await Xn.getMyStories();Z.success&&Z.data?.stories&&(Z.data.stories.length>0?N({user:t,stories:Z.data.stories,has_unviewed:!1}):N(null))}catch(W){console.error("[Stories] Error loading stories:",W)}finally{M(!1)}},z=p.filter(W=>{if(!b)return!0;const Z=b.toLowerCase();return W.type==="group"?W.title?.toLowerCase().includes(Z):W.members?.find(ee=>ee.user_id!==t.id)?.user?.full_name?.toLowerCase().includes(Z)});return u.jsxs("div",{className:"h-screen flex flex-col bg-background overflow-hidden w-full max-w-full",children:[u.jsx("div",{className:"bg-gradient-to-r from-primary to-accent px-4 py-3.5 shadow-lg shrink-0",children:u.jsxs("div",{className:"flex items-center justify-between w-full",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-9 h-9 rounded-xl bg-white/20 backdrop-blur-sm flex items-center justify-center",children:u.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),u.jsx("h1",{className:"text-white text-xl font-semibold tracking-wide",children:"AuroraLink"})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Ae,{variant:"ghost",size:"icon",onClick:l,className:"h-9 w-9 rounded-full hover:bg-white/20 text-white transition-all","aria-label":"Toggle theme",children:a==="light"?u.jsx(qA,{className:"w-5 h-5"}):u.jsx(mR,{className:"w-5 h-5"})}),u.jsx(Ae,{variant:"ghost",size:"icon",onClick:s,className:"h-9 w-9 rounded-full hover:bg-white/20 text-white transition-all","aria-label":"Settings",children:u.jsx(lR,{className:"w-5 h-5"})}),u.jsx(Ae,{variant:"ghost",size:"icon",onClick:i,className:"h-9 w-9 rounded-full hover:bg-white/20 text-white transition-all","aria-label":"Logout",children:u.jsx($A,{className:"w-5 h-5"})})]})]})}),u.jsxs("div",{className:"flex border-b-2 border-border bg-surface shrink-0 w-full",children:[u.jsxs("button",{onClick:()=>j("chats"),className:`flex-1 py-3.5 flex items-center justify-center gap-2 transition-all relative font-medium ${S==="chats"?"text-primary":"text-muted-foreground hover:text-foreground"}`,children:[u.jsx(L0,{className:"w-5 h-5"}),u.jsx("span",{className:"text-sm",children:"Chats"}),S==="chats"&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-primary to-accent rounded-t-full"})]}),u.jsxs("button",{onClick:()=>j("calls"),className:`flex-1 py-3.5 flex items-center justify-center gap-2 transition-all relative font-medium ${S==="calls"?"text-primary":"text-muted-foreground hover:text-foreground"}`,children:[u.jsx(mr,{className:"w-5 h-5"}),u.jsx("span",{className:"text-sm",children:"Calls"}),S==="calls"&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-primary to-accent rounded-t-full"})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden w-full",children:S==="chats"?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"bg-surface px-4 py-3 border-b border-border sticky top-0 z-10",children:u.jsxs("div",{className:"relative w-full",children:[u.jsx(cu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),u.jsx(hr,{type:"search",placeholder:"Search or start new chat",value:b,onChange:W=>_(W.target.value),className:"pl-10 h-9 bg-input-background rounded-lg border-0 focus:ring-1 focus:ring-primary/20 transition-all text-sm"})]})}),u.jsxs("div",{className:"bg-background",children:[u.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:u.jsxs("div",{className:"flex gap-3 px-3 py-3.5",children:[u.jsx(Zx,{userStories:E||void 0,isMyStory:!0,currentUser:t,onClick:()=>{if(E&&E.stories.length>0){const W=[E,...C];d(W,0)}else h()},onAddStory:()=>{h()}}),P?u.jsx(u.Fragment,{children:[1,2,3].map(W=>u.jsxs("div",{className:"flex flex-col items-center gap-1 min-w-[68px]",children:[u.jsx("div",{className:"w-14 h-14 rounded-full bg-muted animate-pulse"}),u.jsx("div",{className:"w-12 h-2 bg-muted rounded animate-pulse"})]},W))}):u.jsx(u.Fragment,{children:C.map((W,Z)=>u.jsx(Zx,{userStories:W,onClick:()=>{const X=E?[E,...C]:C,ee=E?Z+1:Z;d(X,ee)}},W.user.id))}),!P&&C.length===0&&!E&&u.jsx("div",{className:"flex-1 flex items-center justify-center py-2",children:u.jsx("p",{className:"text-xs text-muted-foreground",children:"No status updates"})})]})}),u.jsx("div",{className:"h-[6px] bg-muted/30"})]}),g?u.jsx("div",{className:"w-full",children:[1,2,3,4,5].map(W=>u.jsx(BD,{},W))}):z.length>0?u.jsx("div",{className:"w-full",children:z.map(W=>u.jsx(VD,{conversation:W,onClick:()=>e(W.id),currentUserId:t.id},W.id))}):u.jsx(nu,{icon:L0,title:b?"No conversations found":"No conversations yet",description:b?"Try a different search term":"Start a new chat to begin messaging",actionLabel:b?void 0:"New Chat",onAction:b?void 0:n})]}):u.jsx(nu,{icon:mr,title:"Calls Coming Soon! ",description:"Voice and video calling feature will be available soon. Stay tuned!"})}),u.jsxs(Ae,{onClick:n,size:"lg",className:"fixed bottom-6 right-6 rounded-full shadow-2xl shadow-primary/30 hover:shadow-primary/40 h-14 w-14 md:h-auto md:w-auto md:px-6 bg-gradient-to-r from-primary to-accent hover:opacity-90 transition-all hover:scale-105 active:scale-95","aria-label":"New conversation",children:[u.jsx(Xo,{className:"w-6 h-6 md:mr-2"}),u.jsx("span",{className:"hidden md:inline",children:"New Chat"})]})]})}function GD({audioUrl:t,duration:e,isSent:n=!1}){const[s,i]=w.useState(!1),[a,l]=w.useState(0),[d,h]=w.useState(e||0),p=w.useRef(null),m=w.useRef(null);w.useEffect(()=>{const _=new Audio(t);return p.current=_,_.addEventListener("loadedmetadata",()=>{h(Math.floor(_.duration))}),_.addEventListener("ended",()=>{i(!1),l(0),m.current&&clearInterval(m.current)}),()=>{_.pause(),_.src="",m.current&&clearInterval(m.current)}},[t]);const g=()=>{p.current&&(s?(p.current.pause(),m.current&&clearInterval(m.current)):(p.current.play(),m.current=setInterval(()=>{p.current&&l(Math.floor(p.current.currentTime))},100)),i(!s))},y=_=>{const S=Math.floor(_/60),j=_%60;return`${S}:${j.toString().padStart(2,"0")}`},b=d>0?a/d*100:0;return u.jsxs("div",{className:"flex items-center gap-2 min-w-[220px] py-1",children:[u.jsx(Ae,{variant:"ghost",size:"icon",onClick:g,className:`h-9 w-9 rounded-full shrink-0 ${n?"hover:bg-primary-foreground/20 text-primary-foreground":"hover:bg-[var(--hover-muted)] text-foreground"}`,"aria-label":s?"Pause":"Play",children:s?u.jsx(qb,{className:"w-5 h-5",fill:"currentColor"}):u.jsx(Yb,{className:"w-5 h-5 ml-0.5",fill:"currentColor"})}),u.jsxs("div",{className:"flex-1 flex flex-col gap-1.5",children:[u.jsx("div",{className:"relative h-1 bg-black/10 dark:bg-white/10 rounded-full overflow-hidden",children:u.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full transition-all ${n?"bg-primary-foreground/80":"bg-primary"}`,style:{width:`${b}%`}})}),u.jsxs("div",{className:`flex justify-between items-center text-[11px] ${n?"text-primary-foreground/70":"text-muted-foreground"}`,children:[u.jsx("span",{children:y(s?a:d)}),u.jsx("svg",{className:`w-12 h-4 ${n?"opacity-50":"opacity-40"}`,viewBox:"0 0 48 16",fill:"none",children:u.jsx("path",{d:"M1 8 L1 8 M5 6 L5 10 M9 4 L9 12 M13 7 L13 9 M17 5 L17 11 M21 3 L21 13 M25 6 L25 10 M29 4 L29 12 M33 8 L33 8 M37 5 L37 11 M41 7 L41 9 M45 6 L45 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})]})]})]})}const tw={Smileys:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Gestures:["","","","","","","","","","","","","","","","","","",""],Hearts:["","","","","","","","","","","","","","","","","","",""],Objects:["","","","","","","","","","","","","","","","","","","","","",""]};function L_({onEmojiSelect:t,trigger:e}){const[n,s]=w.useState(!1),[i,a]=w.useState("Smileys"),l=d=>{t(d),s(!1)};return u.jsxs(A_,{open:n,onOpenChange:s,children:[u.jsx(R_,{asChild:!0,children:e}),u.jsx(O_,{className:"w-80 p-0",align:"start",side:"top",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsx("div",{className:"flex gap-1 p-2 border-b border-border overflow-x-auto",children:Object.keys(tw).map(d=>u.jsx(Ae,{variant:i===d?"secondary":"ghost",size:"sm",onClick:()=>a(d),className:"text-xs whitespace-nowrap",children:d},d))}),u.jsx("div",{className:"grid grid-cols-8 gap-1 p-2 max-h-64 overflow-y-auto",children:tw[i].map(d=>u.jsx("button",{onClick:()=>l(d),className:"text-2xl p-2 hover:bg-[var(--hover-surface)] rounded transition-colors","aria-label":`Select ${d}`,children:d},d))})]})})]})}function qD({storyReply:t,isOwnMessage:e}){return u.jsxs(te.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},transition:{duration:.2},className:`overflow-hidden rounded-xl border relative ${e?"border-white/20 bg-white/10":"border-border/50 bg-muted/30"}`,children:[u.jsx("div",{className:`w-1 h-full absolute left-0 top-0 bottom-0 ${e?"bg-white/30":"bg-primary/40"}`}),u.jsxs("div",{className:"flex items-center gap-2.5 px-3 py-2.5 pl-4",children:[u.jsx("div",{className:"relative flex-shrink-0",children:t.story_type==="text"?u.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center overflow-hidden shadow-sm",style:{background:t.story_background_color||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:u.jsx("p",{className:"text-white text-[10px] font-medium leading-tight text-center px-1.5 line-clamp-3",children:t.story_preview})}):t.story_type==="image"?u.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-muted shadow-sm",children:u.jsx(ys,{src:t.story_preview||"",alt:"Story",className:"w-full h-full object-cover"})}):u.jsxs("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-muted shadow-sm relative",children:[u.jsx(ys,{src:t.story_preview||"",alt:"Story",className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:u.jsx("div",{className:"w-6 h-6 rounded-full bg-white/90 flex items-center justify-center",children:u.jsx("svg",{className:"w-3 h-3 text-black ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M8 5v14l11-7z"})})})})]})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[u.jsxs("svg",{className:`w-4 h-4 flex-shrink-0 ${e?"text-white/70":"text-primary"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"2"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6l4 2"})]}),u.jsxs("span",{className:`text-xs font-medium truncate ${e?"text-white/90":"text-foreground"}`,children:[t.story_user_name,"'s status"]})]}),u.jsx("p",{className:`text-[11px] truncate ${e?"text-white/60":"text-muted-foreground"}`,children:t.story_type==="text"?u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})}),"Text status"]}):t.story_type==="image"?u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),"Photo"]}):u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})}),"Video"]})})]})]})]})}function $_(t){const e=t+"CollectionProvider",[n,s]=Dr(e),[i,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),l=S=>{const{scope:j,children:C}=S,T=ue.useRef(null),E=ue.useRef(new Map).current;return u.jsx(i,{scope:j,itemMap:E,collectionRef:T,children:C})};l.displayName=e;const d=t+"CollectionSlot",h=eo(d),p=ue.forwardRef((S,j)=>{const{scope:C,children:T}=S,E=a(d,C),N=mt(j,E.collectionRef);return u.jsx(h,{ref:N,children:T})});p.displayName=d;const m=t+"CollectionItemSlot",g="data-radix-collection-item",y=eo(m),b=ue.forwardRef((S,j)=>{const{scope:C,children:T,...E}=S,N=ue.useRef(null),P=mt(j,N),M=a(m,C);return ue.useEffect(()=>(M.itemMap.set(N,{ref:N,...E}),()=>void M.itemMap.delete(N))),u.jsx(y,{[g]:"",ref:P,children:T})});b.displayName=m;function _(S){const j=a(t+"CollectionConsumer",S);return ue.useCallback(()=>{const T=j.collectionRef.current;if(!T)return[];const E=Array.from(T.querySelectorAll(`[${g}]`));return Array.from(j.itemMap.values()).sort((M,L)=>E.indexOf(M.ref.current)-E.indexOf(L.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:l,Slot:p,ItemSlot:b},_,s]}var YD=w.createContext(void 0);function F_(t){const e=w.useContext(YD);return t||e||"ltr"}var ih="rovingFocusGroup.onEntryFocus",JD={bubbles:!1,cancelable:!0},nl="RovingFocusGroup",[ip,V_,XD]=$_(nl),[QD,B_]=Dr(nl,[XD]),[ZD,eL]=QD(nl),U_=w.forwardRef((t,e)=>u.jsx(ip.Provider,{scope:t.__scopeRovingFocusGroup,children:u.jsx(ip.Slot,{scope:t.__scopeRovingFocusGroup,children:u.jsx(tL,{...t,ref:e})})}));U_.displayName=nl;var tL=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:i=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:h,onEntryFocus:p,preventScrollOnEntryFocus:m=!1,...g}=t,y=w.useRef(null),b=mt(e,y),_=F_(a),[S,j]=Qa({prop:l,defaultProp:d??null,onChange:h,caller:nl}),[C,T]=w.useState(!1),E=Or(p),N=V_(n),P=w.useRef(!1),[M,L]=w.useState(0);return w.useEffect(()=>{const $=y.current;if($)return $.addEventListener(ih,E),()=>$.removeEventListener(ih,E)},[E]),u.jsx(ZD,{scope:n,orientation:s,dir:_,loop:i,currentTabStopId:S,onItemFocus:w.useCallback($=>j($),[j]),onItemShiftTab:w.useCallback(()=>T(!0),[]),onFocusableItemAdd:w.useCallback(()=>L($=>$+1),[]),onFocusableItemRemove:w.useCallback(()=>L($=>$-1),[]),children:u.jsx(Ge.div,{tabIndex:C||M===0?-1:0,"data-orientation":s,...g,ref:b,style:{outline:"none",...t.style},onMouseDown:Ie(t.onMouseDown,()=>{P.current=!0}),onFocus:Ie(t.onFocus,$=>{const z=!P.current;if($.target===$.currentTarget&&z&&!C){const W=new CustomEvent(ih,JD);if($.currentTarget.dispatchEvent(W),!W.defaultPrevented){const Z=N().filter(Q=>Q.focusable),X=Z.find(Q=>Q.active),ee=Z.find(Q=>Q.id===S),oe=[X,ee,...Z].filter(Boolean).map(Q=>Q.ref.current);H_(oe,m)}}P.current=!1}),onBlur:Ie(t.onBlur,()=>T(!1))})})}),z_="RovingFocusGroupItem",W_=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:i=!1,tabStopId:a,children:l,...d}=t,h=jn(),p=a||h,m=eL(z_,n),g=m.currentTabStopId===p,y=V_(n),{onFocusableItemAdd:b,onFocusableItemRemove:_,currentTabStopId:S}=m;return w.useEffect(()=>{if(s)return b(),()=>_()},[s,b,_]),u.jsx(ip.ItemSlot,{scope:n,id:p,focusable:s,active:i,children:u.jsx(Ge.span,{tabIndex:g?0:-1,"data-orientation":m.orientation,...d,ref:e,onMouseDown:Ie(t.onMouseDown,j=>{s?m.onItemFocus(p):j.preventDefault()}),onFocus:Ie(t.onFocus,()=>m.onItemFocus(p)),onKeyDown:Ie(t.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){m.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const C=sL(j,m.orientation,m.dir);if(C!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let E=y().filter(N=>N.focusable).map(N=>N.ref.current);if(C==="last")E.reverse();else if(C==="prev"||C==="next"){C==="prev"&&E.reverse();const N=E.indexOf(j.currentTarget);E=m.loop?oL(E,N+1):E.slice(N+1)}setTimeout(()=>H_(E))}}),children:typeof l=="function"?l({isCurrentTabStop:g,hasTabStop:S!=null}):l})})});W_.displayName=z_;var nL={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function rL(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function sL(t,e,n){const s=rL(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return nL[s]}function H_(t,e=!1){const n=document.activeElement;for(const s of t)if(s===n||(s.focus({preventScroll:e}),document.activeElement!==n))return}function oL(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var iL=U_,aL=W_,ap=["Enter"," "],lL=["ArrowDown","PageUp","Home"],K_=["ArrowUp","PageDown","End"],cL=[...lL,...K_],uL={ltr:[...ap,"ArrowRight"],rtl:[...ap,"ArrowLeft"]},dL={ltr:["ArrowLeft"],rtl:["ArrowRight"]},rl="Menu",[za,fL,hL]=$_(rl),[oo,G_]=Dr(rl,[hL,Cu,B_]),Nu=Cu(),q_=B_(),[pL,io]=oo(rl),[mL,sl]=oo(rl),Y_=t=>{const{__scopeMenu:e,open:n=!1,children:s,dir:i,onOpenChange:a,modal:l=!0}=t,d=Nu(e),[h,p]=w.useState(null),m=w.useRef(!1),g=Or(a),y=F_(i);return w.useEffect(()=>{const b=()=>{m.current=!0,document.addEventListener("pointerdown",_,{capture:!0,once:!0}),document.addEventListener("pointermove",_,{capture:!0,once:!0})},_=()=>m.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",_,{capture:!0}),document.removeEventListener("pointermove",_,{capture:!0})}},[]),u.jsx(y_,{...d,children:u.jsx(pL,{scope:e,open:n,onOpenChange:g,content:h,onContentChange:p,children:u.jsx(mL,{scope:e,onClose:w.useCallback(()=>g(!1),[g]),isUsingKeyboardRef:m,dir:y,modal:l,children:s})})})};Y_.displayName=rl;var gL="MenuAnchor",Cm=w.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t,i=Nu(n);return u.jsx(km,{...i,...s,ref:e})});Cm.displayName=gL;var Em="MenuPortal",[vL,J_]=oo(Em,{forceMount:void 0}),X_=t=>{const{__scopeMenu:e,forceMount:n,children:s,container:i}=t,a=io(Em,e);return u.jsx(vL,{scope:e,forceMount:n,children:u.jsx(vr,{present:n||a.open,children:u.jsx(mu,{asChild:!0,container:i,children:s})})})};X_.displayName=Em;var Fn="MenuContent",[yL,Nm]=oo(Fn),Q_=w.forwardRef((t,e)=>{const n=J_(Fn,t.__scopeMenu),{forceMount:s=n.forceMount,...i}=t,a=io(Fn,t.__scopeMenu),l=sl(Fn,t.__scopeMenu);return u.jsx(za.Provider,{scope:t.__scopeMenu,children:u.jsx(vr,{present:s||a.open,children:u.jsx(za.Slot,{scope:t.__scopeMenu,children:l.modal?u.jsx(xL,{...i,ref:e}):u.jsx(wL,{...i,ref:e})})})})}),xL=w.forwardRef((t,e)=>{const n=io(Fn,t.__scopeMenu),s=w.useRef(null),i=mt(e,s);return w.useEffect(()=>{const a=s.current;if(a)return lm(a)},[]),u.jsx(Tm,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ie(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),wL=w.forwardRef((t,e)=>{const n=io(Fn,t.__scopeMenu);return u.jsx(Tm,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),bL=eo("MenuContent.ScrollLock"),Tm=w.forwardRef((t,e)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:d,onEntryFocus:h,onEscapeKeyDown:p,onPointerDownOutside:m,onFocusOutside:g,onInteractOutside:y,onDismiss:b,disableOutsideScroll:_,...S}=t,j=io(Fn,n),C=sl(Fn,n),T=Nu(n),E=q_(n),N=fL(n),[P,M]=w.useState(null),L=w.useRef(null),$=mt(e,L,j.onContentChange),z=w.useRef(0),W=w.useRef(""),Z=w.useRef(0),X=w.useRef(null),ee=w.useRef("right"),fe=w.useRef(0),oe=_?vu:w.Fragment,Q=_?{as:bL,allowPinchZoom:!0}:void 0,Y=B=>{const J=W.current+B,A=N().filter(ne=>!ne.disabled),I=document.activeElement,H=A.find(ne=>ne.ref.current===I)?.textValue,G=A.map(ne=>ne.textValue),q=OL(G,J,H),ae=A.find(ne=>ne.textValue===q)?.ref.current;(function ne(de){W.current=de,window.clearTimeout(z.current),de!==""&&(z.current=window.setTimeout(()=>ne(""),1e3))})(J),ae&&setTimeout(()=>ae.focus())};w.useEffect(()=>()=>window.clearTimeout(z.current),[]),am();const O=w.useCallback(B=>ee.current===X.current?.side&&ML(B,X.current?.area),[]);return u.jsx(yL,{scope:n,searchRef:W,onItemEnter:w.useCallback(B=>{O(B)&&B.preventDefault()},[O]),onItemLeave:w.useCallback(B=>{O(B)||(L.current?.focus(),M(null))},[O]),onTriggerLeave:w.useCallback(B=>{O(B)&&B.preventDefault()},[O]),pointerGraceTimerRef:Z,onPointerGraceIntentChange:w.useCallback(B=>{X.current=B},[]),children:u.jsx(oe,{...Q,children:u.jsx(pu,{asChild:!0,trapped:i,onMountAutoFocus:Ie(a,B=>{B.preventDefault(),L.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:u.jsx(hu,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:p,onPointerDownOutside:m,onFocusOutside:g,onInteractOutside:y,onDismiss:b,children:u.jsx(iL,{asChild:!0,...E,dir:C.dir,orientation:"vertical",loop:s,currentTabStopId:P,onCurrentTabStopIdChange:M,onEntryFocus:Ie(h,B=>{C.isUsingKeyboardRef.current||B.preventDefault()}),preventScrollOnEntryFocus:!0,children:u.jsx(x_,{role:"menu","aria-orientation":"vertical","data-state":pk(j.open),"data-radix-menu-content":"",dir:C.dir,...T,...S,ref:$,style:{outline:"none",...S.style},onKeyDown:Ie(S.onKeyDown,B=>{const A=B.target.closest("[data-radix-menu-content]")===B.currentTarget,I=B.ctrlKey||B.altKey||B.metaKey,H=B.key.length===1;A&&(B.key==="Tab"&&B.preventDefault(),!I&&H&&Y(B.key));const G=L.current;if(B.target!==G||!cL.includes(B.key))return;B.preventDefault();const ae=N().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);K_.includes(B.key)&&ae.reverse(),AL(ae)}),onBlur:Ie(t.onBlur,B=>{B.currentTarget.contains(B.target)||(window.clearTimeout(z.current),W.current="")}),onPointerMove:Ie(t.onPointerMove,Wa(B=>{const J=B.target,A=fe.current!==B.clientX;if(B.currentTarget.contains(J)&&A){const I=B.clientX>fe.current?"right":"left";ee.current=I,fe.current=B.clientX}}))})})})})})})});Q_.displayName=Fn;var SL="MenuGroup",Pm=w.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return u.jsx(Ge.div,{role:"group",...s,ref:e})});Pm.displayName=SL;var _L="MenuLabel",Z_=w.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return u.jsx(Ge.div,{...s,ref:e})});Z_.displayName=_L;var ru="MenuItem",nw="menu.itemSelect",Tu=w.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:s,...i}=t,a=w.useRef(null),l=sl(ru,t.__scopeMenu),d=Nm(ru,t.__scopeMenu),h=mt(e,a),p=w.useRef(!1),m=()=>{const g=a.current;if(!n&&g){const y=new CustomEvent(nw,{bubbles:!0,cancelable:!0});g.addEventListener(nw,b=>s?.(b),{once:!0}),p1(g,y),y.defaultPrevented?p.current=!1:l.onClose()}};return u.jsx(ek,{...i,ref:h,disabled:n,onClick:Ie(t.onClick,m),onPointerDown:g=>{t.onPointerDown?.(g),p.current=!0},onPointerUp:Ie(t.onPointerUp,g=>{p.current||g.currentTarget?.click()}),onKeyDown:Ie(t.onKeyDown,g=>{const y=d.searchRef.current!=="";n||y&&g.key===" "||ap.includes(g.key)&&(g.currentTarget.click(),g.preventDefault())})})});Tu.displayName=ru;var ek=w.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:s=!1,textValue:i,...a}=t,l=Nm(ru,n),d=q_(n),h=w.useRef(null),p=mt(e,h),[m,g]=w.useState(!1),[y,b]=w.useState("");return w.useEffect(()=>{const _=h.current;_&&b((_.textContent??"").trim())},[a.children]),u.jsx(za.ItemSlot,{scope:n,disabled:s,textValue:i??y,children:u.jsx(aL,{asChild:!0,...d,focusable:!s,children:u.jsx(Ge.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...a,ref:p,onPointerMove:Ie(t.onPointerMove,Wa(_=>{s?l.onItemLeave(_):(l.onItemEnter(_),_.defaultPrevented||_.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ie(t.onPointerLeave,Wa(_=>l.onItemLeave(_))),onFocus:Ie(t.onFocus,()=>g(!0)),onBlur:Ie(t.onBlur,()=>g(!1))})})})}),kL="MenuCheckboxItem",tk=w.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:s,...i}=t;return u.jsx(ik,{scope:t.__scopeMenu,checked:n,children:u.jsx(Tu,{role:"menuitemcheckbox","aria-checked":su(n)?"mixed":n,...i,ref:e,"data-state":Rm(n),onSelect:Ie(i.onSelect,()=>s?.(su(n)?!0:!n),{checkForDefaultPrevented:!1})})})});tk.displayName=kL;var nk="MenuRadioGroup",[jL,CL]=oo(nk,{value:void 0,onValueChange:()=>{}}),rk=w.forwardRef((t,e)=>{const{value:n,onValueChange:s,...i}=t,a=Or(s);return u.jsx(jL,{scope:t.__scopeMenu,value:n,onValueChange:a,children:u.jsx(Pm,{...i,ref:e})})});rk.displayName=nk;var sk="MenuRadioItem",ok=w.forwardRef((t,e)=>{const{value:n,...s}=t,i=CL(sk,t.__scopeMenu),a=n===i.value;return u.jsx(ik,{scope:t.__scopeMenu,checked:a,children:u.jsx(Tu,{role:"menuitemradio","aria-checked":a,...s,ref:e,"data-state":Rm(a),onSelect:Ie(s.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});ok.displayName=sk;var Am="MenuItemIndicator",[ik,EL]=oo(Am,{checked:!1}),ak=w.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:s,...i}=t,a=EL(Am,n);return u.jsx(vr,{present:s||su(a.checked)||a.checked===!0,children:u.jsx(Ge.span,{...i,ref:e,"data-state":Rm(a.checked)})})});ak.displayName=Am;var NL="MenuSeparator",lk=w.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t;return u.jsx(Ge.div,{role:"separator","aria-orientation":"horizontal",...s,ref:e})});lk.displayName=NL;var TL="MenuArrow",ck=w.forwardRef((t,e)=>{const{__scopeMenu:n,...s}=t,i=Nu(n);return u.jsx(w_,{...i,...s,ref:e})});ck.displayName=TL;var PL="MenuSub",[T$,uk]=oo(PL),da="MenuSubTrigger",dk=w.forwardRef((t,e)=>{const n=io(da,t.__scopeMenu),s=sl(da,t.__scopeMenu),i=uk(da,t.__scopeMenu),a=Nm(da,t.__scopeMenu),l=w.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:h}=a,p={__scopeMenu:t.__scopeMenu},m=w.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return w.useEffect(()=>m,[m]),w.useEffect(()=>{const g=d.current;return()=>{window.clearTimeout(g),h(null)}},[d,h]),u.jsx(Cm,{asChild:!0,...p,children:u.jsx(ek,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":pk(n.open),...t,ref:Rr(e,i.onTriggerChange),onClick:g=>{t.onClick?.(g),!(t.disabled||g.defaultPrevented)&&(g.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ie(t.onPointerMove,Wa(g=>{a.onItemEnter(g),!g.defaultPrevented&&!t.disabled&&!n.open&&!l.current&&(a.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),m()},100))})),onPointerLeave:Ie(t.onPointerLeave,Wa(g=>{m();const y=n.content?.getBoundingClientRect();if(y){const b=n.content?.dataset.side,_=b==="right",S=_?-5:5,j=y[_?"left":"right"],C=y[_?"right":"left"];a.onPointerGraceIntentChange({area:[{x:g.clientX+S,y:g.clientY},{x:j,y:y.top},{x:C,y:y.top},{x:C,y:y.bottom},{x:j,y:y.bottom}],side:b}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(g),g.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Ie(t.onKeyDown,g=>{const y=a.searchRef.current!=="";t.disabled||y&&g.key===" "||uL[s.dir].includes(g.key)&&(n.onOpenChange(!0),n.content?.focus(),g.preventDefault())})})})});dk.displayName=da;var fk="MenuSubContent",hk=w.forwardRef((t,e)=>{const n=J_(Fn,t.__scopeMenu),{forceMount:s=n.forceMount,...i}=t,a=io(Fn,t.__scopeMenu),l=sl(Fn,t.__scopeMenu),d=uk(fk,t.__scopeMenu),h=w.useRef(null),p=mt(e,h);return u.jsx(za.Provider,{scope:t.__scopeMenu,children:u.jsx(vr,{present:s||a.open,children:u.jsx(za.Slot,{scope:t.__scopeMenu,children:u.jsx(Tm,{id:d.contentId,"aria-labelledby":d.triggerId,...i,ref:p,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{l.isUsingKeyboardRef.current&&h.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:Ie(t.onFocusOutside,m=>{m.target!==d.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Ie(t.onEscapeKeyDown,m=>{l.onClose(),m.preventDefault()}),onKeyDown:Ie(t.onKeyDown,m=>{const g=m.currentTarget.contains(m.target),y=dL[l.dir].includes(m.key);g&&y&&(a.onOpenChange(!1),d.trigger?.focus(),m.preventDefault())})})})})})});hk.displayName=fk;function pk(t){return t?"open":"closed"}function su(t){return t==="indeterminate"}function Rm(t){return su(t)?"indeterminate":t?"checked":"unchecked"}function AL(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function RL(t,e){return t.map((n,s)=>t[(e+s)%t.length])}function OL(t,e,n){const i=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let l=RL(t,Math.max(a,0));i.length===1&&(l=l.filter(p=>p!==n));const h=l.find(p=>p.toLowerCase().startsWith(i.toLowerCase()));return h!==n?h:void 0}function IL(t,e){const{x:n,y:s}=t;let i=!1;for(let a=0,l=e.length-1;a<e.length;l=a++){const d=e[a],h=e[l],p=d.x,m=d.y,g=h.x,y=h.y;m>s!=y>s&&n<(g-p)*(s-m)/(y-m)+p&&(i=!i)}return i}function ML(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return IL(n,e)}function Wa(t){return e=>e.pointerType==="mouse"?t(e):void 0}var DL=Y_,LL=Cm,$L=X_,FL=Q_,VL=Pm,BL=Z_,UL=Tu,zL=tk,WL=rk,HL=ok,KL=ak,GL=lk,qL=ck,YL=dk,JL=hk,Pu="DropdownMenu",[XL]=Dr(Pu,[G_]),on=G_(),[QL,mk]=XL(Pu),gk=t=>{const{__scopeDropdownMenu:e,children:n,dir:s,open:i,defaultOpen:a,onOpenChange:l,modal:d=!0}=t,h=on(e),p=w.useRef(null),[m,g]=Qa({prop:i,defaultProp:a??!1,onChange:l,caller:Pu});return u.jsx(QL,{scope:e,triggerId:jn(),triggerRef:p,contentId:jn(),open:m,onOpenChange:g,onOpenToggle:w.useCallback(()=>g(y=>!y),[g]),modal:d,children:u.jsx(DL,{...h,open:m,onOpenChange:g,dir:s,modal:d,children:n})})};gk.displayName=Pu;var vk="DropdownMenuTrigger",yk=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...i}=t,a=mk(vk,n),l=on(n);return u.jsx(LL,{asChild:!0,...l,children:u.jsx(Ge.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...i,ref:Rr(e,a.triggerRef),onPointerDown:Ie(t.onPointerDown,d=>{!s&&d.button===0&&d.ctrlKey===!1&&(a.onOpenToggle(),a.open||d.preventDefault())}),onKeyDown:Ie(t.onKeyDown,d=>{s||(["Enter"," "].includes(d.key)&&a.onOpenToggle(),d.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});yk.displayName=vk;var ZL="DropdownMenuPortal",xk=t=>{const{__scopeDropdownMenu:e,...n}=t,s=on(e);return u.jsx($L,{...s,...n})};xk.displayName=ZL;var wk="DropdownMenuContent",bk=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,i=mk(wk,n),a=on(n),l=w.useRef(!1);return u.jsx(FL,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...s,ref:e,onCloseAutoFocus:Ie(t.onCloseAutoFocus,d=>{l.current||i.triggerRef.current?.focus(),l.current=!1,d.preventDefault()}),onInteractOutside:Ie(t.onInteractOutside,d=>{const h=d.detail.originalEvent,p=h.button===0&&h.ctrlKey===!0,m=h.button===2||p;(!i.modal||m)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bk.displayName=wk;var e6="DropdownMenuGroup",t6=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,i=on(n);return u.jsx(VL,{...i,...s,ref:e})});t6.displayName=e6;var n6="DropdownMenuLabel",r6=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,i=on(n);return u.jsx(BL,{...i,...s,ref:e})});r6.displayName=n6;var s6="DropdownMenuItem",Sk=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,i=on(n);return u.jsx(UL,{...i,...s,ref:e})});Sk.displayName=s6;var o6="DropdownMenuCheckboxItem",i6=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,i=on(n);return u.jsx(zL,{...i,...s,ref:e})});i6.displayName=o6;var a6="DropdownMenuRadioGroup",l6=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,i=on(n);return u.jsx(WL,{...i,...s,ref:e})});l6.displayName=a6;var c6="DropdownMenuRadioItem",u6=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,i=on(n);return u.jsx(HL,{...i,...s,ref:e})});u6.displayName=c6;var d6="DropdownMenuItemIndicator",f6=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,i=on(n);return u.jsx(KL,{...i,...s,ref:e})});f6.displayName=d6;var h6="DropdownMenuSeparator",_k=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,i=on(n);return u.jsx(GL,{...i,...s,ref:e})});_k.displayName=h6;var p6="DropdownMenuArrow",m6=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,i=on(n);return u.jsx(qL,{...i,...s,ref:e})});m6.displayName=p6;var g6="DropdownMenuSubTrigger",v6=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,i=on(n);return u.jsx(YL,{...i,...s,ref:e})});v6.displayName=g6;var y6="DropdownMenuSubContent",x6=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...s}=t,i=on(n);return u.jsx(JL,{...i,...s,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});x6.displayName=y6;var w6=gk,b6=yk,S6=xk,_6=bk,k6=Sk,j6=_k;function kk({...t}){return u.jsx(w6,{"data-slot":"dropdown-menu",...t})}function jk({...t}){return u.jsx(b6,{"data-slot":"dropdown-menu-trigger",...t})}function Ck({className:t,sideOffset:e=4,...n}){return u.jsx(S6,{children:u.jsx(_6,{"data-slot":"dropdown-menu-content",sideOffset:e,className:Qe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function ba({className:t,inset:e,variant:n="default",...s}){return u.jsx(k6,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":n,className:Qe("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function Ek({className:t,...e}){return u.jsx(j6,{"data-slot":"dropdown-menu-separator",className:Qe("bg-border -mx-1 my-1 h-px",t),...e})}function rw(t){const e=/(https?:\/\/[^\s]+)/g;return t.split(e).map((s,i)=>s.match(e)?u.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"underline hover:no-underline",children:s},i):s)}function C6({message:t,isSent:e,showAvatar:n=!0,showTimestamp:s=!0,onReply:i,onReact:a,onDeleteForMe:l,onDeleteForEveryone:d,currentUserId:h}){const[p,m]=w.useState(!1);if(t.deleted_for_everyone)return u.jsxs("div",{className:`flex gap-2 ${e?"flex-row-reverse":"flex-row"} w-full`,children:[n&&!e?u.jsx(sn,{src:t.sender?.avatar_url,alt:t.sender?.full_name,size:"sm",className:"self-end shrink-0"}):e?null:u.jsx("div",{className:"w-8 shrink-0"}),u.jsx("div",{className:`flex flex-col ${e?"items-end":"items-start"} max-w-[80%] min-w-0`,children:u.jsx("div",{className:`px-4 py-2 rounded-lg italic text-sm ${e?"bg-[var(--message-sent)]/20 text-[var(--message-sent-foreground)]/70":"bg-[var(--message-received)] text-[var(--message-received-foreground)]/70"}`,children:" This message was deleted"})})]});if(t.deleted_for_users?.includes(h))return null;const g=new Date(t.created_at).getTime(),y=Date.now(),b=e&&y-g<3600*1e3,_=N=>new Date(N).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),S=N=>{a&&a(N),m(!1)},j=t.type==="voice"||t.attachments&&t.attachments.length>0&&t.attachments[0].type==="audio",C=t.type==="image"&&t.attachments&&t.attachments.length>0,T=()=>{if(!t.statuses||t.statuses.length===0)return u.jsx(Xs,{className:"w-4 h-4 opacity-60"});const N=t.statuses.some(M=>M.status==="read"),P=t.statuses.some(M=>M.status==="delivered");return N?u.jsx(Da,{className:"w-4 h-4 text-[#53bdeb]"}):P?u.jsx(Da,{className:"w-4 h-4 opacity-60"}):u.jsx(Xs,{className:"w-4 h-4 opacity-60"})},E=t.body&&t.body.length>200;return u.jsxs("div",{className:`flex gap-2 group ${e?"flex-row-reverse":"flex-row"} w-full`,children:[n&&!e?u.jsx(sn,{src:t.sender?.avatar_url,alt:t.sender?.full_name,fallbackText:t.sender?.full_name,size:"sm",className:"self-end shrink-0"}):e?null:u.jsx("div",{className:"w-8 shrink-0"}),u.jsxs("div",{className:`flex flex-col ${e?"items-end":"items-start"} max-w-[80%] min-w-0`,children:[t.reply_to_message&&u.jsxs("div",{className:`mb-1.5 px-3 py-2 rounded-md border-l-4 w-full max-w-full ${e?"bg-primary-foreground/10 border-primary-foreground/30":"bg-muted/70 border-primary/50"}`,children:[u.jsx("div",{className:`text-xs font-medium mb-0.5 truncate ${e?"text-primary-foreground/80":"text-primary"}`,children:t.reply_to_message.sender?.full_name}),u.jsx("div",{className:`text-xs opacity-70 truncate ${e?"text-primary-foreground/70":"text-foreground/70"}`,children:t.reply_to_message.body||" Photo"})]}),u.jsxs("div",{className:"relative w-full max-w-full",children:[u.jsxs("div",{className:`absolute top-0 ${e?"left-0 -translate-x-full":"right-0 translate-x-full"} 
            opacity-0 group-hover:opacity-100 transition-opacity flex gap-1 px-2`,children:[u.jsx(L_,{onEmojiSelect:S,trigger:u.jsx("button",{className:"p-1.5 rounded-full bg-surface border border-border hover:bg-[var(--hover-surface)] transition-colors shadow-md","aria-label":"Add reaction",children:u.jsx(Jb,{className:"w-4 h-4 text-muted-foreground"})})}),u.jsx("button",{onClick:i,className:"p-1.5 rounded-full bg-surface border border-border hover:bg-[var(--hover-surface)] transition-colors shadow-md","aria-label":"Reply",children:u.jsx(sR,{className:"w-4 h-4 text-muted-foreground"})}),u.jsxs(kk,{children:[u.jsx(jk,{asChild:!0,children:u.jsx("button",{className:"p-1.5 rounded-full bg-surface border border-border hover:bg-[var(--hover-surface)] transition-colors shadow-md","aria-label":"More options",children:u.jsx(Hp,{className:"w-4 h-4 text-muted-foreground"})})}),u.jsxs(Ck,{align:e?"end":"start",className:"w-48",children:[l&&u.jsxs(ba,{onClick:l,className:"text-destructive",children:[u.jsx(oi,{className:"w-4 h-4 mr-2"}),"Delete for me"]}),e&&b&&d&&u.jsxs(u.Fragment,{children:[u.jsx(Ek,{}),u.jsxs(ba,{onClick:d,className:"text-destructive",children:[u.jsx(oi,{className:"w-4 h-4 mr-2"}),"Delete for everyone"]})]})]})]})]}),u.jsxs("div",{className:`relative rounded-lg message-bubble-shadow overflow-hidden ${t.story_reply?"min-w-[280px]":""} ${e?"bg-[var(--message-sent)] text-[var(--message-sent-foreground)] rounded-tr-sm":"bg-[var(--message-received)] text-[var(--message-received-foreground)] rounded-tl-sm"}`,children:[s&&!C&&u.jsx("div",{className:`absolute top-0 w-0 h-0 ${e?"right-0 border-l-[8px] border-l-[var(--message-sent)] border-t-[8px] border-t-transparent":"left-0 border-r-[8px] border-r-[var(--message-received)] border-t-[8px] border-t-transparent"}`,style:{transform:e?"translateX(100%)":"translateX(-100%)"}}),C?u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"overflow-hidden rounded-lg relative bg-muted/30",style:{minWidth:"200px",maxWidth:"330px"},children:[u.jsx("div",{className:"relative w-full",style:{maxHeight:"400px"},children:u.jsx(ys,{src:t.attachments[0].url,alt:"Shared image",className:"block w-full h-auto object-contain",style:{borderRadius:"7px",display:"block",maxHeight:"400px",width:"100%",height:"auto"}})}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-20 bg-gradient-to-t from-black/60 via-black/30 to-transparent pointer-events-none rounded-b-lg"}),u.jsxs("div",{className:"absolute bottom-2 right-2.5 flex items-center gap-1.5 px-2 py-0.5 rounded-md bg-black/20 backdrop-blur-sm",children:[t.edited_at&&u.jsx("span",{className:"text-[11px] text-white/95 drop-shadow-md font-normal",children:"edited"}),u.jsx("span",{className:"text-[11px] text-white/95 drop-shadow-md font-normal",children:_(t.created_at)}),e&&u.jsx("span",{className:"text-white/95 drop-shadow-md flex items-center",children:T()})]})]}),t.body&&u.jsx("div",{className:"px-3 py-2 pt-2",children:u.jsxs("div",{className:"message-text-content relative",children:[u.jsx("div",{className:"whitespace-pre-wrap break-words text-[15px] leading-[1.4]",style:{wordBreak:"break-word",overflowWrap:"anywhere"},children:rw(t.body)}),u.jsx("div",{className:"inline-block w-[80px] h-0"}),u.jsxs("div",{className:"flex items-center justify-end gap-1 absolute bottom-0 right-0",children:[u.jsx("span",{className:`text-[11px] ${e?"text-primary-foreground/70":"text-muted-foreground"}`,children:_(t.created_at)}),e&&u.jsx("span",{className:`flex items-center ml-1 ${e?"text-primary-foreground/70":"text-muted-foreground"}`,children:T()})]})]})})]}):u.jsxs("div",{className:`${E||t.story_reply?"px-3 py-2.5":"px-3 py-2"}`,children:[t.story_reply&&u.jsx("div",{className:"mb-2 -mx-0.5",children:u.jsx(qD,{storyReply:t.story_reply,isOwnMessage:e})}),j&&t.attachments&&t.attachments.length>0&&u.jsx(GD,{audioUrl:t.attachments[0].url,duration:t.attachments[0].duration,isSent:e}),t.body&&!j&&u.jsxs("div",{className:"message-text-content",children:[u.jsx("div",{className:`whitespace-pre-wrap break-words ${E?"text-[15px] leading-[1.5]":"text-[15px] leading-[1.4]"}`,style:{wordBreak:"break-word",overflowWrap:"anywhere"},children:rw(t.body)}),u.jsx("div",{className:"inline-block w-[80px] h-0"})]}),u.jsxs("div",{className:`flex items-center justify-end gap-1 ${t.body&&!j?"absolute bottom-2 right-3":"mt-1"}`,children:[t.edited_at&&u.jsx("span",{className:`text-[11px] mr-1 ${e?"text-primary-foreground/60":"text-muted-foreground/80"}`,children:"edited"}),s&&u.jsx("span",{className:`text-[11px] ${e?"text-primary-foreground/70":"text-muted-foreground"}`,children:_(t.created_at)}),e&&u.jsx("span",{className:"flex items-center ml-1 opacity-90",children:T()})]})]}),t.reactions&&t.reactions.length>0&&u.jsx("div",{className:"flex flex-wrap gap-1 px-3 pb-2 -mt-1",children:Object.entries(t.reactions.reduce((N,P)=>(N[P.emoji]=(N[P.emoji]||0)+1,N),{})).map(([N,P])=>u.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs border transition-colors cursor-pointer ${e?"bg-primary-foreground/10 border-primary-foreground/20 hover:bg-primary-foreground/20":"bg-muted/50 border-border hover:bg-muted"}`,children:[u.jsx("span",{children:N}),P>1&&u.jsx("span",{className:"text-xs opacity-70",children:P})]},N))})]})]})]})]})}const je=p2;function E6({onRecordingComplete:t,onCancel:e}){const[n,s]=w.useState(!1),[i,a]=w.useState(!1),[l,d]=w.useState(0),[h,p]=w.useState(null),m=w.useRef(null),g=w.useRef([]),y=w.useRef(null),b=w.useRef(null);w.useEffect(()=>(_(),()=>{S()}),[]);const _=async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){je.error("Voice recording not supported",{description:"Your browser does not support voice recording"}),e();return}const P=await navigator.mediaDevices.getUserMedia({audio:!0});b.current=P;const M=new MediaRecorder(P);m.current=M,g.current=[],M.ondataavailable=L=>{L.data.size>0&&g.current.push(L.data)},M.onstop=()=>{const L=new Blob(g.current,{type:"audio/webm"});p(L),S()},M.start(),s(!0),y.current=setInterval(()=>{d(L=>L+1)},1e3)}catch(P){console.error("Failed to start recording:",P),P instanceof Error?P.name==="NotAllowedError"?je.error("Microphone access denied",{description:"Please allow microphone access in your browser settings to send voice messages",duration:5e3}):P.name==="NotFoundError"?je.error("No microphone found",{description:"Please connect a microphone to record voice messages",duration:5e3}):P.name==="NotReadableError"?je.error("Microphone is busy",{description:"Your microphone is already in use by another application",duration:5e3}):je.error("Failed to access microphone",{description:P.message||"Please check your browser settings",duration:5e3}):je.error("Failed to access microphone",{description:"Please allow microphone access to send voice messages",duration:5e3}),e()}},S=()=>{y.current&&clearInterval(y.current),b.current&&b.current.getTracks().forEach(P=>P.stop())},j=()=>{m.current&&(i?(m.current.resume(),y.current=setInterval(()=>{d(P=>P+1)},1e3),a(!1)):(m.current.pause(),y.current&&clearInterval(y.current),a(!0)))},C=()=>{m.current&&m.current.state!=="inactive"&&(m.current.stop(),s(!1))},T=()=>{h?t(h,l):(C(),setTimeout(()=>{if(g.current.length>0){const P=new Blob(g.current,{type:"audio/webm"});t(P,l)}},100))},E=()=>{m.current&&m.current.state!=="inactive"&&m.current.stop(),S(),e()},N=P=>{const M=Math.floor(P/60),L=P%60;return`${M}:${L.toString().padStart(2,"0")}`};return u.jsx("div",{className:"bg-surface border-t border-border p-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Ae,{variant:"ghost",size:"icon",onClick:E,className:"h-10 w-10","aria-label":"Cancel recording",children:u.jsx(Zs,{className:"w-5 h-5"})}),u.jsxs("div",{className:"flex-1 flex items-center gap-3 bg-destructive/10 rounded-full px-4 py-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[n&&!i&&u.jsx("div",{className:"w-3 h-3 bg-destructive rounded-full animate-pulse"}),u.jsx(Qs,{className:"w-5 h-5 text-destructive"})]}),u.jsx("div",{className:"flex-1",children:u.jsx("div",{className:"h-8 flex items-center gap-1",children:n&&!i&&u.jsx(u.Fragment,{children:[...Array(20)].map((P,M)=>u.jsx("div",{className:"w-1 bg-destructive rounded-full",style:{height:`${Math.random()*100}%`,animation:`pulse ${.5+Math.random()*.5}s infinite ease-in-out`,animationDelay:`${M*.05}s`}},M))})})}),u.jsx("span",{className:"text-sm font-mono",children:N(l)})]}),n&&u.jsx(Ae,{variant:"ghost",size:"icon",onClick:j,className:"h-10 w-10","aria-label":i?"Resume recording":"Pause recording",children:i?u.jsx(Yb,{className:"w-5 h-5"}):u.jsx(qb,{className:"w-5 h-5"})}),u.jsx(Ae,{size:"icon",onClick:T,disabled:l<1,className:"h-10 w-10 rounded-full","aria-label":"Send voice message",children:u.jsx(uu,{className:"w-5 h-5"})})]})})}var Nk="AlertDialog",[N6]=Dr(Nk,[_S]),Lr=_S(),Tk=t=>{const{__scopeAlertDialog:e,...n}=t,s=Lr(e);return u.jsx(fm,{...s,...n,modal:!0})};Tk.displayName=Nk;var T6="AlertDialogTrigger",P6=w.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,i=Lr(n);return u.jsx(jM,{...i,...s,ref:e})});P6.displayName=T6;var A6="AlertDialogPortal",Pk=t=>{const{__scopeAlertDialog:e,...n}=t,s=Lr(e);return u.jsx(hm,{...s,...n})};Pk.displayName=A6;var R6="AlertDialogOverlay",Ak=w.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,i=Lr(n);return u.jsx(xu,{...i,...s,ref:e})});Ak.displayName=R6;var ni="AlertDialogContent",[O6,I6]=N6(ni),M6=OR("AlertDialogContent"),Rk=w.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:s,...i}=t,a=Lr(n),l=w.useRef(null),d=mt(e,l),h=w.useRef(null);return u.jsx(bM,{contentName:ni,titleName:Ok,docsSlug:"alert-dialog",children:u.jsx(O6,{scope:n,cancelRef:h,children:u.jsxs(wu,{role:"alertdialog",...a,...i,ref:d,onOpenAutoFocus:Ie(i.onOpenAutoFocus,p=>{p.preventDefault(),h.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[u.jsx(M6,{children:s}),u.jsx(L6,{contentRef:l})]})})})});Rk.displayName=ni;var Ok="AlertDialogTitle",Ik=w.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,i=Lr(n);return u.jsx(FS,{...i,...s,ref:e})});Ik.displayName=Ok;var Mk="AlertDialogDescription",Dk=w.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,i=Lr(n);return u.jsx(VS,{...i,...s,ref:e})});Dk.displayName=Mk;var D6="AlertDialogAction",Lk=w.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,i=Lr(n);return u.jsx(pm,{...i,...s,ref:e})});Lk.displayName=D6;var $k="AlertDialogCancel",Fk=w.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...s}=t,{cancelRef:i}=I6($k,n),a=Lr(n),l=mt(e,i);return u.jsx(pm,{...a,...s,ref:l})});Fk.displayName=$k;var L6=({contentRef:t})=>{const e=`\`${ni}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ni}\` by passing a \`${Mk}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ni}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return w.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},$6=Tk,F6=Pk,V6=Ak,B6=Rk,U6=Lk,z6=Fk,W6=Ik,H6=Dk;function Sa({...t}){return u.jsx($6,{"data-slot":"alert-dialog",...t})}function K6({...t}){return u.jsx(F6,{"data-slot":"alert-dialog-portal",...t})}function G6({className:t,...e}){return u.jsx(V6,{"data-slot":"alert-dialog-overlay",className:Qe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function _a({className:t,...e}){return u.jsxs(K6,{children:[u.jsx(G6,{}),u.jsx(B6,{"data-slot":"alert-dialog-content",className:Qe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...e})]})}function ka({className:t,...e}){return u.jsx("div",{"data-slot":"alert-dialog-header",className:Qe("flex flex-col gap-2 text-center sm:text-left",t),...e})}function ja({className:t,...e}){return u.jsx("div",{"data-slot":"alert-dialog-footer",className:Qe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function Ca({className:t,...e}){return u.jsx(W6,{"data-slot":"alert-dialog-title",className:Qe("text-lg font-semibold",t),...e})}function Ea({className:t,...e}){return u.jsx(H6,{"data-slot":"alert-dialog-description",className:Qe("text-muted-foreground text-sm",t),...e})}function Na({className:t,...e}){return u.jsx(U6,{className:Qe(qp(),t),...e})}function Ta({className:t,...e}){return u.jsx(z6,{className:Qe(qp({variant:"outline"}),t),...e})}function q6({open:t,onOpenChange:e,onAllow:n}){return u.jsx(Sa,{open:t,onOpenChange:e,children:u.jsxs(_a,{children:[u.jsxs(ka,{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:u.jsx(Qs,{className:"w-6 h-6 text-primary"})}),u.jsx(Ca,{children:"Microphone Access Required"})]}),u.jsxs(Ea,{className:"space-y-3",children:[u.jsx("p",{children:"AuroraLink needs access to your microphone to record voice messages."}),u.jsx("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx(Hb,{className:"w-4 h-4 text-info mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"text-sm space-y-2",children:[u.jsx("p",{className:"font-medium",children:"What happens next:"}),u.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-muted-foreground",children:[u.jsx("li",{children:"Your browser will ask for microphone permission"}),u.jsx("li",{children:'Click "Allow" to enable voice messages'}),u.jsx("li",{children:"You can revoke access anytime in browser settings"})]})]})]})}),u.jsx("div",{className:"bg-warning/10 border border-warning/20 rounded-lg p-3",children:u.jsxs("p",{className:"text-sm text-warning-foreground",children:[u.jsx("strong",{children:"Privacy Note:"})," Your voice is only recorded when you press the microphone button. Recordings are sent directly to the recipient and stored securely."]})})]})]}),u.jsxs(ja,{children:[u.jsx(Ta,{children:"Cancel"}),u.jsx(Na,{onClick:n,children:"Allow Microphone Access"})]})]})})}function Y6({onSend:t,onTyping:e,placeholder:n="Type a message",disabled:s=!1}){const[i,a]=w.useState(""),[l,d]=w.useState([]),[h,p]=w.useState(!1),[m,g]=w.useState(!1),[y,b]=w.useState(!1),[_,S]=w.useState(!1),j=w.useRef(null),C=w.useRef(null),T=w.useRef(null),E=w.useRef(null),N=oe=>{const Q=oe.target.value;a(Q),j.current&&(j.current.style.height="auto",j.current.style.height=`${Math.min(j.current.scrollHeight,120)}px`),e&&(e(!0),E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{e(!1)},1e3))},P=()=>{!i.trim()&&l.length===0||s||(t(i,l),a(""),d([]),j.current&&(j.current.style.height="auto"),e&&e(!1))},M=oe=>{oe.key==="Enter"&&!oe.shiftKey&&(oe.preventDefault(),P())},L=oe=>{oe.target.files&&(d([...l,...Array.from(oe.target.files)]),S(!1))},$=oe=>{const Q=l[oe];Q&&Q.type.startsWith("image/")&&document.querySelectorAll('img[src^="blob:"]').forEach(O=>{const B=O.src;B.startsWith("blob:")&&URL.revokeObjectURL(B)}),d(l.filter((Y,O)=>O!==oe))};w.useEffect(()=>()=>{l.forEach(oe=>{oe.type.startsWith("image/")&&document.querySelectorAll('img[src^="blob:"]').forEach(Y=>{const O=Y.src;O.startsWith("blob:")&&URL.revokeObjectURL(O)})})},[l]);const z=async()=>{try{return navigator.permissions&&navigator.permissions.query?(await navigator.permissions.query({name:"microphone"})).state:"prompt"}catch(oe){return console.log("Permissions API not available:",oe),"prompt"}},W=async()=>{if(h){p(!1);return}const oe=await z();if(oe==="denied"){je.error("Microphone access blocked",{description:"Please enable microphone access in your browser settings",duration:6e3});return}if(!y&&oe==="prompt"){g(!0);return}p(!0)},Z=()=>{b(!0),g(!1),p(!0)},X=(oe,Q)=>{const Y=new File([oe],`voice-${Date.now()}.webm`,{type:"audio/webm"});d([Y]),p(!1),t("",[Y]),d([])},ee=()=>{p(!1)},fe=oe=>{a(i+oe),j.current&&j.current.focus()};return h?u.jsx(E6,{onRecordingComplete:X,onCancel:ee}):u.jsxs(u.Fragment,{children:[u.jsx(q6,{open:m,onOpenChange:g,onAllow:Z}),u.jsxs("div",{className:"bg-surface border-t border-border w-full shrink-0",children:[l.length>0&&u.jsx("div",{className:"px-3 pt-3 pb-2 flex gap-2 flex-wrap border-b border-border w-full overflow-x-auto",children:l.map((oe,Q)=>{const Y=oe.type.startsWith("image/"),O=Y?URL.createObjectURL(oe):null;return u.jsx("div",{className:"relative group bg-muted rounded-lg overflow-hidden flex items-center",style:{minWidth:Y?"80px":"auto"},children:Y&&O?u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:O,alt:oe.name,className:"w-20 h-20 object-cover rounded-lg",style:{display:"block"}}),u.jsx("button",{onClick:()=>$(Q),className:"absolute top-1 right-1 bg-black/60 hover:bg-black/80 text-white rounded-full p-1 transition-colors","aria-label":"Remove attachment",children:u.jsx(Zs,{className:"w-3 h-3"})})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"px-3 py-2 flex items-center gap-2",children:[u.jsx(D0,{className:"w-4 h-4 text-muted-foreground shrink-0"}),u.jsx("span",{className:"text-sm truncate max-w-[150px]",children:oe.name})]}),u.jsx("button",{onClick:()=>$(Q),className:"opacity-0 group-hover:opacity-100 transition-opacity px-2","aria-label":"Remove attachment",children:u.jsx(Zs,{className:"w-4 h-4"})})]})},Q)})}),u.jsxs("div",{className:"px-2 py-2 sm:px-4 sm:py-3 flex items-end gap-1 sm:gap-2 w-full max-w-full",children:[u.jsx("input",{ref:C,type:"file",className:"hidden",onChange:L,multiple:!0}),u.jsx("input",{ref:T,type:"file",accept:"image/*",className:"hidden",onChange:L,multiple:!0}),u.jsx(L_,{onEmojiSelect:fe,trigger:u.jsx(Ae,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full hover:bg-[var(--hover-surface)] text-muted-foreground shrink-0 transition-colors",disabled:s,"aria-label":"Add emoji",children:u.jsx(Jb,{className:"w-6 h-6"})})}),u.jsxs("div",{className:"relative",children:[u.jsx(Ae,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full hover:bg-[var(--hover-surface)] text-muted-foreground shrink-0 transition-colors",disabled:s,onClick:()=>S(!_),"aria-label":"Attach files",children:u.jsx(Xo,{className:"w-6 h-6"})}),_&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>S(!1)}),u.jsxs("div",{className:"absolute bottom-full left-0 mb-2 bg-popover border border-border rounded-lg shadow-lg p-2 z-20 min-w-[180px]",children:[u.jsxs("button",{onClick:()=>{T.current?.click()},className:"w-full flex items-center gap-3 px-3 py-2 rounded-md hover:bg-[var(--hover-surface)] transition-colors",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:u.jsx(Wb,{className:"w-5 h-5 text-primary"})}),u.jsx("span",{className:"text-sm",children:"Photos"})]}),u.jsxs("button",{onClick:()=>{C.current?.click()},className:"w-full flex items-center gap-3 px-3 py-2 rounded-md hover:bg-[var(--hover-surface)] transition-colors",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-accent/10 flex items-center justify-center",children:u.jsx(D0,{className:"w-5 h-5 text-accent"})}),u.jsx("span",{className:"text-sm",children:"Documents"})]})]})]})]}),u.jsx("div",{className:"flex-1 bg-surface-elevated rounded-[24px] px-4 py-2 flex items-center gap-2 border border-border/50 focus-within:border-primary/30 transition-colors",children:u.jsx("textarea",{ref:j,value:i,onChange:N,onKeyDown:M,placeholder:n,disabled:s,className:"flex-1 bg-transparent outline-none resize-none max-h-[120px] placeholder:text-muted-foreground/60",rows:1,"aria-label":"Message input"})}),i.trim()||l.length>0?u.jsx(Ae,{onClick:P,disabled:s,size:"icon",className:"h-10 w-10 rounded-full shrink-0 bg-primary hover:bg-primary/90 shadow-md","aria-label":"Send message",children:u.jsx(uu,{className:"w-5 h-5"})}):u.jsx(Ae,{variant:"ghost",size:"icon",onClick:W,disabled:s,className:"h-10 w-10 rounded-full hover:bg-[var(--hover-surface)] text-muted-foreground shrink-0 transition-colors","aria-label":"Record voice message",children:u.jsx(Qs,{className:"w-6 h-6"})})]})]})]})}function J6(t,e){if(e)return"online";if(!t)return"offline";const n=new Date,s=new Date(t),i=n.getTime()-s.getTime(),a=Math.floor(i/(1e3*60)),l=Math.floor(i/(1e3*60*60*24)),d=p=>p.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return a<1?"last seen just now":a<60?`last seen ${a} ${a===1?"minute":"minutes"} ago`:l===0?`last seen today at ${d(s)}`:l===1?`last seen yesterday at ${d(s)}`:l<7?`last seen ${s.toLocaleDateString("en-US",{weekday:"long"})} at ${d(s)}`:`last seen ${s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:n.getFullYear()!==s.getFullYear()?"numeric":void 0})} at ${d(s)}`}function X6(t,e){if(e)return"online";if(!t)return"";const n=new Date,s=new Date(t),i=n.getTime()-s.getTime(),a=Math.floor(i/(1e3*60)),l=Math.floor(i/(1e3*60*60*24));return a<1?"just now":a<60?`${a}m ago`:l===0?"today":l===1?"yesterday":l<7?s.toLocaleDateString("en-US",{weekday:"short"}):s.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function Vk(t,e,n=!1){const[s,i]=w.useState("");return w.useEffect(()=>{const a=()=>{const d=n?X6(t,e):J6(t,e);i(d)};a();const l=setInterval(a,1e4);return()=>clearInterval(l)},[t,e,n]),s}function Q6({conversationId:t,currentUser:e,onBack:n,onInitiateCall:s,onViewProfile:i}){const[a,l]=w.useState(null),[d,h]=w.useState([]),[p,m]=w.useState(!0),[g,y]=w.useState(!1),[b,_]=w.useState(""),[S,j]=w.useState(null),[C,T]=w.useState(!1),[E,N]=w.useState(!1),[P,M]=w.useState(!1),[L,$]=w.useState(!1),[z,W]=w.useState(!1),Z=w.useRef(null),X=w.useRef(null),ee=w.useRef(!1),fe=w.useRef(0),oe=w.useRef(!0),Q=w.useMemo(()=>a?.type==="dm"?a.members?.find(le=>le.user_id!==e.id)?.user:null,[a,e.id]),Y=Vk(Q?.last_seen,Q?.is_online||!1,!1);w.useEffect(()=>{O(!0),fe.current=0,oe.current=!0;const le=setInterval(()=>{B()},3e3);return()=>{clearInterval(le)}},[t]),w.useEffect(()=>{const le=X.current;if(!le)return;const me=()=>{const{scrollTop:Ee,scrollHeight:Be,clientHeight:Fe}=le;Be-Ee-Fe<100?(oe.current=!0,ee.current=!1):(oe.current=!1,ee.current=!0)};return le.addEventListener("scroll",me),()=>le.removeEventListener("scroll",me)},[]),w.useEffect(()=>{if(d.length===0)return;const le=d.length>fe.current;fe.current=d.length,le&&(d[d.length-1]?.sender_id===e.id?(J(),oe.current=!0):oe.current&&J())},[d,e.id]);const O=async(le=!1,me=0)=>{le&&(m(!0),_(""));const Ee=pn(),{data:{session:Be}}=await Ee.auth.getSession();if(!Be||!Be.access_token){console.error("[ConversationScreen] No valid session available!"),console.error("[ConversationScreen] Has session:",!!Be),console.error("[ConversationScreen] Has token:",!!Be?.access_token),_("Session expired. Please log out and log back in."),m(!1);return}console.log("[ConversationScreen] Session verified, loading conversation..."),console.log("[ConversationScreen] Token preview:",Be.access_token.substring(0,30)+"...");const Fe=await Zo.get(t);if(Fe.success&&Fe.data){if(l(Fe.data.conversation),h(Fe.data.messages||[]),le&&Fe.data.messages){const Le=Fe.data.messages.filter(tt=>tt.sender_id!==e.id).filter(tt=>!tt.statuses?.find(nt=>nt.user_id===e.id&&nt.status==="read")).map(tt=>tt.id);Le.length>0&&Do.markAsRead(Le),setTimeout(J,100)}}else if(le){if(console.error("[ConversationScreen] Failed to load conversation:",Fe.error),Fe.error?.includes("Authentication")||Fe.error?.includes("Unauthorized")){_("Session expired. Please log out and log back in."),je.error("Session Expired",{description:"Please log out and log back in to continue."});return}if(me<2&&Fe.error?.includes("Network")){console.log(`[ConversationScreen] Retrying... (attempt ${me+1})`),setTimeout(()=>O(!0,me+1),1e3);return}_(Fe.error||"Failed to load conversation")}le&&m(!1)},B=async()=>{try{const le=await Zo.get(t);if(le.success&&le.data){const me=d.length,Ee=le.data.messages||[];if(Ee.length>me){const Be=Ee[Ee.length-1];Be.sender_id!==e.id&&await Do.markAsRead([Be.id])}(Ee.length!==me||JSON.stringify(Ee)!==JSON.stringify(d))&&h(Ee)}}catch(le){console.error("Failed to poll messages:",le)}},J=()=>{Z.current?.scrollIntoView({behavior:"smooth",block:"end"}),oe.current=!0,ee.current=!1},A=async(le,me)=>{if(!(!le.trim()&&!me?.length||g)){y(!0),_("");try{let Ee=[];if(me&&me.length>0)for(const Le of me){const tt=await im.uploadFile(Le,"attachment");if(tt.success&&tt.data){let Ot="file";Le.type.startsWith("image/")?Ot="image":Le.type.startsWith("audio/")?Ot="audio":Le.type.startsWith("video/")&&(Ot="video"),Ee.push({id:Math.random().toString(36).substr(2,9),url:tt.data.url,type:Ot,filename:Le.name,size:Le.size,mime_type:Le.type})}}const Be=Ee.some(Le=>Le.type==="image")?"image":Ee.some(Le=>Le.type==="audio")?"voice":Ee.length>0?"file":"text",Fe=await Do.send(t,le,Be,S?.id,Ee);if(Fe.success&&Fe.data?.message){const Le=Fe.data.message;h([...d,Le]),j(null),D_()}else _(Fe.error||"Failed to send message"),je.error("Failed to send message",{description:Fe.error||"Please try again"})}catch(Ee){_(Ee instanceof Error?Ee.message:"Failed to send message")}finally{y(!1)}}},I=async le=>{le?await bx.start(t):await bx.stop(t)},H=async(le,me)=>{h(d.map(Be=>{if(Be.id===le){const Fe=Be.reactions||[],Le=Fe.find(tt=>tt.user_id===e.id&&tt.emoji===me);return Le?{...Be,reactions:Fe.filter(tt=>tt.id!==Le.id)}:{...Be,reactions:[...Fe,{id:Math.random().toString(36).substr(2,9),message_id:le,user_id:e.id,emoji:me,created_at:new Date().toISOString()}]}}return Be}));const Ee=await Do.react(le,me);Ee.success||(console.error("Failed to add reaction:",Ee.error),await B())},G=()=>a?a.type==="group"?a.title||"Group Chat":a.members?.find(me=>me.user_id!==e.id)?.user?.full_name||"Unknown":"",q=()=>a?a.type==="group"?a.avatar_url:a.members?.find(me=>me.user_id!==e.id)?.user?.avatar_url:void 0,ae=()=>!a||a.type==="group"?void 0:a.members?.find(me=>me.user_id!==e.id)?.user?.is_online?"online":"offline",ne=()=>!a||a.type==="group"?null:a.members?.find(me=>me.user_id!==e.id)?.user_id||null,de=async()=>{const le=ne();if(!le)return;const me=await Sx.block(le);me.success?(T(!0),$(!1),je.success("User blocked",{description:"You won't receive messages from this contact"})):je.error("Failed to block user",{description:me.error||"Please try again"})},ve=async()=>{const le=ne();if(!le)return;const me=await Sx.unblock(le);me.success?(T(!1),W(!1),je.success("User unblocked",{description:"You can now receive messages from this contact"})):je.error("Failed to unblock user",{description:me.error||"Please try again"})},We=async()=>{const le=await Zo.delete(t);le.success?(M(!1),je.success("Conversation deleted"),n()):je.error("Failed to delete conversation",{description:le.error||"Please try again"})},ot=le=>{if(!a||a.type!=="dm"){je.error("Calls are only available for direct messages");return}const me=a.members?.find(Ee=>Ee.user_id!==e.id);if(!me?.user){je.error("Unable to initiate call");return}s?.(me.user,le)},pe=async le=>{const me=await Do.deleteForMe(le);me.success?(h(d.map(Ee=>Ee.id===le?{...Ee,deleted_for_users:[...Ee.deleted_for_users||[],e.id]}:Ee)),je.success("Message deleted")):je.error("Failed to delete message",{description:me.error||"Please try again"})},He=async le=>{const me=await Do.deleteForEveryone(le);me.success?(h(d.map(Ee=>Ee.id===le?{...Ee,deleted_for_everyone:!0,deleted_at:new Date().toISOString()}:Ee)),je.success("Message deleted for everyone")):je.error("Failed to delete message",{description:me.error||"Please try again"})};return u.jsxs("div",{className:"h-screen flex flex-col bg-background overflow-hidden",children:[u.jsx("div",{className:"bg-surface border-b border-border px-2 sm:px-4 py-3 flex items-center justify-between shadow-sm shrink-0",children:!a||p?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-1 min-w-0",children:[u.jsx(Ae,{variant:"ghost",size:"icon",onClick:n,className:"h-10 w-10 rounded-full hover:bg-[var(--hover-surface)] shrink-0 transition-colors","aria-label":"Back",children:u.jsx(Jo,{className:"w-5 h-5"})}),u.jsx("div",{className:"w-14 h-14 rounded-full bg-muted animate-pulse shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[u.jsx("div",{className:"h-4 bg-muted rounded w-32 animate-pulse"}),u.jsx("div",{className:"h-3 bg-muted rounded w-20 animate-pulse"})]})]}),u.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[u.jsx("div",{className:"h-10 w-10 rounded-full bg-muted animate-pulse"}),u.jsx("div",{className:"h-10 w-10 rounded-full bg-muted animate-pulse"}),u.jsx("div",{className:"h-10 w-10 rounded-full bg-muted animate-pulse"})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-1 min-w-0",children:[u.jsx(Ae,{variant:"ghost",size:"icon",onClick:n,className:"h-10 w-10 rounded-full hover:bg-[var(--hover-surface)] shrink-0 transition-colors","aria-label":"Back",children:u.jsx(Jo,{className:"w-5 h-5"})}),u.jsx(sn,{src:q(),alt:G(),fallbackText:G(),size:"lg",status:ae(),className:"shrink-0 cursor-pointer hover:opacity-80 transition-opacity",showBorder:!0,onClick:()=>{Q&&i&&i(Q,Y)}}),u.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{Q&&i&&i(Q,Y)},children:[u.jsx("h3",{className:"truncate leading-tight",children:G()}),u.jsx("p",{className:"text-xs text-muted-foreground leading-tight",children:Y||(ae()==="online"?"online":"offline")})]})]}),u.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[u.jsx(Ae,{variant:"ghost",size:"icon",onClick:()=>ot("video"),className:"h-10 w-10 rounded-full hover:bg-[var(--hover-surface)] transition-colors","aria-label":"Video call",children:u.jsx(ii,{className:"w-5 h-5"})}),u.jsx(Ae,{variant:"ghost",size:"icon",onClick:()=>ot("voice"),className:"h-10 w-10 rounded-full hover:bg-[var(--hover-surface)] transition-colors","aria-label":"Voice call",children:u.jsx(mr,{className:"w-5 h-5"})}),u.jsxs(kk,{children:[u.jsx(jk,{asChild:!0,children:u.jsx(Ae,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full hover:bg-[var(--hover-surface)] transition-colors","aria-label":"More options",children:u.jsx(Hp,{className:"w-5 h-5"})})}),u.jsxs(Ck,{align:"end",className:"w-56",children:[a?.type==="dm"&&u.jsxs(u.Fragment,{children:[C?u.jsxs(ba,{onClick:()=>W(!0),children:[u.jsx(Qb,{className:"w-4 h-4 mr-2"}),"Unblock contact"]}):u.jsxs(ba,{onClick:()=>$(!0),className:"text-destructive",children:[u.jsx(Ah,{className:"w-4 h-4 mr-2"}),"Block contact"]}),u.jsx(Ek,{})]}),u.jsxs(ba,{onClick:()=>M(!0),className:"text-destructive",children:[u.jsx(oi,{className:"w-4 h-4 mr-2"}),"Delete conversation"]})]})]})]})]})}),u.jsxs("div",{ref:X,className:"flex-1 overflow-y-auto overflow-x-hidden px-3 sm:px-6 md:px-12 lg:px-20 py-4 chat-background",children:[C&&u.jsxs($h,{className:"mb-4 bg-warning/10 border-warning",children:[u.jsx(Ah,{className:"h-4 w-4 text-warning"}),u.jsxs(Fh,{children:["You blocked this contact. You won't receive messages from them."," ",u.jsx("button",{onClick:()=>W(!0),className:"underline hover:no-underline",children:"Unblock"})]})]}),b&&u.jsxs($h,{variant:"destructive",className:"mb-4",children:[u.jsx(Rh,{className:"h-4 w-4"}),u.jsx(Fh,{children:u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsx("span",{children:b}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Ae,{size:"sm",variant:"outline",onClick:()=>O(!0),className:"shrink-0",children:"Retry"}),u.jsx(Ae,{size:"sm",variant:"outline",onClick:async()=>{const le=pn(),{data:{session:me}}=await le.auth.getSession();console.log("[Debug] Current session:",{has_session:!!me,user_id:me?.user?.id,has_token:!!me?.access_token,expires_at:me?.expires_at}),me?.access_token&&console.log("[Debug] Token preview:",me.access_token.substring(0,30)+"...")},className:"shrink-0",children:"Debug Auth"})]})]})})]}),p?u.jsx("div",{children:[1,2,3,4].map(le=>u.jsx(UD,{isSent:le%2===0},le))}):d.length>0?u.jsxs("div",{children:[d.map((le,me)=>{const Ee=le.sender_id===e.id,Be=me>0?d[me-1]:null,Fe=me<d.length-1?d[me+1]:null;!Be||Be.sender_id!==le.sender_id||new Date(le.created_at).getTime()-new Date(Be.created_at).getTime()>3e5;const Le=!Fe||Fe.sender_id!==le.sender_id||new Date(Fe.created_at).getTime()-new Date(le.created_at).getTime()>3e5,tt=me===0||new Date(le.created_at).toDateString()!==new Date(Be.created_at).toDateString(),Ot=nt=>{const Bt=new Date(nt),tr=new Date,nr=new Date(tr);return nr.setDate(nr.getDate()-1),Bt.toDateString()===tr.toDateString()?"Today":Bt.toDateString()===nr.toDateString()?"Yesterday":Bt.toLocaleDateString("en-US",{month:"long",day:"numeric",year:Bt.getFullYear()!==tr.getFullYear()?"numeric":void 0})};return u.jsxs("div",{children:[tt&&u.jsx("div",{className:"flex items-center justify-center my-4",children:u.jsx("div",{className:"bg-surface/80 backdrop-blur-sm text-muted-foreground text-xs px-3 py-1.5 rounded-lg shadow-sm",children:Ot(le.created_at)})}),u.jsx("div",{className:Le?"mb-3":"mb-0.5",children:u.jsx(C6,{message:le,isSent:Ee,showAvatar:!Ee&&Le,showTimestamp:Le,onReply:()=>j(le),onReact:nt=>H(le.id,nt),onDeleteForMe:()=>pe(le.id),onDeleteForEveryone:()=>He(le.id),currentUserId:e.id})})]},le.id)}),u.jsx("div",{ref:Z})]}):u.jsx(nu,{icon:Rh,title:"No messages yet",description:"Start the conversation by sending a message"})]}),S&&u.jsxs("div",{className:"bg-muted px-4 py-2 flex items-center justify-between border-t border-border",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("p",{className:"text-sm",children:["Replying to ",S.sender?.full_name]}),u.jsx("p",{className:"text-sm text-muted-foreground truncate",children:S.body})]}),u.jsx(Ae,{variant:"ghost",size:"icon",onClick:()=>j(null),"aria-label":"Cancel reply",children:u.jsx(Jo,{className:"w-4 h-4"})})]}),u.jsx(Y6,{onSend:A,onTyping:I,disabled:g}),u.jsx(Sa,{open:P,onOpenChange:M,children:u.jsxs(_a,{children:[u.jsxs(ka,{children:[u.jsx(Ca,{children:"Delete conversation?"}),u.jsx(Ea,{children:"This conversation will be deleted from your chats. This action cannot be undone."})]}),u.jsxs(ja,{children:[u.jsx(Ta,{children:"Cancel"}),u.jsx(Na,{onClick:We,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})}),u.jsx(Sa,{open:L,onOpenChange:$,children:u.jsxs(_a,{children:[u.jsxs(ka,{children:[u.jsxs(Ca,{children:["Block ",G(),"?"]}),u.jsx(Ea,{children:"Blocked contacts will no longer be able to send you messages. They won't be notified that you blocked them."})]}),u.jsxs(ja,{children:[u.jsx(Ta,{children:"Cancel"}),u.jsx(Na,{onClick:de,className:"bg-destructive hover:bg-destructive/90",children:"Block"})]})]})}),u.jsx(Sa,{open:z,onOpenChange:W,children:u.jsxs(_a,{children:[u.jsxs(ka,{children:[u.jsxs(Ca,{children:["Unblock ",G(),"?"]}),u.jsx(Ea,{children:"You will be able to receive messages from this contact again."})]}),u.jsxs(ja,{children:[u.jsx(Ta,{children:"Cancel"}),u.jsx(Na,{onClick:ve,children:"Unblock"})]})]})})]})}function Z6({open:t,onOpenChange:e,onUserFound:n,currentUserId:s}){const[i,a]=w.useState(""),[l,d]=w.useState(qs[0].dialCode),[h,p]=w.useState(""),[m,g]=w.useState(!1),[y,b]=w.useState(null),_=async()=>{if(p(""),b(null),!i||i.trim().length<7){p("Please enter a valid phone number");return}g(!0);try{const C=PD(l,i),T=await om(),E=await fetch(`https://${Va}.supabase.co/functions/v1/make-server-29f6739b/users/search-by-phone`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T||Xa}`},body:JSON.stringify({phone_number:C})});if(!E.ok){let P="Failed to search user";try{const M=await E.json();P=M.error||M.message||P}catch{P=E.statusText||P}if(E.status===404||P.includes("not found"))p("No user found with this phone number");else throw new Error(P);return}const N=await E.json();if(!N.found||!N.user){p("No user found with this phone number");return}if(N.user.id===s){p("You cannot add yourself");return}b(N.user),je.success("User found!",{description:`Found ${N.user.full_name}`})}catch(C){console.error("Phone search error:",C),p(C instanceof Error?C.message:"Failed to search user"),je.error("Search failed",{description:"Please check the phone number and try again"})}finally{g(!1)}},S=()=>{y&&(n(y),e(!1),a(""),b(null))},j=()=>{a(""),p(""),b(null)};return u.jsx(BM,{open:t,onOpenChange:e,children:u.jsxs(YS,{className:"sm:max-w-md",children:[u.jsxs(zM,{children:[u.jsxs(WM,{className:"flex items-center gap-2",children:[u.jsx(mr,{className:"h-5 w-5 text-primary"}),"Find User by Phone"]}),u.jsx(HM,{children:"Enter a phone number to find and connect with AuroraLink users"})]}),u.jsxs("div",{className:"space-y-6 py-4",children:[y?u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"rounded-lg border border-success/50 bg-success/10 p-5 hover:bg-success/15 transition-colors",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx(sn,{src:y.avatar_url,alt:y.full_name,size:"xl",status:y.is_online?"online":"offline",showBorder:!0}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-medium truncate",children:y.full_name}),u.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["@",y.username]}),y.status_message&&u.jsx("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:y.status_message})]})]})}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(Ae,{onClick:S,className:"flex-1",children:[u.jsx(Xb,{className:"mr-2 h-4 w-4"}),"Start Chat"]}),u.jsx(Ae,{onClick:j,variant:"outline",children:"Search Again"})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{className:"block mb-3 text-sm",children:"Phone Number"}),u.jsx(M_,{value:i,dialCode:l,onChange:(C,T)=>{a(C),d(T),p("")},error:h,disabled:m,autoFocus:!0})]}),u.jsx("div",{className:"flex gap-2",children:u.jsx(Ae,{onClick:_,disabled:m||!i,className:"flex-1",children:m?u.jsxs(u.Fragment,{children:[u.jsx(Kb,{className:"mr-2 h-4 w-4 animate-spin"}),"Searching..."]}):u.jsxs(u.Fragment,{children:[u.jsx(cu,{className:"mr-2 h-4 w-4"}),"Search"]})})})]}),u.jsx("div",{className:"rounded-lg border border-border bg-muted/30 p-3",children:u.jsx("p",{className:"text-xs text-muted-foreground",children:" Search for users by their registered phone number"})})]})]})})}function e$({user:t}){const e=Vk(t.last_seen,t.is_online,!0);return e?u.jsx("span",{className:"text-xs text-muted-foreground",children:e}):null}function t$({currentUser:t,onBack:e,onConversationCreated:n}){const[s,i]=w.useState(""),[a,l]=w.useState([]),[d,h]=w.useState(""),[p,m]=w.useState(!1),[g,y]=w.useState(!1),[b,_]=w.useState([]),S=b.filter(N=>{if(!s)return!0;const P=s.toLowerCase();return N.full_name.toLowerCase().includes(P)||N.username.toLowerCase().includes(P)}),j=async N=>{b.some(P=>P.id===N.id)||_(P=>[N,...P]),m(!0);try{const P=await Zo.create("dm",[N.id]);P.success&&P.data?.conversation?(je.success("Chat started!",{description:`You can now message ${N.full_name}`}),n(P.data.conversation.id)):je.error("Failed to create chat",{description:P.error||"Please try again"})}catch(P){console.error("Failed to create conversation:",P),je.error("Failed to create chat",{description:"Please try again"}),C(N.id)}finally{m(!1)}},C=N=>{l(P=>P.includes(N)?P.filter(M=>M!==N):[...P,N])},T=async()=>{if(!(a.length===0||p)){m(!0);try{const N=a.length>1,P=await Zo.create(N?"group":"dm",a,N?d||"New Group":void 0);P.success&&P.data?.conversation&&n(P.data.conversation.id)}catch(N){console.error("Failed to create conversation:",N)}finally{m(!1)}}},E=a.length>1;return u.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[u.jsxs("div",{className:"bg-surface border-b border-border px-4 py-3",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(Ae,{variant:"ghost",size:"icon",onClick:e,"aria-label":"Back",children:u.jsx(Jo,{className:"w-5 h-5"})}),u.jsx("h2",{children:"New Chat"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"relative",children:[u.jsx(cu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),u.jsx(hr,{type:"search",placeholder:"Search contacts...",value:s,onChange:N=>i(N.target.value),className:"pl-10"})]}),u.jsxs(Ae,{variant:"outline",onClick:()=>y(!0),className:"w-full",size:"sm",children:[u.jsx(mr,{className:"w-4 h-4 mr-2"}),"Find by Phone Number"]})]}),E&&u.jsxs("div",{className:"mt-4",children:[u.jsx(ca,{htmlFor:"groupName",children:"Group Name"}),u.jsx(hr,{id:"groupName",type:"text",value:d,onChange:N=>h(N.target.value),placeholder:"Enter group name...",className:"mt-2"})]})]}),a.length>0&&u.jsxs("div",{className:"bg-muted px-4 py-3 border-b border-border",children:[u.jsxs("p",{className:"text-sm mb-2",children:["Selected: ",a.length," ",a.length===1?"person":"people"]}),u.jsx("div",{className:"flex gap-2 overflow-x-auto",children:a.map(N=>{const P=b.find(M=>M.id===N);return P?u.jsxs("button",{onClick:()=>C(N),className:"flex flex-col items-center gap-1.5 p-2 rounded-lg bg-background hover:bg-surface transition-colors",children:[u.jsx(sn,{src:P.avatar_url,alt:P.full_name,size:"md",showBorder:!0}),u.jsx("span",{className:"text-xs truncate max-w-[60px]",children:P.full_name.split(" ")[0]})]},N):null})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:S.length>0?u.jsx("div",{className:"p-2",children:S.map(N=>{const P=a.includes(N.id);return u.jsxs("button",{onClick:()=>C(N.id),className:`w-full flex items-center gap-4 p-3.5 rounded-lg transition-all duration-200 ${P?"bg-primary/10 ring-2 ring-primary/30":"hover:bg-[var(--hover-surface)]"}`,children:[u.jsx(sn,{src:N.avatar_url,alt:N.full_name,size:"lg",status:N.is_online?"online":"offline",showBorder:!0}),u.jsxs("div",{className:"flex-1 text-left min-w-0",children:[u.jsx("h4",{className:"truncate",children:N.full_name}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(e$,{user:N}),N.status_message&&!N.is_online&&u.jsxs("span",{className:"text-sm text-muted-foreground truncate",children:[" ",N.status_message]}),!N.status_message&&!N.is_online&&u.jsxs("span",{className:"text-sm text-muted-foreground truncate",children:["@",N.username]})]})]}),P&&u.jsx("div",{className:"w-6 h-6 rounded-full bg-primary flex items-center justify-center",children:u.jsx(Xb,{className:"w-4 h-4 text-primary-foreground"})})]},N.id)})}):u.jsx(nu,{icon:mr,title:s?"No contacts found":"No contacts yet",description:s?"Try a different search term":"Use 'Find by Phone Number' to add contacts and start chatting"})}),a.length>0&&u.jsx("div",{className:"p-4 border-t border-border bg-surface",children:u.jsx(Ae,{onClick:T,disabled:p,className:"w-full",size:"lg",children:p?"Creating...":E?"Create Group":"Start Chat"})}),u.jsx(Z6,{open:g,onOpenChange:y,onUserFound:j,currentUserId:t.id})]})}function n$(t){const e=w.useRef({value:t,previous:t});return w.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Au="Switch",[r$]=Dr(Au),[s$,o$]=r$(Au),Bk=w.forwardRef((t,e)=>{const{__scopeSwitch:n,name:s,checked:i,defaultChecked:a,required:l,disabled:d,value:h="on",onCheckedChange:p,form:m,...g}=t,[y,b]=w.useState(null),_=mt(e,E=>b(E)),S=w.useRef(!1),j=y?m||!!y.closest("form"):!0,[C,T]=Qa({prop:i,defaultProp:a??!1,onChange:p,caller:Au});return u.jsxs(s$,{scope:n,checked:C,disabled:d,children:[u.jsx(Ge.button,{type:"button",role:"switch","aria-checked":C,"aria-required":l,"data-state":Hk(C),"data-disabled":d?"":void 0,disabled:d,value:h,...g,ref:_,onClick:Ie(t.onClick,E=>{T(N=>!N),j&&(S.current=E.isPropagationStopped(),S.current||E.stopPropagation())})}),j&&u.jsx(Wk,{control:y,bubbles:!S.current,name:s,value:h,checked:C,required:l,disabled:d,form:m,style:{transform:"translateX(-100%)"}})]})});Bk.displayName=Au;var Uk="SwitchThumb",zk=w.forwardRef((t,e)=>{const{__scopeSwitch:n,...s}=t,i=o$(Uk,n);return u.jsx(Ge.span,{"data-state":Hk(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})});zk.displayName=Uk;var i$="SwitchBubbleInput",Wk=w.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:s=!0,...i},a)=>{const l=w.useRef(null),d=mt(l,a),h=n$(n),p=l_(e);return w.useEffect(()=>{const m=l.current;if(!m)return;const g=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(g,"checked").set;if(h!==n&&b){const _=new Event("click",{bubbles:s});b.call(m,n),m.dispatchEvent(_)}},[h,n,s]),u.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:d,style:{...i.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Wk.displayName=i$;function Hk(t){return t?"checked":"unchecked"}var a$=Bk,l$=zk;function ah({className:t,...e}){return u.jsx(a$,{"data-slot":"switch",className:Qe("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:u.jsx(l$,{"data-slot":"switch-thumb",className:Qe("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function c$({currentUser:t,onBack:e,onUserUpdate:n,theme:s,onToggleTheme:i}){const[a,l]=w.useState(t.avatar_url),[d,h]=w.useState(ew()),[p,m]=w.useState(!1),[g,y]=w.useState(!1),[b,_]=w.useState(t.full_name),[S,j]=w.useState(t.status_message||t.status||"Hey there! I am using AuroraLink."),[C,T]=w.useState(!1),[E,N]=w.useState(()=>{const A=localStorage.getItem("soundEnabled");return A!==null?JSON.parse(A):!0}),[P,M]=w.useState(()=>{const A=localStorage.getItem("readReceipts");return A!==null?JSON.parse(A):!0}),[L,$]=w.useState(()=>{const A=localStorage.getItem("lastSeen");return A!==null?JSON.parse(A):!0}),[z,W]=w.useState(()=>localStorage.getItem("profilePhotoVisibility")||"Everyone"),[Z,X]=w.useState(()=>localStorage.getItem("themePreference")||"light");w.useEffect(()=>{const I=setInterval(()=>{h(ew())},1e3);return()=>clearInterval(I)},[]);const ee=async A=>{const I=A.target.files?.[0];if(!I)return;T(!0);const H=await im.uploadFile(I,"avatar");H.success&&H.data?.url&&(l(H.data.url),(await Kf.update({avatar_url:H.data.url})).success&&(n({...t,avatar_url:H.data.url}),je.success("Profile photo updated"))),T(!1)},fe=async()=>{b.trim()&&b!==t.full_name&&(await Kf.update({full_name:b})).success&&(n({...t,full_name:b}),je.success("Name updated")),m(!1)},oe=async()=>{const A=t.status_message||t.status||"Hey there! I am using AuroraLink.";S!==A&&(await Kf.update({status_message:S})).success&&(n({...t,status:S,status_message:S,status_updated_at:new Date().toISOString()}),je.success("About updated")),y(!1)},Q=A=>{N(A),localStorage.setItem("soundEnabled",JSON.stringify(A))},Y=A=>{M(A),localStorage.setItem("readReceipts",JSON.stringify(A))},O=A=>{$(A),localStorage.setItem("lastSeen",JSON.stringify(A))},B=A=>{W(A),localStorage.setItem("profilePhotoVisibility",A)},J=A=>{if(X(A),localStorage.setItem("themePreference",A),A!=="auto")(A==="dark"&&s==="light"||A==="light"&&s==="dark")&&i();else{const I=window.matchMedia("(prefers-color-scheme: dark)").matches;(I&&s==="light"||!I&&s==="dark")&&i()}};return u.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[u.jsxs("div",{className:"bg-primary px-4 py-4 flex items-center gap-4 shadow-sm",children:[u.jsx(Ae,{variant:"ghost",size:"icon",onClick:e,className:"text-primary-foreground hover:bg-primary-foreground/10","aria-label":"Back",children:u.jsx(Jo,{className:"w-5 h-5"})}),u.jsx("h1",{className:"text-primary-foreground text-xl",children:"Settings"})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto",children:[u.jsx("div",{className:"bg-surface px-6 py-8",children:u.jsxs("div",{className:"flex items-center gap-5",children:[u.jsxs("div",{className:"relative",children:[u.jsx(sn,{src:a,alt:t.full_name,size:"2xl",showBorder:!0}),u.jsxs("label",{className:"absolute bottom-0 right-0 p-3 bg-gradient-to-br from-accent to-primary text-white rounded-full cursor-pointer hover:shadow-xl transition-all shadow-lg hover:scale-110",children:[u.jsx(zb,{className:"w-5 h-5"}),u.jsx("input",{type:"file",accept:"image/*",onChange:ee,className:"hidden",disabled:C})]}),C&&u.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:u.jsx("div",{className:"w-8 h-8 border-3 border-white/30 border-t-white rounded-full animate-spin"})})]}),u.jsxs("div",{className:"flex-1",children:[p?u.jsx("input",{type:"text",value:b,onChange:A=>_(A.target.value),onBlur:fe,onKeyDown:A=>A.key==="Enter"&&fe(),className:"w-full bg-transparent border-b-2 border-primary outline-none pb-1",autoFocus:!0}):u.jsx("h2",{className:"cursor-pointer hover:text-primary transition-colors",onClick:()=>m(!0),children:t.full_name}),g?u.jsx("input",{type:"text",value:S,onChange:A=>j(A.target.value),onBlur:oe,onKeyDown:A=>A.key==="Enter"&&oe(),placeholder:"Hey there! I am using AuroraLink.",className:"w-full bg-transparent border-b border-muted-foreground outline-none text-sm text-muted-foreground mt-1",autoFocus:!0}):u.jsx("p",{className:"text-sm text-muted-foreground cursor-pointer hover:text-primary transition-colors mt-1",onClick:()=>y(!0),children:t.status_message||t.status||"Hey there! I am using AuroraLink."})]})]})}),u.jsxs("div",{className:"mt-6",children:[u.jsx("div",{className:"px-6 py-2",children:u.jsx("p",{className:"text-sm text-primary",children:"Account"})}),u.jsxs("div",{className:"bg-surface",children:[u.jsxs("div",{className:"px-6 py-4 flex items-center gap-4 border-b border-border",children:[u.jsx(mr,{className:"w-5 h-5 text-muted-foreground"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone"}),u.jsx("p",{className:"mt-0.5",children:t.phone_number||"Not set"})]})]}),u.jsxs("div",{className:"px-6 py-4 flex items-center gap-4 border-b border-border",children:[u.jsx(Gb,{className:"w-5 h-5 text-muted-foreground"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),u.jsx("p",{className:"mt-0.5",children:t.email})]})]}),u.jsxs("div",{className:"px-6 py-4 flex items-center gap-4",children:[u.jsx(Zb,{className:"w-5 h-5 text-muted-foreground"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm text-muted-foreground",children:"Username"}),u.jsxs("p",{className:"mt-0.5",children:["@",t.username]})]})]})]})]}),u.jsxs("div",{className:"mt-6",children:[u.jsx("div",{className:"px-6 py-2",children:u.jsx("p",{className:"text-sm text-primary",children:"Notifications"})}),u.jsxs("div",{className:"bg-surface",children:[u.jsxs("div",{className:"px-6 py-4 flex items-center gap-4 border-b border-border",children:[u.jsx(gA,{className:"w-5 h-5 text-muted-foreground"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{children:"Browser Notifications"}),u.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:d==="granted"?"Enabled":d==="denied"?"Blocked in browser settings":"Not enabled"})]}),d!=="granted"&&d!=="denied"&&u.jsx(Ae,{size:"sm",onClick:async()=>{await zD()&&(je.success("Notifications enabled"),h("granted"))},children:"Enable"})]}),u.jsxs("div",{className:"px-6 py-4 flex items-center gap-4",children:[u.jsx(ER,{className:"w-5 h-5 text-muted-foreground"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{children:"Sound"}),u.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Play sound for messages"})]}),u.jsx(ah,{checked:E,onCheckedChange:Q})]})]})]}),u.jsxs("div",{className:"mt-6",children:[u.jsx("div",{className:"px-6 py-2",children:u.jsx("p",{className:"text-sm text-primary",children:"Privacy"})}),u.jsxs("div",{className:"bg-surface",children:[u.jsxs("div",{className:"px-6 py-4 flex items-center gap-4 border-b border-border",children:[u.jsx(Da,{className:"w-5 h-5 text-muted-foreground"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{children:"Read Receipts"}),u.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Show when you've read messages"})]}),u.jsx(ah,{checked:P,onCheckedChange:Y})]}),u.jsxs("div",{className:"px-6 py-4 flex items-center gap-4 border-b border-border",children:[u.jsx(EA,{className:"w-5 h-5 text-muted-foreground"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{children:"Last Seen"}),u.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Show when you were last active"})]}),u.jsx(ah,{checked:L,onCheckedChange:O})]}),u.jsxs("button",{className:"w-full px-6 py-4 flex items-center gap-4 hover:bg-[var(--hover-surface)] transition-colors",onClick:()=>{const A=["Everyone","My Contacts","Nobody"],I=A.indexOf(z),H=A[(I+1)%A.length];B(H)},children:[u.jsx(Oh,{className:"w-5 h-5 text-muted-foreground"}),u.jsxs("div",{className:"flex-1 text-left",children:[u.jsx("p",{children:"Profile Photo"}),u.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:z})]}),u.jsx(If,{className:"w-5 h-5 text-muted-foreground"})]})]})]}),u.jsxs("div",{className:"mt-6",children:[u.jsx("div",{className:"px-6 py-2",children:u.jsx("p",{className:"text-sm text-primary",children:"Appearance"})}),u.jsxs("div",{className:"bg-surface px-6 py-4",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[u.jsx(JA,{className:"w-5 h-5 text-muted-foreground"}),u.jsx("p",{children:"Theme"})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsx("button",{onClick:()=>J("light"),className:`px-4 py-3 rounded-lg text-center transition-all ${Z==="light"?"bg-primary text-primary-foreground shadow-md":"bg-muted/30 hover:bg-[var(--hover-surface)]"}`,children:"Light"}),u.jsx("button",{onClick:()=>J("dark"),className:`px-4 py-3 rounded-lg text-center transition-all ${Z==="dark"?"bg-primary text-primary-foreground shadow-md":"bg-muted/30 hover:bg-[var(--hover-surface)]"}`,children:"Dark"}),u.jsx("button",{onClick:()=>J("auto"),className:`px-4 py-3 rounded-lg text-center transition-all ${Z==="auto"?"bg-primary text-primary-foreground shadow-md":"bg-muted/30 hover:bg-[var(--hover-surface)]"}`,children:"Auto"})]})]})]}),u.jsxs("div",{className:"mt-6 mb-6",children:[u.jsx("div",{className:"px-6 py-2",children:u.jsx("p",{className:"text-sm text-primary",children:"About"})}),u.jsxs("div",{className:"bg-surface",children:[u.jsx("div",{className:"px-6 py-4 border-b border-border",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx(Hb,{className:"w-5 h-5 text-muted-foreground"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{children:"Version"}),u.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"AuroraLink v1.0.0"})]})]})}),u.jsxs("button",{className:"w-full px-6 py-4 flex items-center gap-4 hover:bg-[var(--hover-surface)] transition-colors border-b border-border",children:[u.jsx("div",{className:"w-5"}),u.jsx("p",{className:"flex-1 text-left",children:"Terms of Service"}),u.jsx(If,{className:"w-5 h-5 text-muted-foreground"})]}),u.jsxs("button",{className:"w-full px-6 py-4 flex items-center gap-4 hover:bg-[var(--hover-surface)] transition-colors",children:[u.jsx("div",{className:"w-5"}),u.jsx("p",{className:"flex-1 text-left",children:"Privacy Policy"}),u.jsx(If,{className:"w-5 h-5 text-muted-foreground"})]})]})]}),u.jsx("div",{className:"px-6 py-4 text-center text-sm text-muted-foreground",children:" 2024 AuroraLink. All rights reserved."})]})]})}function u$({callType:t,recipientUser:e,currentUser:n,isInitiator:s,onEndCall:i,onCallConnected:a,onCallFailed:l,peerConnection:d,localStream:h,remoteStream:p}){const[m,g]=w.useState(!1),[y,b]=w.useState(!1),[_,S]=w.useState(!1),[j,C]=w.useState(0),[T,E]=w.useState("connecting"),N=w.useRef(null),P=w.useRef(null),M=w.useRef(null);w.useEffect(()=>{h&&N.current&&(N.current.srcObject=h)},[h]),w.useEffect(()=>(p&&P.current&&(P.current.srcObject=p,E("connected"),a?.(),M.current=setInterval(()=>{C(X=>X+1)},1e3)),()=>{M.current&&clearInterval(M.current)}),[p,a]),w.useEffect(()=>{s&&T==="connecting"&&E("ringing")},[s,T]);const L=()=>{h&&(h.getAudioTracks().forEach(X=>{X.enabled=!X.enabled}),g(!m))},$=()=>{h&&t==="video"&&(h.getVideoTracks().forEach(X=>{X.enabled=!X.enabled}),b(!y))},z=()=>{document.fullscreenElement?(document.exitFullscreen(),S(!1)):(document.documentElement.requestFullscreen(),S(!0))},W=X=>{const ee=Math.floor(X/60),fe=X%60;return`${ee.toString().padStart(2,"0")}:${fe.toString().padStart(2,"0")}`},Z=()=>{switch(T){case"connecting":return"Connecting...";case"ringing":return"Ringing...";case"connected":return W(j);default:return""}};return u.jsxs("div",{className:"h-screen w-screen bg-gradient-to-br from-surface via-background to-muted flex flex-col items-center justify-center relative overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-0 opacity-30 pointer-events-none",children:[u.jsx(te.div,{className:"absolute top-20 left-20 w-96 h-96 bg-primary/20 rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),u.jsx(te.div,{className:"absolute bottom-20 right-20 w-96 h-96 bg-accent/20 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],opacity:[.5,.3,.5]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}})]}),t==="video"?u.jsxs("div",{className:"w-full h-full relative",children:[u.jsx("div",{className:"w-full h-full bg-black relative",children:p?u.jsx("video",{ref:P,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}):u.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[u.jsx(sn,{src:e.avatar_url,alt:e.full_name,fallbackText:e.full_name,size:"2xl",className:"mb-6"}),u.jsx("h2",{className:"text-white text-2xl mb-2",children:e.full_name}),u.jsx("p",{className:"text-white/70",children:Z()}),T==="ringing"&&u.jsx(te.div,{className:"mt-8 flex gap-2",initial:{opacity:0},animate:{opacity:1},children:[0,1,2].map(X=>u.jsx(te.div,{className:"w-3 h-3 rounded-full bg-white/50",animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,delay:X*.2}},X))})]})}),h&&!y&&u.jsx(te.div,{className:"absolute top-4 right-4 w-40 h-52 rounded-2xl overflow-hidden shadow-2xl border-2 border-white/20 bg-black",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},drag:!0,dragConstraints:{top:0,left:-200,right:0,bottom:400},children:u.jsx("video",{ref:N,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover scale-x-[-1]"})}),u.jsx("div",{className:"absolute top-0 left-0 right-0 p-6 bg-gradient-to-b from-black/60 to-transparent",children:u.jsxs("div",{className:"flex items-center justify-between text-white",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(sn,{src:e.avatar_url,alt:e.full_name,fallbackText:e.full_name,size:"sm"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-medium",children:e.full_name}),u.jsx("p",{className:"text-xs text-white/70",children:Z()})]})]}),u.jsx(Ae,{variant:"ghost",size:"icon",onClick:z,className:"text-white hover:bg-white/10",children:_?u.jsx(KA,{className:"w-5 h-5"}):u.jsx(BA,{className:"w-5 h-5"})})]})}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 bg-gradient-to-t from-black/60 to-transparent",children:u.jsxs("div",{className:"flex items-center justify-center gap-4",children:[u.jsx(te.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:u.jsx(Ae,{variant:m?"destructive":"secondary",size:"icon",onClick:L,className:"h-14 w-14 rounded-full shadow-lg","aria-label":m?"Unmute":"Mute",children:m?u.jsx(M0,{className:"w-6 h-6"}):u.jsx(Qs,{className:"w-6 h-6"})})}),u.jsx(te.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:u.jsx(Ae,{variant:y?"destructive":"secondary",size:"icon",onClick:$,className:"h-14 w-14 rounded-full shadow-lg","aria-label":y?"Turn on camera":"Turn off camera",children:y?u.jsx(kR,{className:"w-6 h-6"}):u.jsx(ii,{className:"w-6 h-6"})})}),u.jsx(te.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:u.jsx(Ae,{variant:"destructive",size:"icon",onClick:i,className:"h-16 w-16 rounded-full shadow-lg bg-red-500 hover:bg-red-600","aria-label":"End call",children:u.jsx(Ih,{className:"w-7 h-7"})})})]})})]}):u.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center gap-8 p-8",children:[u.jsxs(te.div,{animate:{scale:T==="ringing"?[1,1.05,1]:1},transition:{duration:2,repeat:T==="ringing"?1/0:0,ease:"easeInOut"},className:"relative",children:[u.jsx(sn,{src:e.avatar_url,alt:e.full_name,fallbackText:e.full_name,size:"2xl",className:"shadow-2xl"}),T==="ringing"&&u.jsx(te.div,{className:"absolute inset-0 rounded-full border-4 border-primary",animate:{scale:[1,1.3,1],opacity:[.8,0,.8]},transition:{duration:2,repeat:1/0,ease:"easeOut"}})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-3xl mb-2",children:e.full_name}),u.jsx("p",{className:"text-muted-foreground text-lg",children:Z()})]}),T==="ringing"&&u.jsx(te.div,{className:"flex gap-2",initial:{opacity:0},animate:{opacity:1},children:[0,1,2].map(X=>u.jsx(te.div,{className:"w-3 h-3 rounded-full bg-primary",animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,delay:X*.2}},X))}),u.jsxs("div",{className:"flex items-center gap-6 mt-8",children:[u.jsx(te.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:u.jsx(Ae,{variant:m?"destructive":"secondary",size:"icon",onClick:L,className:"h-16 w-16 rounded-full shadow-lg","aria-label":m?"Unmute":"Mute",children:m?u.jsx(M0,{className:"w-7 h-7"}):u.jsx(Qs,{className:"w-7 h-7"})})}),u.jsx(te.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:u.jsx(Ae,{variant:"destructive",size:"icon",onClick:i,className:"h-20 w-20 rounded-full shadow-2xl bg-red-500 hover:bg-red-600","aria-label":"End call",children:u.jsx(Ih,{className:"w-8 h-8"})})})]}),h&&u.jsx("video",{ref:N,autoPlay:!0,playsInline:!0,muted:!0,className:"hidden"})]})]})}function d$({userStoriesList:t,initialUserIndex:e,currentUser:n,onClose:s,onRefresh:i}){const[a,l]=w.useState(e),[d,h]=w.useState(0),[p,m]=w.useState(!1),[g,y]=w.useState(0),[b,_]=w.useState(""),[S,j]=w.useState(!1),[C,T]=w.useState(!1),[E,N]=w.useState([]),[P,M]=w.useState(0),[L,$]=w.useState(!1),[z,W]=w.useState(!1),[Z,X]=w.useState(0),ee=w.useRef(null),fe=w.useRef(Date.now()),oe=w.useRef(null),Q=w.useRef(null),Y=t[a],O=Y?.stories[d],B=Y?.user.id===n.id,J=5e3,A=pe=>{const He=new Date(pe).getTime(),le=Date.now(),Ee=He+1440*60*1e3-le;if(Ee<=0)return"Expired";const Be=Math.floor(Ee/(3600*1e3)),Fe=Math.floor(Ee%(3600*1e3)/(60*1e3));return Be>0?`${Be}h ${Fe}m left`:Fe>0?`${Fe}m left`:"Expiring soon"};w.useEffect(()=>{$(!1),W(!1),y(0)},[O?.id]),w.useEffect(()=>{(async()=>{if(O&&!B){const He=await Xn.view(O.id);He.success?console.log(`[Story]  View recorded for story ${O.id}`):console.error("[Story]  Failed to record view:",He.error)}O&&B&&ae()})()},[O?.id,B]),w.useEffect(()=>{if(p||!O||O.type==="image"&&!L||O.type==="video"&&!z)return;fe.current=Date.now();const pe=()=>{const He=Date.now()-fe.current,le=Math.min(He/J*100,100);y(le),le>=100?I():ee.current=setTimeout(pe,16)};return ee.current=setTimeout(pe,16),()=>{ee.current&&clearTimeout(ee.current)}},[O?.id,p,L,z]);const I=()=>{d<Y.stories.length-1?(h(d+1),y(0)):a<t.length-1?(l(a+1),h(0),y(0)):s()},H=()=>{if(d>0)h(d-1),y(0);else if(a>0){const pe=a-1;l(pe),h(t[pe].stories.length-1),y(0)}},G=async()=>{if(!b.trim()||!O)return;(await Xn.reply(O.id,b.trim())).success?(je.success("Reply sent",{description:`Your message was sent to ${Y.user.full_name}`,duration:2e3}),_(""),Q.current&&Q.current.blur()):je.error("Failed to send reply")},q=async()=>{if(!O||!B)return;(await Xn.delete(O.id)).success?(je.success("Story deleted"),i(),s()):je.error("Failed to delete story")},ae=async()=>{if(!O||!B)return;const pe=await Xn.getViews(O.id);pe.success&&pe.data?.views&&M(pe.data.views.length)},ne=async()=>{if(!O||!B)return;const pe=await Xn.getViews(O.id);pe.success&&pe.data?.views&&(N(pe.data.views),M(pe.data.views.length),j(!0),m(!0))},de=pe=>{const He="touches"in pe?pe.touches[0].clientX:pe.clientX,le=pe.currentTarget.getBoundingClientRect(),me=He-le.left,Ee=le.width/3;me<Ee?H():me>le.width-Ee&&I()},ve=pe=>{X(pe.touches[0].clientY),m(!0)},We=pe=>{const He=pe.changedTouches[0].clientY;Z-He>50&&B?ne():m(!1)},ot=async pe=>{if(!O)return;(await Xn.reply(O.id,pe)).success&&je.success("Reaction sent",{icon:pe,duration:1500})};return O?u.jsxs("div",{className:"fixed inset-0 z-50 bg-black overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 right-0 z-30 flex gap-1 p-2 pt-safe",children:Y.stories.map((pe,He)=>u.jsx("div",{className:"flex-1 h-[3px] bg-white/30 rounded-full overflow-hidden backdrop-blur-sm",children:u.jsx(te.div,{className:"h-full bg-white shadow-sm",initial:{width:0},animate:{width:He<d?"100%":He===d?`${g}%`:"0%"},transition:{duration:.1,ease:"linear"}})},He))}),u.jsxs("div",{className:"absolute top-0 left-0 right-0 z-30 pt-safe",children:[u.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gradient-to-b from-black/70 via-black/40 to-transparent backdrop-blur-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[u.jsxs("div",{className:"relative",children:[u.jsx(sn,{user:Y.user,size:"sm",showBorder:!1}),Y.user.is_online&&!B&&u.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-success rounded-full border-2 border-black"})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-white font-semibold text-[15px] truncate leading-tight",children:B?"Your story":Y.user.full_name}),u.jsxs("p",{className:"text-white/80 text-xs leading-tight",children:[new Date(O.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),"  ",A(O.created_at)]})]})]}),u.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[B&&u.jsx("button",{onClick:()=>T(!C),className:"w-10 h-10 rounded-full flex items-center justify-center hover:bg-white/10 active:bg-white/20 transition-colors",children:u.jsx(Hp,{className:"w-5 h-5 text-white"})}),u.jsx("button",{onClick:s,className:"w-10 h-10 rounded-full flex items-center justify-center hover:bg-white/10 active:bg-white/20 transition-colors",children:u.jsx(Zs,{className:"w-5 h-5 text-white"})})]})]}),u.jsx(pa,{children:C&&B&&u.jsx(te.div,{initial:{opacity:0,scale:.95,y:-5},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-5},transition:{duration:.15},className:"absolute top-full right-3 mt-1 bg-surface rounded-2xl shadow-2xl overflow-hidden min-w-[180px] border border-border/50",onClick:()=>T(!1),children:u.jsxs("button",{onClick:pe=>{pe.stopPropagation(),T(!1),q()},className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-hover-destructive transition-colors text-left text-destructive",children:[u.jsx(oi,{className:"w-[18px] h-[18px]"}),u.jsx("span",{className:"text-[15px] font-medium",children:"Delete"})]})})})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center select-none",onClick:de,onTouchStart:ve,onTouchEnd:We,onMouseDown:()=>m(!0),onMouseUp:()=>m(!1),children:u.jsx(pa,{mode:"wait",children:u.jsxs(te.div,{initial:{opacity:0,scale:.97},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.03},transition:{duration:.2,ease:[.4,0,.2,1]},className:"w-full h-full flex items-center justify-center",children:[O.type==="image"&&u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx("img",{src:O.media_url,alt:"Story",className:"max-w-full max-h-full w-auto h-auto object-contain",onLoad:()=>$(!0),onError:()=>$(!0),style:{imageRendering:"high-quality",display:"block",margin:"0 auto"}})}),O.type==="video"&&u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx("video",{ref:oe,src:O.media_url,className:"max-w-full max-h-full w-auto h-auto object-contain",autoPlay:!0,muted:!0,playsInline:!0,onLoadedData:()=>W(!0),onError:()=>W(!0),style:{display:"block",margin:"0 auto"}})}),O.type==="text"&&u.jsx("div",{className:"w-full h-full flex items-center justify-center px-8 py-12",style:{background:O.background_color||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:u.jsx("p",{className:"text-white text-[32px] leading-relaxed font-medium text-center max-w-lg px-4",children:O.text_content})}),O.caption&&u.jsx("div",{className:"absolute bottom-24 left-0 right-0 px-4",children:u.jsx(te.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-black/50 backdrop-blur-xl rounded-2xl px-4 py-3 max-w-md mx-auto border border-white/10",children:u.jsx("p",{className:"text-white text-center text-[15px] leading-relaxed",children:O.caption})})})]},O.id)})}),B&&P>0&&!S&&u.jsxs(te.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},onClick:ne,className:"absolute bottom-20 left-1/2 -translate-x-1/2 z-30 bg-black/60 backdrop-blur-xl rounded-full px-5 py-2.5 flex items-center gap-2 hover:bg-black/70 active:scale-95 transition-all border border-white/10 shadow-lg",children:[u.jsx(Oh,{className:"w-[18px] h-[18px] text-white"}),u.jsxs("span",{className:"text-white font-medium text-[15px]",children:[P," ",P===1?"view":"views"]}),u.jsx(kA,{className:"w-4 h-4 text-white/60"})]}),!B&&!S&&u.jsxs("div",{className:"absolute bottom-20 right-4 z-30 flex flex-col gap-2",children:[u.jsx(te.button,{whileTap:{scale:.9},onClick:()=>ot(""),className:"w-12 h-12 rounded-full bg-black/60 backdrop-blur-xl flex items-center justify-center hover:bg-black/70 active:scale-95 transition-all border border-white/10 shadow-lg",children:u.jsx("span",{className:"text-2xl",children:""})}),u.jsx(te.button,{whileTap:{scale:.9},onClick:()=>ot(""),className:"w-12 h-12 rounded-full bg-black/60 backdrop-blur-xl flex items-center justify-center hover:bg-black/70 active:scale-95 transition-all border border-white/10 shadow-lg",children:u.jsx("span",{className:"text-2xl",children:""})}),u.jsx(te.button,{whileTap:{scale:.9},onClick:()=>ot(""),className:"w-12 h-12 rounded-full bg-black/60 backdrop-blur-xl flex items-center justify-center hover:bg-black/70 active:scale-95 transition-all border border-white/10 shadow-lg",children:u.jsx("span",{className:"text-2xl",children:""})})]}),!B&&!S&&u.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-30 pb-safe",children:u.jsx("div",{className:"px-4 py-3 bg-gradient-to-t from-black/70 via-black/50 to-transparent backdrop-blur-sm",children:u.jsxs("div",{className:"flex items-center gap-2 max-w-2xl mx-auto",children:[u.jsx("div",{className:"flex-1 relative",children:u.jsx(hr,{ref:Q,value:b,onChange:pe=>_(pe.target.value),placeholder:"Send message",className:"bg-white/15 backdrop-blur-xl border-white/20 text-white placeholder:text-white/60 rounded-full h-12 px-5 pr-12 focus:bg-white/20 focus:border-white/30 transition-all shadow-lg text-[15px]",onKeyDown:pe=>{pe.key==="Enter"&&!pe.shiftKey&&(pe.preventDefault(),G())},onFocus:()=>m(!0),onBlur:()=>m(!1)})}),b.trim()?u.jsx(te.button,{initial:{scale:0},animate:{scale:1},exit:{scale:0},whileTap:{scale:.9},onClick:G,className:"w-12 h-12 rounded-full bg-primary hover:bg-primary/90 active:bg-primary/80 flex items-center justify-center transition-all shadow-lg flex-shrink-0",children:u.jsx(uu,{className:"w-5 h-5 text-white"})}):u.jsx(te.button,{whileTap:{scale:.9},onClick:()=>ot(""),className:"w-12 h-12 rounded-full bg-white/15 backdrop-blur-xl hover:bg-white/20 active:bg-white/25 flex items-center justify-center transition-all shadow-lg flex-shrink-0 border border-white/20",children:u.jsx(AA,{className:"w-5 h-5 text-white"})})]})})}),u.jsx(pa,{children:S&&B&&u.jsx(te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 z-40 bg-black/95 backdrop-blur-md flex items-end",onClick:()=>{j(!1),m(!1)},children:u.jsxs(te.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:35,stiffness:400,mass:.8},className:"bg-surface w-full rounded-t-[28px] overflow-hidden max-h-[75vh] pb-safe shadow-2xl",onClick:pe=>pe.stopPropagation(),children:[u.jsx("div",{className:"w-full flex justify-center py-2 bg-surface border-b border-border/50",children:u.jsx("div",{className:"w-10 h-1 bg-muted-foreground/30 rounded-full"})}),u.jsx("div",{className:"px-5 py-4 border-b border-border/50 bg-surface",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Viewers"}),u.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:P===0?"No views yet":`${P} ${P===1?"view":"views"}`})]}),u.jsx("button",{onClick:()=>{j(!1),m(!1)},className:"w-10 h-10 rounded-full hover:bg-hover-surface active:bg-hover-muted flex items-center justify-center transition-colors",children:u.jsx(Zs,{className:"w-5 h-5 text-foreground"})})]})}),u.jsx("div",{className:"overflow-y-auto max-h-[calc(75vh-120px)]",children:E.length>0?u.jsx("div",{className:"py-1",children:E.map((pe,He)=>u.jsxs(te.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:He*.05},className:"flex items-center gap-3 px-5 py-3 hover:bg-hover-surface active:bg-hover-muted transition-colors",children:[u.jsx(sn,{user:pe.user,size:"md"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-[15px] text-foreground truncate",children:pe.user?.full_name}),u.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(pe.viewed_at).toLocaleString([],{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric"})})]})]},pe.id))}):u.jsxs("div",{className:"py-16 text-center",children:[u.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mx-auto mb-4",children:u.jsx(Oh,{className:"w-8 h-8 text-muted-foreground/50"})}),u.jsx("p",{className:"text-muted-foreground text-[15px]",children:"No views yet"}),u.jsx("p",{className:"text-muted-foreground/60 text-sm mt-1",children:"Check back later to see who viewed your story"})]})})]})})}),O.type!=="text"&&!L&&!z&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black z-10",children:u.jsx("div",{className:"relative",children:u.jsx("div",{className:"w-12 h-12 border-4 border-white/10 border-t-white rounded-full animate-spin"})})})]}):null}function f$({className:t,...e}){return u.jsx("textarea",{"data-slot":"textarea",className:Qe("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}const lh=["#0057FF","#00D4A6","#FF4D4F","#FFB020","#9333EA","#EC4899","#10B981","#3B82F6","#000000","#FFFFFF"];function h$({currentUser:t,onClose:e,onSuccess:n}){const[s,i]=w.useState("select"),[a,l]=w.useState([]),[d,h]=w.useState(""),[p,m]=w.useState(lh[0]),[g,y]=w.useState(""),[b,_]=w.useState(null),[S,j]=w.useState(null),[C,T]=w.useState(!1),E=w.useRef(null),N=z=>{const W=z.target.files;if(!W||W.length===0)return;const Z=[];for(let X=0;X<W.length;X++){const ee=W[X];if(!ee.type.startsWith("image/")&&!ee.type.startsWith("video/")){je.error(`${ee.name}: Invalid file type`);continue}if(ee.size>50*1024*1024){je.error(`${ee.name}: File too large (max 50MB)`);continue}Z.push(ee)}if(Z.length!==0){if(Z.length===1)_(Z[0]),j(URL.createObjectURL(Z[0])),i("media");else{const X=Z.map(ee=>({id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:ee.type.startsWith("image/")?"image":"video",file:ee,preview_url:URL.createObjectURL(ee)}));l(ee=>[...ee,...X]),i("queue"),je.success(`${Z.length} ${Z.length===1?"story":"stories"} added to queue`)}z.target.value=""}},P=()=>{if(!d.trim()){je.error("Please enter some text");return}const z={id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"text",text_content:d.trim(),background_color:p};l(W=>[...W,z]),h(""),m(lh[0]),i(a.length>0?"queue":"select"),je.success("Text story added to queue")},M=()=>{if(!b)return;const z={id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:b.type.startsWith("image/")?"image":"video",file:b,preview_url:S||void 0,caption:g.trim()||void 0};l(W=>[...W,z]),_(null),j(null),y(""),i("queue"),je.success("Story added to queue")},L=z=>{l(W=>W.filter(Z=>Z.id!==z)),a.length===1&&i("select")},$=async()=>{if(a.length===0){je.error("No stories to publish");return}T(!0);let z=0,W=0;try{for(const Z of a)try{if(Z.type==="text")(await Xn.create("text",{text_content:Z.text_content,background_color:Z.background_color})).success?z++:W++;else{const X=await im.uploadFile(Z.file,"attachment");if(!X.success||!X.data?.url){W++;continue}(await Xn.create(Z.type,{media_url:X.data.url,caption:Z.caption})).success?z++:W++}await new Promise(X=>setTimeout(X,300))}catch(X){console.error("Error publishing story:",X),W++}z>0&&W===0?(je.success(`${z} ${z===1?"story":"stories"} published successfully! `),n(),e()):z>0&&W>0?(je.warning(`${z} published, ${W} failed`),l(Z=>Z.slice(z))):je.error("Failed to publish stories. Please try again.")}catch(Z){console.error("Publish error:",Z),je.error("An error occurred while publishing")}finally{T(!1)}};return u.jsxs("div",{className:"fixed inset-0 z-50 bg-background",children:[u.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 bg-gradient-to-r from-primary to-accent shadow-lg",children:u.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[u.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full hover:bg-white/20 flex items-center justify-center transition-colors",disabled:C,children:u.jsx(Zs,{className:"w-5 h-5 text-white"})}),u.jsx("h2",{className:"text-lg font-semibold text-white",children:s==="queue"?`${a.length} ${a.length===1?"Story":"Stories"}`:"Create Story"}),s==="queue"&&a.length>0?u.jsx(Ae,{onClick:$,disabled:C,size:"sm",className:"bg-white text-primary hover:bg-white/90",children:C?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-4 h-4 border-2 border-primary/30 border-t-primary rounded-full animate-spin"}),u.jsx("span",{className:"hidden sm:inline",children:"Publishing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(uu,{className:"w-4 h-4 mr-1"}),u.jsx("span",{children:"Publish All"})]})}):u.jsx("div",{className:"w-10"})]})}),u.jsx("div",{className:"pt-16 h-full flex flex-col overflow-hidden",children:u.jsxs(pa,{mode:"wait",children:[s==="select"&&u.jsx(te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex items-center justify-center p-6",children:u.jsxs("div",{className:"w-full max-w-md space-y-4",children:[a.length>0&&u.jsxs(te.button,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},onClick:()=>i("queue"),className:"w-full h-20 rounded-2xl bg-primary/10 border-2 border-primary flex items-center justify-between px-6 hover:bg-primary/20 transition-all group",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-primary flex items-center justify-center",children:u.jsx("span",{className:"text-white font-bold text-lg",children:a.length})}),u.jsxs("div",{className:"text-left",children:[u.jsx("p",{className:"font-medium text-foreground",children:"Story Queue"}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.length," ",a.length===1?"story":"stories"," ready"]})]})]}),u.jsx("svg",{className:"w-6 h-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),u.jsxs(te.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},onClick:()=>i("text"),className:"w-full h-32 rounded-2xl bg-gradient-to-br from-primary to-accent flex flex-col items-center justify-center gap-3 hover:shadow-lg transition-all group",children:[u.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center group-hover:scale-110 transition-transform",children:u.jsx(yR,{className:"w-8 h-8 text-white"})}),u.jsx("span",{className:"text-white font-medium",children:"Text Status"})]}),u.jsxs(te.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},onClick:()=>E.current?.click(),className:"w-full h-32 rounded-2xl bg-surface border-2 border-dashed border-border flex flex-col items-center justify-center gap-3 hover:border-primary hover:bg-hover-primary transition-all group",children:[u.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center group-hover:scale-110 transition-transform",children:u.jsx(Wb,{className:"w-8 h-8 text-muted-foreground group-hover:text-primary"})}),u.jsx("span",{className:"text-foreground font-medium",children:"Photo or Video"}),u.jsx("span",{className:"text-xs text-muted-foreground",children:"Select multiple files"})]}),u.jsx("input",{ref:E,type:"file",accept:"image/*,video/*",onChange:N,className:"hidden",multiple:!0})]})},"select"),s==="text"&&u.jsxs(te.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex-1 flex flex-col",children:[u.jsx("div",{className:"flex-1 flex items-center justify-center p-8",style:{backgroundColor:p},children:u.jsx(f$,{value:d,onChange:z=>h(z.target.value),placeholder:"Type your status...",className:"max-w-lg bg-transparent border-none text-white text-2xl font-medium text-center placeholder:text-white/50 resize-none h-auto min-h-[200px] focus-visible:ring-0",autoFocus:!0,maxLength:250})}),u.jsxs("div",{className:"bg-surface border-t border-border p-4 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Background Color"}),u.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:lh.map(z=>u.jsx("button",{onClick:()=>m(z),className:"flex-shrink-0 w-10 h-10 rounded-full border-2 flex items-center justify-center transition-transform hover:scale-110",style:{backgroundColor:z,borderColor:p===z?"var(--primary)":"transparent"},children:p===z&&u.jsx(Xs,{className:"w-5 h-5",style:{color:z==="#FFFFFF"?"#000000":"#FFFFFF"}})},z))})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx(Ae,{onClick:()=>{i(a.length>0?"queue":"select"),h("")},variant:"outline",className:"flex-1",children:"Cancel"}),u.jsxs(Ae,{onClick:P,disabled:!d.trim(),className:"flex-1",size:"lg",children:[u.jsx(Xo,{className:"w-4 h-4 mr-2"}),"Add to Queue"]})]})]})]},"text"),s==="media"&&S&&b&&u.jsxs(te.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex-1 flex flex-col",children:[u.jsx("div",{className:"flex-1 bg-black flex items-center justify-center p-4 overflow-hidden",children:b.type.startsWith("image/")?u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx(ys,{src:S,alt:"Preview",className:"max-w-full max-h-full object-contain",style:{display:"block",margin:"0 auto"}})}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx("video",{src:S,className:"max-w-full max-h-full object-contain",style:{display:"block",margin:"0 auto"},controls:!0,autoPlay:!0,muted:!0,loop:!0,playsInline:!0})})}),u.jsxs("div",{className:"bg-surface border-t border-border p-4 space-y-4",children:[u.jsx(hr,{value:g,onChange:z=>y(z.target.value),placeholder:"Add a caption (optional)...",maxLength:100}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx(Ae,{onClick:()=>{i(a.length>0?"queue":"select"),_(null),j(null),y("")},variant:"outline",className:"flex-1",children:"Cancel"}),u.jsxs(Ae,{onClick:M,className:"flex-1",size:"lg",children:[u.jsx(Xo,{className:"w-4 h-4 mr-2"}),"Add to Queue"]})]})]})]},"media"),s==="queue"&&u.jsxs(te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col",children:[u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:a.map((z,W)=>u.jsx(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{delay:W*.05},className:"bg-surface rounded-xl border border-border overflow-hidden group hover:border-primary/50 transition-colors",children:u.jsxs("div",{className:"flex items-center gap-3 p-3",children:[u.jsx("div",{className:"relative flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden bg-muted",children:z.type==="text"?u.jsx("div",{className:"w-full h-full flex items-center justify-center p-2",style:{backgroundColor:z.background_color},children:u.jsx("p",{className:"text-white text-[8px] font-medium text-center leading-tight line-clamp-4",children:z.text_content})}):z.preview_url?u.jsxs(u.Fragment,{children:[u.jsx(ys,{src:z.preview_url,alt:"Preview",className:"w-full h-full object-cover"}),z.type==="video"&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:u.jsx("div",{className:"w-6 h-6 rounded-full bg-white/90 flex items-center justify-center",children:u.jsx("svg",{className:"w-3 h-3 text-black ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M8 5v14l11-7z"})})})})]}):null}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-sm truncate",children:z.type==="text"?"Text Status":z.type==="image"?"Photo":"Video"}),z.caption&&u.jsx("p",{className:"text-xs text-muted-foreground truncate",children:z.caption}),z.type==="text"&&z.text_content&&u.jsx("p",{className:"text-xs text-muted-foreground truncate",children:z.text_content})]}),u.jsx("button",{onClick:()=>L(z.id),disabled:C,className:"flex-shrink-0 w-9 h-9 rounded-full bg-destructive/10 hover:bg-destructive hover:text-white text-destructive flex items-center justify-center transition-all opacity-0 group-hover:opacity-100",children:u.jsx(oi,{className:"w-4 h-4"})})]})},z.id))}),u.jsx("div",{className:"border-t border-border p-4 bg-surface",children:u.jsxs(Ae,{onClick:()=>i("select"),variant:"outline",className:"w-full",disabled:C,children:[u.jsx(Xo,{className:"w-4 h-4 mr-2"}),"Add More Stories"]})})]},"queue")]})})]})}var p$="Separator",sw="horizontal",m$=["horizontal","vertical"],Kk=w.forwardRef((t,e)=>{const{decorative:n,orientation:s=sw,...i}=t,a=g$(s)?s:sw,d=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return u.jsx(Ge.div,{"data-orientation":a,...d,...i,ref:e})});Kk.displayName=p$;function g$(t){return m$.includes(t)}var v$=Kk;function y$({className:t,orientation:e="horizontal",decorative:n=!0,...s}){return u.jsx(v$,{"data-slot":"separator-root",decorative:n,orientation:e,className:Qe("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...s})}function x$({user:t,currentUser:e,onBack:n,onSendMessage:s,onInitiateCall:i,onBlock:a,onUnblock:l,onDelete:d,isBlocked:h=!1,lastSeen:p}){const m=t.is_online,g=m?"online":p||"offline";return u.jsxs("div",{className:"h-screen flex flex-col bg-background overflow-hidden",children:[u.jsxs(te.div,{className:"bg-surface border-b border-border px-4 py-3 flex items-center gap-4 shadow-sm shrink-0",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:[u.jsx(Ae,{variant:"ghost",size:"icon",onClick:n,className:"h-10 w-10 rounded-full hover:bg-[var(--hover-surface)] shrink-0 transition-colors","aria-label":"Back",children:u.jsx(Jo,{className:"w-5 h-5"})}),u.jsx("div",{className:"flex-1",children:u.jsx("h2",{className:"truncate",children:"Contact Info"})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:[u.jsxs(te.div,{className:"bg-surface pb-6 flex flex-col items-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.1},children:[u.jsx("div",{className:"w-full bg-background/50 flex items-center justify-center py-12 mb-6",children:u.jsxs("div",{className:"relative group cursor-pointer",children:[u.jsxs("div",{className:"relative w-[280px] h-[280px] sm:w-[320px] sm:h-[320px] rounded-full overflow-hidden shadow-2xl ring-1 ring-border/20 transition-all duration-300 group-hover:shadow-3xl group-hover:scale-[1.02]",children:[t.avatar_url?u.jsx("img",{src:t.avatar_url,alt:t.full_name,className:"w-full h-full object-cover object-center",style:{imageRendering:"auto",WebkitFontSmoothing:"antialiased"}}):u.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary to-accent",children:u.jsx("span",{className:"text-8xl font-semibold text-white select-none",children:t.full_name.split(" ").map(y=>y[0]).join("").substring(0,2).toUpperCase()})}),m&&u.jsx("div",{className:"absolute bottom-6 right-6 w-12 h-12 bg-success rounded-full border-[5px] border-surface shadow-xl"})]}),u.jsx("div",{className:"absolute inset-0 rounded-full bg-black/0 group-hover:bg-black/5 transition-all duration-300 pointer-events-none"})]})}),u.jsx("h1",{className:"text-2xl font-medium mb-1 text-center px-4",children:t.full_name}),u.jsx("p",{className:"text-base text-muted-foreground mb-1",children:t.phone_number?Xx(t.phone_number):"No phone number"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:g})]}),u.jsxs(te.div,{className:"bg-background px-6 py-6 flex justify-center gap-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[s&&u.jsxs(te.button,{onClick:s,className:"flex flex-col items-center gap-2 group",whileTap:{scale:.95},children:[u.jsx("div",{className:"w-14 h-14 rounded-full bg-primary/10 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:u.jsx(Ya,{className:"w-6 h-6 text-primary"})}),u.jsx("span",{className:"text-xs text-muted-foreground",children:"Message"})]}),i&&u.jsxs(u.Fragment,{children:[u.jsxs(te.button,{onClick:()=>i("voice"),className:"flex flex-col items-center gap-2 group",whileTap:{scale:.95},children:[u.jsx("div",{className:"w-14 h-14 rounded-full bg-success/10 flex items-center justify-center group-hover:bg-success/20 transition-colors",children:u.jsx(mr,{className:"w-6 h-6 text-success"})}),u.jsx("span",{className:"text-xs text-muted-foreground",children:"Audio"})]}),u.jsxs(te.button,{onClick:()=>i("video"),className:"flex flex-col items-center gap-2 group",whileTap:{scale:.95},children:[u.jsx("div",{className:"w-14 h-14 rounded-full bg-info/10 flex items-center justify-center group-hover:bg-info/20 transition-colors",children:u.jsx(ii,{className:"w-6 h-6 text-info"})}),u.jsx("span",{className:"text-xs text-muted-foreground",children:"Video"})]})]})]}),u.jsxs(te.div,{className:"bg-surface mt-2 px-4 py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.3},children:[u.jsx("h3",{className:"text-sm text-primary mb-2",children:"About"}),u.jsx("p",{className:"text-base text-foreground mb-1",children:t.status||t.status_message||t.bio||"Hey there! I am using AuroraLink."}),t.status_updated_at&&u.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(t.status_updated_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),t.phone_number&&u.jsxs(te.div,{className:"bg-surface mt-2 px-4 py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.35},children:[u.jsx("h3",{className:"text-sm text-primary mb-2",children:"Phone"}),u.jsx("p",{className:"text-base text-foreground mb-1",children:Xx(t.phone_number)}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Mobile"})]}),t.email&&u.jsxs(te.div,{className:"bg-surface mt-2 px-4 py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.4},children:[u.jsx("h3",{className:"text-sm text-primary mb-2",children:"Email"}),u.jsx("p",{className:"text-base text-foreground",children:t.email})]}),t.username&&t.username!==t.email?.split("@")[0]&&u.jsxs(te.div,{className:"bg-surface mt-2 px-4 py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.45},children:[u.jsx("h3",{className:"text-sm text-primary mb-2",children:"Username"}),u.jsxs("p",{className:"text-base text-foreground",children:["@",t.username]})]}),u.jsx("div",{className:"h-4"}),u.jsxs(te.div,{className:"bg-surface mt-2",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.5},children:[h?l&&u.jsxs("button",{onClick:l,className:"w-full px-4 py-3.5 flex items-center gap-3 hover:bg-[var(--hover-surface)] transition-colors text-left",children:[u.jsx(Qb,{className:"w-5 h-5 text-warning"}),u.jsx("span",{className:"text-base text-warning",children:"Unblock Contact"})]}):a&&u.jsxs("button",{onClick:a,className:"w-full px-4 py-3.5 flex items-center gap-3 hover:bg-[var(--hover-surface)] transition-colors text-left",children:[u.jsx(Ah,{className:"w-5 h-5 text-destructive"}),u.jsx("span",{className:"text-base text-destructive",children:"Block Contact"})]}),a&&d&&u.jsx(y$,{}),d&&u.jsxs("button",{onClick:d,className:"w-full px-4 py-3.5 flex items-center gap-3 hover:bg-[var(--hover-surface)] transition-colors text-left",children:[u.jsx(oi,{className:"w-5 h-5 text-destructive"}),u.jsx("span",{className:"text-base text-destructive",children:"Delete Chat"})]})]}),u.jsx("div",{className:"h-8"})]})]})}function w$({caller:t,callType:e,onAccept:n,onReject:s}){return u.jsx(te.div,{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsxs(te.div,{className:"bg-surface rounded-3xl p-8 max-w-md w-full shadow-2xl border border-border",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},children:[u.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[u.jsxs(te.div,{animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"relative mb-6",children:[u.jsx(sn,{src:t.avatar_url,alt:t.full_name,fallbackText:t.full_name,size:"2xl",className:"shadow-xl"}),u.jsx(te.div,{className:"absolute inset-0 rounded-full border-4 border-primary",animate:{scale:[1,1.3,1],opacity:[.8,0,.8]},transition:{duration:2,repeat:1/0,ease:"easeOut"}})]}),u.jsx("h2",{className:"text-2xl mb-2",children:t.full_name}),u.jsx("div",{className:"flex items-center gap-2 text-muted-foreground",children:e==="video"?u.jsxs(u.Fragment,{children:[u.jsx(ii,{className:"w-4 h-4"}),u.jsx("span",{children:"Incoming video call..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(mr,{className:"w-4 h-4"}),u.jsx("span",{children:"Incoming call..."})]})}),u.jsx(te.div,{className:"flex gap-2 mt-6",initial:{opacity:0},animate:{opacity:1},children:[0,1,2].map(i=>u.jsx(te.div,{className:"w-2 h-2 rounded-full bg-primary",animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,delay:i*.2}},i))})]}),u.jsxs("div",{className:"flex items-center justify-center gap-6",children:[u.jsx(te.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:u.jsx(Ae,{variant:"destructive",size:"icon",onClick:s,className:"h-16 w-16 rounded-full shadow-lg bg-red-500 hover:bg-red-600","aria-label":"Reject call",children:u.jsx(Ih,{className:"w-7 h-7"})})}),u.jsx(te.div,{whileHover:{scale:1.1},whileTap:{scale:.95},animate:{scale:[1,1.05,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},children:u.jsx(Ae,{size:"icon",onClick:n,className:"h-20 w-20 rounded-full shadow-xl bg-gradient-to-br from-success to-accent hover:from-success/90 hover:to-accent/90","aria-label":"Accept call",children:e==="video"?u.jsx(ii,{className:"w-8 h-8"}):u.jsx(mr,{className:"w-8 h-8"})})})]})]})})}function b$({open:t,callType:e,onGrantPermissions:n,onCancel:s}){return u.jsx(Sa,{open:t,children:u.jsxs(_a,{children:[u.jsxs(ka,{children:[u.jsxs(Ca,{className:"flex items-center gap-2",children:[e==="video"?u.jsx(ii,{className:"w-5 h-5 text-primary"}):u.jsx(Qs,{className:"w-5 h-5 text-primary"}),"Permission Required"]}),u.jsxs(Ea,{className:"space-y-3",children:[u.jsxs("p",{children:["To make ",e==="video"?"video":"voice"," calls, AuroraLink needs access to your:"]}),u.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[u.jsxs("li",{className:"flex items-center gap-2",children:[u.jsx(Qs,{className:"w-4 h-4"}),u.jsx("span",{children:"Microphone"})]}),e==="video"&&u.jsxs("li",{className:"flex items-center gap-2",children:[u.jsx(zb,{className:"w-4 h-4"}),u.jsx("span",{children:"Camera"})]})]}),u.jsx("p",{className:"text-sm",children:'Your browser will ask you to grant these permissions. Please click "Allow" when prompted.'})]})]}),u.jsxs(ja,{children:[u.jsx(Ta,{onClick:s,children:"Cancel"}),u.jsx(Na,{onClick:n,children:"Grant Permissions"})]})]})})}function S$(){const[t,e]=w.useState(!0),[n,s]=w.useState("onboarding"),[i,a]=w.useState(null),[l,d]=w.useState(null),[h,p]=w.useState(()=>{const ye=localStorage.getItem("themePreference");return ye==="auto"||!ye?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":ye}),[m,g]=w.useState(!0),[y,b]=w.useState([]),[_,S]=w.useState(0),[j,C]=w.useState(0),[T,E]=w.useState(null),[N,P]=w.useState(""),[M,L]=w.useState(null),[$,z]=w.useState(null),[W,Z]=w.useState(null),[X,ee]=w.useState(null),[fe,oe]=w.useState(null),[Q,Y]=w.useState(null),[O,B]=w.useState(!1),[J,A]=w.useState(null),[I,H]=w.useState(null),G=w.useRef(null);w.useRef(null);const q=w.useRef(null);w.useEffect(()=>{const ye=setTimeout(()=>{e(!1),ae()},2500);return()=>clearTimeout(ye)},[]),w.useEffect(()=>{h==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[h]),w.useEffect(()=>{if(localStorage.getItem("themePreference")==="auto"){const $e=window.matchMedia("(prefers-color-scheme: dark)"),qe=Ue=>{p(Ue.matches?"dark":"light")};return $e.addEventListener("change",qe),()=>$e.removeEventListener("change",qe)}},[]),w.useEffect(()=>{if(i&&n==="home"){const ye=async()=>{try{const qe=pn(),{data:{session:Ue},error:It}=await qe.auth.getSession();if(It||!Ue){console.error("[Session Health] Session lost, logging out..."),je.error("Session expired",{description:"Please log in again to continue."}),await ve();return}if(!Ue.access_token||!Ue.access_token.startsWith("eyJ")){console.error("[Session Health] Invalid token format, logging out..."),await ve();return}if(Ue.expires_at){const Et=Ue.expires_at*1e3,Ut=Date.now(),gt=Et-Ut;if(gt<0){console.warn("[Session Health] Token expired, refreshing...");const{data:{session:Je},error:et}=await qe.auth.refreshSession();et||!Je?(console.error("[Session Health] Refresh failed, logging out..."),je.error("Session expired",{description:"Please log in again to continue."}),await ve()):console.log("[Session Health]  Session refreshed successfully")}else if(gt<3e5){console.log("[Session Health] Token expiring soon, refreshing proactively...");const{data:{session:Je},error:et}=await qe.auth.refreshSession();!et&&Je?console.log("[Session Health]  Session proactively refreshed"):console.warn("[Session Health] Proactive refresh failed, will retry later")}}const{error:ut}=await qe.auth.getUser();if(ut)if(console.error("[Session Health] Token validation failed:",ut.message),console.error("[Session Health] Error name:",ut.name),ut.name==="AuthSessionMissingError"||ut.message.includes("Auth session missing"))console.error("[Session Health] CRITICAL: Auth session missing error detected"),console.error("[Session Health] This means the token is from a different project or corrupted"),je.error("Session Invalid",{description:"Your authentication session is invalid. You will be logged out.",duration:5e3}),await new Promise(Et=>setTimeout(Et,2e3)),await ve();else{console.warn("[Session Health] Attempting one-time session refresh...");const{error:Et}=await qe.auth.refreshSession();Et?(console.error("[Session Health] Refresh failed, logging out"),je.error("Session Error",{description:"Could not refresh your session. Please log in again."}),await new Promise(Ut=>setTimeout(Ut,1e3)),await ve()):console.log("[Session Health]  Session refreshed successfully")}}catch(qe){console.error("[Session Health] Error checking session:",qe)}};ye();const $e=setInterval(ye,3e4);return()=>{clearInterval($e)}}},[i,n]),w.useEffect(()=>{if(i&&n==="home"){(async()=>{try{const qe=pn(),{data:{session:Ue}}=await qe.auth.getSession();if(Ue?.access_token){const It=await Ec.updateStatus(!0);It.success||console.error("[Presence] Failed to update status:",It.error)}else console.warn("[Presence] No valid session, skipping presence update")}catch(qe){console.error("[Presence] Error updating presence:",qe)}})();const $e=async()=>{try{const qe=pn(),{data:{session:Ue}}=await qe.auth.getSession();Ue?.access_token&&(document.hidden?await Ec.updateStatus(!1):await Ec.updateStatus(!0))}catch(qe){console.error("[Presence] Error in visibility change:",qe)}};return document.addEventListener("visibilitychange",$e),()=>{document.removeEventListener("visibilitychange",$e),(async()=>{try{const Ue=pn(),{data:{session:It}}=await Ue.auth.getSession();It?.access_token&&await Ec.updateStatus(!1)}catch(Ue){console.error("[Presence] Error updating offline status:",Ue)}})()}}},[i,n]);const ae=async()=>{g(!0);try{const ye=pn();console.log("[Auth] ========== CHECKING AUTH ==========");const{data:{session:$e},error:qe}=await ye.auth.getSession();if(qe){console.error("[Auth]  Session error:",qe),await ye.auth.signOut(),localStorage.clear(),g(!1);return}if(!$e){console.log("[Auth]   No session found - user needs to log in"),g(!1);return}if(!$e.access_token||!$e.user){console.error("[Auth]  Invalid session - missing token or user"),await ye.auth.signOut(),localStorage.clear(),g(!1);return}if(!$e.access_token.startsWith("eyJ")){console.error("[Auth]  Invalid token format - not a JWT"),await ye.auth.signOut(),localStorage.clear(),g(!1);return}if(console.log("[Auth]  Session found:",{user_id:$e.user?.id,email:$e.user?.email,has_access_token:!!$e.access_token,token_format_valid:$e.access_token?.startsWith("eyJ"),expires_at:$e.expires_at?new Date($e.expires_at*1e3).toLocaleString():"N/A"}),$e.expires_at){const gt=$e.expires_at*1e3,Je=Date.now(),et=Math.floor((gt-Je)/1e3);if(console.log(`[Auth] Token expires in ${et} seconds`),et<300){console.warn("[Auth]   Session expiring soon, refreshing...");const{data:Gt,error:Mt}=await ye.auth.refreshSession();if(Mt||!Gt.session){console.error("[Auth]  Failed to refresh session:",Mt),console.error("[Auth] User should log out and log back in"),je.error("Session Expired",{description:"Please log out and log back in to continue."}),g(!1);return}else{console.log("[Auth]  Session refreshed successfully");const{data:{session:Dt}}=await ye.auth.getSession();Dt&&console.log("[Auth] Using refreshed session")}}}console.log("[Auth] Validating user token...");const{data:{user:Ue},error:It}=await ye.auth.getUser();if(It){console.error("[Auth]  Failed to validate user:",It),console.error("[Auth] This usually means the token is invalid or expired"),je.error("Authentication Error",{description:"Please log out and log back in."}),g(!1);return}if(!Ue){console.error("[Auth]  No user found despite having session"),g(!1);return}console.log("[Auth]  User validated:",Ue.email);const{data:{session:ut}}=await ye.auth.getSession(),Et=ut?.access_token;if(!Et){console.error("[Auth]  No access token available after validation"),g(!1);return}if(!Et.startsWith("eyJ")){console.error("[Auth]  Invalid token format - not a JWT!"),console.error("[Auth] Token preview:",Et.substring(0,20)),g(!1);return}console.log("[Auth]  Access token validated (JWT format correct)"),console.log("[Auth] Token length:",Et.length);try{console.log("[Auth]  Fetching user profile from backend...");const gt=await fetch(`https://${Va}.supabase.co/functions/v1/make-server-29f6739b/profile/${Ue.id}`,{headers:{Authorization:`Bearer ${Et}`}});if(console.log("[Auth] Backend response status:",gt.status),gt.ok){const Je=await gt.json();if(Je.user){console.log("[Auth]  Successfully loaded user profile from backend"),a(Je.user),s("home"),g(!1);return}else console.warn("[Auth]   Response OK but no user data in response")}else{const Je=await gt.text();if(console.error("[Auth]  Backend returned error, status:",gt.status),console.error("[Auth] Error response:",Je),gt.status===401){console.warn("[Auth]   Backend authentication failed (401)"),console.warn("[Auth] This usually means the JWT token is invalid or from a different project"),console.log("[Auth] Attempting session refresh...");const{data:et,error:Gt}=await ye.auth.refreshSession();if(!Gt&&et.session?.access_token){console.log("[Auth]  Session refreshed, retrying profile fetch...");const Mt=await fetch(`https://${Va}.supabase.co/functions/v1/make-server-29f6739b/profile/${Ue.id}`,{headers:{Authorization:`Bearer ${et.session.access_token}`}});if(Mt.ok){const Dt=await Mt.json();if(Dt.user){console.log("[Auth]  Successfully loaded user profile after refresh"),a(Dt.user),s("home"),g(!1);return}}else console.error("[Auth]  Retry also failed with status:",Mt.status)}else console.error("[Auth]  Session refresh failed:",Gt);console.error("[Auth]  All authentication attempts failed"),console.error("[Auth] Clearing corrupted session and showing error..."),await ye.auth.signOut(),localStorage.clear(),je.error("Authentication Error",{description:"Your session could not be validated. Please log in again.",duration:5e3}),g(!1),s("auth");return}}}catch(gt){console.error("[Auth]  Network error fetching profile:",gt),je.error("Connection Error",{description:"Could not connect to the server. Please check your internet connection.",duration:5e3})}console.log("[Auth]   Using fallback - creating user from auth metadata");const Ut={id:Ue.id,full_name:Ue.user_metadata?.full_name||"User",username:Ue.email?.split("@")[0]||"user",email:Ue.email,phone_number:Ue.user_metadata?.phone_number,is_online:!0};console.log("[Auth] Created fallback user:",Ut),a(Ut),s("home")}catch(ye){console.error("[Auth]  Unexpected error in checkAuth:",ye),ye instanceof Error&&(console.error("[Auth] Error message:",ye.message),console.error("[Auth] Error stack:",ye.stack))}finally{console.log("[Auth] ========== AUTH CHECK COMPLETE =========="),g(!1)}},ne=()=>{s("auth")},de=async()=>{console.log("[App] ========== AUTH SUCCESS HANDLER =========="),console.log("[App] Auth success callback triggered");const ye=pn(),$e=Date.now(),qe=1e4;let Ue=null,It=0;for(;!Ue&&Date.now()-$e<qe;){It++,console.log(`[App]  Attempt ${It} to get and validate session...`);const{data:{session:ut},error:Et}=await ye.auth.getSession();if(Et){console.error("[App] Session error:",Et),await new Promise(Je=>setTimeout(Je,500));continue}if(!ut){console.warn("[App] No session found, waiting 500ms..."),await new Promise(Je=>setTimeout(Je,500));continue}if(!ut.access_token||!ut.user){console.warn("[App] Session incomplete (no token or user), waiting..."),await new Promise(Je=>setTimeout(Je,500));continue}if(!ut.access_token.startsWith("eyJ")){console.error("[App]  Invalid token format - not a JWT!"),console.error("[App] Token preview:",ut.access_token.substring(0,50)),await new Promise(Je=>setTimeout(Je,500));continue}if(ut.expires_at){const Je=ut.expires_at*1e3,et=Date.now();if(Je<=et){console.warn("[App] Token is expired, refreshing...");const{data:Gt,error:Mt}=await ye.auth.refreshSession();if(!Mt&&Gt.session){console.log("[App]  Session refreshed"),await new Promise(Dt=>setTimeout(Dt,300));continue}else{console.error("[App] Failed to refresh session:",Mt),await new Promise(Dt=>setTimeout(Dt,500));continue}}}console.log("[App] Validating token with getUser()...");const{data:{user:Ut},error:gt}=await ye.auth.getUser();if(gt){console.error("[App] Token validation failed:",gt.message),console.warn("[App] Attempting to refresh session...");const{data:Je,error:et}=await ye.auth.refreshSession();if(!et&&Je.session){console.log("[App]  Session refreshed after validation failure"),await new Promise(Gt=>setTimeout(Gt,300));continue}else{console.error("[App] Failed to refresh after validation failure:",et),await new Promise(Gt=>setTimeout(Gt,500));continue}}if(!Ut){console.error("[App] No user returned from getUser()"),await new Promise(Je=>setTimeout(Je,500));continue}Ue=ut,console.log(`[App]  Valid session obtained after ${It} attempts`),console.log("[App] Session details:",{user_id:Ut.id,email:Ut.email,token_length:ut.access_token.length,expires_at:new Date(ut.expires_at*1e3).toLocaleString()})}if(!Ue){console.error("[App]  Failed to obtain valid session after timeout"),console.error("[App] User needs to try logging in again"),je.error("Session Error",{description:"Could not establish session. Please try logging in again."});return}console.log("[App] Proceeding to load user data..."),await ae()},ve=async()=>{await pn().auth.signOut(),localStorage.clear(),a(null),s("auth"),d(null),z(null),ee(null),console.log("[Logout] User logged out, storage cleared")},We=ye=>{d(ye),s("conversation")},ot=()=>{s("group-create")},pe=()=>{s("settings")},He=()=>{d(null),s("home")},le=ye=>{d(ye),s("conversation")},me=()=>{p(h==="light"?"dark":"light")},Ee=ye=>{a(ye)},Be=(ye,$e)=>{b(ye),S($e),s("story-view")},Fe=()=>{s("story-create")},Le=async()=>{s("home"),await new Promise(ye=>setTimeout(ye,300)),C(ye=>ye+1)},tt=()=>{s("home"),C(ye=>ye+1)},Ot=(ye,$e)=>{E(ye),P($e||""),L(l),s("profile-view")},nt=()=>{s(M?"conversation":"home")};w.useEffect(()=>{},[i,n,X,$]);const Bt=async(ye,$e)=>{je.info("Coming Soon! ",{description:`${$e==="video"?"Video":"Voice"} calling feature will be available soon. Stay tuned!`})},tr=async()=>{},nr=()=>{},xr=async()=>{ee(null),je.info("Coming Soon! ",{description:"Voice and video calling will be available soon. Stay tuned!"})},_s=async()=>{X&&(console.log("[Call] Rejecting call:",X.id),await _x.reject(X.id),ee(null),je("Call declined"))},rr=async()=>{console.log("[Call] Ending call"),$&&await _x.end($.id),q.current&&(clearInterval(q.current),q.current=null),G.current&&(G.current.cleanup(),G.current=null),z(null),Z(null),oe(null),Y(null),s("home"),je("Call ended")};return t?u.jsx(AR,{onComplete:()=>e(!1)}):m?u.jsxs("div",{className:"h-screen w-full flex items-center justify-center bg-gradient-to-br from-background via-surface to-muted relative overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-0 opacity-20",children:[u.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-primary/30 rounded-full blur-3xl animate-pulse"}),u.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-accent/30 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),u.jsxs("div",{className:"relative flex flex-col items-center gap-6 z-10",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-primary to-accent shadow-2xl shadow-primary/30 flex items-center justify-center animate-pulse",children:u.jsx("svg",{className:"w-12 h-12 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),u.jsx("div",{className:"absolute inset-0 animate-spin",style:{animationDuration:"3s"},children:u.jsx("div",{className:"w-full h-full rounded-2xl border-4 border-transparent border-t-primary border-r-accent"})})]}),u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("h2",{className:"text-xl font-semibold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"AuroraLink"}),u.jsx("p",{className:"text-muted-foreground text-sm",children:"Loading your messages..."})]}),u.jsx("div",{className:"flex gap-2",children:[0,1,2].map(ye=>u.jsx("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse",style:{animationDelay:`${ye*.2}s`}},ye))})]})]}):u.jsxs("div",{className:"min-h-screen bg-background text-foreground overflow-x-hidden w-full max-w-full",children:[n==="onboarding"&&u.jsx(y5,{onComplete:ne}),n==="auth"&&u.jsx(RD,{onAuthSuccess:de}),n==="home"&&i&&u.jsx(KD,{currentUser:i,onSelectConversation:We,onNewChat:ot,onSettings:pe,onLogout:ve,theme:h,onToggleTheme:me,onViewStory:Be,onCreateStory:Fe},j),n==="conversation"&&i&&l&&u.jsx(Q6,{conversationId:l,currentUser:i,onBack:He,onInitiateCall:Bt,onViewProfile:Ot}),n==="group-create"&&i&&u.jsx(t$,{currentUser:i,onBack:He,onConversationCreated:le}),n==="settings"&&i&&u.jsx(c$,{currentUser:i,onBack:He,onUserUpdate:Ee,theme:h,onToggleTheme:me}),n==="story-view"&&i&&y.length>0&&u.jsx(d$,{userStoriesList:y,initialUserIndex:_,currentUser:i,onClose:Le,onRefresh:Le}),n==="story-create"&&i&&u.jsx(h$,{currentUser:i,onClose:He,onSuccess:tt}),n==="profile-view"&&i&&T&&u.jsx(x$,{user:T,currentUser:i,onBack:nt,onSendMessage:()=>{M&&s("conversation")},onInitiateCall:ye=>Bt(T,ye),lastSeen:N}),n==="call"&&i&&$&&W&&G.current&&u.jsx(u$,{callType:$.call_type,recipientUser:W,currentUser:i,isInitiator:$.caller_id===i.id,onEndCall:rr,onCallConnected:()=>console.log("[Call] Connected"),onCallFailed:ye=>{console.error("[Call] Failed:",ye),je.error("Call failed",{description:ye}),rr()},peerConnection:G.current.getPeerConnection(),localStream:fe,remoteStream:Q}),X&&X.caller&&u.jsx(w$,{caller:X.caller,callType:X.call_type,onAccept:xr,onReject:_s}),O&&J&&u.jsx(b$,{open:O,callType:J,onGrantPermissions:tr,onCancel:nr}),u.jsx(C2,{})]})}GC.createRoot(document.getElementById("root")).render(u.jsx(S$,{}));
